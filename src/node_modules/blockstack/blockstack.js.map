{"version":3,"sources":["webpack://blockstack/webpack/universalModuleDefinition","webpack://blockstack/webpack/bootstrap","webpack://blockstack/./node_modules/tslib/tslib.es6.js","webpack://blockstack/./src/operations/utils.ts","webpack://blockstack/./node_modules/bitcoinjs-lib/src/index.js","webpack://blockstack/./node_modules/buffer/index.js","webpack://blockstack/./src/errors.ts","webpack://blockstack/./src/fetchUtil.ts","webpack://blockstack/./src/config.ts","webpack://blockstack/./src/utils.ts","webpack://blockstack/./src/logger.ts","webpack://blockstack/./src/keys.ts","webpack://blockstack/./node_modules/bitcoinjs-lib/src/script.js","webpack://blockstack/index.ts","webpack://blockstack/./node_modules/bn.js/lib/bn.js","webpack://blockstack/./src/operations/skeletons.ts","webpack://blockstack/./node_modules/inherits/inherits_browser.js","webpack://blockstack/./src/auth/sessionData.ts","webpack://blockstack/./src/auth/sessionStore.ts","webpack://blockstack/./src/auth/userSession.ts","webpack://blockstack/./node_modules/safe-buffer/index.js","webpack://blockstack/./src/profiles/profileTokens.ts","webpack://blockstack/./src/encryption/sha2Hash.ts","webpack://blockstack/./node_modules/typeforce/index.js","webpack://blockstack/./src/storage/hub.ts","webpack://blockstack/./src/encryption/ec.ts","webpack://blockstack/./src/auth/authApp.ts","webpack://blockstack/./src/auth/protocolLaunch.ts","webpack://blockstack/./src/auth/authConstants.ts","webpack://blockstack/./src/auth/authVerification.ts","webpack://blockstack/./src/dids.ts","webpack://blockstack/./node_modules/elliptic/lib/elliptic/utils.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/networks.js","webpack://blockstack/./node_modules/bip174/src/lib/typeFields.js","webpack://blockstack/./src/auth/authMessages.ts","webpack://blockstack/(webpack)/buildin/global.js","webpack://blockstack/./node_modules/hash.js/lib/hash/utils.js","webpack://blockstack/./src/profiles/profileZoneFiles.ts","webpack://blockstack/./src/encryption/cryptoUtils.ts","webpack://blockstack/./src/encryption/cryptoRandom.ts","webpack://blockstack/./src/storage/index.ts","webpack://blockstack/./node_modules/bitcoinjs-lib/src/types.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/crypto.js","webpack://blockstack/./node_modules/process/browser.js","webpack://blockstack/./src/profiles/profile.ts","webpack://blockstack/./node_modules/schema-inspector/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_duplex.js","webpack://blockstack/./node_modules/tiny-secp256k1/js.js","webpack://blockstack/./node_modules/minimalistic-assert/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/lazy.js","webpack://blockstack/./node_modules/sha.js/index.js","webpack://blockstack/./src/encryption/hashRipemd160.ts","webpack://blockstack/./node_modules/bip39/src/index.js","webpack://blockstack/./node_modules/sha.js/hash.js","webpack://blockstack/./src/auth/authProvider.ts","webpack://blockstack/./src/profiles/services/serviceUtils.ts","webpack://blockstack/./src/encryption/wallet.ts","webpack://blockstack/./src/profiles/profileSchemas/person.ts","webpack://blockstack/./src/profiles/profileSchemas/personUtils.ts","webpack://blockstack/./src/encryption/aesCipher.ts","webpack://blockstack/./node_modules/core-util-is/lib/util.js","webpack://blockstack/./node_modules/bs58check/index.js","webpack://blockstack/./node_modules/hash.js/lib/hash/common.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/bufferutils.js","webpack://blockstack/./src/auth/protocolEchoDetection.ts","webpack://blockstack/./src/encryption/hmacSha256.ts","webpack://blockstack/./node_modules/zone-file/lib/index.js","webpack://blockstack/./node_modules/create-hash/browser.js","webpack://blockstack/./node_modules/process-nextick-args/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/base.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/index.js","webpack://blockstack/./node_modules/randombytes/browser.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/transaction.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/varint.js","webpack://blockstack/errors.ts","webpack://blockstack/./src/auth/appConfig.ts","webpack://blockstack/./src/network.ts","webpack://blockstack/./node_modules/elliptic/lib/elliptic.js","webpack://blockstack/./src/profiles/profileLookup.ts","webpack://blockstack/./src/profiles/profileSchemas/personLegacy.ts","webpack://blockstack/./src/operations/signers.ts","webpack://blockstack/./src/profiles/services/service.ts","webpack://blockstack/./src/profiles/services/index.ts","webpack://blockstack/./src/profiles/services/facebook.ts","webpack://blockstack/./src/profiles/services/github.ts","webpack://blockstack/./src/profiles/services/twitter.ts","webpack://blockstack/./src/profiles/services/instagram.ts","webpack://blockstack/./src/profiles/services/hackerNews.ts","webpack://blockstack/./src/profiles/services/linkedIn.ts","webpack://blockstack/./src/profiles/profileProofs.ts","webpack://blockstack/./node_modules/query-string/index.js","webpack://blockstack/./node_modules/events/events.js","webpack://blockstack/./node_modules/readable-stream/readable-browser.js","webpack://blockstack/./node_modules/readable-stream/node_modules/safe-buffer/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_writable.js","webpack://blockstack/./node_modules/string_decoder/lib/string_decoder.js","webpack://blockstack/./node_modules/ripemd160/index.js","webpack://blockstack/./node_modules/cipher-base/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curves.js","webpack://blockstack/./node_modules/hash.js/lib/hash.js","webpack://blockstack/./node_modules/typeforce/native.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/address.js","webpack://blockstack/./node_modules/bech32/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/ecpair.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/index.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/tools.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/multisig/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkey/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkeyhash/index.js","webpack://blockstack/./node_modules/base64url/index.js","webpack://blockstack/cryptoClients/index.ts","webpack://blockstack/./src/encryption/pbkdf2.ts","webpack://blockstack/./node_modules/isarray/index.js","webpack://blockstack/./node_modules/md5.js/index.js","webpack://blockstack/./node_modules/hash-base/index.js","webpack://blockstack/./node_modules/stream-browserify/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_readable.js","webpack://blockstack/./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack://blockstack/./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://blockstack/./node_modules/timers-browserify/main.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_transform.js","webpack://blockstack/./node_modules/sha.js/sha256.js","webpack://blockstack/./node_modules/sha.js/sha512.js","webpack://blockstack/./node_modules/create-hmac/browser.js","webpack://blockstack/./node_modules/create-hash/md5.js","webpack://blockstack/./node_modules/minimalistic-crypto-utils/lib/utils.js","webpack://blockstack/./node_modules/brorand/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/index.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/common.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/256.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/512.js","webpack://blockstack/./node_modules/typeforce/errors.js","webpack://blockstack/./node_modules/wif/index.js","webpack://blockstack/./node_modules/bip66/index.js","webpack://blockstack/./node_modules/varuint-bitcoin/index.js","webpack://blockstack/./node_modules/bip174/src/lib/parser/index.js","webpack://blockstack/./node_modules/bip174/src/lib/utils.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnessscripthash/output.js","webpack://blockstack/./node_modules/cross-fetch/dist/browser-polyfill.js","webpack://blockstack/cryptoClients/sha256.ts","webpack://blockstack/./node_modules/zone-file/lib/makeZoneFile.js","webpack://blockstack/./node_modules/zone-file/lib/parseZoneFile.js","webpack://blockstack/./src/operations/txbuild.ts","webpack://blockstack/./src/wallet.ts","webpack://blockstack/./node_modules/pbkdf2/lib/precondition.js","webpack://blockstack/./node_modules/pbkdf2/lib/default-encoding.js","webpack://blockstack/./node_modules/pbkdf2/lib/sync-browser.js","webpack://blockstack/./node_modules/bip39/src/_wordlists.js","webpack://blockstack/./node_modules/form-data/lib/browser.js","webpack://blockstack/./node_modules/ripemd160-min/dist-esm/index.js","webpack://blockstack/./node_modules/base64-js/index.js","webpack://blockstack/./node_modules/ieee754/index.js","webpack://blockstack/./node_modules/bip32/src/index.js","webpack://blockstack/./node_modules/bip32/src/bip32.js","webpack://blockstack/./node_modules/bip32/src/crypto.js","webpack://blockstack/./node_modules/readable-stream/lib/internal/streams/BufferList.js","webpack://blockstack/./node_modules/setimmediate/setImmediate.js","webpack://blockstack/./node_modules/util-deprecate/browser.js","webpack://blockstack/./node_modules/string_decoder/node_modules/safe-buffer/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_passthrough.js","webpack://blockstack/./node_modules/readable-stream/writable-browser.js","webpack://blockstack/./node_modules/readable-stream/duplex-browser.js","webpack://blockstack/./node_modules/readable-stream/transform.js","webpack://blockstack/./node_modules/readable-stream/passthrough.js","webpack://blockstack/./node_modules/sha.js/sha.js","webpack://blockstack/./node_modules/sha.js/sha1.js","webpack://blockstack/./node_modules/sha.js/sha224.js","webpack://blockstack/./node_modules/sha.js/sha384.js","webpack://blockstack/./node_modules/create-hmac/legacy.js","webpack://blockstack/./node_modules/bs58check/base.js","webpack://blockstack/./node_modules/bs58/index.js","webpack://blockstack/./node_modules/base-x/src/index.js","webpack://blockstack/(webpack)/buildin/module.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/short.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/mont.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/edwards.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/1.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/224.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/384.js","webpack://blockstack/./node_modules/hash.js/lib/hash/ripemd.js","webpack://blockstack/./node_modules/hash.js/lib/hash/hmac.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/ec/index.js","webpack://blockstack/./node_modules/hmac-drbg/lib/hmac-drbg.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/ec/key.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/ec/signature.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/eddsa/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/eddsa/key.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/eddsa/signature.js","webpack://blockstack/./node_modules/tiny-secp256k1/rfc6979.js","webpack://blockstack/./node_modules/typeforce/extra.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/embed.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/script_number.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/script_signature.js","webpack://blockstack/./node_modules/pushdata-bitcoin/index.js","webpack://blockstack/./node_modules/bitcoin-ops/map.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2ms.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2pk.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2pkh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2sh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2wpkh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2wsh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/block.js","webpack://blockstack/./node_modules/merkle-lib/fastRoot.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/psbt.js","webpack://blockstack/./node_modules/bip174/src/lib/psbt.js","webpack://blockstack/./node_modules/bip174/src/lib/combiner/index.js","webpack://blockstack/./node_modules/bip174/src/lib/parser/fromBuffer.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/global/globalXpub.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/global/unsignedTx.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/finalScriptSig.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/finalScriptWitness.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/partialSig.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/porCommitment.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/sighashType.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/witnessUtxo.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/bip32Derivation.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/checkPubkey.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/redeemScript.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/witnessScript.js","webpack://blockstack/./node_modules/bip174/src/lib/parser/toBuffer.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/transaction_builder.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/classify.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/multisig/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/multisig/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/nulldata.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkey/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkey/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkeyhash/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkeyhash/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/scripthash/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/scripthash/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/scripthash/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesscommitment/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesscommitment/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnessscripthash/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnessscripthash/input.js","webpack://blockstack/signer.ts","webpack://blockstack/./node_modules/base64url/dist/base64url.js","webpack://blockstack/./node_modules/base64url/dist/pad-string.js","webpack://blockstack/cryptoClients/secp256k1.ts","webpack://blockstack/./node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js","webpack://blockstack/./node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js","webpack://blockstack/verifier.ts","webpack://blockstack/decode.ts","webpack://blockstack/./node_modules/strict-uri-encode/index.js","webpack://blockstack/./node_modules/decode-uri-component/index.js","webpack://blockstack/./node_modules/split-on-first/index.js","webpack://blockstack/./node_modules/zone-file/lib/zoneFileTemplate.js","webpack://blockstack/./node_modules/zone-file/lib/zoneFile.js","webpack://blockstack/./node_modules/schema-inspector/lib/schema-inspector.js","webpack://blockstack/./node_modules/async/lib/async.js","webpack://blockstack/./node_modules/pbkdf2/browser.js","webpack://blockstack/./node_modules/pbkdf2/lib/async.js","webpack://blockstack/./src/auth/authSession.ts","webpack://blockstack/./src/profiles/profileSchemas/organization.ts","webpack://blockstack/./src/profiles/profileSchemas/creativework.ts","webpack://blockstack/./src/profiles/profileSchemas/personZoneFiles.ts","webpack://blockstack/./src/operations/safety.ts","webpack://blockstack/./src/public.ts","webpack://blockstack/./src/index.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","DUST_MINIMUM","hash160","buff","sha256","hash128","slice","TX_EMPTY_SIZE","TX_INPUT_BASE","TX_INPUT_PUBKEYHASH","TX_OUTPUT_BASE","TX_OUTPUT_PUBKEYHASH","transactionBytes","inputs","outputs","reduce","a","x","input","script","length","inputBytes","output","outputBytes","getTransactionInsideBuilder","txBuilder","__TX","getTransaction","txIn","estimateTXBytes","additionalInputs","additionalOutputs","innerTx","dummyInputs","Array","fill","dummyOutputs","concat","ins","outs","sumOutputValues","agg","decodeB40","base","split","reverse","map","character","exponent","indexOf","mul","pow","cur","add","toString","addUTXOsToFund","txBuilderIn","utxos","amountToFund","feeRate","fundNewFees","newFees","utxoThreshhold","goodUtxos","filter","utxo","sort","b","selected","change","addInput","tx_hash","tx_output_n","largest","remainToFund","signInputs","txB","defaultSigner","otherSigners","txInner","signerArray","forEach","signerPair","index","signer","signingPromise","signTransaction","bip32","require","address","crypto","ECPair","networks","payments","block_1","Block","psbt_1","Psbt","script_1","opcodes","OPS","transaction_1","Transaction","transaction_builder_1","TransactionBuilder","base64","ieee754","isArray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","Error","allocUnsafe","from","TypeError","ArrayBuffer","array","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","obj","isBuffer","len","checked","copy","buffer","val","type","data","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","push","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","compare","y","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","match","join","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","src","dst","ERROR_CODES","MISSING_PARAMETER","REMOTE_SERVICE_ERROR","INVALID_STATE","NO_SESSION_DATA","DOES_NOT_EXIST","FAILED_DECRYPTION_ERROR","INVALID_DID_ERROR","NOT_ENOUGH_FUNDS_ERROR","INVALID_AMOUNT_ERROR","LOGIN_FAILED_ERROR","SIGNATURE_VERIFICATION_ERROR","CONFLICT_ERROR","NOT_ENOUGH_PROOF_ERROR","BAD_PATH_ERROR","VALIDATION_ERROR","PAYLOAD_TOO_LARGE_ERROR","PRECONDITION_FAILED_ERROR","UNKNOWN","freeze","BlockstackError","error","super","message","bugDetails","stack","parameter","InvalidParameterError","MissingParameterError","RemoteServiceError","response","InvalidDIDError","NotEnoughFundsError","leftToFund","InvalidAmountError","fees","specifiedAmount","LoginFailedError","reason","SignatureVerificationError","FailedDecryptionError","InvalidStateError","NoSessionDataError","GaiaHubError","hubError","statusCode","status","statusText","body","assign","DoesNotExist","ConflictError","NotEnoughProofError","BadPathError","ValidationError","PayloadTooLargeError","maxUploadByteSize","PreconditionFailedError","fetchPrivate","init","fetchOpts","referrer","referrerPolicy","fetch","config","network","defaults","MAINNET_DEFAULT","logLevel","BLOCKSTACK_HANDLER","nextYear","Date","setFullYear","getFullYear","nextMonth","setMonth","getMonth","nextHour","setHours","getHours","megabytesToBytes","megabytes","getAesCbcOutputLength","inputByteLength","getBase64OutputLength","ceil","updateQueryStringParameter","uri","re","RegExp","separator","isLaterVersion","v1","v2","v1tuple","v2tuple","makeUUID4","getTime","performance","now","random","isSameOriginAbsoluteUrl","uri1","uri2","parseUrl","URL","url","nodeUrl","console","log","parsedUri1","parsedUri2","port1","port","protocol","port2","scheme","hostname","absolute","getGlobalScope","self","window","getAPIUsageErrorMessage","scopeObject","apiName","usageDesc","getGlobalObject","throwIfUnavailable","returnEmptyObject","globalScope","errMsg","getGlobalObjects","names","getBlockstackErrorFromResponse","errorMsg","hubConfig","ok","gaiaResponse","responseJson","responseMsg","text","JSON","parse","debug","getGaiaErrorResponse","maxBytes","max_file_upload_size_megabytes","levels","levelToInt","intToLevel","level","Logger","shouldLog","logMessage","warn","toUpperCase","getEntropy","makeECPrivateKey","makeRandom","rng","privateKey","publicKeyToAddress","publicKey","publicKeyBuffer","publicKeyHash160","toBase58Check","bitcoin","pubKeyHash","getPublicKeyFromPrivate","privateKeyBuffer","fromPrivateKey","hexStringToECPair","skHex","ecPairOptions","layer1","compressed","ecPairToHexString","secretKey","ecPointHex","ecPairToAddress","keyPair","scriptNumber","scriptSignature","types","bip66","ecc","pushdata","typeforce","REVERSE_OPS","OP_INT_BASE","OP_RESERVED","isPushOnlyChunk","OP_0","OP_1","OP_16","OP_1NEGATE","isOPInt","isPushOnly","every","asMinimalOP","chunksIsBuffer","singleChunkIsBuffer","compile","chunks","bufferSize","accum","chunk","encodingLength","opcode","encode","decompile","OP_PUSHDATA4","decode","number","op","isDefinedHashType","hashType","hashTypeMod","toASM","fromASM","asm","chunkStr","Hex","toStack","isCanonicalPubKey","isPoint","isCanonicalScriptSignature","check","signature","assert","msg","inherits","ctor","superCtor","super_","TempCtor","constructor","BN","endian","isBN","negative","words","red","_init","wordSize","parseHex","parseBase","num","left","right","cmp","_initNumber","_initArray","_parseHex","_parseBase","strip","toArray","w","off","limbLen","limbPow","total","mod","word","imuln","_iaddn","dest","clone","_expand","_normSign","zeros","groupSizes","groupBases","smallMulTo","carry","k","ncarry","rword","maxJ","padding","groupSize","groupBase","isZero","modn","idivn","toNumber","toBuffer","toArrayLike","ArrayType","reqLength","q","andln","iushrn","clz32","_countBits","_zeroBits","bitLength","zeroBits","toTwos","width","abs","inotn","iaddn","fromTwos","testn","notn","ineg","isNeg","neg","iuor","ior","or","uor","iuand","iand","and","uand","iuxor","ixor","xor","uxor","bytesNeeded","bitsLeft","setn","bit","wbit","iadd","isub","comb10MulTo","mid","a0","al0","ah0","a1","al1","ah1","a2","al2","ah2","a3","al3","ah3","a4","al4","ah4","a5","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","b1","bl1","bh1","b2","bl2","bh2","b3","bl3","bh3","b4","bl4","bh4","b5","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","imul","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","jumboMulTo","FFTM","mulp","mulTo","hncarry","bigMulTo","makeRBT","N","revBin","rb","permute","rbt","rws","iws","rtws","itws","transform","rtwdf","cos","PI","itwdf","sin","rtwdf_","itwdf_","ie","ro","io","rx","guessLen13b","odd","conjugate","normalize13b","ws","round","convert13b","stub","ph","_","rwst","iwst","nrws","nrwst","niwst","rmws","mulf","muln","sqr","isqr","toBitArray","iushln","bits","carryMask","newCarry","ishln","hint","extended","h","mask","maskedWords","ishrn","shln","ushln","shrn","ushrn","imaskn","maskn","isubn","addn","subn","iabs","_ishlnsubmul","shift","_wordDiv","bhi","diff","qj","div","divmod","positive","divn","umod","divRound","dm","half","r2","acc","egcd","A","B","C","D","g","isEven","yp","xp","im","isOdd","jm","gcd","_invmp","x1","x2","delta","cmpn","invm","bincn","ucmp","gtn","gt","gten","gte","ltn","lt","lten","lte","eqn","eq","Red","toRed","ctx","convertTo","_forceRed","fromRed","convertFrom","forceRed","redAdd","redIAdd","redSub","redISub","redShl","shl","redMul","_verify2","redIMul","redSqr","_verify1","redISqr","redSqrt","sqrt","redInvm","redNeg","redPow","primes","k256","p224","p192","p25519","MPrime","tmp","_tmp","K256","P224","P192","P25519","prime","_prime","Mont","imod","rinv","minv","ireduce","rlen","imulK","outLen","prev","mod3","one","nOne","lpow","z","inv","wnd","current","currentLen","mont","u","BlockstackNamespace","namespaceID","version","lifetime","coeff","buckets","nonalphaDiscount","noVowelDiscount","setVersion","setLifetime","setCoeff","setBase","setBuckets","setNonalphaDiscount","setNoVowelDiscount","asAmountV2","amount","makeTXbuilder","txb","opEncode","MAGIC_BYTES","makePreorderSkeleton","fullyQualifiedName","consensusHash","preorderAddress","burnAddress","burn","registerAddress","burnAmount","dataBuffers","toOutputScript","registerBuff","dataBuff","hashed","opReturnBufferLen","opReturnBuffer","burnHex","paddedBurnHex","nullOutput","embed","tx","addOutput","btcBurnAmount","buildIncomplete","makeRegisterSkeleton","ownerAddress","valueHash","burnTokenAmountHex","payload","payloadLen","makeRenewalSkeleton","nextOwnerAddress","lastOwnerAddress","burnTokenAmount","burnBTCAmount","burnTokenHex","registerTX","fromTransaction","makeTransferSkeleton","newOwner","keepZonefile","opRet","keepChar","opRetPayload","makeUpdateSkeleton","nameBuff","consensusBuff","hashedName","makeRevokeSkeleton","makeNamespacePreorderSkeleton","getDefaultBurnAddress","makeNamespaceRevealSkeleton","namespace","revealAddress","hexPayload","toHexPayload","makeNamespaceReadySkeleton","makeNameImportSkeleton","recipientAddr","zonefileHash","zonefileHashB58","makeAnnounceSkeleton","messageHash","makeTokenTransferSkeleton","recipientAddress","tokenType","tokenAmount","scratchArea","tokenTypeHexPadded","tokenValueHex","tokenValueHexPadded","writable","SESSION_VERSION","options","userData","transitKey","gaiaHubConfig","json","coreNode","stringify","sessionOptions","newSessionData","setSessionData","session","sessionData","storeOptions","localStorageKey","localStorage","getItem","dataJSON","fromJSON","setItem","removeItem","runningInBrowser","appConfig","sessionStore","store","redirectURI","manifestURI","scopes","generateAndStoreTransitKey","authRequest","makeAuthRequest","authenticatorURL","authApp","blockstackIDHost","appDomain","expiresAt","extraParams","authMessages","getSessionData","authResponseToken","getAuthResponseToken","redirectURL","content","storage","path","callback","setLocalGaiaHubConnection","loadUserData","hubUrl","gaiaConfig","appPrivateKey","gaiaAssociationToken","copyProps","SafeBuffer","signProfileToken","profile","subject","issuer","signingAlgorithm","issuedAt","derivePublicKey","tokenSigner","jti","iat","toISOString","exp","claim","sign","wrapProfileToken","token","decodedToken","verifyProfileToken","publicKeyOrAddress","issuerPublicKey","compressedKeyPair","fromPublicKey","compressedAddress","uncompressedKeyPair","uncompressedAddress","tokenVerifier","header","alg","verify","extractProfile","NodeCryptoSha2Hash","createHash","algorithm","update","digest","hashSha256Sync","hashSha512Sync","WebCryptoSha2Hash","subtleCrypto","algo","hash","createSha2Hash","cryptoLib","lib","ERRORS","NATIVE","tfJSON","TfTypeError","TfPropertyTypeError","tfSubError","getValueTypeName","TYPES","arrayOf","_arrayOf","strict","Nil","minLength","maxLength","maybe","_maybe","propertyType","propertyKeyType","_map","propertyName","propertyValue","uncompiled","typePropertyName","_object","anyOf","_anyOf","some","allOf","_allOf","quacksLike","_quacksLike","tuple","_tuple","values","expected","_value","Function","surrogate","typeName","oneOf","EXTRA","BLOCKSTACK_GAIA_HUB_LABEL","uploadToGaiaHub","filename","contents","contentType","newFile","etag","server","headers","Authorization","method","responseText","deleteFromGaiaHub","getFullReadUrl","url_prefix","makeV1GaiaAuthToken","hubInfo","signerKeyHex","associationToken","challengeText","challenge_text","handlesV1Auth","latest_auth_version","iss","parsedChallenge","err","signatureBuffer","SIGHASH_NONE","publickey","makeLegacyAuthToken","gaiaChallenge","salt","connectToGaiaHub","gaiaHubUrl","challengeSignerHex","readURL","read_url_prefix","getBucketUrl","challengeSigner","ecurve","hmacSha256","sharedSecretToKeys","sharedSecret","hashedSecret","encryptionKey","hmacKey","getBufferFromBN","bnInput","eciesGetJsonStringLength","opts","payloadShell","payloadValuesLength","shell","iv","ephemeralPK","mac","cipherText","wasString","cipherTextEncoding","ivLength","getCipherObjectWrapper","cipherTextLength","contentLength","encodedCipherTextLength","signedPayloadShell","signedPayloadValuesLength","signatureLength","getSignedCipherObjectWrapper","encryptECIES","ecPK","keyFromPublic","getPublic","ephemeralSK","genKeyPair","encodeCompressed","sharedKeys","derive","initializationVector","plaintext","cipher","encrypt","aes256CbcEncrypt","macData","cipherTextString","decryptECIES","cipherObject","ecSK","keyFromPrivate","ivBuffer","cipherTextBuffer","actualMac","equalConstTime","plainText","ciphertext","decrypt","aes256CbcDecrypt","signECDSA","contentBuffer","ecPrivate","contentHash","toDER","verifyECDSA","getBuffer","ecPublic","DEFAULT_PROFILE","isUserSignedIn","redirectToSignIn","redirectToSignInWithAuthRequest","isSignInPending","info","search","queryDict","authResponse","signUserOut","caller","deleteSessionData","href","httpsURI","navigator","location","test","userAgent","successCallback","failCallback","echoReplyID","echoReplyKey","document","setTimeout","clearTimeout","addEventListener","removeEventListener","cleanUpLocalStorage","storageKey","startsWith","storageValue","redirectToWebAuthTimer","cancelWebAuthRedirectTimer","startWebAuthRedirectTimer","timeout","nextFunc","inputPromptTracker","createElement","style","cssText","inputBlurredFunc","isRefocused","once","capture","appendChild","focus","pageVisibilityChanged","hidden","replyEventListener","event","locationSrc","iframe","launchCustomProtocol","handlePendingSignIn","nameLookupURL","_resolve","blockstackAPIUrl","tokenPayload","private_key","coreSessionToken","core_token","ecPairError","username","email","decentralizedID","identityAddress","profileURL","profile_url","wrappedProfile","DEFAULT_BLOCKSTACK_HOST","DEFAULT_SCOPE","BLOCKSTACK_DEFAULT_GAIA_HUB_URL","NAME_LOOKUP_PATH","LOCALSTORAGE_SESSION_KEY","doSignaturesMatchPublicKeys","publicKeys","public_keys","doPublicKeysMatchIssuer","addressFromIssuer","doPublicKeysMatchUsername","responseJSON","isIssuanceDateValid","isExpirationDateValid","isManifestUriValid","domain_name","manifest_uri","isRedirectUriValid","redirect_uri","verifyAuthRequest","all","verifyAuthRequestAndLoadManifest","verifyAuthResponse","makeDIDFromAddress","makeDIDFromPublicKey","getDIDType","didParts","getAddressFromDID","utils","minAssert","minUtils","zero2","getNAF","naf","getJSF","k1","k2","jsf","d1","d2","u1","u2","m8","m14","m24","cachedProperty","computer","parseBytes","intFromLE","messagePrefix","bech32","public","private","scriptHash","wif","regtest","testnet","GlobalTypes","GLOBAL_TYPE_NAMES","InputTypes","INPUT_TYPE_NAMES","OutputTypes","OUTPUT_TYPE_NAMES","VERSION","generateTransitKey","transitPrivateKey","getWindowOrigin","paramName","origin","do_not_include_profile","supports_hub_url","encryptPrivateKey","encryptedObj","encryptedJSON","decryptPrivateKey","hexedEncrypted","unhexedString","decrypted","makeAuthResponse","metadata","coreToken","transitPublicKey","privateKeyPayload","coreTokenPayload","additionalProperties","profileUrl","isSurrogatePair","htonl","zero8","enc","toHex32","join32","split32","rotr32","rotl32","sum32","sum32_3","sum32_4","sum32_5","sum64","ah","al","bh","sum64_hi","bl","sum64_lo","sum64_4_hi","ch","cl","dh","dl","sum64_4_lo","sum64_5_hi","eh","el","sum64_5_lo","rotr64_hi","rotr64_lo","shr64_hi","shr64_lo","makeProfileZoneFile","tokenFileUrl","urlScheme","urlParts","zoneFile","$origin","$ttl","priority","weight","getTokenFileUrl","zoneFileJson","firstUriRecord","resolveZoneFileToProfile","keys","tokenRecords","catch","fromLegacyFormat","isNodeCryptoAvailable","withFeature","cryptoModule","NO_CRYPTO_LIB","getCryptoLib","subtle","etags","SIGNATURE_FILE_SUFFIX","getUserAppFileUrl","appOrigin","zoneFileLookupURL","bucketUrl","apps","encryptContent","cipherPayload","signatureObject","signedCipherObject","decryptContent","SyntaxError","getGaiaAddress","app","normalizeOptions","fileUrl","getOrSetLocalGaiaHubConnection","matches","configuredCoreNode","getFileUrl","readUrl","getFileContents","forceText","arrayBuffer","getFile","opt","sigPath","fileContents","signatureContents","gaiaAddress","sigObject","signerAddress","getFileSignedUnencrypted","storedContents","decryptOpt","decryptionKey","appPublicKey","signerPublicKey","handleSignedEncryptedContents","FileContentLoader","normalizeContentDataType","detectContentType","contentByteLength","detectContentLength","charset","TextEncoder","encodedString","Blob","isInteger","supportedTypesMsg","reader","FileReader","readPromise","onerror","onload","readAsArrayBuffer","loadContentError","loadedData","loadContent","putFile","maxUploadBytes","hasMaxUpload","contentLoader","sizeErrMsg","sizeErr","encryptedSize","uploadFn","contentData","load","signatureContent","writeResponse","publicURL","contentForUpload","isRecoverableGaiaError","freshHubConfig","deleteFile","wasSigned","getAppBucketUrl","listFiles","listFilesLoop","page","callCount","fileCount","pageRequest","fetchOptions","entries","nextPage","entriesLength","UINT31_MAX","BIP32Path","UInt31","UInt32","Signer","getPublicKey","SATOSHI_MAX","Satoshi","UInt53","ECPoint","Network","UInt8","Buffer256bit","BufferN","Hash160bit","Hash256bit","Boolean","Null","ripemd160","sha1","hash256","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","args","title","browser","env","argv","versions","on","addListener","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","schemaDefinition","properties","optional","Profile","_profile","domainName","tokenFileURL","cheerio","pna","objectKeys","Duplex","util","Readable","Writable","v","readable","allowHalfOpen","onend","_writableState","ended","onEndNT","highWaterMark","_readableState","destroyed","_destroy","cb","secp256k1","EC","ec","deterministicGenerateK","ZERO32","EC_GROUP_ORDER","EC_P","curve","nDiv2","G","THROW_BAD_PRIVATE","THROW_BAD_POINT","THROW_BAD_TWEAK","THROW_BAD_HASH","THROW_BAD_SIGNATURE","THROW_BAD_EXTRA_DATA","isScalar","isOrderScalar","decodeFrom","__isPointCompressed","isPrivate","assumeCompression","pubkey","fromBuffer","decodePoint","getEncoded","_encode","__sign","addData","kI","Q","isInfinity","isPointCompressed","pointAdd","pA","pB","__compressed","pp","pointAddScalar","tweak","tt","qq","uu","pointCompress","pointFromScalar","dd","pointMultiply","privateAdd","dt","privateSub","signWithEntropy","isSignature","sInv","R","mulAdd","equal","prop","f","Algorithm","sha","sha224","sha384","sha512","Ripemd160PolyfillDigest","instance","NodeCryptoRipemd160Digest","nodeCryptoCreateHash","_err","hashRipemd160","nodeCrypto","createHashRipemd160","pbkdf2_1","randomBytes","_wordlists_1","DEFAULT_WORDLIST","_default","INVALID_MNEMONIC","INVALID_ENTROPY","INVALID_CHECKSUM","WORDLIST_REQUIRED","lpad","padString","binaryToByte","bin","bytesToBinary","deriveChecksumBits","entropyBuffer","CS","password","mnemonicToEntropy","mnemonic","wordlist","normalize","dividerIndex","entropyBits","checksumBits","entropyBytes","entropy","entropyToMnemonic","binary","mnemonicToSeedSync","mnemonicBuffer","saltBuffer","pbkdf2Sync","mnemonicToSeed","pbkdf2","generateMnemonic","strength","validateMnemonic","setDefaultWordlist","language","wordlists","getDefaultWordlist","lang","_wordlists_2","Hash","blockSize","finalSize","_block","_finalSize","_blockSize","_len","block","assigned","remainder","_update","rem","lowBits","highBits","_hash","getAuthRequestFromURL","fetchAppManifest","redirectUserToApp","containsValidProofStatement","searchText","endsWith","verificationStyles","verificationStyle","containsValidAddressProofStatement","proofStatement","encryptMnemonic","phrase","mnemonicEntropy","plaintextNormalized","getRandomBytes","keysAndIV","encKey","macKey","hmacPayload","hmacDigest","PasswordError","decryptMnemonic","triplesecDecrypt","dataBuffer","hmacSig","decipher","decryptedResult","sha2Hash","hmacSigHash","hmacDigestHash","decryptMnemonicBuffer","plaintextBuffer","decryptLegacy","givenName","familyName","description","image","items","contentUrl","website","account","service","identifier","proofType","proofUrl","proofMessage","proofSignature","worksFor","knows","streetAddress","addressLocality","postalCode","addressCountry","birthDate","taxID","legacyProfile","avatarUrl","verifiedAccounts","connections","organizations","getName","getGivenName","pop","getFamilyName","getDescription","avatarContentUrl","getAvatarUrl","verifications","filteredAccounts","accountIsValid","verification","proof_url","valid","getVerifiedAccounts","addressString","addressParts","getAddress","monthNames","birthDateString","date","getDate","getBirthDate","getConnections","NodeCryptoAesCipher","createCipher","createDecipher","final","WebCryptoAesCipher","cryptoKey","importKey","createCipheriv","createDecipheriv","objectToString","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","isObject","isDate","isError","isFunction","isPrimitive","bs58checkBase","BlockHash","pending","pendingTotal","outSize","hmacStrength","padLength","_delta8","_delta32","_pad","_digest","verifuint","readUInt64LE","writeUInt64LE","reverseBuffer","GLOBAL_DETECTION_CACHE_KEY","ECHO_REPLY_PARAM","AUTH_CONTINUATION_PARAM","protocolEchoReplyDetection","existingDetection","searchParams","query","params","param","decodeURIComponent","echoReplyParam","authContinuationParam","NodeCryptoHmacSha256","createHmac","WebCryptoHmacSha256","sig","createHmacSha256","_makeZoneFile","makeZoneFile","_parseZoneFile","parseZoneFile","_zoneFile","ZoneFile","MD5","RIPEMD160","Base","_final","fn","arg1","arg2","arg3","BaseCurve","conf","zero","two","pointFromJSON","gRed","_wnafT1","_wnafT2","_wnafT3","_wnafT4","adjustCount","redN","_maxwellTrick","BasePoint","precomputed","point","validate","_fixedNafMul","doubles","_getDoubles","I","repr","nafW","jpoint","mixedAdd","points","toP","_wnafMul","nafPoints","_getNAFPoints","dblp","_wnafMulAdd","defW","coeffs","jacobianResult","wndWidth","comb","toJ","ja","jb","pointFromX","compact","getX","getY","precompute","power","beta","_getBeta","_hasDoubles","dbl","embed_1","p2data","p2ms_1","p2ms","p2pk_1","p2pk","p2pkh_1","p2pkh","p2sh_1","p2sh","p2wpkh_1","p2wpkh","p2wsh_1","p2wsh","MAX_BYTES","MAX_UINT32","msCrypto","getRandomValues","generated","bufferutils","bufferutils_1","bcrypto","bscript","varuint","varSliceSize","someScript","EMPTY_SCRIPT","EMPTY_WITNESS","ZERO","ONE","VALUE_UINT64_MAX","BLANK_OUTPUT","valueBuffer","locktime","_NO_STRICT","readSlice","readUInt32","readUInt64","readVarInt","vi","readVarSlice","readVector","count","vector","readInt32","flag","hasWitnesses","ADVANCED_TRANSACTION_MARKER","ADVANCED_TRANSACTION_FLAG","vinLen","sequence","witness","voutLen","hex","isCoinbase","isCoinbaseHash","scriptSig","DEFAULT_SEQUENCE","scriptPubKey","__byteLength","virtualSize","newTx","txOut","hashForSignature","inIndex","prevOutScript","ourScript","OP_CODESEPARATOR","txTmp","SIGHASH_SINGLE","SIGHASH_ANYONECANPAY","__toBuffer","hashForWitnessV0","tbuffer","toffset","writeSlice","writeUInt32","writeUInt64","writeVarSlice","hashOutputs","hashPrevouts","hashSequence","txOutsSize","sum","getHash","forWitness","getId","initialOffset","setInputScript","setWitness","_ALLOW_WITNESS","someVector","vectorSize","writeVarInt","isOutput","writeVector","SIGHASH_ALL","MAX_SAFE_INTEGER","checkUInt53","_number","first","AppConfig","redirectPath","manifestPath","SATOSHIS_PER_BTC","TX_BROADCAST_SERVICE_ZONE_FILE_ENDPOINT","TX_BROADCAST_SERVICE_REGISTRATION_ENDPOINT","TX_BROADCAST_SERVICE_TX_ENDPOINT","BitcoinNetwork","transaction","txid","BlockstackNetwork","apiUrl","broadcastServiceUrl","bitcoinAPI","btc","includeUtxoMap","excludeUtxoSet","fromBase58Check","scriptHashes","pubKeyHashes","coercedVersion","coerceAddress","resp","name_price","namePrice","satoshis","namespacePrice","dustMin","getNamePriceV2","getNamePriceV1","getNamespacePriceV2","getNamespacePriceV1","_fullyQualifiedName","networkAddress","getBlockHeight","blockHeight","namespaceInfo","reveal_block","nameInfo","recipient_address","accountStatus","debit_value","credit_value","historyList","histEntry","tokenList","tokenBalance","balance","endpoint","Accept","transactionToWatch","confirmations","broadcastTransaction","requestBody","broadcastServiceFetchHelper","zonefile","respObj","servers","preorderTransaction","registerTransaction","rates","fastestFee","getNetworkedUTXOs","networkedUTXOs","returnSet","excludeSet","inSet","utxoToCheck","txHex","fromHex","utxoUsed","reverseHash","txHash","utxoCreated","txOutputN","isNullData","fromOutputScript","includeSet","consensus_hash","getTransactionInfo","LocalRegtest","BitcoindAPI","bitcoindUrl","bitcoindCredentials","importedBefore","jsonRPC","jsonrpc","authString","txInfo","blockhash","jsonRPCBlock","block_height","height","jsonRPCImport","jsonRPCUnspent","vout","BlockchainInfoApi","blockchainInfoUrl","utxoProviderUrl","blockObj","unspent_outputs","utxoJSON","utxoList","tx_hash_big_endian","form","append","respText","LOCAL_REGTEST","InsightClient","insightUrl","jsonData","rawtx","blocks","transactionInfo","blockHash","blockInfo","elliptic","rand","curves","eddsa","lookupProfile","lookupPromise","getNameInfo","formatAccount","serviceName","proof","getPersonFromLegacyFormat","profileData","formatted","bio","images","avatar","cover","accounts","role","twitter","facebook","github","auth","publicKeychain","pgp","fingerprint","PubkeyHashSigner","ecPair","keyHex","inputIndex","getProofUrl","shouldValidateIdentityInBody","getProofIdentity","proofText","getProofStatement","_cheerio","profileServices","normalizeUrl","prefixScheme","tokens","postId","statement","$","attr","_proof","baseUrls","getBaseUrls","requiredPrefix","raw","instagram","normalizedProofUrl","hackerNews","tables","children","find","each","tableIndex","table","rows","idx","row","last","linkedIn","profileLink","postContent","validateProofs","proofsToValidate","validateProof","strictUriEncode","decodeComponent","splitOnFirst","encodeURIComponent","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","parseBooleans","formatter","arrayFormat","accumulator","exec","newValue","parserForArrayFormat","keysSorter","skipNull","encoderForArrayFormat","objectCopy","ReflectOwnKeys","Reflect","ReflectApply","receiver","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","EventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","_addListener","listener","prepend","events","existing","warning","newListener","unshift","warned","emitter","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","handler","position","originalListener","spliceOne","rawListeners","eventNames","Stream","Transform","PassThrough","CorkedRequest","_this","entry","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","setImmediate","WritableState","internalUtil","deprecate","OurUint8Array","realHasInstance","destroyImpl","nop","stream","isDuplex","objectMode","writableObjectMode","hwm","writableHwm","writableHighWaterMark","defaultHwm","finalCalled","needDrain","ending","finished","noDecode","decodeStrings","defaultEncoding","writing","corked","sync","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","destroy","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","hasInstance","pipe","_uint8ArrayToBuffer","writeAfterEnd","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","_undestroy","undestroy","StringDecoder","nb","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","utf8CheckIncomplete","HashBase","ARRAY16","zl","zr","sl","sr","hl","hr","_a","_b","_c","_d","_e","rotl","fn1","fn2","fn3","fn4","fn5","ar","br","cr","dr","tl","tr","_blockOffset","_length","CipherBase","hashMode","_finalOrDigest","__final","_decoder","_encoding","inputEnc","outputEnc","outData","_toString","setAutoPadding","getAuthTag","setAuthTag","setAAD","_transform","_flush","fin","pre","PresetCurve","short","edwards","defineCurve","lambda","basis","common","ripemd","hmac","bs58check","fromBech32","fromWords","prefix","toBech32","toWords","decodeBase58","decodeBech32","ALPHABET","ALPHABET_MAP","charAt","polymodStep","prefixChk","chk","convert","inBits","outBits","pad","maxV","LIMIT","lowered","uppered","wordChars","NETWORKS","isOptions","__D","__Q","lowR","toWIF","extraData","counter","fromWIF","wifString","decoded","typeFields_1","globalXpub","unsignedTx","finalScriptSig","finalScriptWitness","nonWitnessUtxo","partialSig","porCommitment","sighashType","witnessUtxo","bip32Derivation","checkPubkey","redeemScript","witnessScript","globals","makeChecker","makeConverter","BIP32_DERIVATION","REDEEM_SCRIPT","WITNESS_SCRIPT","PARTIAL_SIG","keyValToBuffer","keyVal","keyLen","valLen","keyVarIntLen","valVarIntLen","range","keyValsToBuffer","keyVals","buffers","default","NodeCryptoPbkdf2","nodePbkdf2","iterations","keyLength","WebCryptoPbkdf2","passwordBytes","deriveBits","WebCryptoPartialPbkdf2","algoOpts","DK","saltLength","block1","destPos","hLen","T","U","createPbkdf2","fnF","fnG","fnH","fnI","M","_finalized","throwIfNotStringOrBuffer","EE","source","ondata","pause","ondrain","resume","_isStdio","onclose","didOnEnd","cleanup","ReadableState","EElistenerCount","debugUtil","debuglog","BufferList","kProxyEvents","readableObjectMode","readableHwm","readableHighWaterMark","pipes","pipesCount","flowing","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","awaitDrain","readingMore","decoder","_read","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","addChunk","maybeReadMore","needMoreData","isPaused","setEncoding","MAX_HWM","howMuchToRead","head","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","clear","hasStrings","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nOrig","doRead","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onfinish","cleanedUp","pipeOnDrain","increasedAwaitDrain","dests","splice","ev","wrap","paused","_fromList","emitErrorNT","readableDestroyed","writableDestroyed","scope","Timeout","id","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","flush","_this2","err2","K","W","Sha256","_w","maj","sigma0","sigma1","gamma0","_f","_g","_h","T1","T2","H","Sha512","Ch","xl","Gamma0","Gamma0l","Gamma1","Gamma1l","getCarry","_ah","_bh","_ch","_dh","_eh","_fh","_gh","_hh","_al","_bl","_cl","_dl","_el","_fl","_gl","_hl","fh","gh","hh","fl","gl","xh","gamma0l","gamma1","gamma1l","Wi7h","Wi7l","Wi16h","Wi16l","Wil","Wih","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Kih","Kil","chh","chl","t1l","t1h","t2l","t2h","writeInt64BE","Legacy","md5","ZEROS","Hmac","blocksize","_alg","_key","ipad","_ipad","opad","_opad","Rand","generate","_rand","getBytes","getByte","ch32","maj32","p32","ft_1","s0_256","s1_256","g0_256","g1_256","shaCommon","sha256_K","SHA256","sha512_K","SHA512","ch64_hi","yh","yl","zh","ch64_lo","maj64_hi","maj64_lo","s0_512_hi","s0_512_lo","s1_512_hi","s1_512_lo","g0_512_hi","g0_512_lo","g1_512_hi","g1_512_lo","_prepareBlock","c0_hi","c0_lo","c1_hi","c1_lo","c2_hi","c2_lo","c3_hi","c3_lo","c4_hi","c4_lo","T1_hi","T1_lo","T2_hi","T2_lo","native","getTypeName","captureStackTrace","tfErrorString","valueTypeName","valueJson","getValue","__type","__value","__valueTypeName","label","tfPropertyErrorString","__label","__property","tfCustomError","decodeRaw","encodeRaw","lenR","lenS","__export","converter","checkForInput","throwForUpdateMaker","updateMaker","updateData","mainData","canAdd","canAddToArray","dupeCheckSet","Set","checkForOutput","outputIndex","checkHasKey","checkKeyVal","enumLength","kv","getEnumLength","myenum","inputCheckUncleanFinalized","needScriptSig","needWitnessScript","scriptSigOK","witnessScriptOK","hasOneFinal","updateGlobal","updateInput","updateOutput","addInputAttributes","addOutputAttributes","defaultVersionSetter","txBuf","defaultLocktimeSetter","support","iterable","blob","formData","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","iterator","Headers","consumed","bodyUsed","fileReaderReady","readBlobAsArrayBuffer","promise","bufferClone","view","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","readAsText","chars","readArrayBufferAsText","oldValue","has","methods","Request","upcased","credentials","signal","Response","bodyInit","redirectStatuses","redirect","DOMException","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","onreadystatechange","readyState","send","polyfill","jsonZoneFile","template","_zoneFileTemplate","getZoneFileTemplate","processOrigin","processTTL","ttl","processSOA","record","host","processNS","ip","processA","processAAAA","alias","processCNAME","preference","processMX","processPTR","txtData","txt","datum","processTXT","processSRV","processSPF","processURI","time","processValues","parseSOA","rr","soa","rrTokens","minimum","expire","retry","refresh","serial","rname","mname","parseNS","parseA","recordsSoFar","urrTokens","parseAAAA","parseCNAME","parseMX","parseTXT","tokenTxt","indexTXT","stripText","parsePTR","currentOrigin","fullname","parseSRV","parseSPF","parseURI","rrs","uRR","aaaa","cname","mx","ptr","srv","spf","parseRRs","captured","replacement","arrText","flatten","g1","removeComments","dummyConsensusHash","dummyZonefileHash","addOwnerInput","addChangeOut","ownerUTXO","ownerInput","fundTransaction","paymentAddress","inAmounts","changeIndex","txFee","outAmounts","returnTransactionHex","build","getTransactionSigner","fromHexString","transactions","makeRenewal","destinationAddress","ownerKeyIn","paymentKeyIn","paymentKey","ownerKey","txPromise","getNamePrice","getNamespaceBurnAddress","getUTXOs","getFeeRate","payerUtxos","ownerUtxos","ownerOutput","ownerOutputAddr","signingTxB","makeUpdate","getConsensusHash","updateTX","makePreorder","preorderPromise","preorderSkeleton","makeRegister","registerSkeleton","makeTransfer","transferTX","makeRevoke","revokeTX","makeNamespacePreorder","getNamespacePrice","makeNamespaceReveal","namespaceRevealTX","makeNamespaceReady","revealKeyIn","namespaceReadyTX","revealKey","makeBitcoinSpend","destinationIndex","feesToPay","feeForChange","outputAmount","makeNameImport","importerKeyIn","nameImportTX","importerKey","importerAddress","makeAnnounce","senderKeyIn","announceTX","senderKey","senderAddress","makeTokenTransfer","btcFunderKeyIn","separateFunder","btcKey","btcAddress","btcUTXOsPromise","senderUTXOs","btcUTXOs","tokenTransferTX","payerInput","estimatePreorder","paymentUtxos","preorderTX","outputsValue","estimateRegister","includingZonefile","estimateTransfer","estimateUpdate","estimateRenewal","renewalPromise","renewalTX","estimateRevoke","estimateNamespacePreorder","estimateNamespaceReveal","revealTX","estimateNamespaceReady","revealUtxos","readyTX","estimateNameImport","importUtxos","importTX","estimateAnnounce","senderUtxos","estimateTokenTransfer","APPS_NODE_INDEX","IDENTITY_KEYCHAIN","BLOCKSTACK_ON_BITCOIN","BITCOIN_BIP_44_PURPOSE","BITCOIN_COIN_TYPE","BITCOIN_ACCOUNT_INDEX","EXTERNAL_ADDRESS","CHANGE_ADDRESS","getNodePrivateKey","node","getNodePublicKey","BlockstackWallet","rootNode","toBase58","seed","fromSeed","keychain","fromBase58","deriveHardened","addressIndex","chainType","getNodeFromBitcoinKeychain","getBitcoinPrivateKeychain","identityIndex","getIdentityPrivateKeychain","identityNode","identityPrivateKeychain","publicKeyHex","getAddressFromBIP32Node","getBitcoinNode","neutered","keychainBase58","chain","appsNodeKey","appsNode","appIndex","hashCode","getLegacyAppNode","appIndexHexes","appNode","alwaysUncompressed","getIdentityAddressNode","identityKey","keyID","getAppsNode","getIdentitySalt","MAX_ALLOC","checkBuffer","keylen","checkParameters","sizes","rmd160","saltLen","getDigest","ipad1","ipad2","chinese_simplified","chinese_traditional","korean","french","italian","spanish","japanese","JA","english","EN","createArray","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","bip32_1","UINT256_TYPE","NETWORK_TYPE","BITCOIN","HIGHEST_BIT","BIP32","chainCode","__DEPTH","__INDEX","__PARENT_FINGERPRINT","isNeutered","fromPublicKeyLocal","depth","parentFingerprint","isHardened","hd","hmacSHA512","IL","IR","Ki","ki","fromPrivateKeyLocal","derivePath","splitPath","prevHd","indexStr","inString","sha256Hash","Constructor","_classCallCheck","custom","registerImmediate","html","channel","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","documentElement","removeChild","attachEvent","task","trace","Sha","rotl30","ft","Sha1","rotl5","Sha224","Sha384","base58","checksumFn","checksum","newChecksum","decodeUnsafe","basex","_Buffer","BASE_MAP","xc","BASE","LEADER","FACTOR","iFACTOR","psz","zeroes","b256","it3","it4","vch","pbegin","pend","b58","it1","it2","repeat","webpackPolyfill","paths","ShortCurve","tinv","zeroA","threeA","endo","_getEndomorphism","_endoWnafT1","_endoWnafT2","Point","isRed","inf","JPoint","zOne","betas","_getEndoRoots","lambdas","vec","_getEndoBasis","ntinv","prevR","aprxSqrt","y1","y2","len1","_endoSplit","c1","c2","p1","p2","q1","q2","ax","rhs","_endoWnafMulAdd","npoints","ncoeffs","endoMul","obj2point","nx","ny","ys1","dyinv","jmulAdd","_precompute","negate","zinv","zinv2","ay","pz2","z2","s1","s2","h2","h3","nz","jx","jy","jz","jz4","jyd","jx2","jyd2","jyd4","t1","t2","dny","_zeroDbl","_threeDbl","_dbl","xx","yy","yyyy","yyyy8","c8","gamma","alpha","beta4","beta8","ggamma8","jy2","jxd4","jyd8","trpl","zz","mm","ee","yyu4","kbase","z3","pz3","eqXToP","zs","MontCurve","i4","a24","aa","bb","diffAdd","da","jumlAdd","other","EdwardsCurve","twisted","mOneA","oneC","_mulA","_mulC","lhs","pointFromY","_extDbl","nt","_projDbl","_extAdd","_projAdd","zi","sha1_K","SHA1","SHA224","SHA384","Kh","E","Ah","Bh","Dh","Eh","rh","sh","inner","outer","HmacDRBG","KeyPair","Signature","nh","priv","fromPrivate","pub","fromPublic","drbg","pers","persEnc","entropyEnc","nonce","ns2","_truncateToN","truncOnly","bkey","getPrivate","ns1","iter","kp","kpX","recoveryParam","canonical","sinv","recoverPubKey","isYOdd","isSecondKey","rInv","getKeyRecoveryParam","Qprime","predResist","minEntropy","_reseed","reseedInterval","V","nonceEnc","_hmac","kmac","reseed","addEnc","temp","_importPrivate","privEnc","_importPublic","pubEnc","_importDER","Position","place","getLength","initial","octetLen","rmPadding","constructLength","octets","slen","backHalf","EDDSA","pointClass","secret","keyFromSecret","hashInt","Rencoded","encodePoint","s_","pubBytes","S","makeSignature","SG","fromSecret","lastIx","normed","xIsOdd","encodeInt","decodeInt","_secret","_pub","_pubBytes","privBytes","getSecret","_R","_S","_Rencoded","_Sencoded","Sencoded","toBytes","ONE1","ZERO1","checkSig","extraEntropy","_LengthN","Length","_ArrayN","_BufferN","_HexN","_StringN","INT53_MAX","ArrayN","Finite","HexN","Int8","Int16","Int32","Int53","Range","_range","StringN","UInt16","networks_1","lazy","typef","OP_RETURN","stacksEqual","minimal","scriptNumSize","fromDER","bstart","hashTypeBuffer","OP_PUSHDATA1","OP_PUSHDATA2","pubkeys","signatures","isAcceptableSignature","allowIncomplete","OP_CHECKMULTISIG","_chunks","OP_CHECKSIG","_address","OP_DUP","OP_HASH160","OP_EQUALVERIFY","hash2","pkh","redeem","_redeem","OP_EQUAL","nameParts","checkRedeem","hasInput","hasWitness","richunks","EMPTY_BUFFER","_rchunks","fastMerkleRoot","errorMerkleNoTxes","errorWitnessNotSegwit","prevHash","merkleRoot","timestamp","witnessCommit","readTransaction","nTransactions","getWitnessCommit","mantissa","txesHaveWitnessCommit","hashes","rootHash","witnessCommits","hasWitnessCommit","headersOnly","getUTCDate","setUTCSeconds","txSize","checkTxRoots","__checkMerkleRoot","__checkWitnessCommit","checkProofOfWork","calculateTarget","actualMerkleRoot","calculateMerkleRoot","actualWitnessCommit","digestFn","results","bip174_1","utils_1","address_1","crypto_1","ecpair_1","DEFAULT_OPTS","maximumFeeRate","PsbtTransaction","__CACHE","__NON_WITNESS_UTXO_TX_CACHE","__NON_WITNESS_UTXO_BUF_CACHE","__TX_IN_CACHE","globalMap","dpew","cache","psbtBase","transactionFromBuffer","psbt","checkTxInputCache","combine","those","setMaximumFeeRate","satoshiPerByte","check32Bit","checkInputsForPartialSig","__EXTRACTED_TX","setLocktime","setInputSequence","addInputs","inputDatas","inputData","addNonWitnessTxCache","__FEE","__FEE_RATE","addOutputs","outputDatas","outputData","extractTransaction","disableFeeCheck","isFinalized","vsize","toFixed","checkFees","inputFinalizeGetAmts","getTxCacheValue","getFee","finalizeAllInputs","finalizeInput","isP2SH","isP2WSH","isSegwit","nonWitnessUtxoTx","nonWitnessUtxoTxFromCache","prevoutIndex","isP2WPKH","getScriptFromInput","scriptType","isP2PKH","isP2MS","isP2PK","classifyScript","hasSigs","canFinalize","pSig","checkPartialSigSighashes","payment","sigs","pk","ps","getSortedSigs","getPayment","witnessStackToScriptWitness","getFinalScripts","clearFinalizedInput","validateSignaturesOfAllInputs","validateSignaturesOfInput","mySigs","hashCache","scriptCache","sighashCache","getHashForSig","checkScriptForPubkey","keypair","signAllInputsHD","hdKeyPair","sighashTypes","signInputHD","signAllInputsHDAsync","promises","signInputHDAsync","getSignersFromHD","signInput","signInputAsync","signAllInputs","signAllInputsAsync","getHashAndSighashType","toBase64","addUnknownKeyValToGlobal","addUnknownKeyValToInput","addUnknownKeyValToOutput","checkTxEmpty","getInputOutputCounts","inputCount","outputCount","neededSigs","isPaymentFactory","isP2WSHScript","action","throws","pSigs","scriptItems","witnessItems","getPsigsFromInputFinalScripts","whitelist","pubkeyHash","decompiled","element","scriptCheckerFactory","paymentScriptName","redeemScriptOutput","checkRedeemScript","checkWitnessScript","mustFinalize","sighashTypeToString","prevoutHash","utxoHash","prevout","signingScript","_script","myDerivations","bipDv","masterFingerprint","scriptWitnessToWitnessStack","varintLen","selfIndex","txCache","inputAmount","nwTx","fee","combiner_1","parser_1","txFromBuffer","psbtFromBuffer","psbtToBuffer","unknownKeyVals","addKeyVals","keyPusher","selfSet","selfKeyVals","otherKeyVals","newKv","getTx","getKeySet","psbts","psbtToKeyVals","others","selfTx","selfGlobalSet","globalKeyVals","selfInputSets","inputKeyVals","selfOutputSets","outputKeyVals","otherTx","inputSet","outputSet","psbtFromKeyVals","globalMapKeyVals","tools_1","checkKeyBuffer","keyBuf","keyNum","txCount","UNSIGNED_TX","GLOBAL_XPUB","NON_WITNESS_UTXO","WITNESS_UTXO","SIGHASH_TYPE","FINAL_SCRIPTSIG","FINAL_SCRIPTWITNESS","POR_COMMITMENT","txGetter","varSlice","getKeyValue","checkEndOfKeyValPairs","isEnd","globalKeyIndex","hexKey","unsignedTxMaps","inputKeyIndex","outputKeyIndex","extendedPubkey","isHard","epk","mfp","dupeSet","dupeString","currentData","newData","rLen","sLen","isDerSigWithSighash","_offset","scriptLen","TYPE_BYTE","pubkeyTypes","globalBuffer","keyValsOrEmptyToBuffer","inputBuffers","outputBuffers","sortKeyVals","keyValsFromMap","keyValMap","converterFactory","keyHexSet","encodedKeyVals","baddress","classify","SCRIPT_TYPES","PREVOUT_TYPES","tfMessage","__PREV_TX_SET","__INPUTS","__USE_LOW_R","setLockTime","__addInputUnsafe","vin","redeemScriptType","P2MS","unmatched","pubKey","fixMultisigOrder","setLowR","setting","__canModifyInputs","txIsTransaction","__canModifyOutputs","__build","signParams","witnessValue","ourPubKey","signatureHash","useLowR","signed","trySign","needsOutputs","prevOutScriptType","prevOutType","posType","checkSignArgs","canSign","prepared","p2wshAlt","p2shAlt","expanded","expandOutput","signScript","P2WPKH","P2WSH","witnessScriptType","P2SH","signType","maxSignatures","P2PKH","prepareInput","getSigningData","__needsOutputs","prevTxOut","expandInput","witnessStack","ssType","wsType","NONSTANDARD","P2PK","outputType","__overMaximumFees","signatureHashType","signingHashType","nInputs","nOutputs","pkh1","pkh2","wpkh1","wpkh2","multisig","nullData","witnessCommitment","witnessPubKeyHash","witnessScriptHash","NULLDATA","WITNESS_COMMITMENT","partialSignature","p2wpkho","p2wsho","lastChunk","scriptSigChunks","redeemScriptChunks","HEADER","commitment","witnessScriptChunks","witnessRawScriptSig","pad_string_1","fromBase64","base64url","stringLength","paddedStringLength","getParamBytesForAlg","MAX_OCTET","ENCODED_TAG_SEQ","TAG_SEQ","ENCODED_TAG_INT","TAG_INT","signatureAsBuffer","countPadding","stop","derToJose","paramBytes","maxEncodedParamLength","inputLength","seqLength","rLength","rOffset","sLength","sOffset","rPadding","sPadding","joseToDer","signatureBytes","rsBytes","shortLength","getParamSize","keySize","paramBytesForAlg","ES256","ES384","ES512","singleMatcher","multiMatcher","decodeComponents","components","encodedURI","replaceMap","customDecodeURIComponent","separatorIndex","async","_extend","_merge","Customisable","extend","reset","remove","fields","_typeIs","field","Inspection","schema","_stack","_schema","_custom","_getDepth","_dumpStack","_deeperObject","_deeperArray","_back","_simpleType","candidate","getIndexes","indexes","_formats","_validationAttribut","report","_realType","uniqueness","reported","pattern","regexs","regex","validDate","exactLength","ne","someKeys","candidat","_keys","intruder","asyncExec","asyncProperties","_validate","asyncItems","_asyncValidationAttribut","eachSeries","series","_asyncValidate","timesSeries","Validation","_error","_basicFields","_customFields","newErr","userCode","userError","userAlias","format","_forceType","post","def","parseFloat","integer","joinWith","boolean","substring","splitWith","_applyRules","upper","lower","capitalize","ucfirst","_sanitizationAttribut","rules","modified","rule","postTest","gap","_sanitize","_asyncSanitizationAttribut","execs","globing","_asyncSanitize","Sanitization","_reporting","newNot","reporting","sanitize","waterfall","inter","INT_MIN","INT_MAX","int","float","bool","char","_formatSample","toLocaleTimeString","hour12","numeric","_getLimits","_typeGenerator","rk","randomKey","any","CandidateGenerator","_instance","SchemaInspector","newSanitization","newValidation","previous_async","identity","toBool","notId","only_once","_once","noConflict","_isArray","_isArrayLike","_arrayEach","_reduce","memo","_forEachOf","_indexOf","_keyIterator","coll","_restParam","func","startIndex","rest","_withoutIndex","_setImmediate","_delay","_eachOfLimit","nextKey","running","errored","replenish","doParallel","eachOf","doParallelLimit","doSeries","eachOfSeries","_asyncMap","eachfn","_filter","_reject","_createTester","getResult","iteratee","_findGetResult","_parallel","tasks","_concat","_queue","worker","concurrency","_insert","started","idle","drain","saturated","_next","workers","removed","workersList","empty","kill","resumeCount","_console_fn","_times","mapper","_applyEach","fns","go","ensureAsync","innerArgs","forEachSeries","forEachLimit","eachLimit","forEachOf","completed","forEachOfSeries","iterate","forEachOfLimit","eachOfLimit","mapSeries","mapLimit","inject","foldl","foldr","reduceRight","reversed","select","selectLimit","filterLimit","selectSeries","filterSeries","rejectLimit","rejectSeries","someLimit","everyLimit","detect","detectSeries","detectLimit","sortBy","comparator","criteria","auto","remainingTasks","runningTasks","hasError","taskComplete","dep","taskCallback","safeResults","rkey","requires","ready","times","DEFAULT_TIMES","DEFAULT_INTERVAL","attempts","interval","parseTimes","wrappedTask","wrappedCallback","wrappedResults","retryAttempt","finalAttempt","seriesCallback","retryInterval","wrapIterator","parallel","parallelLimit","makeCallback","callArgs","concatSeries","whilst","doWhilst","calls","until","doUntil","during","truth","doDuring","priorityQueue","_compareTasks","beg","_binarySearch","cargo","memoize","hasher","queues","memoized","unmemoized","unmemoize","timesLimit","seq","newargs","nextargs","compose","applyEach","applyEachSeries","forever","constant","wrapSync","asyncify","ZERO_BUF","toBrowser","checks","browserPbkdf2","resolvePromise","prom","checkNative","makeCoreSessionRequest","appMethods","blockchainID","thisDevice","authBody","blockchain_id","app_private_key","app_domain","app_public_keys","public_key","device_id","sendCoreSessionRequest","coreHost","corePort","coreAuthRequest","apiPassword","getCoreSession","blockchainId","deviceId","authRequestObject","resolveZoneFileToPerson","isNameValid","NAME_PART_RULE","namePart","safety","addressCanReceiveName","getNamesOwned","validNames","nameValid","isInGracePeriod","getGracePeriod","gracePeriod","expire_block","ownsName","isNameAvailable","isNamespaceValid","isNamespaceAvailable","getNamespaceInfo","revealedNamespace","namespaceIsReady","namespaceIsRevealed","isAccountSpendable","getAccountStatus","transfer_send_block_id"],"mappings":"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mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,kEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,sEAIN9kB,IAAK,CACH1b,IAAK,EACLwgC,OAAQ,CACN,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,iEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE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","file":"blockstack.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"blockstack\"] = factory();\n\telse\n\t\troot[\"blockstack\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 251);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\n\nimport { TransactionBuilder, Transaction, TxOutput } from 'bitcoinjs-lib'\nimport * as BN from 'bn.js'\nimport { NotEnoughFundsError } from '../errors'\nimport { TransactionSigner } from './signers'\nimport { UTXO } from '../network'\nimport { hashSha256Sync } from '../encryption/sha2Hash'\nimport { hashRipemd160 } from '../encryption/hashRipemd160'\n\n\n/**\n * \n * @ignore\n */\nexport const DUST_MINIMUM = 5500\n\n/**\n * Creates a RIPEMD160(SHA256(input)) hash.\n * @ignore\n */\nexport function hash160(buff: Buffer) {\n  const sha256 = hashSha256Sync(buff)\n  return hashRipemd160(sha256)\n}\n\n/**\n * Creates a SHA256 hash, truncated to 128 bits. \n * @ignore\n */\nexport function hash128(buff: Buffer) {\n  const sha256 = hashSha256Sync(buff)\n  return sha256.slice(0, 16)\n}\n\n\n// COPIED FROM coinselect, because 1 byte matters sometimes.\n// baseline estimates, used to improve performance\nconst TX_EMPTY_SIZE = 4 + 1 + 1 + 4\nconst TX_INPUT_BASE = 32 + 4 + 1 + 4\nconst TX_INPUT_PUBKEYHASH = 107\nconst TX_OUTPUT_BASE = 8 + 1\nconst TX_OUTPUT_PUBKEYHASH = 25\n\ntype txPoint = {\n  script: { length: number }\n}\n\nfunction inputBytes(input: txPoint | null) {\n  if (input && input.script && input.script.length > 0) {\n    return TX_INPUT_BASE + input.script.length\n  } else {\n    return TX_INPUT_BASE + TX_INPUT_PUBKEYHASH\n  }\n}\n\nfunction outputBytes(output: txPoint | null) {\n  if (output && output.script && output.script.length > 0) {\n    return TX_OUTPUT_BASE + output.script.length\n  } else {\n    return TX_OUTPUT_BASE + TX_OUTPUT_PUBKEYHASH\n  }\n}\n\nfunction transactionBytes(inputs: Array<txPoint | null>, outputs: Array<txPoint | null>) {\n  return TX_EMPTY_SIZE\n    + inputs.reduce((a: number, x: txPoint | null) => (a + inputBytes(x)), 0)\n    + outputs.reduce((a: number, x: txPoint | null) => (a + outputBytes(x)), 0)\n}\n\n/**\n * \n * @ignore\n */\nexport function getTransactionInsideBuilder(txBuilder: TransactionBuilder) {\n  return ((txBuilder as any).__TX as Transaction)\n}\n\nfunction getTransaction(txIn: Transaction | TransactionBuilder) {\n  if (txIn instanceof Transaction) {\n    return txIn\n  }\n  return getTransactionInsideBuilder(txIn)\n}\n\n//\n\n/**\n * \n * @ignore\n */\nexport function estimateTXBytes(txIn: Transaction | TransactionBuilder,\n                                additionalInputs: number,\n                                additionalOutputs: number) {\n  const innerTx = getTransaction(txIn)\n  const dummyInputs: Array<null> = new Array(additionalInputs)\n  dummyInputs.fill(null)\n  const dummyOutputs: Array<null> = new Array(additionalOutputs)\n  dummyOutputs.fill(null)\n\n  const inputs: Array<null | txPoint> = [].concat(innerTx.ins, dummyInputs)\n  const outputs: Array<null | txPoint> = [].concat(innerTx.outs, dummyOutputs)\n\n  return transactionBytes(inputs, outputs)\n}\n\n/**\n * \n * @ignore\n */\nexport function sumOutputValues(txIn: Transaction | TransactionBuilder) {\n  const innerTx = getTransaction(txIn)\n  return innerTx.outs.reduce((agg, x) => agg + (x as TxOutput).value, 0)\n}\n\n/**\n * \n * @ignore\n */\nexport function decodeB40(input: string): string {\n  // treat input as a base40 integer, and output a hex encoding\n  // of that integer.\n  //\n  //   for each digit of the string, find its location in `characters`\n  //    to get the value of the digit, then multiply by 40^(-index in input)\n  // e.g.,\n  // the 'right-most' character has value: (digit-value) * 40^0\n  //  the next character has value: (digit-value) * 40^1\n  //\n  // hence, we reverse the characters first, and use the index\n  //  to compute the value of each digit, then sum\n  const characters = '0123456789abcdefghijklmnopqrstuvwxyz-_.+'\n  const base = new BN(40)\n  const inputDigits = input.split('').reverse()\n  const digitValues = inputDigits.map(\n    ((character: string, exponent: number) => new BN(characters.indexOf(character))\n      .mul(base.pow(new BN(exponent))))\n  )\n  const sum = digitValues.reduce(\n    (agg: BN, cur: BN) => agg.add(cur),\n    new BN(0)\n  )\n  return sum.toString(16, 2)\n}\n\n/**\n * Adds UTXOs to fund a transaction\n * @param {TransactionBuilder} txBuilderIn - a transaction builder object to add the inputs to. this\n *    object is _always_ mutated. If not enough UTXOs exist to fund, the tx builder object\n *    will still contain as many inputs as could be found.\n * @param {Array<{value: number, tx_hash: string, tx_output_n}>} utxos - the utxo set for the\n *    payer's address.\n * @param {number} amountToFund - the amount of satoshis to fund in the transaction. the payer's\n *    utxos will be included to fund up to this amount of *output* and the corresponding *fees*\n *    for those additional inputs\n * @param {number} feeRate - the satoshis/byte fee rate to use for fee calculation\n * @param {boolean} fundNewFees - if true, this function will fund `amountToFund` and any new fees\n *    associated with including the new inputs.\n *    if false, this function will fund _at most_ `amountToFund`\n * @returns {number} - the amount of leftover change (in satoshis)\n * @private\n * @ignore\n */\nexport function addUTXOsToFund(txBuilderIn: TransactionBuilder,\n                               utxos: Array<UTXO>,\n                               amountToFund: number, feeRate: number,\n                               fundNewFees: boolean = true): number {\n  if (utxos.length === 0) {\n    throw new NotEnoughFundsError(amountToFund)\n  }\n\n  // how much are we increasing fees by adding an input ?\n  const newFees = feeRate * (estimateTXBytes(txBuilderIn, 1, 0)\n                             - estimateTXBytes(txBuilderIn, 0, 0))\n  let utxoThreshhold = amountToFund\n  if (fundNewFees) {\n    utxoThreshhold += newFees\n  }\n\n  const goodUtxos = utxos.filter(utxo => utxo.value >= utxoThreshhold)\n  if (goodUtxos.length > 0) {\n    goodUtxos.sort((a, b) => a.value - b.value)\n    const selected = goodUtxos[0]\n    let change = selected.value - amountToFund\n    if (fundNewFees) {\n      change -= newFees\n    }\n\n    txBuilderIn.addInput(selected.tx_hash, selected.tx_output_n)\n    return change\n  } else {\n    utxos.sort((a, b) => b.value - a.value)\n    const largest = utxos[0]\n\n    if (newFees >= largest.value) {\n      throw new NotEnoughFundsError(amountToFund)\n    }\n\n    txBuilderIn.addInput(largest.tx_hash, largest.tx_output_n)\n\n    let remainToFund = amountToFund - largest.value\n    if (fundNewFees) {\n      remainToFund += newFees\n    }\n\n    return addUTXOsToFund(txBuilderIn, utxos.slice(1),\n                          remainToFund, feeRate, fundNewFees)\n  }\n}\n\n\nexport function signInputs(txB: TransactionBuilder,\n                           defaultSigner: TransactionSigner,\n                           otherSigners?: Array<{index: number, signer: TransactionSigner}>) {\n  const txInner = getTransactionInsideBuilder(txB)\n  const signerArray = txInner.ins.map(() => defaultSigner)\n  if (otherSigners) {\n    otherSigners.forEach((signerPair) => {\n      signerArray[signerPair.index] = signerPair.signer\n    })\n  }\n  let signingPromise = Promise.resolve()\n  for (let i = 0; i < txInner.ins.length; i++) {\n    signingPromise = signingPromise.then(\n      () => signerArray[i].signTransaction(txB, i)\n    )\n  }\n  return signingPromise.then(() => txB)\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip32 = require('bip32');\nexports.bip32 = bip32;\nconst address = require('./address');\nexports.address = address;\nconst crypto = require('./crypto');\nexports.crypto = crypto;\nconst ECPair = require('./ecpair');\nexports.ECPair = ECPair;\nconst networks = require('./networks');\nexports.networks = networks;\nconst payments = require('./payments');\nexports.payments = payments;\nconst script = require('./script');\nexports.script = script;\nvar block_1 = require('./block');\nexports.Block = block_1.Block;\nvar psbt_1 = require('./psbt');\nexports.Psbt = psbt_1.Psbt;\nvar script_1 = require('./script');\nexports.opcodes = script_1.OPS;\nvar transaction_1 = require('./transaction');\nexports.Transaction = transaction_1.Transaction;\nvar transaction_builder_1 = require('./transaction_builder');\nexports.TransactionBuilder = transaction_builder_1.TransactionBuilder;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","\n/**\n* @ignore\n*/\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown'\n}\n\nObject.freeze(ERROR_CODES)\n\n/**\n* @ignore\n*/\ntype ErrorData = {\n  code: string,\n  parameter?: string,\n  message: string\n}\n\n/**\n* @ignore\n*/\nexport class BlockstackError extends Error {\n  message: string\n\n  code: string\n\n  parameter?: string\n\n  constructor(error: ErrorData) {\n    super()\n    let message = error.message\n    let bugDetails = `Error Code: ${error.code}`\n    let stack = this.stack\n    if (!stack) { \n      try {\n        throw new Error()\n      } catch (e) {\n        stack = e.stack\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`\n    }\n    message += `\\nIf you believe this exception is caused by a bug in blockstack.js,\n      please file a bug report: https://github.com/blockstack/blockstack.js/issues\\n\\n${bugDetails}`\n    this.message = message\n    this.code = error.code\n    this.parameter = error.parameter ? error.parameter : null\n  }\n  \n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter: '' })\n    this.name = 'MissingParametersError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter })\n    this.name = 'MissingParametersError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class RemoteServiceError extends BlockstackError {\n  response: Response\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message })\n    this.response = response\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message })\n    this.name = 'InvalidDIDError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message })\n    this.leftToFund = leftToFund\n    this.name = 'NotEnoughFundsError'\n    this.message = message\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidAmountError extends BlockstackError {\n  fees: number\n\n  specifiedAmount: number\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message = `Not enough coin to fund fees transaction fees. Fees would be ${fees},`\n          + ` specified spend is  ${specifiedAmount}`\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message })\n    this.specifiedAmount = specifiedAmount\n    this.fees = fees\n    this.name = 'InvalidAmountError'\n    this.message = message\n  }\n}\n\n/**\n* @ignore\n*/\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message })\n    this.message = message\n    this.name = 'LoginFailedError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message })\n    this.message = message\n    this.name = 'SignatureVerificationError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message })\n    this.message = message\n    this.name = 'FailedDecryptionError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message })\n    this.message = message\n    this.name = 'InvalidStateError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message })\n    this.message = message\n    this.name = 'NoSessionDataError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport interface GaiaHubErrorResponse {\n  status: number, \n  statusText: string,\n  body?: string | any\n}\n\nexport interface HubErrorDetails {\n  message?: string\n  statusCode: number\n  statusText: string\n  [prop: string]: any\n}\n\n/**\n* @ignore\n*/\nexport class GaiaHubError extends BlockstackError {\n  hubError: HubErrorDetails\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error)\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText\n      }\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body)\n      }\n    }\n  }\n}\n\n/**\n* @ignore\n*/\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response)\n    this.name = 'DoesNotExist'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response)\n    this.name = 'ConflictError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response)\n    this.name = 'NotEnoughProofError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response)\n    this.name = 'BadPathError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response)\n    this.name = 'ValidationError'\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError: HubErrorDetails\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response)\n    this.name = 'PayloadTooLargeError'\n    this.maxUploadByteSize = maxUploadByteSize\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response)\n    this.name = 'PreconditionFailedError'\n  }\n}\n","// eslint-disable-next-line import/no-unassigned-import\nimport 'cross-fetch/polyfill'\n\n/** @ignore */\nexport async function fetchPrivate(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const defaultFetchOpts: RequestInit = {\n    referrer: 'no-referrer',\n    referrerPolicy: 'no-referrer'\n  }\n  const fetchOpts = Object.assign(defaultFetchOpts, init)\n  // eslint-disable-next-line no-restricted-globals\n  const fetchResult = await fetch(input, fetchOpts)\n  return fetchResult\n}\n","import { network } from './network'\n\n/**\n* @ignore\n*/\nconst config = {\n  network: network.defaults.MAINNET_DEFAULT,\n  logLevel: 'debug'\n}\n\nexport { config }\n","import { Logger } from './logger'\nimport { \n  BadPathError, \n  ConflictError, \n  DoesNotExist,\n  GaiaHubErrorResponse,\n  NotEnoughProofError, \n  PayloadTooLargeError, \n  ValidationError,\n  PreconditionFailedError\n} from './errors'\n\n\n/**\n *  @ignore\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack'\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextYear() {\n  return new Date(\n    new Date().setFullYear(\n      new Date().getFullYear() + 1\n    )\n  )\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextMonth() {\n  return new Date(\n    new Date().setMonth(\n      new Date().getMonth() + 1\n    )\n  )\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextHour() {\n  return new Date(\n    new Date().setHours(\n      new Date().getHours() + 1\n    )\n  )\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0\n  }\n  return Math.floor(megabytes * 1024 * 1024)\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size. \n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16\n  return cipherTextLength\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length. \n * This is equivalent to the byte length when the string is ASCII or UTF8-8 \n * encoded.  \n * @param number \n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = (Math.ceil(inputByteLength / 3) * 4)\n  return encodedLength\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n */\n\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i')\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?'\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`)\n  } else {\n    return `${uri}${separator}${key}=${value}`\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n */\n\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined) {\n    v1 = '0.0.0'\n  }\n\n  if (v2 === undefined) {\n    v2 = '0.0.0'\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10))\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10))\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0)\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n */\nexport function makeUUID4() {\n  let d = new Date().getTime()\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now() // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16)\n  })\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    // The globally scoped WHATWG `URL` class is available in modern browsers and\n    // NodeJS v10 or higher. In older NodeJS versions it must be required from the\n    // `url` module.\n    let parseUrl: (url: string) => URL\n    if (typeof URL !== 'undefined') {\n      parseUrl = url => new URL(url)\n    } else {\n      try {\n        // eslint-disable-next-line import/no-nodejs-modules, global-require\n        const nodeUrl = (require('url') as typeof import('url')).URL\n        parseUrl = url => new nodeUrl(url)\n      } catch (error) {\n        console.log(error)\n        console.error('Global URL class is not available')\n      }\n    }\n\n    const parsedUri1 = parseUrl(uri1)\n    const parsedUri2 = parseUrl(uri2)\n\n    const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80)\n    const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80)\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute: (uri1.includes('http://') || uri1.includes('https://'))\n      && (uri2.includes('http://') || uri2.includes('https://'))\n    }\n\n    return match.scheme && match.hostname && match.port && match.absolute\n  } catch (error) {\n    console.log(error)\n    console.log('Parsing error in same URL origin check')\n    // Parse error\n    return false\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the \n * currently executing environment. \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n * \n * This could be switched to `globalThis` once it is standardized and widely available. \n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self\n  }\n  if (typeof window !== 'undefined') {\n    return window\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js \n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the \n  // `window` global object as well. \n  if (typeof global !== 'undefined') {\n    return (global as unknown) as Window\n  }\n  throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available')\n}\n\n\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown, \n  apiName: string, \n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found. \n   * @default false\n   */\n  throwIfUnavailable?: boolean; \n  /**\n   * Additional information to include in an error if thrown. \n   */\n  usageDesc?: string; \n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey. \n   * @default false\n   */\n  returnEmptyObject?: boolean; \n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it \n * is available within the currently executing environment. \n * When executing within the Node.js runtime these APIs are unavailable and will be \n * `undefined` unless the API is provided via polyfill. \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K, \n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = { }\n): Window[K] {\n  let globalScope: Window\n  try {\n    globalScope = getGlobalScope()\n    if (globalScope) {\n      const obj = globalScope[name]\n      if (obj) {\n        return obj\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`)\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc)\n    Logger.error(errMsg)\n    throw new Error(errMsg)\n  }\n  if (returnEmptyObject) { \n    return {} as any\n  }\n  return undefined\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`) \n * if they are available within the currently executing environment. \n * When executing within the Node.js runtime these APIs are unavailable will be `undefined` \n * unless the API is provided via polyfill. \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[], \n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window\n  try {\n    globalScope = getGlobalScope()\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`)\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc)\n      Logger.error(errMsg)\n      throw errMsg\n    } else if (returnEmptyObject) {\n      globalScope = {} as any\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i]\n    try {\n      if (globalScope) {\n        const obj = globalScope[name]\n        if (obj) {\n          result[name] = obj\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc)\n          Logger.error(errMsg)\n          throw new Error(errMsg)\n        } else if (returnEmptyObject) {\n          result[name] = {} as any\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc)\n        Logger.error(errMsg)\n        throw new Error(errMsg)\n      }\n    }\n  }\n  return result\n}\n\nasync function getGaiaErrorResponse(response: Response): Promise<GaiaHubErrorResponse> {\n  let responseMsg = ''\n  let responseJson: any | undefined\n  try {\n    responseMsg = await response.text()\n    try {\n      responseJson = JSON.parse(responseMsg)\n    } catch (error) {\n      // Use text instead\n    }\n  } catch (error) {\n    Logger.debug(`Error getting bad http response text: ${error}`)\n  }\n  const status = response.status\n  const statusText = response.statusText\n  const body = responseJson || responseMsg\n  return { status, statusText, body }\n}\n\n/**\n * Returns a BlockstackError correlating to the given HTTP response,\n * with the provided errorMsg. Throws if the HTTP response is 'ok'.\n */\nexport async function getBlockstackErrorFromResponse(\n  response: Response,\n  errorMsg: string,\n  hubConfig: import('./storage/hub').GaiaHubConfig | null\n): Promise<Error> {\n  if (response.ok) {\n    throw new Error('Cannot get a BlockstackError from a valid response.')\n  }\n  const gaiaResponse = await getGaiaErrorResponse(response)  \n  if (gaiaResponse.status === 401) {\n    return new ValidationError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 402) {\n    return new NotEnoughProofError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 403) {\n    return new BadPathError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 404) {\n    throw new DoesNotExist(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 409) {\n    return new ConflictError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 412) {\n    return new PreconditionFailedError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 413) {\n    const maxBytes = megabytesToBytes(hubConfig?.max_file_upload_size_megabytes)\n    return new PayloadTooLargeError(errorMsg, gaiaResponse, maxBytes)\n  } else {\n    return new Error(errorMsg)\n  }\n}\n","import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n","\nimport { ECPair, address, networks } from 'bitcoinjs-lib'\nimport { randomBytes } from './encryption/cryptoRandom'\nimport { hashSha256Sync } from './encryption/sha2Hash'\nimport { hashRipemd160 } from './encryption/hashRipemd160'\nimport { config } from './config'\n\n/**\n * \n * @param numberOfBytes \n * \n * @ignore\n */\nexport function getEntropy(arg: number): Buffer {\n  if (!arg) {\n    arg = 32\n  }\n  return randomBytes(arg)\n}\n\n/**\n* @ignore\n*/\nexport function makeECPrivateKey() {\n  const keyPair = ECPair.makeRandom({ rng: getEntropy })\n  return keyPair.privateKey.toString('hex')\n}\n\n/**\n* @ignore\n*/\nexport function publicKeyToAddress(publicKey: string | Buffer) {\n  const publicKeyBuffer = Buffer.isBuffer(publicKey) ? publicKey : Buffer.from(publicKey, 'hex')\n  const publicKeyHash160 = hashRipemd160(hashSha256Sync(publicKeyBuffer))\n  const result = address.toBase58Check(publicKeyHash160, networks.bitcoin.pubKeyHash)\n  return result\n}\n\n/**\n* @ignore\n*/\nexport function getPublicKeyFromPrivate(privateKey: string | Buffer) {\n  const privateKeyBuffer = Buffer.isBuffer(privateKey) ? privateKey : Buffer.from(privateKey, 'hex')\n  const keyPair = ECPair.fromPrivateKey(privateKeyBuffer)\n  return keyPair.publicKey.toString('hex')\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function hexStringToECPair(skHex: string): ECPair.ECPairInterface {\n  const ecPairOptions = {\n    network: config.network.layer1,\n    compressed: true\n  }\n\n  if (skHex.length === 66) {\n    if (skHex.slice(64) !== '01') {\n      throw new Error('Improperly formatted private-key hex string. 66-length hex usually '\n                      + 'indicates compressed key, but last byte must be == 1')\n    }\n    return ECPair.fromPrivateKey(Buffer.from(skHex.slice(0, 64), 'hex'), ecPairOptions)\n  } else if (skHex.length === 64) {\n    ecPairOptions.compressed = false\n    return ECPair.fromPrivateKey(Buffer.from(skHex, 'hex'), ecPairOptions)\n  } else {\n    throw new Error('Improperly formatted private-key hex string: length should be 64 or 66.')\n  }\n}\n\n/**\n * \n * @ignore\n */\nexport function ecPairToHexString(secretKey: ECPair.ECPairInterface) {\n  const ecPointHex = secretKey.privateKey.toString('hex')\n  if (secretKey.compressed) {\n    return `${ecPointHex}01`\n  } else {\n    return ecPointHex\n  }\n}\n\n/**\n * Creates a bitcoin address string from an ECPair\n * @private\n * @ignore\n */\nexport function ecPairToAddress(keyPair: ECPair.ECPairInterface) {\n  const sha256 = hashSha256Sync(keyPair.publicKey)\n  const hash160 = hashRipemd160(sha256)\n  return address.toBase58Check(hash160, keyPair.network.pubKeyHash)\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst scriptNumber = require('./script_number');\nconst scriptSignature = require('./script_signature');\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst ecc = require('tiny-secp256k1');\nconst pushdata = require('pushdata-bitcoin');\nconst typeforce = require('typeforce');\nexports.OPS = require('bitcoin-ops');\nconst REVERSE_OPS = require('bitcoin-ops/map');\nconst OP_INT_BASE = exports.OPS.OP_RESERVED; // OP_1 - 1\nfunction isOPInt(value) {\n  return (\n    types.Number(value) &&\n    (value === exports.OPS.OP_0 ||\n      (value >= exports.OPS.OP_1 && value <= exports.OPS.OP_16) ||\n      value === exports.OPS.OP_1NEGATE)\n  );\n}\nfunction isPushOnlyChunk(value) {\n  return types.Buffer(value) || isOPInt(value);\n}\nfunction isPushOnly(value) {\n  return types.Array(value) && value.every(isPushOnlyChunk);\n}\nexports.isPushOnly = isPushOnly;\nfunction asMinimalOP(buffer) {\n  if (buffer.length === 0) return exports.OPS.OP_0;\n  if (buffer.length !== 1) return;\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0];\n  if (buffer[0] === 0x81) return exports.OPS.OP_1NEGATE;\n}\nfunction chunksIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction chunksIsArray(buf) {\n  return types.Array(buf);\n}\nfunction singleChunkIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction compile(chunks) {\n  // TODO: remove me\n  if (chunksIsBuffer(chunks)) return chunks;\n  typeforce(types.Array, chunks);\n  const bufferSize = chunks.reduce((accum, chunk) => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1;\n      }\n      return accum + pushdata.encodingLength(chunk.length) + chunk.length;\n    }\n    // opcode\n    return accum + 1;\n  }, 0.0);\n  const buffer = Buffer.allocUnsafe(bufferSize);\n  let offset = 0;\n  chunks.forEach(chunk => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk);\n      if (opcode !== undefined) {\n        buffer.writeUInt8(opcode, offset);\n        offset += 1;\n        return;\n      }\n      offset += pushdata.encode(buffer, chunk.length, offset);\n      chunk.copy(buffer, offset);\n      offset += chunk.length;\n      // opcode\n    } else {\n      buffer.writeUInt8(chunk, offset);\n      offset += 1;\n    }\n  });\n  if (offset !== buffer.length) throw new Error('Could not decode chunks');\n  return buffer;\n}\nexports.compile = compile;\nfunction decompile(buffer) {\n  // TODO: remove me\n  if (chunksIsArray(buffer)) return buffer;\n  typeforce(types.Buffer, buffer);\n  const chunks = [];\n  let i = 0;\n  while (i < buffer.length) {\n    const opcode = buffer[i];\n    // data chunk\n    if (opcode > exports.OPS.OP_0 && opcode <= exports.OPS.OP_PUSHDATA4) {\n      const d = pushdata.decode(buffer, i);\n      // did reading a pushDataInt fail?\n      if (d === null) return null;\n      i += d.size;\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null;\n      const data = buffer.slice(i, i + d.number);\n      i += d.number;\n      // decompile minimally\n      const op = asMinimalOP(data);\n      if (op !== undefined) {\n        chunks.push(op);\n      } else {\n        chunks.push(data);\n      }\n      // opcode\n    } else {\n      chunks.push(opcode);\n      i += 1;\n    }\n  }\n  return chunks;\n}\nexports.decompile = decompile;\nfunction toASM(chunks) {\n  if (chunksIsBuffer(chunks)) {\n    chunks = decompile(chunks);\n  }\n  return chunks\n    .map(chunk => {\n      // data?\n      if (singleChunkIsBuffer(chunk)) {\n        const op = asMinimalOP(chunk);\n        if (op === undefined) return chunk.toString('hex');\n        chunk = op;\n      }\n      // opcode!\n      return REVERSE_OPS[chunk];\n    })\n    .join(' ');\n}\nexports.toASM = toASM;\nfunction fromASM(asm) {\n  typeforce(types.String, asm);\n  return compile(\n    asm.split(' ').map(chunkStr => {\n      // opcode?\n      if (exports.OPS[chunkStr] !== undefined) return exports.OPS[chunkStr];\n      typeforce(types.Hex, chunkStr);\n      // data!\n      return Buffer.from(chunkStr, 'hex');\n    }),\n  );\n}\nexports.fromASM = fromASM;\nfunction toStack(chunks) {\n  chunks = decompile(chunks);\n  typeforce(isPushOnly, chunks);\n  return chunks.map(op => {\n    if (singleChunkIsBuffer(op)) return op;\n    if (op === exports.OPS.OP_0) return Buffer.allocUnsafe(0);\n    return scriptNumber.encode(op - OP_INT_BASE);\n  });\n}\nexports.toStack = toStack;\nfunction isCanonicalPubKey(buffer) {\n  return ecc.isPoint(buffer);\n}\nexports.isCanonicalPubKey = isCanonicalPubKey;\nfunction isDefinedHashType(hashType) {\n  const hashTypeMod = hashType & ~0x80;\n  // return hashTypeMod > SIGHASH_ALL && hashTypeMod < SIGHASH_SINGLE\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04;\n}\nexports.isDefinedHashType = isDefinedHashType;\nfunction isCanonicalScriptSignature(buffer) {\n  if (!Buffer.isBuffer(buffer)) return false;\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false;\n  return bip66.check(buffer.slice(0, -1));\n}\nexports.isCanonicalScriptSignature = isCanonicalScriptSignature;\n// tslint:disable-next-line variable-name\nexports.number = scriptNumber;\nexports.signature = scriptSignature;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./signer\"));\n__export(require(\"./verifier\"));\n__export(require(\"./decode\"));\n__export(require(\"./errors\"));\n__export(require(\"./cryptoClients\"));\n//# sourceMappingURL=index.js.map","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    Buffer = require('buffer').Buffer;\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n    }\n\n    if (base === 16) {\n      this._parseHex(number, start);\n    } else {\n      this._parseBase(number, base, start);\n    }\n\n    if (number[0] === '-') {\n      this.negative = 1;\n    }\n\n    this.strip();\n\n    if (endian !== 'le') return;\n\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex (str, start, end) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r <<= 4;\n\n      // 'a' - 'f'\n      if (c >= 49 && c <= 54) {\n        r |= c - 49 + 0xa;\n\n      // 'A' - 'F'\n      } else if (c >= 17 && c <= 22) {\n        r |= c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r |= c & 0xf;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    // Scan 24-bit chunks and add them to the number\n    var off = 0;\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\n      w = parseHex(number, i, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n      off += 24;\n      if (off >= 26) {\n        off -= 26;\n        j++;\n      }\n    }\n    if (i + 6 !== start) {\n      w = parseHex(number, start, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n    }\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      r.strip();\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","\n\nimport { TransactionBuilder, payments, address as bjsAddress, Transaction } from 'bitcoinjs-lib'\nimport * as BN from 'bn.js'\nimport {\n  decodeB40, hash160, hash128, DUST_MINIMUM\n} from './utils'\nimport { config } from '../config'\n\n// support v1 and v2 price API endpoint return values\ntype AmountTypeV1 = number\ntype AmountTypeV2 = { units: string, amount: BN }\ntype AmountType = AmountTypeV1 | AmountTypeV2\n\n// todo : add name length / character verification\n\n/**\n* @ignore\n*/\nexport class BlockstackNamespace {\n  namespaceID: string\n\n  version: number\n\n  lifetime: number\n\n  coeff: number\n\n  base: number\n\n  buckets: Array<number>\n\n  nonalphaDiscount: number\n\n  noVowelDiscount: number\n\n  constructor(namespaceID: string) {\n    if (namespaceID.length > 19) {\n      throw new Error('Namespace ID too long (19 chars max)')\n    }\n    if (!namespaceID.match('[0123456789abcdefghijklmnopqrstuvwxyz_-]+')) {\n      throw new Error('Namespace ID can only use characters 0123456789abcdefghijklmnopqrstuvwxyz-_')\n    }\n\n    this.namespaceID = namespaceID\n    this.version = -1\n    this.lifetime = -1\n    this.coeff = -1\n    this.base = -1\n    this.buckets = [-1]\n    this.nonalphaDiscount = -1\n    this.noVowelDiscount = -1\n  }\n\n  check() {\n    try {\n      this.setVersion(this.version)\n      this.setLifetime(this.lifetime)\n      this.setCoeff(this.coeff)\n      this.setBase(this.base)\n      this.setBuckets(this.buckets)\n      this.setNonalphaDiscount(this.nonalphaDiscount)\n      this.setNoVowelDiscount(this.noVowelDiscount)\n      return true\n    } catch (e) {\n      return false\n    }\n  }\n\n  setVersion(version: number) {\n    if (version < 0 || version > 2 ** 16 - 1) {\n      throw new Error('Invalid version: must be a 16-bit number')\n    }\n    this.version = version\n  }\n\n  setLifetime(lifetime: number) {\n    if (lifetime < 0 || lifetime > 2 ** 32 - 1) {\n      throw new Error('Invalid lifetime: must be a 32-bit number')\n    }\n    this.lifetime = lifetime\n  }\n\n  setCoeff(coeff: number) {\n    if (coeff < 0 || coeff > 255) {\n      throw new Error('Invalid coeff: must be an 8-bit number')\n    }\n    this.coeff = coeff\n  }\n\n  setBase(base: number) {\n    if (base < 0 || base > 255) {\n      throw new Error('Invalid base: must be an 8-bit number')\n    }\n    this.base = base\n  }\n\n  setBuckets(buckets: Array<number>) {\n    if (buckets.length !== 16) {\n      throw new Error('Invalid buckets: must have 16 entries')\n    }\n\n    for (let i = 0; i < buckets.length; i++) {\n      if (buckets[i] < 0 || buckets[i] > 15) {\n        throw new Error('Invalid buckets: must be 4-bit numbers')\n      }\n    }\n\n    this.buckets = buckets.slice(0)\n  }\n\n  setNonalphaDiscount(nonalphaDiscount: number) {\n    if (nonalphaDiscount <= 0 || nonalphaDiscount > 15) {\n      throw new Error('Invalid nonalphaDiscount: must be a positive 4-bit number')\n    }\n    this.nonalphaDiscount = nonalphaDiscount\n  }\n\n  setNoVowelDiscount(noVowelDiscount: number) {\n    if (noVowelDiscount <= 0 || noVowelDiscount > 15) {\n      throw new Error('Invalid noVowelDiscount: must be a positive 4-bit number')\n    }\n    this.noVowelDiscount = noVowelDiscount\n  }\n\n  toHexPayload() {\n    const lifeHex = `00000000${this.lifetime.toString(16)}`.slice(-8)\n    const coeffHex = `00${this.coeff.toString(16)}`.slice(-2)\n    const baseHex = `00${this.base.toString(16)}`.slice(-2)\n    const bucketHex = this.buckets.map(b => b.toString(16)).reduce((b1, b2) => b1 + b2, '')\n    const discountHex = this.nonalphaDiscount.toString(16) + this.noVowelDiscount.toString(16)\n    const versionHex = `0000${this.version.toString(16)}`.slice(-4)\n    const namespaceIDHex = Buffer.from(this.namespaceID).toString('hex')\n\n    return lifeHex + coeffHex + baseHex + bucketHex + discountHex + versionHex + namespaceIDHex\n  }\n}\n\n\n/**\n* @ignore\n*/\nfunction asAmountV2(amount: AmountType): AmountTypeV2 {\n  // convert an AmountType v1 or v2 to an AmountTypeV2.\n  // the \"units\" of a v1 amount type are always 'BTC'\n  if (typeof amount === 'number') {\n    return { units: 'BTC', amount: new BN(String(amount)) }\n  } else {\n    return { units: amount.units, amount: amount.amount }\n  }\n}\n\n/**\n* @ignore\n*/\nfunction makeTXbuilder() {\n  const txb = new TransactionBuilder(config.network.layer1)\n  txb.setVersion(1)\n  return txb\n}\n\n/**\n* @ignore\n*/\nfunction opEncode(opcode: string): string {\n  // NOTE: must *always* a 3-character string\n  const res = `${config.network.MAGIC_BYTES}${opcode}`\n  if (res.length !== 3) {\n    throw new Error('Runtime error: invalid MAGIC_BYTES')\n  }\n  return res\n}\n\n/**\n* @ignore\n*/\nexport function makePreorderSkeleton(\n  fullyQualifiedName: string, consensusHash: string, preorderAddress: string,\n  burnAddress: string, burn: AmountType,\n  registerAddress: string = null\n): Transaction {\n  // Returns a preorder tx skeleton.\n  //   with 3 outputs : 1. the Blockstack Preorder OP_RETURN data\n  //                    2. the Preorder's change address (5500 satoshi minimum)\n  //                    3. the BURN\n  //\n  // 0     2  3                                     23             39          47            66\n  // |-----|--|--------------------------------------|--------------|-----------|-------------|\n  // magic op  hash160(fqn,scriptPubkey,registerAddr) consensus hash token burn  token type\n  //                                                                 (optional)   (optional)\n  //\n  // output 0: name preorder code\n  // output 1: preorder address\n  // output 2: burn address\n  //\n  // Returns an unsigned serialized transaction.\n  const burnAmount = asAmountV2(burn)\n  const network = config.network\n  const nameBuff = Buffer.from(decodeB40(fullyQualifiedName), 'hex') // base40\n  const scriptPublicKey = bjsAddress.toOutputScript(preorderAddress, network.layer1)\n\n  const dataBuffers = [nameBuff, scriptPublicKey]\n\n  if (!!registerAddress) {\n    const registerBuff = Buffer.from(registerAddress, 'ascii')\n    dataBuffers.push(registerBuff)\n  }\n\n  const dataBuff = Buffer.concat(dataBuffers)\n\n  const hashed = hash160(dataBuff)\n\n  const opReturnBufferLen = burnAmount.units === 'BTC' ? 39 : 66\n  const opReturnBuffer = Buffer.alloc(opReturnBufferLen)\n  opReturnBuffer.write(opEncode('?'), 0, 3, 'ascii')\n  hashed.copy(opReturnBuffer, 3)\n  opReturnBuffer.write(consensusHash, 23, 16, 'hex')\n\n  if (burnAmount.units !== 'BTC') {\n    const burnHex = burnAmount.amount.toString(16, 2)\n    if (burnHex.length > 16) {\n      // exceeds 2**64; can't fit\n      throw new Error(`Cannot preorder '${fullyQualifiedName}': cannot fit price into 8 bytes`)\n    }\n    const paddedBurnHex = `0000000000000000${burnHex}`.slice(-16)\n\n    opReturnBuffer.write(paddedBurnHex, 39, 8, 'hex')\n    opReturnBuffer.write(burnAmount.units, 47, burnAmount.units.length, 'ascii')\n  }\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(preorderAddress, DUST_MINIMUM)\n\n  if (burnAmount.units === 'BTC') {\n    const btcBurnAmount = burnAmount.amount.toNumber()\n    tx.addOutput(burnAddress, btcBurnAmount)\n  } else {\n    tx.addOutput(burnAddress, DUST_MINIMUM)\n  }\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeRegisterSkeleton(\n  fullyQualifiedName: string, ownerAddress: string,\n  valueHash: string = null, burnTokenAmountHex: string = null\n) {\n  // Returns a register tx skeleton.\n  //   with 2 outputs : 1. The register OP_RETURN\n  //                    2. The owner address (can be different from REGISTER address on renewals)\n\n  // You MUST make the first input a UTXO from the current OWNER *or* the\n  //   funder of the PREORDER\n\n  // in the case of a renewal, this would need to be modified to include a change address\n  //  as output (3) before the burn output (4)\n\n  /*\n    Formats\n\n    No zonefile hash, and pay with BTC:\n\n    0    2  3                                  39\n    |----|--|----------------------------------|\n    magic op   name.ns_id (up to 37 bytes)\n\n\n    With zonefile hash, and pay with BTC:\n\n    0    2  3                                  39                  59\n    |----|--|----------------------------------|-------------------|\n    magic op   name.ns_id (37 bytes, 0-padded)     zone file hash\n\n    output 0: name registration code\n    output 1: owner address\n  */\n\n  let payload\n\n  if (!!burnTokenAmountHex && !valueHash) {\n    // empty value hash\n    valueHash = '0000000000000000000000000000000000000000'\n  }\n\n  if (!!valueHash) {\n    if (valueHash.length !== 40) {\n      throw new Error('Value hash length incorrect. Expecting 20-bytes, hex-encoded')\n    }\n    if (!!burnTokenAmountHex) {\n      if (burnTokenAmountHex.length !== 16) {\n        throw new Error('Burn field length incorrect.  Expecting 8-bytes, hex-encoded')\n      }\n    }\n\n    const payloadLen = burnTokenAmountHex ? 65 : 57\n    payload = Buffer.alloc(payloadLen, 0)\n    payload.write(fullyQualifiedName, 0, 37, 'ascii')\n    payload.write(valueHash, 37, 20, 'hex')\n    if (!!burnTokenAmountHex) {\n      payload.write(burnTokenAmountHex, 57, 8, 'hex')\n    }\n  } else {\n    payload = Buffer.from(fullyQualifiedName, 'ascii')\n  }\n\n  const opReturnBuffer = Buffer.concat([Buffer.from(opEncode(':'), 'ascii'), payload])\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(ownerAddress, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeRenewalSkeleton(\n  fullyQualifiedName: string, nextOwnerAddress: string, lastOwnerAddress: string,\n  burnAddress: string, burn: AmountType, valueHash: string = null\n) {\n  /*\n    Formats\n\n    No zonefile hash, and pay with BTC:\n\n    0    2  3                                  39\n    |----|--|----------------------------------|\n    magic op   name.ns_id (up to 37 bytes)\n\n\n    With zonefile hash, and pay with BTC:\n\n    0    2  3                                  39                  59\n    |----|--|----------------------------------|-------------------|\n    magic op   name.ns_id (37 bytes, 0-padded)     zone file hash\n\n\n   With renewal payment in a token:\n   (for register, tokens burned is not included)\n   (for renew, tokens burned is the number of tokens to burn)\n\n   0    2  3                                  39                  59                            67\n   |----|--|----------------------------------|-------------------|------------------------------|\n   magic op   name.ns_id (37 bytes, 0-padded)     zone file hash    tokens burned (big-endian)\n\n   output 0: renewal code\n   output 1: new owner address\n   output 2: current owner address\n   output 3: burn address\n  */\n  const burnAmount = asAmountV2(burn)\n  const network = config.network\n  const burnTokenAmount = burnAmount.units === 'BTC' ? null : burnAmount.amount\n  const burnBTCAmount = burnAmount.units === 'BTC' \n    ? burnAmount.amount.toNumber() : DUST_MINIMUM\n  \n  let burnTokenHex = null\n  if (!!burnTokenAmount) {\n    const burnHex = burnTokenAmount.toString(16, 2)\n    if (burnHex.length > 16) {\n      // exceeds 2**64; can't fit \n      throw new Error(`Cannot renew '${fullyQualifiedName}': cannot fit price into 8 bytes`)\n    }\n    burnTokenHex = `0000000000000000${burnHex}`.slice(-16)\n  }\n\n  const registerTX = makeRegisterSkeleton(\n    fullyQualifiedName, nextOwnerAddress, valueHash, burnTokenHex\n  )\n  const txB = TransactionBuilder.fromTransaction(\n    registerTX, network.layer1\n  )\n  txB.addOutput(lastOwnerAddress, DUST_MINIMUM)\n  txB.addOutput(burnAddress, burnBTCAmount)\n  return txB.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeTransferSkeleton(\n  fullyQualifiedName: string, consensusHash: string, newOwner: string,\n  keepZonefile: boolean = false\n): Transaction {\n  // Returns a transfer tx skeleton.\n  //   with 2 outputs : 1. the Blockstack Transfer OP_RETURN data\n  //                    2. the new owner with a DUST_MINIMUM value (5500 satoshi)\n  //\n  // You MUST make the first input a UTXO from the current OWNER\n  //\n  // Returns an unsigned serialized transaction.\n  /*\n    Format\n\n    0     2  3    4                   20              36\n    |-----|--|----|-------------------|---------------|\n    magic op keep  hash128(name.ns_id) consensus hash\n             data?\n\n    output 0: transfer code\n    output 1: new owner\n  */\n  const opRet = Buffer.alloc(36)\n  let keepChar = '~'\n  if (keepZonefile) {\n    keepChar = '>'\n  }\n\n  opRet.write(opEncode('>'), 0, 3, 'ascii')\n  opRet.write(keepChar, 3, 1, 'ascii')\n\n  const hashed = hash128(Buffer.from(fullyQualifiedName, 'ascii'))\n  hashed.copy(opRet, 4)\n  opRet.write(consensusHash, 20, 16, 'hex')\n\n  const opRetPayload = payments.embed({ data: [opRet] }).output\n\n  const tx = makeTXbuilder()\n\n  tx.addOutput(opRetPayload, 0)\n  tx.addOutput(newOwner, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeUpdateSkeleton(\n  fullyQualifiedName: string, consensusHash: string, valueHash: string\n): Transaction {\n  // Returns an update tx skeleton.\n  //   with 1 output : 1. the Blockstack update OP_RETURN\n  //\n  // You MUST make the first input a UTXO from the current OWNER\n  //\n  // Returns an unsigned serialized transaction.\n  //\n  // output 0: the revoke code\n  /*\n    Format:\n\n    0     2  3                                   19                      39\n    |-----|--|-----------------------------------|-----------------------|\n    magic op  hash128(name.ns_id,consensus hash) hash160(data)\n\n    output 0: update code\n  */\n\n  const opRet = Buffer.alloc(39)\n\n  const nameBuff = Buffer.from(fullyQualifiedName, 'ascii')\n  const consensusBuff = Buffer.from(consensusHash, 'ascii')\n\n  const hashedName = hash128(Buffer.concat(\n    [nameBuff, consensusBuff]\n  ))\n\n  opRet.write(opEncode('+'), 0, 3, 'ascii')\n  hashedName.copy(opRet, 3)\n  opRet.write(valueHash, 19, 20, 'hex')\n\n  const opRetPayload = payments.embed({ data: [opRet] }).output\n\n  const tx = makeTXbuilder()\n\n  tx.addOutput(opRetPayload, 0)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeRevokeSkeleton(fullyQualifiedName: string) {\n  // Returns a revoke tx skeleton\n  //    with 1 output: 1. the Blockstack revoke OP_RETURN\n  //\n  // You MUST make the first input a UTXO from the current OWNER\n  //\n  // Returns an unsigned serialized transaction\n  /*\n   Format:\n\n   0    2  3                             39\n   |----|--|-----------------------------|\n   magic op   name.ns_id (37 bytes)\n\n   output 0: the revoke code\n  */\n\n  const opRet = Buffer.alloc(3)\n\n  const nameBuff = Buffer.from(fullyQualifiedName, 'ascii')\n\n  opRet.write(opEncode('~'), 0, 3, 'ascii')\n\n  const opReturnBuffer = Buffer.concat([opRet, nameBuff])\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeNamespacePreorderSkeleton(\n  namespaceID: string, consensusHash: string, preorderAddress: string,\n  registerAddress: string, burn: AmountType\n): Transaction {\n  // Returns a namespace preorder tx skeleton.\n  // Returns an unsigned serialized transaction.\n  /*\n   Formats:\n\n   Without STACKS:\n\n   0     2   3                                      23               39\n   |-----|---|--------------------------------------|----------------|\n   magic op  hash(ns_id,script_pubkey,reveal_addr)   consensus hash\n\n\n   with STACKs:\n\n   0     2   3                                      23               39                         47\n   |-----|---|--------------------------------------|----------------|--------------------------|\n   magic op  hash(ns_id,script_pubkey,reveal_addr)   consensus hash    token fee (big-endian)\n\n   output 0: namespace preorder code\n   output 1: change address\n   otuput 2: burn address\n  */\n\n  const burnAmount = asAmountV2(burn)\n  if (burnAmount.units !== 'BTC' && burnAmount.units !== 'STACKS') {\n    throw new Error(`Invalid burnUnits ${burnAmount.units}`)\n  }\n\n  const network = config.network\n  const burnAddress = network.getDefaultBurnAddress()\n  const namespaceIDBuff = Buffer.from(decodeB40(namespaceID), 'hex') // base40\n  const scriptPublicKey = bjsAddress.toOutputScript(preorderAddress, network.layer1)\n  const registerBuff = Buffer.from(registerAddress, 'ascii')\n\n  const dataBuffers = [namespaceIDBuff, scriptPublicKey, registerBuff]\n  const dataBuff = Buffer.concat(dataBuffers)\n\n  const hashed = hash160(dataBuff)\n  \n  let btcBurnAmount = DUST_MINIMUM\n  let opReturnBufferLen = 39\n  if (burnAmount.units === 'STACKS') {\n    opReturnBufferLen = 47\n  } else {\n    btcBurnAmount = burnAmount.amount.toNumber()\n  }\n\n  const opReturnBuffer = Buffer.alloc(opReturnBufferLen)\n  opReturnBuffer.write(opEncode('*'), 0, 3, 'ascii')\n  hashed.copy(opReturnBuffer, 3)\n  opReturnBuffer.write(consensusHash, 23, 16, 'hex')\n\n  if (burnAmount.units === 'STACKS') {\n    const burnHex = burnAmount.amount.toString(16, 2)\n    const paddedBurnHex = `0000000000000000${burnHex}`.slice(-16)\n    opReturnBuffer.write(paddedBurnHex, 39, 8, 'hex')\n  }\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(preorderAddress, DUST_MINIMUM)\n  tx.addOutput(burnAddress, btcBurnAmount)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeNamespaceRevealSkeleton(\n  namespace: BlockstackNamespace, revealAddress: string\n) {\n  /*\n   Format:\n\n   0     2   3    7     8     9    10   11   12   13   14    15    16    17       18      20     39\n   |-----|---|----|-----|-----|----|----|----|----|----|-----|-----|-----|--------|-------|-------|\n   magic  op  life coeff. base 1-2  3-4  5-6  7-8  9-10 11-12 13-14 15-16 nonalpha version  ns ID\n                                                  bucket exponents        no-vowel\n                                                                          discounts\n   \n   output 0: namespace reveal code\n   output 1: reveal address\n  */\n  const hexPayload = namespace.toHexPayload()\n\n  const opReturnBuffer = Buffer.alloc(3 + hexPayload.length / 2)\n  opReturnBuffer.write(opEncode('&'), 0, 3, 'ascii')\n  opReturnBuffer.write(hexPayload, 3, hexPayload.length / 2, 'hex')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(revealAddress, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeNamespaceReadySkeleton(namespaceID: string) {\n  /*\n   Format:\n\n   0     2  3  4           23\n   |-----|--|--|------------|\n   magic op  .  ns_id\n\n   output 0: namespace ready code\n   */\n  const opReturnBuffer = Buffer.alloc(3 + namespaceID.length + 1)\n  opReturnBuffer.write(opEncode('!'), 0, 3, 'ascii')\n  opReturnBuffer.write(`.${namespaceID}`, 3, namespaceID.length + 1, 'ascii')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n\n  return tx.buildIncomplete()\n}\n\n\n// type bitcoin.payments.p2data bitcoin.payments.embed\n\n/**\n* @ignore\n*/\nexport function makeNameImportSkeleton(name: string, recipientAddr: string, zonefileHash: string) {\n  /*\n   Format:\n\n    0    2  3                             39\n    |----|--|-----------------------------|\n    magic op   name.ns_id (37 bytes)\n\n   Output 0: the OP_RETURN\n   Output 1: the recipient\n   Output 2: the zonefile hash\n */\n  if (zonefileHash.length !== 40) {\n    throw new Error('Invalid zonefile hash: must be 20 bytes hex-encoded')\n  }\n\n  const network = config.network\n  const opReturnBuffer = Buffer.alloc(3 + name.length)\n  opReturnBuffer.write(opEncode(';'), 0, 3, 'ascii')\n  opReturnBuffer.write(name, 3, name.length, 'ascii')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n\n  const tx = makeTXbuilder()\n  const zonefileHashB58 = bjsAddress.toBase58Check(\n    Buffer.from(zonefileHash, 'hex'), network.layer1.pubKeyHash\n  )\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(recipientAddr, DUST_MINIMUM)\n  tx.addOutput(zonefileHashB58, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeAnnounceSkeleton(messageHash: string) {\n  /*\n    Format:\n\n    0    2  3                             23\n    |----|--|-----------------------------|\n    magic op   message hash (160-bit)\n\n    output 0: the OP_RETURN\n  */\n  if (messageHash.length !== 40) {\n    throw new Error('Invalid message hash: must be 20 bytes hex-encoded')\n  }\n\n  const opReturnBuffer = Buffer.alloc(3 + messageHash.length / 2)\n  opReturnBuffer.write(opEncode('#'), 0, 3, 'ascii')\n  opReturnBuffer.write(messageHash, 3, messageHash.length / 2, 'hex')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeTokenTransferSkeleton(recipientAddress: string, consensusHash: string,\n                                          tokenType: string, tokenAmount: BN,\n                                          scratchArea: string\n) {\n  /*\n   Format:\n\n    0     2  3              19         38          46                        80\n    |-----|--|--------------|----------|-----------|-------------------------|\n    magic op  consensus_hash token_type amount (BE) scratch area\n                             (ns_id)\n\n    output 0: token transfer code\n    output 1: recipient address\n  */\n  if (scratchArea.length > 34) {\n    throw new Error('Invalid scratch area: must be no more than 34 bytes')\n  }\n\n  const opReturnBuffer = Buffer.alloc(46 + scratchArea.length)\n\n  const tokenTypeHex = Buffer.from(tokenType).toString('hex')\n  const tokenTypeHexPadded = `00000000000000000000000000000000000000${tokenTypeHex}`.slice(-38)\n\n  const tokenValueHex = tokenAmount.toString(16, 2)\n\n  if (tokenValueHex.length > 16) {\n    // exceeds 2**64; can't fit\n    throw new Error(`Cannot send tokens: cannot fit ${tokenAmount.toString()} into 8 bytes`)\n  }\n\n  const tokenValueHexPadded = `0000000000000000${tokenValueHex}`.slice(-16)\n\n  opReturnBuffer.write(opEncode('$'), 0, 3, 'ascii')\n  opReturnBuffer.write(consensusHash, 3, consensusHash.length / 2, 'hex')\n  opReturnBuffer.write(tokenTypeHexPadded, 19, tokenTypeHexPadded.length / 2, 'hex')\n  opReturnBuffer.write(tokenValueHexPadded, 38, tokenValueHexPadded.length / 2, 'hex')\n  opReturnBuffer.write(scratchArea, 46, scratchArea.length, 'ascii')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(recipientAddress, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","\nimport { GaiaHubConfig } from '../storage/hub'\nimport { InvalidStateError } from '../errors'\nimport { UserData } from './authApp'\n\nconst SESSION_VERSION = '1.0.0'\n\nexport interface SessionOptions {\n  coreNode?: string,\n  userData?: UserData,\n  transitKey?: string,\n  localStorageKey?: string,\n  storeOptions?: {\n    localStorageKey?: string\n  }\n}\n\n/**\n * @ignore\n */\nexport class SessionData {\n  version: string\n\n  transitKey?: string\n\n  // using this in place of\n  // window.localStorage.setItem(BLOCKSTACK_STORAGE_LABEL, JSON.stringify(userData))\n  userData?: UserData\n\n  constructor(options: SessionOptions) {\n    this.version = SESSION_VERSION\n    this.userData = options.userData\n    this.transitKey = options.transitKey\n  }\n\n  getGaiaHubConfig(): GaiaHubConfig {\n    return this.userData && this.userData.gaiaHubConfig\n  }\n\n  setGaiaHubConfig(config: GaiaHubConfig): void {\n    this.userData.gaiaHubConfig = config\n  }\n\n  static fromJSON(json: any): SessionData {\n    if (json.version !== SESSION_VERSION) {\n      throw new InvalidStateError(`JSON data version ${json.version} not supported by SessionData`)\n    }\n    const options: SessionOptions = {\n      coreNode: json.coreNode,\n      userData: json.userData,\n      transitKey: json.transitKey\n    }\n    return new SessionData(options)\n  }\n\n  toString(): string {\n    return JSON.stringify(this)\n  }\n}\n","\nimport { SessionData, SessionOptions } from './sessionData'\n// import { BLOCKSTACK_GAIA_HUB_LABEL } from '../storage/hub'\nimport {\n  LOCALSTORAGE_SESSION_KEY\n} from './authConstants'\nimport { NoSessionDataError } from '../errors'\n// import { Logger } from '../logger'\n\n/**\n * An abstract class representing the SessionDataStore interface.\n\n */\nexport class SessionDataStore {\n  constructor(sessionOptions?: SessionOptions) {\n    if (sessionOptions) {\n      const newSessionData = new SessionData(sessionOptions)\n      this.setSessionData(newSessionData)\n    }\n  }\n\n  getSessionData(): SessionData {\n    throw new Error('Abstract class')\n  }\n\n  /* eslint-disable */\n  setSessionData(session: SessionData): boolean {\n    throw new Error('Abstract class')\n  }\n\n  deleteSessionData(): boolean {\n    throw new Error('Abstract class')\n  }\n  /* eslint-enable */\n}\n\n/**\n * Stores session data in the instance of this class.\n * @ignore\n */\nexport class InstanceDataStore extends SessionDataStore {\n  sessionData?: SessionData\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions)\n    if (!this.sessionData) {\n      this.setSessionData(new SessionData({}))\n    }\n  }\n\n\n  getSessionData(): SessionData {\n    if (!this.sessionData) {\n      throw new NoSessionDataError('No session data was found.')\n    }\n    return this.sessionData\n  }\n\n  setSessionData(session: SessionData): boolean {\n    this.sessionData = session\n    return true\n  }\n\n  deleteSessionData(): boolean {\n    this.setSessionData(new SessionData({}))\n    return true\n  }\n}\n\n/**\n * Stores session data in browser a localStorage entry.\n * @ignore\n */\nexport class LocalStorageStore extends SessionDataStore {\n  key: string\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions)\n    if (sessionOptions\n      && sessionOptions.storeOptions\n      && sessionOptions.storeOptions.localStorageKey\n      && (typeof sessionOptions.storeOptions.localStorageKey === 'string')) {\n      this.key = sessionOptions.storeOptions.localStorageKey\n    } else {\n      this.key = LOCALSTORAGE_SESSION_KEY\n    }\n\n    const data = localStorage.getItem(this.key)\n    if (!data) {\n      const sessionData = new SessionData({})\n      this.setSessionData(sessionData)\n    }\n  }\n\n  getSessionData(): SessionData {\n    const data = localStorage.getItem(this.key)\n    if (!data) {\n      throw new NoSessionDataError('No session data was found in localStorage')\n    }\n    const dataJSON = JSON.parse(data)\n    return SessionData.fromJSON(dataJSON)\n  }\n\n  setSessionData(session: SessionData): boolean {\n    localStorage.setItem(this.key, session.toString())\n    return true\n  }\n\n  deleteSessionData(): boolean {\n    localStorage.removeItem(this.key)\n    this.setSessionData(new SessionData({}))\n    return true\n  }\n\n  // checkForLegacyDataAndMigrate(): Promise<SessionData> {\n  //   const legacyTransitKey = localStorage.getItem(BLOCKSTACK_APP_PRIVATE_KEY_LABEL)\n  //   const legacyGaiaConfig = localStorage.getItem(BLOCKSTACK_GAIA_HUB_LABEL)\n  //   const legacyUserData = localStorage.getItem(BLOCKSTACK_STORAGE_LABEL)\n  //\n  //\n  //   if (legacyTransitKey) {\n  //     localStorage.removeItem(BLOCKSTACK_APP_PRIVATE_KEY_LABEL)\n  //   }\n  //\n  //\n  //\n  // }\n}\n","import { AppConfig } from './appConfig'\nimport { SessionOptions } from './sessionData'\nimport {\n  LocalStorageStore,\n  SessionDataStore,\n  InstanceDataStore\n} from './sessionStore'\n\nimport * as authApp from './authApp'\nimport * as authMessages from './authMessages'\nimport * as storage from '../storage'\n\nimport {\n  nextHour\n} from '../utils'\nimport {\n  MissingParameterError,\n  InvalidStateError\n} from '../errors'\nimport { Logger } from '../logger'\nimport { GaiaHubConfig, connectToGaiaHub } from '../storage/hub'\nimport { BLOCKSTACK_DEFAULT_GAIA_HUB_URL, AuthScope } from './authConstants'\n\n\n/**\n * \n * Represents an instance of a signed in user for a particular app.\n *\n * A signed in user has access to two major pieces of information\n * about the user, the user's private key for that app and the location\n * of the user's gaia storage bucket for the app.\n *\n * A user can be signed in either directly through the interactive\n * sign in process or by directly providing the app private key.\n * \n\n * \n */\nexport class UserSession {\n  appConfig: AppConfig\n\n  store: SessionDataStore\n\n  /**\n   * Creates a UserSession object\n   * \n   * @param options \n   */\n  constructor(options?: {\n    appConfig?: AppConfig,\n    sessionStore?: SessionDataStore,\n    sessionOptions?: SessionOptions }) {\n    let runningInBrowser = true\n\n    if (typeof window === 'undefined' && typeof self === 'undefined') {\n      Logger.debug('UserSession: not running in browser')\n      runningInBrowser = false\n    }\n\n    if (options && options.appConfig) {\n      this.appConfig = options.appConfig\n    } else if (runningInBrowser) {\n      this.appConfig = new AppConfig()\n    } else {\n      throw new MissingParameterError('You need to specify options.appConfig')\n    }\n\n    if (options && options.sessionStore) {\n      this.store = options.sessionStore\n    } else if (runningInBrowser) {\n      if (options) {\n        this.store = new LocalStorageStore(options.sessionOptions)\n      } else {\n        this.store = new LocalStorageStore()\n      }\n    } else if (options) {\n      this.store = new InstanceDataStore(options.sessionOptions)\n    } else {\n      this.store = new InstanceDataStore()\n    }\n  }\n\n  \n  /**\n   * Generates an authentication request and redirects the user to the Blockstack\n   * browser to approve the sign in request.\n   *\n   * Please note that this requires that the web browser properly handles the\n   * `blockstack:` URL protocol handler.\n   *\n   * Most applications should use this\n   * method for sign in unless they require more fine grained control over how the\n   * authentication request is generated. If your app falls into this category,\n   * use [[generateAndStoreTransitKey]], [[makeAuthRequest]],\n   * and [[redirectToSignInWithAuthRequest]] to build your own sign in process.\n   * \n   * @param redirectURI Location of your application.\n   * @param manifestURI Location of the manifest.json file\n   * @param scopes Permissions requested by the application. Possible values are\n   *  `store_write` (default) or `publish_data`.\n   * \n   * @returns {void}\n   */\n  redirectToSignIn(\n    redirectURI?: string,\n    manifestURI?: string,\n    scopes?: Array<AuthScope | string>\n  ): void {\n    const transitKey = this.generateAndStoreTransitKey()\n    const authRequest = this.makeAuthRequest(transitKey, redirectURI, manifestURI, scopes)\n    const authenticatorURL = this.appConfig && this.appConfig.authenticatorURL\n    return authApp.redirectToSignInWithAuthRequest(authRequest, authenticatorURL)\n  }\n\n  /**\n   * Redirects the user to the Blockstack browser to approve the sign in request. \n   * To construct a request see the [[makeAuthRequest]] function.\n   *\n   * The user is redirected to the authenticator URL specified in the `AppConfig`\n   * if the `blockstack:` protocol handler is not detected.\n   * Please note that the protocol handler detection does not work on all browsers.\n   * \n   * @param authRequest A request string built by the [[makeAuthRequest]] function\n   * @param blockstackIDHost The ID of the Blockstack Browser application.\n   * \n   */\n  redirectToSignInWithAuthRequest(\n    authRequest?: string,\n    blockstackIDHost?: string\n  ): void {\n    authRequest = authRequest || this.makeAuthRequest()\n    const authenticatorURL = blockstackIDHost \n      || (this.appConfig && this.appConfig.authenticatorURL)\n    return authApp.redirectToSignInWithAuthRequest(authRequest, authenticatorURL)\n  }\n\n  /**\n   * Generates an authentication request that can be sent to the Blockstack\n   * browser for the user to approve sign in. This authentication request can\n   * then be used for sign in by passing it to the [[redirectToSignInWithAuthRequest]]\n   * method.\n   *\n   * *Note*: This method should only be used if you want to use a customized authentication\n   * flow. Typically, you'd use [[redirectToSignIn]] which is the default sign in method.\n   * \n   * @param transitKey A HEX encoded transit private key.\n   * @param redirectURI Location to redirect the user to after sign in approval.\n   * @param manifestURI Location of this app's manifest file.\n   * @param scopes The permissions this app is requesting. The default is `store_write`.\n   * @param appDomain The origin of the app.\n   * @param expiresAt The time at which this request is no longer valid.\n   * @param extraParams Any extra parameters to pass to the authenticator. Use this to \n   * pass options that aren't part of the Blockstack authentication specification, \n   * but might be supported by special authenticators.\n   * \n   * @returns {String} the authentication request\n   */\n  makeAuthRequest(\n    transitKey?: string,\n    redirectURI?: string,\n    manifestURI?: string,\n    scopes?: Array<AuthScope | string>,\n    appDomain?: string,\n    expiresAt: number = nextHour().getTime(),\n    extraParams: any = {}\n  ): string {\n    const appConfig = this.appConfig\n    if (!appConfig) {\n      throw new InvalidStateError('Missing AppConfig')\n    }\n    transitKey = transitKey || this.generateAndStoreTransitKey()\n    redirectURI = redirectURI || appConfig.redirectURI()\n    manifestURI = manifestURI || appConfig.manifestURI()\n    scopes = scopes || appConfig.scopes\n    appDomain = appDomain || appConfig.appDomain\n    return authMessages.makeAuthRequest(\n      transitKey, redirectURI, manifestURI,\n      scopes, appDomain, expiresAt, extraParams)\n  }\n\n  /**\n   * Generates a ECDSA keypair to\n   * use as the ephemeral app transit private key\n   * and store in the session.\n   * \n   * @returns {String} the hex encoded private key\n   *\n   */\n  generateAndStoreTransitKey(): string {\n    const sessionData = this.store.getSessionData()\n    const transitKey = authMessages.generateTransitKey()\n    sessionData.transitKey = transitKey\n    this.store.setSessionData(sessionData)\n    return transitKey\n  }\n\n  /**\n   * Retrieve the authentication token from the URL query.\n   * \n   * @returns {String} the authentication token if it exists otherwise `null`\n   */\n  getAuthResponseToken(): string {\n    return authApp.getAuthResponseToken()\n  }\n\n  /**\n   * Check if there is a authentication request that hasn't been handled.\n   * \n   * @returns{Boolean} `true` if there is a pending sign in, otherwise `false`\n   */\n  isSignInPending() {\n    return authApp.isSignInPending()\n  }\n\n  /**\n   * Check if a user is currently signed in.\n   * \n   * @returns {Boolean} `true` if the user is signed in, `false` if not.\n   */\n  isUserSignedIn() {\n    return !!this.store.getSessionData().userData\n  }\n\n  /**\n   * Try to process any pending sign in request by returning a `Promise` that resolves\n   * to the user data object if the sign in succeeds.\n   *\n   * @param {String} authResponseToken - the signed authentication response token\n   * @returns {Promise} that resolves to the user data object if successful and rejects\n   * if handling the sign in request fails or there was no pending sign in request.\n   */\n  handlePendingSignIn(authResponseToken: string = this.getAuthResponseToken()) {\n    const transitKey = this.store.getSessionData().transitKey\n    return authApp.handlePendingSignIn(undefined, authResponseToken, transitKey, this)\n  }\n\n  /**\n   * Retrieves the user data object. The user's profile is stored in the key [[Profile]].\n   * \n   * @returns {Object} User data object.\n   */\n  loadUserData() {\n    const userData = this.store.getSessionData().userData\n    if (!userData) {\n      throw new InvalidStateError('No user data found. Did the user sign in?')\n    }\n    return userData\n  }\n\n\n  /**\n   * Sign the user out and optionally redirect to given location.\n   * @param  redirectURL Location to redirect user to after sign out. \n   * Only used in environments with `window` available\n   */\n  signUserOut(redirectURL?: string) {\n    authApp.signUserOut(redirectURL, this)\n  }\n\n  /**\n   * Encrypts the data provided with the app public key.\n   * @param {String|Buffer} content  the data to encrypt\n   * @param {String} options.publicKey the hex string of the ECDSA public\n   * key to use for encryption. If not provided, will use user's appPrivateKey.\n   * \n   * @returns {String} Stringified ciphertext object \n   */\n  encryptContent(\n    content: string | Buffer,\n    options?: import('../storage').EncryptContentOptions\n  ): Promise<string> {\n    return storage.encryptContent(content, options, this)\n  }\n\n  /**\n   * Decrypts data encrypted with `encryptContent` with the\n   * transit private key.\n   * @param {String|Buffer} content - encrypted content.\n   * @param {String} options.privateKey - The hex string of the ECDSA private\n   * key to use for decryption. If not provided, will use user's appPrivateKey.\n   * @returns {String|Buffer} decrypted content.\n   */\n  decryptContent(content: string, options?: {privateKey?: string}): Promise<Buffer | string> {\n    return storage.decryptContent(content, options, this)\n  }\n\n  /**\n   * Stores the data provided in the app's data store to to the file specified.\n   * @param {String} path - the path to store the data in\n   * @param {String|Buffer} content - the data to store in the file\n   * @param options a [[PutFileOptions]] object\n   * \n   * @returns {Promise} that resolves if the operation succeed and rejects\n   * if it failed\n   */\n  putFile(\n    path: string,\n    content: string | Buffer | ArrayBufferView | Blob, \n    options?: import('../storage').PutFileOptions\n  ) {\n    return storage.putFile(path, content, options, this)\n  }\n\n  /**\n   * Retrieves the specified file from the app's data store.\n   * \n   * @param {String} path - the path to the file to read\n   * @param {Object} options a [[GetFileOptions]] object\n   * \n   * @returns {Promise} that resolves to the raw data in the file\n   * or rejects with an error\n   */\n  getFile(path: string, options?: import('../storage').GetFileOptions) {\n    return storage.getFile(path, options, this)\n  }\n\n  /**\n   * Get the URL for reading a file from an app's data store.\n   * \n   * @param {String} path - the path to the file to read\n   * \n   * @returns {Promise<string>} that resolves to the URL or rejects with an error\n   */\n  getFileUrl(path: string, options?: import('../storage').GetFileUrlOptions): Promise<string> {\n    return storage.getFileUrl(path, options, this)\n  }\n\n  /**\n   * List the set of files in this application's Gaia storage bucket.\n   * \n   * @param {function} callback - a callback to invoke on each named file that\n   * returns `true` to continue the listing operation or `false` to end it\n   * \n   * @returns {Promise} that resolves to the number of files listed\n   */\n  listFiles(callback: (name: string) => boolean): Promise<number> {\n    return storage.listFiles(callback, this)\n  }\n\n  /**\n   * Deletes the specified file from the app's data store. \n   * @param path - The path to the file to delete.\n   * @param options - Optional options object.\n   * @param options.wasSigned - Set to true if the file was originally signed\n   * in order for the corresponding signature file to also be deleted.\n   * @returns Resolves when the file has been removed or rejects with an error.\n   */\n  public deleteFile(path: string, options?: { wasSigned?: boolean }) {\n    return storage.deleteFile(path, options, this)\n  }\n\n\n  /**\n   *  @ignore\n   */\n  getOrSetLocalGaiaHubConnection(): Promise<GaiaHubConfig> {\n    const sessionData = this.store.getSessionData()\n    const userData = sessionData.userData\n    if (!userData) {\n      throw new InvalidStateError('Missing userData')\n    }\n    const hubConfig = userData.gaiaHubConfig\n    if (hubConfig) {\n      return Promise.resolve(hubConfig)\n    }\n    return this.setLocalGaiaHubConnection()\n  }\n\n  /**\n   * These two functions are app-specific connections to gaia hub,\n   *   they read the user data object for information on setting up\n   *   a hub connection, and store the hub config to localstorage\n   * @private\n   * @returns {Promise} that resolves to the new gaia hub connection\n   */\n  async setLocalGaiaHubConnection(): Promise<GaiaHubConfig> {\n    const userData = this.loadUserData()\n  \n    if (!userData) {\n      throw new InvalidStateError('Missing userData')\n    }\n  \n    if (!userData.hubUrl) {\n      userData.hubUrl = BLOCKSTACK_DEFAULT_GAIA_HUB_URL\n    }\n  \n    const gaiaConfig = await connectToGaiaHub(\n      userData.hubUrl,\n      userData.appPrivateKey,\n      userData.gaiaAssociationToken)\n\n    userData.gaiaHubConfig = gaiaConfig\n\n    const sessionData = this.store.getSessionData()\n    sessionData.userData.gaiaHubConfig = gaiaConfig\n    this.store.setSessionData(sessionData)\n\n    return gaiaConfig\n  }\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","import { ECPair } from 'bitcoinjs-lib'\nimport { decodeToken, SECP256K1Client, TokenSigner, TokenVerifier } from 'jsontokens'\nimport { TokenInterface } from 'jsontokens/lib/decode'\nimport { nextYear, makeUUID4 } from '../utils'\nimport { ecPairToAddress } from '../keys'\n\n/**\n  * Signs a profile token\n  * @param {Object} profile - the JSON of the profile to be signed\n  * @param {String} privateKey - the signing private key\n  * @param {Object} subject - the entity that the information is about\n  * @param {Object} issuer - the entity that is issuing the token\n  * @param {String} signingAlgorithm - the signing algorithm to use\n  * @param {Date} issuedAt - the time of issuance of the token\n  * @param {Date} expiresAt - the time of expiration of the token\n  * @returns {Object} - the signed profile token\n  * \n  */\nexport function signProfileToken(profile: any,\n                                 privateKey: string,\n                                 subject?: any,\n                                 issuer?: any,\n                                 signingAlgorithm = 'ES256K',\n                                 issuedAt = new Date(),\n                                 expiresAt = nextYear()): string {\n  if (signingAlgorithm !== 'ES256K') {\n    throw new Error('Signing algorithm not supported')\n  }\n\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey)\n\n  if (!subject) {\n    subject = { publicKey }\n  }\n\n  if (!issuer) {\n    issuer = { publicKey }\n  }\n\n  const tokenSigner = new TokenSigner(signingAlgorithm, privateKey)\n\n  const payload = {\n    jti: makeUUID4(),\n    iat: issuedAt.toISOString(),\n    exp: expiresAt.toISOString(),\n    subject,\n    issuer,\n    claim: profile\n  }\n\n  return tokenSigner.sign(payload)\n}\n\n/**\n  * Wraps a token for a profile token file\n  * @param {String} token - the token to be wrapped\n  * @returns {Object} - including `token` and `decodedToken`\n  */\nexport function wrapProfileToken(token: string) {\n  return {\n    token,\n    decodedToken: decodeToken(token)\n  }\n}\n\n/**\n  * Verifies a profile token\n  * @param {String} token - the token to be verified\n  * @param {String} publicKeyOrAddress - the public key or address of the\n  *   keypair that is thought to have signed the token\n  * @returns {Object} - the verified, decoded profile token\n  * @throws {Error} - throws an error if token verification fails\n  */\nexport function verifyProfileToken(token: string, publicKeyOrAddress: string): \n  TokenInterface {\n  const decodedToken = decodeToken(token)\n  const payload = decodedToken.payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  \n  // Inspect and verify the subject\n  if (payload.hasOwnProperty('subject')) {\n    if (!payload.subject.hasOwnProperty('publicKey')) {\n      throw new Error('Token doesn\\'t have a subject public key')\n    }\n  } else {\n    throw new Error('Token doesn\\'t have a subject')\n  }\n\n  // Inspect and verify the issuer\n  if (payload.hasOwnProperty('issuer')) {\n    if (!payload.issuer.hasOwnProperty('publicKey')) {\n      throw new Error('Token doesn\\'t have an issuer public key')\n    }\n  } else {\n    throw new Error('Token doesn\\'t have an issuer')\n  }\n\n  // Inspect and verify the claim\n  if (!payload.hasOwnProperty('claim')) {\n    throw new Error('Token doesn\\'t have a claim')\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const issuerPublicKey = (payload.issuer as Record<string, string>).publicKey as string\n  const publicKeyBuffer = Buffer.from(issuerPublicKey, 'hex')\n\n  const compressedKeyPair =  ECPair.fromPublicKey(publicKeyBuffer, { compressed: true })\n  const compressedAddress = ecPairToAddress(compressedKeyPair)\n  const uncompressedKeyPair = ECPair.fromPublicKey(publicKeyBuffer, { compressed: false })\n  const uncompressedAddress = ecPairToAddress(uncompressedKeyPair)\n\n  if (publicKeyOrAddress === issuerPublicKey) {\n    // pass\n  } else if (publicKeyOrAddress === compressedAddress) {\n    // pass\n  } else if (publicKeyOrAddress === uncompressedAddress) {\n    // pass\n  } else {\n    throw new Error('Token issuer public key does not match the verifying value')\n  }\n\n  const tokenVerifier = new TokenVerifier(decodedToken.header.alg, issuerPublicKey)\n  if (!tokenVerifier) {\n    throw new Error('Invalid token verifier')\n  }\n\n  const tokenVerified = tokenVerifier.verify(token)\n  if (!tokenVerified) {\n    throw new Error('Token verification failed')\n  }\n\n  return decodedToken\n}\n\n/**\n  * Extracts a profile from an encoded token and optionally verifies it,\n  * if `publicKeyOrAddress` is provided.\n  * @param {String} token - the token to be extracted\n  * @param {String} publicKeyOrAddress - the public key or address of the\n  *   keypair that is thought to have signed the token\n  * @returns {Object} - the profile extracted from the encoded token\n  * @throws {Error} - if the token isn't signed by the provided `publicKeyOrAddress`\n  */\nexport function extractProfile(token: string, publicKeyOrAddress: string | null = null): \n  Record<string, any> {\n  let decodedToken\n  if (publicKeyOrAddress) {\n    decodedToken = verifyProfileToken(token, publicKeyOrAddress)\n  } else {\n    decodedToken = decodeToken(token)\n  }\n\n  let profile = {}\n  if (decodedToken.hasOwnProperty('payload')) {\n    const payload = decodedToken.payload\n    if (typeof payload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n    if (payload.hasOwnProperty('claim')) {\n      profile = payload.claim\n    }\n  }\n\n  return profile\n}\n","import { sha256, sha512 } from 'sha.js'\nimport { getCryptoLib } from './cryptoUtils'\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash\n\nexport interface Sha2Hash {\n  digest(data: Buffer, algorithm?: 'sha256' | 'sha512'): Promise<Buffer>;\n}\n\nexport class NodeCryptoSha2Hash {\n  createHash: NodeCryptoCreateHash\n\n  constructor(createHash: NodeCryptoCreateHash) {\n    this.createHash = createHash\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    try {\n      const result = this.createHash(algorithm)\n        .update(data)\n        .digest()\n      return Promise.resolve(result)\n    } catch (error) {\n      console.log(error)\n      console.log(`Error performing ${algorithm} digest with Node.js 'crypto.createHash', falling back to JS implementation.`)\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data))\n    }\n  }\n}\n\nexport class WebCryptoSha2Hash implements Sha2Hash {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    let algo: string\n    if (algorithm === 'sha256') {\n      algo = 'SHA-256'\n    } else if (algorithm === 'sha512') {\n      algo = 'SHA-512'\n    } else {\n      throw new Error(`Unsupported hash algorithm ${algorithm}`)\n    }\n    try {\n      const hash = await this.subtleCrypto.digest(algo, data)\n      return Buffer.from(hash)\n    } catch (error) {\n      console.log(error)\n      console.log(`Error performing ${algorithm} digest with WebCrypto, falling back to JS implementation.`)\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data))\n    }\n  }\n}\n\nexport async function createSha2Hash(): Promise<Sha2Hash> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoSha2Hash(cryptoLib.lib)\n  } else {\n    return new NodeCryptoSha2Hash(cryptoLib.lib.createHash)\n  }\n}\n\nexport function hashSha256Sync(data: Buffer) {\n  const hash = new sha256()\n  hash.update(data)\n  return hash.digest()\n}\n\nexport function hashSha512Sync(data: Buffer) {\n  const hash = new sha512()\n  hash.update(data)\n  return hash.digest()\n}\n","var ERRORS = require('./errors')\nvar NATIVE = require('./native')\n\n// short-hand\nvar tfJSON = ERRORS.tfJSON\nvar TfTypeError = ERRORS.TfTypeError\nvar TfPropertyTypeError = ERRORS.TfPropertyTypeError\nvar tfSubError = ERRORS.tfSubError\nvar getValueTypeName = ERRORS.getValueTypeName\n\nvar TYPES = {\n  arrayOf: function arrayOf (type, options) {\n    type = compile(type)\n    options = options || {}\n\n    function _arrayOf (array, strict) {\n      if (!NATIVE.Array(array)) return false\n      if (NATIVE.Nil(array)) return false\n      if (options.minLength !== undefined && array.length < options.minLength) return false\n      if (options.maxLength !== undefined && array.length > options.maxLength) return false\n      if (options.length !== undefined && array.length !== options.length) return false\n\n      return array.every(function (value, i) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _arrayOf.toJSON = function () {\n      var str = '[' + tfJSON(type) + ']'\n      if (options.length !== undefined) {\n        str += '{' + options.length + '}'\n      } else if (options.minLength !== undefined || options.maxLength !== undefined) {\n        str += '{' +\n          (options.minLength === undefined ? 0 : options.minLength) + ',' +\n          (options.maxLength === undefined ? Infinity : options.maxLength) + '}'\n      }\n      return str\n    }\n\n    return _arrayOf\n  },\n\n  maybe: function maybe (type) {\n    type = compile(type)\n\n    function _maybe (value, strict) {\n      return NATIVE.Nil(value) || type(value, strict, maybe)\n    }\n    _maybe.toJSON = function () { return '?' + tfJSON(type) }\n\n    return _maybe\n  },\n\n  map: function map (propertyType, propertyKeyType) {\n    propertyType = compile(propertyType)\n    if (propertyKeyType) propertyKeyType = compile(propertyKeyType)\n\n    function _map (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      for (var propertyName in value) {\n        try {\n          if (propertyKeyType) {\n            typeforce(propertyKeyType, propertyName, strict)\n          }\n        } catch (e) {\n          throw tfSubError(e, propertyName, 'key')\n        }\n\n        try {\n          var propertyValue = value[propertyName]\n          typeforce(propertyType, propertyValue, strict)\n        } catch (e) {\n          throw tfSubError(e, propertyName)\n        }\n      }\n\n      return true\n    }\n\n    if (propertyKeyType) {\n      _map.toJSON = function () {\n        return '{' + tfJSON(propertyKeyType) + ': ' + tfJSON(propertyType) + '}'\n      }\n    } else {\n      _map.toJSON = function () { return '{' + tfJSON(propertyType) + '}' }\n    }\n\n    return _map\n  },\n\n  object: function object (uncompiled) {\n    var type = {}\n\n    for (var typePropertyName in uncompiled) {\n      type[typePropertyName] = compile(uncompiled[typePropertyName])\n    }\n\n    function _object (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      var propertyName\n\n      try {\n        for (propertyName in type) {\n          var propertyType = type[propertyName]\n          var propertyValue = value[propertyName]\n\n          typeforce(propertyType, propertyValue, strict)\n        }\n      } catch (e) {\n        throw tfSubError(e, propertyName)\n      }\n\n      if (strict) {\n        for (propertyName in value) {\n          if (type[propertyName]) continue\n\n          throw new TfPropertyTypeError(undefined, propertyName)\n        }\n      }\n\n      return true\n    }\n    _object.toJSON = function () { return tfJSON(type) }\n\n    return _object\n  },\n\n  anyOf: function anyOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _anyOf (value, strict) {\n      return types.some(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _anyOf.toJSON = function () { return types.map(tfJSON).join('|') }\n\n    return _anyOf\n  },\n\n  allOf: function allOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _allOf (value, strict) {\n      return types.every(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _allOf.toJSON = function () { return types.map(tfJSON).join(' & ') }\n\n    return _allOf\n  },\n\n  quacksLike: function quacksLike (type) {\n    function _quacksLike (value) {\n      return type === getValueTypeName(value)\n    }\n    _quacksLike.toJSON = function () { return type }\n\n    return _quacksLike\n  },\n\n  tuple: function tuple () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _tuple (values, strict) {\n      if (NATIVE.Nil(values)) return false\n      if (NATIVE.Nil(values.length)) return false\n      if (strict && (values.length !== types.length)) return false\n\n      return types.every(function (type, i) {\n        try {\n          return typeforce(type, values[i], strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _tuple.toJSON = function () { return '(' + types.map(tfJSON).join(', ') + ')' }\n\n    return _tuple\n  },\n\n  value: function value (expected) {\n    function _value (actual) {\n      return actual === expected\n    }\n    _value.toJSON = function () { return expected }\n\n    return _value\n  }\n}\n\n// TODO: deprecate\nTYPES.oneOf = TYPES.anyOf\n\nfunction compile (type) {\n  if (NATIVE.String(type)) {\n    if (type[0] === '?') return TYPES.maybe(type.slice(1))\n\n    return NATIVE[type] || TYPES.quacksLike(type)\n  } else if (type && NATIVE.Object(type)) {\n    if (NATIVE.Array(type)) {\n      if (type.length !== 1) throw new TypeError('Expected compile() parameter of type Array of length 1')\n      return TYPES.arrayOf(type[0])\n    }\n\n    return TYPES.object(type)\n  } else if (NATIVE.Function(type)) {\n    return type\n  }\n\n  return TYPES.value(type)\n}\n\nfunction typeforce (type, value, strict, surrogate) {\n  if (NATIVE.Function(type)) {\n    if (type(value, strict)) return true\n\n    throw new TfTypeError(surrogate || type, value)\n  }\n\n  // JIT\n  return typeforce(compile(type), value, strict)\n}\n\n// assign types to typeforce function\nfor (var typeName in NATIVE) {\n  typeforce[typeName] = NATIVE[typeName]\n}\n\nfor (typeName in TYPES) {\n  typeforce[typeName] = TYPES[typeName]\n}\n\nvar EXTRA = require('./extra')\nfor (typeName in EXTRA) {\n  typeforce[typeName] = EXTRA[typeName]\n}\n\ntypeforce.compile = compile\ntypeforce.TfTypeError = TfTypeError\ntypeforce.TfPropertyTypeError = TfPropertyTypeError\n\nmodule.exports = typeforce\n","\nimport { Transaction, script, ECPair } from 'bitcoinjs-lib'\nimport { TokenSigner } from 'jsontokens'\nimport { getBlockstackErrorFromResponse } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\nimport { getPublicKeyFromPrivate, ecPairToAddress, hexStringToECPair, } from '../keys'\nimport { Logger } from '../logger'\nimport { randomBytes } from '../encryption/cryptoRandom'\nimport { hashSha256Sync } from '../encryption/sha2Hash'\n\n/**\n * @ignore\n */\nexport const BLOCKSTACK_GAIA_HUB_LABEL = 'blockstack-gaia-hub-config'\n\n/**\n * The configuration for the user's Gaia storage provider.\n */\nexport interface GaiaHubConfig {\n  address: string,\n  url_prefix: string,\n  token: string,\n  max_file_upload_size_megabytes: number | undefined,\n  server: string\n}\n\ninterface UploadResponse {\n  publicURL: string,\n  etag?: string\n}\n\n/**\n * \n * @param filename \n * @param contents \n * @param hubConfig \n * @param contentType \n * \n * @ignore\n */\nexport async function uploadToGaiaHub(\n  filename: string, \n  contents: Blob | Buffer | ArrayBufferView | string,\n  hubConfig: GaiaHubConfig,\n  contentType: string = 'application/octet-stream',\n  newFile: boolean = true,\n  etag?: string\n): Promise<UploadResponse> {\n  Logger.debug(`uploadToGaiaHub: uploading ${filename} to ${hubConfig.server}`)\n\n  const headers: { [key: string]: string; } = {\n    'Content-Type': contentType,\n    Authorization: `bearer ${hubConfig.token}`\n  }\n\n  if (newFile) {\n    headers['If-None-Match'] = '*'\n  } else if (etag) {\n    headers['If-Match'] = etag\n  }\n\n  const response = await fetchPrivate(\n    `${hubConfig.server}/store/${hubConfig.address}/${filename}`, {\n      method: 'POST',\n      headers,\n      body: contents\n    }\n  )\n  if (!response.ok) {\n    throw await getBlockstackErrorFromResponse(response, 'Error when uploading to Gaia hub.', hubConfig)\n  }\n  const responseText = await response.text()\n  const responseJSON = JSON.parse(responseText)\n\n  return responseJSON\n}\n\nexport async function deleteFromGaiaHub(\n  filename: string,\n  hubConfig: GaiaHubConfig\n): Promise<void> {\n  Logger.debug(`deleteFromGaiaHub: deleting ${filename} from ${hubConfig.server}`)\n  const response = await fetchPrivate(\n    `${hubConfig.server}/delete/${hubConfig.address}/${filename}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `bearer ${hubConfig.token}`\n      }\n    }\n  )\n  if (!response.ok) {\n    throw await getBlockstackErrorFromResponse(response, 'Error deleting file from Gaia hub.', hubConfig)\n  }\n}\n\n/**\n * \n * @param filename \n * @param hubConfig \n * \n * @ignore\n */\nexport function getFullReadUrl(filename: string,\n                               hubConfig: GaiaHubConfig): Promise<string> {\n  return Promise.resolve(`${hubConfig.url_prefix}${hubConfig.address}/${filename}`)\n}\n\n/**\n * \n * @param challengeText \n * @param signerKeyHex \n * \n * @ignore\n */\nfunction makeLegacyAuthToken(challengeText: string, signerKeyHex: string): string {\n  // only sign specific legacy auth challenges.\n  let parsedChallenge\n  try {\n    parsedChallenge = JSON.parse(challengeText)\n  } catch (err) {\n    throw new Error('Failed in parsing legacy challenge text from the gaia hub.')\n  }\n  if (parsedChallenge[0] === 'gaiahub'\n      && parsedChallenge[3] === 'blockstack_storage_please_sign') {\n    const signer = hexStringToECPair(signerKeyHex\n                                     + (signerKeyHex.length === 64 ? '01' : ''))\n    const digest = hashSha256Sync(Buffer.from(challengeText))\n\n    const signatureBuffer = signer.sign(digest)\n    const signatureWithHash = script.signature.encode(\n      signatureBuffer, Transaction.SIGHASH_NONE)\n    \n    // We only want the DER encoding so remove the sighash version byte at the end.\n    // See: https://github.com/bitcoinjs/bitcoinjs-lib/issues/1241#issuecomment-428062912\n    const signature = signatureWithHash.toString('hex').slice(0, -2)\n    \n    const publickey = getPublicKeyFromPrivate(signerKeyHex)\n    const token = Buffer.from(JSON.stringify(\n      { publickey, signature }\n    )).toString('base64')\n    return token\n  } else {\n    throw new Error('Failed to connect to legacy gaia hub. If you operate this hub, please update.')\n  }\n}\n\n/**\n * \n * @param hubInfo \n * @param signerKeyHex \n * @param hubUrl \n * @param associationToken \n * \n * @ignore\n */\nfunction makeV1GaiaAuthToken(hubInfo: any,\n                             signerKeyHex: string,\n                             hubUrl: string,\n                             associationToken?: string): string {\n  const challengeText = hubInfo.challenge_text\n  const handlesV1Auth = (hubInfo.latest_auth_version\n                         && parseInt(hubInfo.latest_auth_version.slice(1), 10) >= 1)\n  const iss = getPublicKeyFromPrivate(signerKeyHex)\n\n  if (!handlesV1Auth) {\n    return makeLegacyAuthToken(challengeText, signerKeyHex)\n  }\n\n  const salt = randomBytes(16).toString('hex')\n  const payload = {\n    gaiaChallenge: challengeText,\n    hubUrl,\n    iss,\n    salt,\n    associationToken\n  }\n  const token = new TokenSigner('ES256K', signerKeyHex).sign(payload)\n  return `v1:${token}`\n}\n\n/**\n * \n * @ignore\n */\nexport async function connectToGaiaHub(\n  gaiaHubUrl: string,\n  challengeSignerHex: string,\n  associationToken?: string\n): Promise<GaiaHubConfig> {\n  Logger.debug(`connectToGaiaHub: ${gaiaHubUrl}/hub_info`)\n\n  const response = await fetchPrivate(`${gaiaHubUrl}/hub_info`)\n  const hubInfo = await response.json()\n  const readURL = hubInfo.read_url_prefix\n  const token = makeV1GaiaAuthToken(hubInfo, challengeSignerHex, gaiaHubUrl, associationToken)\n  const address = ecPairToAddress(hexStringToECPair(challengeSignerHex\n                                    + (challengeSignerHex.length === 64 ? '01' : '')))\n  return {\n    url_prefix: readURL,\n    max_file_upload_size_megabytes: hubInfo.max_file_upload_size_megabytes,\n    address,\n    token,\n    server: gaiaHubUrl\n  }\n}\n\n/**\n * \n * @param gaiaHubUrl \n * @param appPrivateKey \n * \n * @ignore\n */\nexport async function getBucketUrl(gaiaHubUrl: string, appPrivateKey: string): Promise<string> {\n  const challengeSigner = ECPair.fromPrivateKey(Buffer.from(appPrivateKey, 'hex'))\n  const response = await fetchPrivate(`${gaiaHubUrl}/hub_info`)\n  const responseText = await response.text()\n  const responseJSON = JSON.parse(responseText)\n  const readURL = responseJSON.read_url_prefix\n  const address = ecPairToAddress(challengeSigner)\n  const bucketUrl = `${readURL}${address}/`\n  return bucketUrl\n}\n","import { ec as EllipticCurve } from 'elliptic'\nimport * as BN from 'bn.js'\nimport { randomBytes } from './cryptoRandom'\nimport { FailedDecryptionError } from '../errors'\nimport { getPublicKeyFromPrivate } from '../keys'\nimport { hashSha256Sync, hashSha512Sync } from './sha2Hash'\nimport { createHmacSha256 } from './hmacSha256'\nimport { createCipher } from './aesCipher'\nimport { getAesCbcOutputLength, getBase64OutputLength } from '../utils'\n\nconst ecurve = new EllipticCurve('secp256k1')\n\n/**\n * Controls how the encrypted data buffer will be encoded as a string in the JSON payload. \n * Options: \n *    `hex` -- the legacy default, file size increase 100% (2x). \n *    `base64` -- file size increased ~33%. \n * @ignore\n */\nexport type CipherTextEncoding = 'hex' | 'base64'\n\n/**\n * @ignore\n */\nexport type CipherObject = {\n  iv: string,\n  ephemeralPK: string,\n  cipherText: string,\n  /** If undefined then hex encoding is used for the `cipherText` string. */\n  cipherTextEncoding?: CipherTextEncoding,\n  mac: string,\n  wasString: boolean\n}\n\n/**\n * @ignore\n */\nexport type SignedCipherObject = {\n  /** Hex encoded DER signature (up to 144 chars) */\n  signature: string,\n  /** Hex encoded public key (66 char length) */\n  publicKey: string,\n  /** The stringified json of a `CipherObject` */\n  cipherText: string\n}\n\n/**\n* @ignore\n*/\nexport async function aes256CbcEncrypt(iv: Buffer, \n                                       key: Buffer, \n                                       plaintext: Buffer\n): Promise<Buffer> {\n  const cipher = await createCipher()\n  const result = await cipher.encrypt('aes-256-cbc', key, iv, plaintext)\n  return result\n}\n\n/**\n* @ignore\n*/\nasync function aes256CbcDecrypt(iv: Buffer, key: Buffer, ciphertext: Buffer): Promise<Buffer> {\n  const cipher = await createCipher()\n  const result = await cipher.decrypt('aes-256-cbc', key, iv, ciphertext)\n  return result\n}\n\n/**\n* @ignore\n*/\nasync function hmacSha256(key: Buffer, content: Buffer) {\n  const hmacSha256 = await createHmacSha256()\n  return hmacSha256.digest(key, content)\n}\n\n/**\n* @ignore\n*/\nfunction equalConstTime(b1: Buffer, b2: Buffer) {\n  if (b1.length !== b2.length) {\n    return false\n  }\n  let res = 0\n  for (let i = 0; i < b1.length; i++) {\n    res |= b1[i] ^ b2[i]  // jshint ignore:line\n  }\n  return res === 0\n}\n\n/**\n* @ignore\n*/\nfunction sharedSecretToKeys(sharedSecret: Buffer): { encryptionKey: Buffer; hmacKey: Buffer; } {\n  // generate mac and encryption key from shared secret\n  const hashedSecret = hashSha512Sync(sharedSecret)\n  return {\n    encryptionKey: hashedSecret.slice(0, 32),\n    hmacKey: hashedSecret.slice(32)\n  }\n}\n\n/**\n * Hex encodes a 32-byte BN.js instance. \n * The result string is zero padded and always 64 characters in length. \n * @ignore\n */\nexport function getHexFromBN(bnInput: BN): string {\n  const hexOut = bnInput.toString('hex', 64)\n  if (hexOut.length === 64) {\n    return hexOut\n  } else if (hexOut.length < 64) {\n    // pad with leading zeros\n    // the padStart function would require node 9\n    const padding = '0'.repeat(64 - hexOut.length)\n    return `${padding}${hexOut}`\n  } else {\n    throw new Error('Generated a > 32-byte BN for encryption. Failing.')\n  }\n}\n\n/**\n * Returns a big-endian encoded 32-byte BN.js instance. \n * The result Buffer is zero padded and always 32 bytes in length. \n * @ignore \n */\nexport function getBufferFromBN(bnInput: BN): Buffer {\n  const result = bnInput.toArrayLike(Buffer, 'be', 32)\n  if (result.byteLength !== 32) {\n    throw new Error('Generated a 32-byte BN for encryption. Failing.')\n  }\n  return result\n}\n\n/**\n * Get details about the JSON envelope size overhead for ciphertext payloads. \n * @ignore\n */\nexport function getCipherObjectWrapper(opts: { \n  wasString: boolean, \n  cipherTextEncoding: CipherTextEncoding,\n}): {\n  /** The stringified JSON string of an empty `CipherObject`. */\n  payloadShell: string,\n  /** Total string length of all the `CipherObject` values that always have constant lengths. */\n  payloadValuesLength: number,\n } {\n  // Placeholder structure of the ciphertext payload, used to determine the \n  // stringified JSON overhead length. \n  const shell: CipherObject = {\n    iv: '', \n    ephemeralPK: '',\n    mac: '',\n    cipherText: '',\n    wasString: !!opts.wasString,\n  }\n  if (opts.cipherTextEncoding === 'base64') {\n    shell.cipherTextEncoding = 'base64'\n  }\n  // Hex encoded 16 byte buffer.\n  const ivLength = 32\n  // Hex encoded, compressed EC pubkey of 33 bytes.\n  const ephemeralPKLength = 66\n  // Hex encoded 32 byte hmac-sha256.\n  const macLength = 64\n  return  {\n    payloadValuesLength: ivLength + ephemeralPKLength + macLength,\n    payloadShell: JSON.stringify(shell)\n  }\n}\n\n/**\n * Get details about the JSON envelope size overhead for signed ciphertext payloads. \n * @param payloadShell - The JSON stringified empty `CipherObject`\n * @ignore\n */\nexport function getSignedCipherObjectWrapper(payloadShell: string): {\n  /** The stringified JSON string of an empty `SignedCipherObject`. */\n  signedPayloadValuesLength: number;\n  /** Total string length of all the `SignedCipherObject` values \n   * that always have constant lengths */\n  signedPayloadShell: string;\n} {\n  // Placeholder structure of the signed ciphertext payload, used to determine the \n  // stringified JSON overhead length. \n  const shell: SignedCipherObject = {\n    signature: '',\n    publicKey: '',\n    cipherText: payloadShell\n  }\n  // Hex encoded DER signature, up to 72 byte length. \n  const signatureLength = 144\n  // Hex encoded 33 byte public key.\n  const publicKeyLength = 66\n  return {\n    signedPayloadValuesLength: signatureLength + publicKeyLength,\n    signedPayloadShell: JSON.stringify(shell)\n  }\n}\n\n/**\n * Fast function that determines the final ASCII string byte length of the \n * JSON stringified ECIES encrypted payload. \n * @ignore\n */\nexport function eciesGetJsonStringLength(opts: { \n  contentLength: number, \n  wasString: boolean, \n  sign: boolean, \n  cipherTextEncoding: CipherTextEncoding\n}): number {\n  const { payloadShell, payloadValuesLength } = getCipherObjectWrapper(opts)\n\n  // Calculate the AES output length given the input length. \n  const cipherTextLength = getAesCbcOutputLength(opts.contentLength)\n\n  // Get the encoded string length of the cipherText. \n  let encodedCipherTextLength: number\n  if (!opts.cipherTextEncoding || opts.cipherTextEncoding === 'hex') {\n    encodedCipherTextLength = (cipherTextLength * 2)\n  } else if (opts.cipherTextEncoding === 'base64') {\n    encodedCipherTextLength = getBase64OutputLength(cipherTextLength)\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${opts.cipherTextEncoding}\"`)\n  }\n  \n  if (!opts.sign) {\n    // Add the length of the JSON envelope, ciphertext length, and length of const values.\n    return payloadShell.length \n      + payloadValuesLength \n      + encodedCipherTextLength\n  } else {\n    // Get the signed version of the JSON envelope\n    const { \n      signedPayloadShell, \n      signedPayloadValuesLength \n    } = getSignedCipherObjectWrapper(payloadShell)\n    // Add length of the JSON envelope, ciphertext length, and length of the const values. \n    return signedPayloadShell.length \n      + signedPayloadValuesLength \n      + payloadValuesLength \n      + encodedCipherTextLength\n  }\n}\n\n/**\n * Encrypt content to elliptic curve publicKey using ECIES\n * @param publicKey - secp256k1 public key hex string\n * @param content - content to encrypt\n * @return Object containing:\n *  iv (initialization vector, hex encoding), \n *  cipherText (cipher text either hex or base64 encoded), \n *  mac (message authentication code, hex encoded), \n *  ephemeral public key (hex encoded), \n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @private\n * @ignore\n */\nexport async function encryptECIES(publicKey: string, \n                                   content: Buffer, \n                                   wasString: boolean, \n                                   cipherTextEncoding?: CipherTextEncoding): \n  Promise<CipherObject> {\n  const ecPK = ecurve.keyFromPublic(publicKey, 'hex').getPublic()\n  const ephemeralSK = ecurve.genKeyPair()\n  const ephemeralPK = Buffer.from(ephemeralSK.getPublic().encodeCompressed())\n  const sharedSecret = ephemeralSK.derive(ecPK) as BN\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret)\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer)\n\n  const initializationVector = randomBytes(16)\n\n  const cipherText = await aes256CbcEncrypt(\n    initializationVector, sharedKeys.encryptionKey, content\n  )\n\n  const macData = Buffer.concat([initializationVector,\n                                 ephemeralPK,\n                                 cipherText])\n  const mac = await hmacSha256(sharedKeys.hmacKey, macData)\n\n  let cipherTextString: string\n  if (!cipherTextEncoding || cipherTextEncoding === 'hex') {\n    cipherTextString = cipherText.toString('hex') \n  } else if (cipherTextEncoding === 'base64') {\n    cipherTextString = cipherText.toString('base64')\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherTextEncoding}\"`)\n  }\n  \n  const result: CipherObject = {\n    iv: initializationVector.toString('hex'),\n    ephemeralPK: ephemeralPK.toString('hex'),\n    cipherText: cipherTextString,\n    mac: mac.toString('hex'),\n    wasString: !!wasString\n  }\n  if (cipherTextEncoding && cipherTextEncoding !== 'hex') {\n    result.cipherTextEncoding = cipherTextEncoding\n  }\n  return result\n}\n\n/**\n * Decrypt content encrypted using ECIES\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} cipherObject - object to decrypt, should contain:\n *  iv (initialization vector), cipherText (cipher text),\n *  mac (message authentication code), ephemeralPublicKey\n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @return {Buffer} plaintext\n * @throws {FailedDecryptionError} if unable to decrypt\n * @private\n * @ignore\n */\nexport async function decryptECIES(privateKey: string, cipherObject: CipherObject): \n  Promise<Buffer | string> {\n  const ecSK = ecurve.keyFromPrivate(privateKey, 'hex')\n  let ephemeralPK = null\n  try {\n    ephemeralPK = ecurve.keyFromPublic(cipherObject.ephemeralPK, 'hex').getPublic()\n  } catch (error) {\n    throw new FailedDecryptionError('Unable to get public key from cipher object. '\n      + 'You might be trying to decrypt an unencrypted object.')\n  }\n\n  const sharedSecret = ecSK.derive(ephemeralPK) as BN\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret)\n\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer)\n\n  const ivBuffer = Buffer.from(cipherObject.iv, 'hex')\n  let cipherTextBuffer: Buffer\n\n  if (!cipherObject.cipherTextEncoding || cipherObject.cipherTextEncoding === 'hex') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'hex')\n  } else if (cipherObject.cipherTextEncoding === 'base64') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'base64')\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherObject.cipherText}\"`)\n  }\n\n  const macData = Buffer.concat([ivBuffer,\n                                 Buffer.from(ephemeralPK.encodeCompressed()),\n                                 cipherTextBuffer])\n  const actualMac = await hmacSha256(sharedKeys.hmacKey, macData)\n  const expectedMac = Buffer.from(cipherObject.mac, 'hex')\n  if (!equalConstTime(expectedMac, actualMac)) {\n    throw new FailedDecryptionError('Decryption failed: failure in MAC check')\n  }\n  const plainText = await aes256CbcDecrypt(\n    ivBuffer, sharedKeys.encryptionKey, cipherTextBuffer\n  )\n\n  if (cipherObject.wasString) {\n    return plainText.toString()\n  } else {\n    return plainText\n  }\n}\n\n/**\n * Sign content using ECDSA\n *\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} content - content to sign\n * @return {Object} contains:\n * signature - Hex encoded DER signature\n * public key - Hex encoded private string taken from privateKey\n * @private\n * @ignore\n */\nexport function signECDSA(privateKey: string, content: string | Buffer): { \n  publicKey: string, signature: string \n} {\n  const contentBuffer = content instanceof Buffer ? content : Buffer.from(content)\n  const ecPrivate = ecurve.keyFromPrivate(privateKey, 'hex')\n  const publicKey = getPublicKeyFromPrivate(privateKey)\n  const contentHash = hashSha256Sync(contentBuffer)\n  const signature = ecPrivate.sign(contentHash)\n  const signatureString: string = signature.toDER('hex')\n  return {\n    signature: signatureString,\n    publicKey\n  }\n}\n\n/**\n* @ignore\n*/\nfunction getBuffer(content: string | ArrayBuffer | Buffer) {\n  if (content instanceof Buffer) return content\n  else if (content instanceof ArrayBuffer) return Buffer.from(content)\n  else return Buffer.from(content)\n}\n\n/**\n * Verify content using ECDSA\n * @param {String | Buffer} content - Content to verify was signed\n * @param {String} publicKey - secp256k1 private key hex string\n * @param {String} signature - Hex encoded DER signature\n * @return {Boolean} returns true when signature matches publickey + content, false if not\n * @private\n * @ignore\n */\nexport function verifyECDSA(\n  content: string | ArrayBuffer | Buffer,\n  publicKey: string,\n  signature: string): boolean {\n  const contentBuffer = getBuffer(content)\n  const ecPublic = ecurve.keyFromPublic(publicKey, 'hex')\n  const contentHash = hashSha256Sync(contentBuffer)\n\n  return ecPublic.verify(contentHash, <any>signature)\n}\n","\nimport * as queryString from 'query-string'\nimport { decodeToken } from 'jsontokens'\nimport { verifyAuthResponse } from './authVerification'\nimport { isLaterVersion, getGlobalObject, getGlobalObjects } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\nimport { getAddressFromDID } from '../dids'\nimport { LoginFailedError } from '../errors'\nimport { decryptPrivateKey, makeAuthRequest } from './authMessages'\nimport {\n  BLOCKSTACK_DEFAULT_GAIA_HUB_URL,\n  DEFAULT_BLOCKSTACK_HOST,\n  NAME_LOOKUP_PATH,\n  AuthScope\n} from './authConstants'\nimport { extractProfile } from '../profiles/profileTokens'\nimport { UserSession } from './userSession'\nimport { config } from '../config'\nimport { Logger } from '../logger'\nimport { GaiaHubConfig } from '../storage/hub'\nimport { protocolEchoReplyDetection } from './protocolEchoDetection'\nimport { launchCustomProtocol } from './protocolLaunch'\nimport { hexStringToECPair } from '../keys'\n\n\nconst DEFAULT_PROFILE = {\n  '@type': 'Person',\n  '@context': 'http://schema.org'\n}\n\n/**\n *  Returned from the [[UserSession.loadUserData]] function.\n */\nexport interface UserData {\n  // public: the blockstack ID (for example: stackerson.id or alice.blockstack.id)\n  username: string;\n  // public: the email address for the user. only available if the `email` \n  // scope is requested, and if the user has entered a valid email into \n  // their profile. \n  //\n  // **Note**: Blockstack does not require email validation \n  // for users for privacy reasons and blah blah (something like this, idk)\n  email?: string;\n  // probably public: (a quick description of what this is, and a link to the\n  // DID foundation and/or the blockstack docs related to DID, idk)\n  decentralizedID: string;\n  // probably private: looks like it happens to be the btc address but idk\n  // the value of establishing this as a supported field\n  identityAddress: string;\n  // probably public: this is an advanced feature, I think many app devs \n  // using our more advanced encryption functions (as opposed to putFile/getFile), \n  // are probably using this. seems useful to explain. \n  appPrivateKey: string;\n  // maybe public: possibly useful for advanced devs / webapps. I see an opportunity\n  // to make a small plug about \"user owned data\" here, idk. \n  hubUrl: string;\n  coreNode: string;\n  // maybe private: this would be an advanced field for app devs to use. \n  authResponseToken: string;\n  // private: does not get sent to webapp at all.\n  coreSessionToken?: string;\n  // private: does not get sent to webapp at all.\n  gaiaAssociationToken?: string;\n  // public: this is the proper `Person` schema json for the user. \n  // This is the data that gets used when the `new blockstack.Person(profile)` class is used.\n  profile: any;\n  // private: does not get sent to webapp at all.\n  gaiaHubConfig?: GaiaHubConfig;\n}\n\n/**\n * @deprecated \n * #### v19 Use [[UserSession.isUserSignedIn]] instead.\n * \n * Check if a user is currently signed in.\n * @return {Boolean} `true` if the user is signed in, `false` if not.\n */\nexport function isUserSignedIn() {\n  console.warn('DEPRECATION WARNING: The static isUserSignedIn() function will be deprecated in '\n    + 'the next major release of blockstack.js. Create an instance of UserSession and call the '\n    + 'instance method isUserSignedIn().')\n  const userSession = new UserSession()\n  return userSession.isUserSignedIn()\n}\n\n/**\n *\n * \n * @deprecated \n * #### v19 Use [[UserSession.isUserSignedIn]] instead.\n * \n * Generates an authentication request and redirects the user to the Blockstack\n * browser to approve the sign in request.\n * \n * Please note that this requires that the web browser properly handles the\n * `blockstack:` URL protocol handler.\n *\n * Most applications should use this\n * method for sign in unless they require more fine grained control over how the\n * authentication request is generated. If your app falls into this category,\n * use `makeAuthRequest` and `redirectToSignInWithAuthRequest` to build your own sign in process.\n *\n * @param {String} [redirectURI=`${window.location.origin}/`]\n * The location to which the identity provider will redirect the user after\n * the user approves sign in.\n * @param  {String} [manifestURI=`${window.location.origin}/manifest.json`]\n * Location of the manifest file.\n * @param  {Array} [scopes=DEFAULT_SCOPE] Defaults to requesting write access to\n * this app's data store.\n * An array of strings indicating which permissions this app is requesting.\n * @return {void}\n */\nexport function redirectToSignIn(redirectURI?: string, \n                                 manifestURI?: string, \n                                 scopes?: Array<AuthScope | string>): void { \n  console.warn('DEPRECATION WARNING: The static redirectToSignIn() function will be deprecated in the '\n    + 'next major release of blockstack.js. Create an instance of UserSession and call the '\n    + 'instance method redirectToSignIn().')\n  const authRequest = makeAuthRequest(null, redirectURI, manifestURI, scopes)\n  return redirectToSignInWithAuthRequest(authRequest)\n}\n\n/**\n * @deprecated \n * #### v19 Use [[UserSession.isSignInPending]] instead. \n *\n * Check if there is a authentication request that hasn't been handled. \n *\n * Also checks for a protocol echo reply (which if detected then the page\n * will be automatically redirected after this call). \n * \n * @return {Boolean} `true` if there is a pending sign in, otherwise `false`\n */\nexport function isSignInPending() {\n  try {\n    const isProtocolEcho = protocolEchoReplyDetection()\n    if (isProtocolEcho) {\n      Logger.info('protocolEchoReply detected from isSignInPending call, the page is about to redirect.')\n      return true\n    }\n  } catch (error) {\n    Logger.error(`Error checking for protocol echo reply isSignInPending: ${error}`)\n  }\n  \n  return !!getAuthResponseToken()\n}\n\n/**\n * @deprecated \n * #### v19 Use [[UserSession.getAuthResponseToken]] instead. \n *\n * Retrieve the authentication token from the URL query\n * @return {String} the authentication token if it exists otherwise `null`\n */\nexport function getAuthResponseToken(): string {\n  const search = getGlobalObject(\n    'location', \n    { throwIfUnavailable: true, usageDesc: 'getAuthResponseToken' }\n  ).search\n  const queryDict = queryString.parse(search)\n  return queryDict.authResponse ? <string>queryDict.authResponse : ''\n}\n\n/** \n * @deprecated \n * #### v19 Use [[UserSession.loadUserData]] instead.\n *\n * Retrieves the user data object. The user's profile is stored in the key `profile`.\n * @return {Object} User data object.\n*/\nexport function loadUserData() {\n  console.warn('DEPRECATION WARNING: The static loadUserData() function will be deprecated in the '\n    + 'next major release of blockstack.js. Create an instance of UserSession and call the '\n    + 'instance method loadUserData().')\n  const userSession = new UserSession()\n  return userSession.loadUserData()\n}\n\n/** \n * @deprecated \n * #### v19 Use [[UserSession.signUserOut]] instead.\n *\n * Sign the user out and optionally redirect to given location.\n * @param  redirectURL\n * Location to redirect user to after sign out. \n * Only used in environments with `window` available\n */\nexport function signUserOut(redirectURL?: string, caller?: UserSession) {\n  const userSession = caller || new UserSession()\n  userSession.store.deleteSessionData()\n  if (redirectURL) {\n    getGlobalObject(\n      'location', \n      { throwIfUnavailable: true, usageDesc: 'signUserOut' }\n    ).href = redirectURL\n  } \n}\n\n/** \n * @deprecated \n * #### v19 Use [[UserSession.redirectToSignInWithAuthRequest]] instead.\n *\n * Redirects the user to the Blockstack browser to approve the sign in request\n * given.\n *\n * The user is redirected to the `blockstackIDHost` if the `blockstack:`\n * protocol handler is not detected. Please note that the protocol handler detection\n * does not work on all browsers.\n * @param  {String} authRequest - the authentication request generated by `makeAuthRequest`\n * @param  {String} blockstackIDHost - the URL to redirect the user to if the blockstack\n *                                     protocol handler is not detected\n * @return {void}\n */\nexport function redirectToSignInWithAuthRequest(\n  authRequest?: string,\n  blockstackIDHost: string = DEFAULT_BLOCKSTACK_HOST,\n): void {\n  authRequest = authRequest || makeAuthRequest()\n  const httpsURI = `${blockstackIDHost}?authRequest=${authRequest}`\n\n  const { navigator, location } = getGlobalObjects(\n    ['navigator', 'location'],\n    { throwIfUnavailable: true, usageDesc: 'redirectToSignInWithAuthRequest' }\n  )\n\n  // If they're on a mobile OS, always redirect them to HTTPS site\n  if (/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)) {\n    Logger.info('detected mobile OS, sending to https')\n    location.href = httpsURI\n    return\n  }\n\n  function successCallback() {\n    Logger.info('protocol handler detected')\n    // The detection function should open the link for us\n  }\n\n  function failCallback() {\n    Logger.warn('protocol handler not detected')\n    location.href = httpsURI\n  }\n\n  launchCustomProtocol(authRequest, successCallback, failCallback)\n}\n\n/** \n * @deprecated \n * #### v19 Use [[UserSession.handlePendingSignIn]] instead.\n *\n * Try to process any pending sign in request by returning a `Promise` that resolves\n * to the user data object if the sign in succeeds.\n *\n * @param {String} nameLookupURL - the endpoint against which to verify public\n * keys match claimed username\n * @param {String} authResponseToken - the signed authentication response token\n * @param {String} transitKey - the transit private key that corresponds to the transit public key\n * that was provided in the authentication request\n * @return {Promise} that resolves to the user data object if successful and rejects\n * if handling the sign in request fails or there was no pending sign in request.\n */\nexport async function handlePendingSignIn(\n  nameLookupURL: string = '', \n  authResponseToken: string = getAuthResponseToken(), \n  transitKey?: string,\n  caller?: UserSession\n): Promise<UserData> {\n  try {\n    const isProtocolEcho = protocolEchoReplyDetection()\n    if (isProtocolEcho) {\n      const msg = 'handlePendingSignIn called while protocolEchoReply was detected, and ' \n        + 'the page is about to redirect. This function will resolve with an error after '\n        + 'several seconds, if the page was not redirected for some reason.'\n      Logger.info(msg)\n      return new Promise<UserData>((_resolve, reject) => {\n        setTimeout(() => {\n          Logger.error('Page should have redirected by now. handlePendingSignIn will now throw.')\n          reject(msg)\n        }, 3000)\n      })\n    }\n  } catch (error) {\n    Logger.error(`Error checking for protocol echo reply handlePendingSignIn: ${error}`)\n  }\n\n  if (!caller) {\n    caller = new UserSession()\n  }\n\n  const sessionData = caller.store.getSessionData()\n\n  if (sessionData.userData) {\n    throw new LoginFailedError('Existing user session found.')\n  }\n\n  if (!transitKey) {\n    transitKey = caller.store.getSessionData().transitKey\n  }\n  if (!nameLookupURL) {\n    let coreNode = caller.appConfig && caller.appConfig.coreNode\n    if (!coreNode) {\n      coreNode = config.network.blockstackAPIUrl\n    }\n\n    const tokenPayload = decodeToken(authResponseToken).payload\n    if (typeof tokenPayload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n    if (isLaterVersion(tokenPayload.version as string, '1.3.0')\n       && tokenPayload.blockstackAPIUrl !== null && tokenPayload.blockstackAPIUrl !== undefined) {\n      // override globally\n      Logger.info(`Overriding ${config.network.blockstackAPIUrl} `\n        + `with ${tokenPayload.blockstackAPIUrl}`)\n      // TODO: this config is never saved so the user node preference \n      // is not respected in later sessions..\n      config.network.blockstackAPIUrl = tokenPayload.blockstackAPIUrl as string\n      coreNode = tokenPayload.blockstackAPIUrl as string\n    }\n    \n    nameLookupURL = `${coreNode}${NAME_LOOKUP_PATH}`\n  }\n  \n  const isValid = await verifyAuthResponse(authResponseToken, nameLookupURL)\n  if (!isValid) {\n    throw new LoginFailedError('Invalid authentication response.')\n  }\n  const tokenPayload = decodeToken(authResponseToken).payload\n  if (typeof tokenPayload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n\n  // TODO: real version handling\n  let appPrivateKey = tokenPayload.private_key as string\n  let coreSessionToken = tokenPayload.core_token as string\n  if (isLaterVersion(tokenPayload.version as string, '1.1.0')) {\n    if (transitKey !== undefined && transitKey != null) {\n      if (tokenPayload.private_key !== undefined && tokenPayload.private_key !== null) {\n        try {\n          appPrivateKey = await decryptPrivateKey(transitKey, tokenPayload.private_key as string)\n        } catch (e) {\n          Logger.warn('Failed decryption of appPrivateKey, will try to use as given')\n          try {\n            hexStringToECPair(tokenPayload.private_key as string)\n          } catch (ecPairError) {\n            throw new LoginFailedError('Failed decrypting appPrivateKey. Usually means'\n                                      + ' that the transit key has changed during login.')\n          }\n        }\n      }\n      if (coreSessionToken !== undefined && coreSessionToken !== null) {\n        try {\n          coreSessionToken = await decryptPrivateKey(transitKey, coreSessionToken)\n        } catch (e) {\n          Logger.info('Failed decryption of coreSessionToken, will try to use as given')\n        }\n      }\n    } else {\n      throw new LoginFailedError('Authenticating with protocol > 1.1.0 requires transit'\n                                + ' key, and none found.')\n    }\n  }\n  let hubUrl = BLOCKSTACK_DEFAULT_GAIA_HUB_URL\n  let gaiaAssociationToken: string\n  if (isLaterVersion(tokenPayload.version as string, '1.2.0')\n    && tokenPayload.hubUrl !== null && tokenPayload.hubUrl !== undefined) {\n    hubUrl = tokenPayload.hubUrl as string\n  }\n  if (isLaterVersion(tokenPayload.version as string, '1.3.0')\n    && tokenPayload.associationToken !== null && tokenPayload.associationToken !== undefined) {\n    gaiaAssociationToken = tokenPayload.associationToken as string\n  }\n\n  const userData: UserData = {\n    username: tokenPayload.username as string,\n    profile: tokenPayload.profile,\n    email: tokenPayload.email as string,\n    decentralizedID: tokenPayload.iss,\n    identityAddress: getAddressFromDID(tokenPayload.iss),\n    appPrivateKey,\n    coreSessionToken,\n    authResponseToken,\n    hubUrl,\n    coreNode: tokenPayload.blockstackAPIUrl as string,\n    gaiaAssociationToken\n  }\n  const profileURL = tokenPayload.profile_url as string\n  if (!userData.profile && profileURL) {\n    const response = await fetchPrivate(profileURL)\n    if (!response.ok) { // return blank profile if we fail to fetch\n      userData.profile = Object.assign({}, DEFAULT_PROFILE)\n    } else {\n      const responseText = await response.text()\n      const wrappedProfile = JSON.parse(responseText)\n      const profile = extractProfile(wrappedProfile[0].token)\n      userData.profile = profile\n    }\n  } else {\n    userData.profile = tokenPayload.profile\n  }\n  \n  sessionData.userData = userData\n  caller.store.setSessionData(sessionData)\n  \n  return userData\n}\n","import { getGlobalObjects, BLOCKSTACK_HANDLER } from '../utils'\nimport { Logger } from '../logger'\n\n/**\n * Detects if the native auth-browser is installed and is successfully \n * launched via a custom protocol URI. \n * @param {String} authRequest\n * The encoded authRequest to be used as a query param in the custom URI. \n * @param {String} successCallback\n * The callback that is invoked when the protocol handler was detected. \n * @param {String} failCallback\n * The callback that is invoked when the protocol handler was not detected. \n * @return {void}\n */\nexport function launchCustomProtocol(\n  authRequest: string, \n  successCallback: () => void, \n  failCallback: () => void) {\n  // Create a unique ID used for this protocol detection attempt.\n  const echoReplyID = Math.random().toString(36).substr(2, 9)\n  const echoReplyKeyPrefix = 'echo-reply-'\n  const echoReplyKey = `${echoReplyKeyPrefix}${echoReplyID}`\n\n  const { \n    localStorage, document, \n    setTimeout, clearTimeout, \n    addEventListener, removeEventListener \n  } = getGlobalObjects(\n    ['localStorage', 'document', 'setTimeout', 'clearTimeout', 'addEventListener', 'removeEventListener'],\n    { throwIfUnavailable: true, usageDesc: 'detectProtocolLaunch' }\n  )\n\n  // Use localStorage as a reliable cross-window communication method.\n  // Create the storage entry to signal a protocol detection attempt for the\n  // next browser window to check.\n  localStorage.setItem(echoReplyKey, Date.now().toString())\n  const cleanUpLocalStorage = () => {\n    try {\n      localStorage.removeItem(echoReplyKey)\n      // Also clear out any stale echo-reply keys older than 1 hour.\n      for (let i = 0; i < localStorage.length; i++) {\n        const storageKey = localStorage.key(i)\n        if (storageKey && storageKey.startsWith(echoReplyKeyPrefix)) {\n          const storageValue = localStorage.getItem(storageKey)\n          if (storageValue === 'success' || (Date.now() - parseInt(storageValue, 10)) > 3600000) {\n            localStorage.removeItem(storageKey)\n          }\n        }\n      }\n    } catch (err) {\n      Logger.error('Exception cleaning up echo-reply entries in localStorage')\n      Logger.error(err)\n    }\n  }\n\n  const detectionTimeout = 1000\n  let redirectToWebAuthTimer = 0\n  const cancelWebAuthRedirectTimer = () => {\n    if (redirectToWebAuthTimer) {\n      clearTimeout(redirectToWebAuthTimer)\n      redirectToWebAuthTimer = 0\n    }\n  }\n  const startWebAuthRedirectTimer = (timeout = detectionTimeout) => {\n    cancelWebAuthRedirectTimer()\n    redirectToWebAuthTimer = setTimeout(() => {\n      if (redirectToWebAuthTimer) {\n        cancelWebAuthRedirectTimer()\n        let nextFunc: () => void\n        if (localStorage.getItem(echoReplyKey) === 'success') {\n          Logger.info('Protocol echo reply detected.')\n          nextFunc = successCallback\n        } else {\n          Logger.info('Protocol handler not detected.')\n          nextFunc = failCallback\n        }\n        failCallback = () => {}\n        successCallback = () => {}\n        cleanUpLocalStorage()\n        // Briefly wait since localStorage changes can \n        // sometimes be ignored when immediately redirected.\n        setTimeout(() => nextFunc(), 100)\n      }\n    }, timeout)\n  }\n\n  startWebAuthRedirectTimer()\n  \n  const inputPromptTracker = document.createElement('input')\n  inputPromptTracker.type = 'text'\n\n  // Setting display:none on an element prevents them from being focused/blurred.\n  // So we hide using 0 width/height/opacity, and set position:fixed so that the\n  // page does not scroll when the element is focused. \n  const hiddenCssStyle = 'all: initial; position: fixed; top: 0; height: 0; width: 0; opacity: 0;'\n  inputPromptTracker.style.cssText = hiddenCssStyle\n\n  // If the the focus of a page element is immediately changed then this likely indicates \n  // the protocol handler is installed, and the browser is prompting the user if they want \n  // to open the application. \n  const inputBlurredFunc = () => {\n    // Use a timeout of 100ms to ignore instant toggles between blur and focus.\n    // Browsers often perform an instant blur & focus when the protocol handler is working\n    // but not showing any browser prompts, so we want to ignore those instances.\n    let isRefocused = false\n    inputPromptTracker.addEventListener('focus', () => { isRefocused = true }, { once: true, capture: true })\n    setTimeout(() => {\n      if (redirectToWebAuthTimer && !isRefocused) {\n        Logger.info('Detected possible browser prompt for opening the protocol handler app.')\n        clearTimeout(redirectToWebAuthTimer)\n        inputPromptTracker.addEventListener('focus', () => {\n          if (redirectToWebAuthTimer) {\n            Logger.info('Possible browser prompt closed, restarting auth redirect timeout.')\n            startWebAuthRedirectTimer()\n          }\n        }, { once: true, capture: true })\n      }\n    }, 100)\n  }\n  inputPromptTracker.addEventListener('blur', inputBlurredFunc, { once: true, capture: true })\n  setTimeout(() => inputPromptTracker.removeEventListener('blur', inputBlurredFunc), 200)\n  document.body.appendChild(inputPromptTracker)\n  inputPromptTracker.focus()\n  \n  // Detect if document.visibility is immediately changed which is a strong \n  // indication that the protocol handler is working. We don't know for sure and \n  // can't predict future browser changes, so only increase the redirect timeout.\n  // This reduces the probability of a false-negative (where local auth works, but \n  // the original page was redirect to web auth because something took too long),\n  const pageVisibilityChanged = () => {\n    if (document.hidden && redirectToWebAuthTimer) {\n      Logger.info('Detected immediate page visibility change (protocol handler probably working).')\n      startWebAuthRedirectTimer(3000)\n    }\n  }\n  document.addEventListener('visibilitychange', pageVisibilityChanged, { once: true, capture: true })\n  setTimeout(() => document.removeEventListener('visibilitychange', pageVisibilityChanged), 500)\n\n\n  // Listen for the custom protocol echo reply via localStorage update event.\n  addEventListener('storage', function replyEventListener(event) {\n    if (event.key === echoReplyKey && localStorage.getItem(echoReplyKey) === 'success') {\n      // Custom protocol worked, cancel the web auth redirect timer.\n      cancelWebAuthRedirectTimer()\n      inputPromptTracker.removeEventListener('blur', inputBlurredFunc)\n      Logger.info('Protocol echo reply detected from localStorage event.')\n      // Clean up event listener and localStorage.\n      removeEventListener('storage', replyEventListener)\n      const nextFunc = successCallback\n      successCallback = () => {}\n      failCallback = () => {}\n      cleanUpLocalStorage()\n      // Briefly wait since localStorage changes can sometimes \n      // be ignored when immediately redirected.\n      setTimeout(() => nextFunc(), 100)\n    }\n  }, false)\n\n  // Use iframe technique for launching the protocol URI rather than setting `window.location`.\n  // This method prevents browsers like Safari, Opera, Firefox from showing error prompts\n  // about unknown protocol handler when app is not installed, and avoids an empty\n  // browser tab when the app is installed. \n  Logger.info('Attempting protocol launch via iframe injection.')\n  const locationSrc = `${BLOCKSTACK_HANDLER}:${authRequest}&echo=${echoReplyID}`\n  const iframe = document.createElement('iframe')\n\n  const iframeStyle = 'all: initial; display: none; position: fixed; top: 0; height: 0; width: 0; opacity: 0;'\n  iframe.style.cssText = iframeStyle\n  iframe.src = locationSrc\n  document.body.appendChild(iframe)\n}\n","\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_HANDLER = 'blockstack'\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_STORAGE_LABEL = 'blockstack'\n/**\n* This constant is used in the [[redirectToSignInWithAuthRequest]]\n*/\nexport const DEFAULT_BLOCKSTACK_HOST = 'https://browser.blockstack.org/auth'\n\n/**\n * Non-exhaustive list of common permission scopes. \n */\nexport const enum AuthScope {\n  /**\n   * Read and write data to the user's Gaia hub in an app-specific storage bucket.\n   * This is the default scope.\n   */\n  store_write = 'store_write',\n  /**\n   * Publish data so that other users of the app can discover and interact with the user.\n   * The user's files stored on Gaia hub are made visible to others via the `apps` property in the \n   * users `profile.json` file. \n   */\n  publish_data = 'publish_data',\n  /**\n   * Request the user's email if available.\n   */\n  email = 'email'\n}\n\n\n/**\n* @ignore\n*/\nexport const DEFAULT_SCOPE = [AuthScope.store_write]\n\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_APP_PRIVATE_KEY_LABEL = 'blockstack-transit-private-key'\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_DEFAULT_GAIA_HUB_URL = 'https://hub.blockstack.org'\n/**\n* @ignore\n*/\nexport const DEFAULT_CORE_NODE = 'https://core.blockstack.org'\n/**\n* @ignore\n*/\nexport const NAME_LOOKUP_PATH = '/v1/names'\n/**\n* @ignore\n*/\nexport const LOCALSTORAGE_SESSION_KEY = 'blockstack-session'\n","import { decodeToken, TokenVerifier } from 'jsontokens'\nimport { getAddressFromDID } from '../dids'\nimport { publicKeyToAddress } from '../keys'\nimport { isSameOriginAbsoluteUrl } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\nimport { fetchAppManifest } from './authProvider'\n\n/**\n * Checks if the ES256k signature on passed `token` match the claimed public key\n * in the payload key `public_keys`.\n *\n * @param  {String} token encoded and signed authentication token\n * @return {Boolean} Returns `true` if the signature matches the claimed public key\n * @throws {Error} if `token` contains multiple public keys\n * @private\n * @ignore \n */\nexport function doSignaturesMatchPublicKeys(token: string): boolean {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  const publicKeys = payload.public_keys as string[]\n  if (publicKeys.length === 1) {\n    const publicKey = publicKeys[0]\n    try {\n      const tokenVerifier = new TokenVerifier('ES256k', publicKey)\n      const signatureVerified = tokenVerifier.verify(token)\n      if (signatureVerified) {\n        return true\n      } else {\n        return false\n      }\n    } catch (e) {\n      return false\n    }\n  } else {\n    throw new Error('Multiple public keys are not supported')\n  }\n}\n\n/**\n * Makes sure that the identity address portion of\n * the decentralized identifier passed in the issuer `iss`\n * key of the token matches the public key\n *\n * @param  {String} token encoded and signed authentication token\n * @return {Boolean} if the identity address and public keys match\n * @throws {Error} if ` token` has multiple public keys\n * @private\n * @ignore \n */\nexport function doPublicKeysMatchIssuer(token: string): boolean {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  const publicKeys = payload.public_keys as string[]\n  const addressFromIssuer = getAddressFromDID(payload.iss)\n\n  if (publicKeys.length === 1) {\n    const addressFromPublicKeys = publicKeyToAddress(publicKeys[0])\n    if (addressFromPublicKeys === addressFromIssuer) {\n      return true\n    }\n  } else {\n    throw new Error('Multiple public keys are not supported')\n  }\n\n  return false\n}\n\n/**\n * Looks up the identity address that owns the claimed username\n * in `token` using the lookup endpoint provided in `nameLookupURL`\n * to determine if the username is owned by the identity address\n * that matches the claimed public key\n *\n * @param  {String} token  encoded and signed authentication token\n * @param  {String} nameLookupURL a URL to the name lookup endpoint of the Blockstack Core API\n * @return {Promise<Boolean>} returns a `Promise` that resolves to\n * `true` if the username is owned by the public key, otherwise the\n * `Promise` resolves to `false`\n * @private\n * @ignore \n */\nexport async function doPublicKeysMatchUsername(token: string,\n                                                nameLookupURL: string): Promise<boolean> {\n  try {\n    const payload = decodeToken(token).payload\n    if (typeof payload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n    if (!payload.username) {\n      return true\n    }\n\n    if (payload.username === null) {\n      return true\n    }\n\n    if (nameLookupURL === null) {\n      return false\n    }\n\n    const username = payload.username\n    const url = `${nameLookupURL.replace(/\\/$/, '')}/${username}`\n    const response = await fetchPrivate(url)\n    const responseText = await response.text()\n    const responseJSON = JSON.parse(responseText)\n    if (responseJSON.hasOwnProperty('address')) {\n      const nameOwningAddress = responseJSON.address\n      const addressFromIssuer = getAddressFromDID(payload.iss)\n      if (nameOwningAddress === addressFromIssuer) {\n        return true\n      } else {\n        return false\n      }\n    } else {\n      return false\n    }\n  } catch (error) {\n    console.log(error)\n    console.log('Error checking `doPublicKeysMatchUsername`')\n    return false\n  }\n}\n\n/**\n * Checks if the if the token issuance time and date is after the\n * current time and date.\n *\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if the token was issued after the current time,\n * otherwise returns `false`\n * @private\n * @ignore \n */\nexport function isIssuanceDateValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  if (payload.iat) {\n    if (typeof payload.iat !== 'number') {\n      return false\n    }\n    const issuedAt = new Date(payload.iat * 1000) // JWT times are in seconds\n    if (new Date().getTime() < issuedAt.getTime()) {\n      return false\n    } else {\n      return true\n    }\n  } else {\n    return true\n  }\n}\n\n/**\n * Checks if the expiration date of the `token` is before the current time\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if the `token` has not yet expired, `false`\n * if the `token` has expired\n *\n * @private\n * @ignore \n */\nexport function isExpirationDateValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  if (payload.exp) {\n    if (typeof payload.exp !== 'number') {\n      return false\n    }\n    const expiresAt = new Date(payload.exp * 1000) // JWT times are in seconds\n    if (new Date().getTime() > expiresAt.getTime()) {\n      return false\n    } else {\n      return true\n    }\n  } else {\n    return true\n  }\n}\n\n/**\n * Makes sure the `manifest_uri` is a same origin absolute URL.\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if valid, otherwise `false`\n * @private\n * @ignore \n */\nexport function isManifestUriValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  return isSameOriginAbsoluteUrl(payload.domain_name as string, payload.manifest_uri as string)\n}\n\n/**\n * Makes sure the `redirect_uri` is a same origin absolute URL.\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if valid, otherwise `false`\n * @private\n * @ignore \n */\nexport function isRedirectUriValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  return isSameOriginAbsoluteUrl(payload.domain_name as string, payload.redirect_uri as string)\n}\n\n/**\n * Verify authentication request is valid. This function performs a number\n * of checks on the authentication request token:\n * * Checks that `token` has a valid issuance date & is not expired\n * * Checks that `token` has a valid signature that matches the public key it claims\n * * Checks that both the manifest and redirect URLs are absolute and conform to\n * the same origin policy\n *\n * @param  {String} token encoded and signed authentication request token\n * @return {Promise} that resolves to true if the auth request\n *  is valid and false if it does not. It rejects with a String if the\n *  token is not signed\n * @private\n * @ignore \n */\nexport async function verifyAuthRequest(token: string): Promise<boolean> {\n  if (decodeToken(token).header.alg === 'none') {\n    throw new Error('Token must be signed in order to be verified')\n  }\n  const values = await Promise.all([\n    isExpirationDateValid(token),\n    isIssuanceDateValid(token),\n    doSignaturesMatchPublicKeys(token),\n    doPublicKeysMatchIssuer(token),\n    isManifestUriValid(token),\n    isRedirectUriValid(token)\n  ])\n  return values.every(val => val)\n}\n\n/**\n * Verify the authentication request is valid and\n * fetch the app manifest file if valid. Otherwise, reject the promise.\n * @param  {String} token encoded and signed authentication request token\n * @return {Promise} that resolves to the app manifest file in JSON format\n * or rejects if the auth request or app manifest file is invalid\n * @private\n * @ignore \n */\nexport async function verifyAuthRequestAndLoadManifest(token: string): Promise<any> {\n  const valid = await verifyAuthRequest(token)\n  if (!valid) {\n    throw new Error('Token is an invalid auth request')\n  }\n  return fetchAppManifest(token)\n}\n\n/**\n * Verify the authentication response is valid\n * @param {String} token the authentication response token\n * @param {String} nameLookupURL the url use to verify owner of a username\n * @return {Promise} that resolves to true if auth response\n * is valid and false if it does not\n * @private\n * @ignore \n */\nexport async function verifyAuthResponse(token: string, nameLookupURL: string): Promise<boolean> {\n  const values = await Promise.all([\n    isExpirationDateValid(token),\n    isIssuanceDateValid(token),\n    doSignaturesMatchPublicKeys(token),\n    doPublicKeysMatchIssuer(token),\n    doPublicKeysMatchUsername(token, nameLookupURL)\n  ])\n  return values.every(val => val)\n}\n","import { InvalidDIDError } from './errors'\n\n/**\n* @ignore\n*/\nexport function makeDIDFromAddress(address: string) {\n  return `did:btc-addr:${address}`\n}\n\n/**\n* @ignore\n*/\nexport function makeDIDFromPublicKey(publicKey: string) {\n  return `did:ecdsa-pub:${publicKey}`\n}\n\n/**\n* @ignore\n*/\nexport function getDIDType(decentralizedID: string) {\n  const didParts = decentralizedID.split(':')\n  \n  if (didParts.length !== 3) {\n    throw new InvalidDIDError('Decentralized IDs must have 3 parts')\n  }\n\n  if (didParts[0].toLowerCase() !== 'did') {\n    throw new InvalidDIDError('Decentralized IDs must start with \"did\"')\n  }\n\n  return didParts[1].toLowerCase()\n}\n\n/**\n* @ignore\n*/\nexport function getAddressFromDID(decentralizedID: string) {\n  const didType = getDIDType(decentralizedID)\n  \n  if (didType === 'btc-addr') {\n    return decentralizedID.split(':')[2]\n  } else {\n    return null\n  }\n}\n\n/*\nexport function getPublicKeyOrAddressFromDID(decentralizedID) {\n  const didParts = decentralizedID.split(':')\n\n  if (didParts.length !== 3) {\n    throw new InvalidDIDError('Decentralized IDs must have 3 parts')\n  }\n\n  if (didParts[0].toLowerCase() !== 'did') {\n    throw new InvalidDIDError('Decentralized IDs must start with \"did\"')\n  }\n\n  if (didParts[1].toLowerCase() === 'ecdsa-pub') {\n    return didParts[2]\n  } else if (didParts[1].toLowerCase() === 'btc-addr') {\n    return didParts[2]\n  } else {\n    throw new InvalidDIDError('Decentralized ID format not supported')\n  }\n}\n*/\n","'use strict';\n\nvar utils = exports;\nvar BN = require('bn.js');\nvar minAssert = require('minimalistic-assert');\nvar minUtils = require('minimalistic-crypto-utils');\n\nutils.assert = minAssert;\nutils.toArray = minUtils.toArray;\nutils.zero2 = minUtils.zero2;\nutils.toHex = minUtils.toHex;\nutils.encode = minUtils.encode;\n\n// Represent num in a w-NAF form\nfunction getNAF(num, w) {\n  var naf = [];\n  var ws = 1 << (w + 1);\n  var k = num.clone();\n  while (k.cmpn(1) >= 0) {\n    var z;\n    if (k.isOdd()) {\n      var mod = k.andln(ws - 1);\n      if (mod > (ws >> 1) - 1)\n        z = (ws >> 1) - mod;\n      else\n        z = mod;\n      k.isubn(z);\n    } else {\n      z = 0;\n    }\n    naf.push(z);\n\n    // Optimization, shift by word if possible\n    var shift = (k.cmpn(0) !== 0 && k.andln(ws - 1) === 0) ? (w + 1) : 1;\n    for (var i = 1; i < shift; i++)\n      naf.push(0);\n    k.iushrn(shift);\n  }\n\n  return naf;\n}\nutils.getNAF = getNAF;\n\n// Represent k1, k2 in a Joint Sparse Form\nfunction getJSF(k1, k2) {\n  var jsf = [\n    [],\n    []\n  ];\n\n  k1 = k1.clone();\n  k2 = k2.clone();\n  var d1 = 0;\n  var d2 = 0;\n  while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {\n\n    // First phase\n    var m14 = (k1.andln(3) + d1) & 3;\n    var m24 = (k2.andln(3) + d2) & 3;\n    if (m14 === 3)\n      m14 = -1;\n    if (m24 === 3)\n      m24 = -1;\n    var u1;\n    if ((m14 & 1) === 0) {\n      u1 = 0;\n    } else {\n      var m8 = (k1.andln(7) + d1) & 7;\n      if ((m8 === 3 || m8 === 5) && m24 === 2)\n        u1 = -m14;\n      else\n        u1 = m14;\n    }\n    jsf[0].push(u1);\n\n    var u2;\n    if ((m24 & 1) === 0) {\n      u2 = 0;\n    } else {\n      var m8 = (k2.andln(7) + d2) & 7;\n      if ((m8 === 3 || m8 === 5) && m14 === 2)\n        u2 = -m24;\n      else\n        u2 = m24;\n    }\n    jsf[1].push(u2);\n\n    // Second phase\n    if (2 * d1 === u1 + 1)\n      d1 = 1 - d1;\n    if (2 * d2 === u2 + 1)\n      d2 = 1 - d2;\n    k1.iushrn(1);\n    k2.iushrn(1);\n  }\n\n  return jsf;\n}\nutils.getJSF = getJSF;\n\nfunction cachedProperty(obj, name, computer) {\n  var key = '_' + name;\n  obj.prototype[name] = function cachedProperty() {\n    return this[key] !== undefined ? this[key] :\n           this[key] = computer.call(this);\n  };\n}\nutils.cachedProperty = cachedProperty;\n\nfunction parseBytes(bytes) {\n  return typeof bytes === 'string' ? utils.toArray(bytes, 'hex') :\n                                     bytes;\n}\nutils.parseBytes = parseBytes;\n\nfunction intFromLE(bytes) {\n  return new BN(bytes, 'hex', 'le');\n}\nutils.intFromLE = intFromLE;\n\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.bitcoin = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bc',\n  bip32: {\n    public: 0x0488b21e,\n    private: 0x0488ade4,\n  },\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  wif: 0x80,\n};\nexports.regtest = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bcrt',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\nexports.testnet = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'tb',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar GlobalTypes;\n(function(GlobalTypes) {\n  GlobalTypes[(GlobalTypes['UNSIGNED_TX'] = 0)] = 'UNSIGNED_TX';\n  GlobalTypes[(GlobalTypes['GLOBAL_XPUB'] = 1)] = 'GLOBAL_XPUB';\n})((GlobalTypes = exports.GlobalTypes || (exports.GlobalTypes = {})));\nexports.GLOBAL_TYPE_NAMES = ['unsignedTx', 'globalXpub'];\nvar InputTypes;\n(function(InputTypes) {\n  InputTypes[(InputTypes['NON_WITNESS_UTXO'] = 0)] = 'NON_WITNESS_UTXO';\n  InputTypes[(InputTypes['WITNESS_UTXO'] = 1)] = 'WITNESS_UTXO';\n  InputTypes[(InputTypes['PARTIAL_SIG'] = 2)] = 'PARTIAL_SIG';\n  InputTypes[(InputTypes['SIGHASH_TYPE'] = 3)] = 'SIGHASH_TYPE';\n  InputTypes[(InputTypes['REDEEM_SCRIPT'] = 4)] = 'REDEEM_SCRIPT';\n  InputTypes[(InputTypes['WITNESS_SCRIPT'] = 5)] = 'WITNESS_SCRIPT';\n  InputTypes[(InputTypes['BIP32_DERIVATION'] = 6)] = 'BIP32_DERIVATION';\n  InputTypes[(InputTypes['FINAL_SCRIPTSIG'] = 7)] = 'FINAL_SCRIPTSIG';\n  InputTypes[(InputTypes['FINAL_SCRIPTWITNESS'] = 8)] = 'FINAL_SCRIPTWITNESS';\n  InputTypes[(InputTypes['POR_COMMITMENT'] = 9)] = 'POR_COMMITMENT';\n})((InputTypes = exports.InputTypes || (exports.InputTypes = {})));\nexports.INPUT_TYPE_NAMES = [\n  'nonWitnessUtxo',\n  'witnessUtxo',\n  'partialSig',\n  'sighashType',\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n  'finalScriptSig',\n  'finalScriptWitness',\n  'porCommitment',\n];\nvar OutputTypes;\n(function(OutputTypes) {\n  OutputTypes[(OutputTypes['REDEEM_SCRIPT'] = 0)] = 'REDEEM_SCRIPT';\n  OutputTypes[(OutputTypes['WITNESS_SCRIPT'] = 1)] = 'WITNESS_SCRIPT';\n  OutputTypes[(OutputTypes['BIP32_DERIVATION'] = 2)] = 'BIP32_DERIVATION';\n})((OutputTypes = exports.OutputTypes || (exports.OutputTypes = {})));\nexports.OUTPUT_TYPE_NAMES = [\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n];\n","// eslint-disable-next-line import/no-unassigned-import\nimport 'cross-fetch/polyfill'\n\nimport { TokenSigner, SECP256K1Client } from 'jsontokens'\nimport { makeECPrivateKey, publicKeyToAddress } from '../keys'\nimport { makeUUID4, nextMonth, getGlobalObject } from '../utils'\nimport { makeDIDFromAddress } from '../dids'\nimport { encryptECIES, decryptECIES } from '../encryption/ec'\nimport { Logger } from '../logger'\nimport { DEFAULT_SCOPE, AuthScope } from './authConstants'\nimport { UserSession } from './userSession'\n\n\nconst VERSION = '1.3.1'\n\ntype AuthMetadata = {\n  email?: string,\n  profileUrl?: string\n}\n\n/**\n * Generates a ECDSA keypair to\n * use as the ephemeral app transit private key\n * @param {SessionData} session - session object in which key will be stored\n * @return {String} the hex encoded private key\n * @private\n * @ignore\n */\nexport function generateTransitKey() {\n  const transitKey = makeECPrivateKey()\n  return transitKey\n}\n\n\n/**\n * Generates an authentication request that can be sent to the Blockstack\n * browser for the user to approve sign in. This authentication request can\n * then be used for sign in by passing it to the `redirectToSignInWithAuthRequest`\n * method.\n *\n * *Note: This method should only be used if you want to roll your own authentication\n * flow. Typically you'd use `redirectToSignIn` which takes care of this\n * under the hood.*\n *\n * @param  {String} transitPrivateKey - hex encoded transit private key\n * @param {String} redirectURI - location to redirect user to after sign in approval\n * @param {String} manifestURI - location of this app's manifest file\n * @param {Array<String>} scopes - the permissions this app is requesting\n * @param {String} appDomain - the origin of this app\n * @param {Number} expiresAt - the time at which this request is no longer valid\n * @param {Object} extraParams - Any extra parameters you'd like to pass to the authenticator.\n * Use this to pass options that aren't part of the Blockstack auth spec, but might be supported\n * by special authenticators.\n * @return {String} the authentication request\n */\nexport function makeAuthRequest(\n  transitPrivateKey?: string,\n  redirectURI?: string, \n  manifestURI?: string, \n  scopes: Array<AuthScope | string> = DEFAULT_SCOPE.slice(),\n  appDomain?: string,\n  expiresAt: number = nextMonth().getTime(),\n  extraParams: any = {}\n): string {\n  if (!transitPrivateKey) {\n    transitPrivateKey = new UserSession().generateAndStoreTransitKey()\n  }\n\n  const getWindowOrigin = (paramName: string) => {\n    const location = getGlobalObject('location', { \n      throwIfUnavailable: true, \n      usageDesc: `makeAuthRequest([${paramName}=undefined])` \n    })\n    return location.origin\n  }\n  \n  if (!redirectURI) {\n    redirectURI = `${getWindowOrigin('redirectURI')}/`\n  }\n  if (!manifestURI) {\n    manifestURI = `${getWindowOrigin('manifestURI')}/manifest.json`\n  }\n  if (!appDomain) {\n    appDomain = getWindowOrigin('appDomain')\n  }\n\n  /* Create the payload */\n  const payload = Object.assign({}, extraParams, {\n    jti: makeUUID4(),\n    iat: Math.floor(new Date().getTime() / 1000), // JWT times are in seconds\n    exp: Math.floor(expiresAt / 1000), // JWT times are in seconds\n    iss: null,\n    public_keys: [],\n    domain_name: appDomain,\n    manifest_uri: manifestURI,\n    redirect_uri: redirectURI,\n    version: VERSION,\n    do_not_include_profile: true,\n    supports_hub_url: true,\n    scopes\n  })\n\n  Logger.info(`blockstack.js: generating v${VERSION} auth request`)\n\n  /* Convert the private key to a public key to an issuer */\n  const publicKey = SECP256K1Client.derivePublicKey(transitPrivateKey)\n  payload.public_keys = [publicKey]\n  const address = publicKeyToAddress(publicKey)\n  payload.iss = makeDIDFromAddress(address)\n\n  /* Sign and return the token */\n  const tokenSigner = new TokenSigner('ES256k', transitPrivateKey)\n  const token = tokenSigner.sign(payload)\n\n  return token\n}\n\n/**\n * Encrypts the private key for decryption by the given\n * public key.\n * @param  {String} publicKey  [description]\n * @param  {String} privateKey [description]\n * @return {String} hex encoded ciphertext\n * @private\n * @ignore\n */\nexport async function encryptPrivateKey(publicKey: string,\n                                        privateKey: string\n): Promise<string> {\n  const encryptedObj = await encryptECIES(publicKey, Buffer.from(privateKey), true)\n  const encryptedJSON = JSON.stringify(encryptedObj)\n  return Buffer.from(encryptedJSON).toString('hex')\n}\n\n/**\n * Decrypts the hex encrypted private key\n * @param  {String} privateKey  the private key corresponding to the public\n * key for which the ciphertext was encrypted\n * @param  {String} hexedEncrypted the ciphertext\n * @return {String}  the decrypted private key\n * @throws {Error} if unable to decrypt\n *\n * @private\n * @ignore\n */\nexport async function decryptPrivateKey(privateKey: string,\n                                        hexedEncrypted: string\n): Promise<string | null> {\n  const unhexedString = Buffer.from(hexedEncrypted, 'hex').toString()\n  const encryptedObj = JSON.parse(unhexedString)\n  const decrypted = await decryptECIES(privateKey, encryptedObj)\n  if (typeof decrypted !== 'string') {\n    throw new Error('Unable to correctly decrypt private key')\n  } else {\n    return decrypted\n  }\n}\n\n/**\n * Generates a signed authentication response token for an app. This\n * token is sent back to apps which use contents to access the\n * resources and data requested by the app.\n *\n * @param  {String} privateKey the identity key of the Blockstack ID generating\n * the authentication response\n * @param  {Object} profile the profile object for the Blockstack ID\n * @param  {String} username the username of the Blockstack ID if any, otherwise `null`\n * @param  {AuthMetadata} metadata an object containing metadata sent as part of the authentication\n * response including `email` if requested and available and a URL to the profile\n * @param  {String} coreToken core session token when responding to a legacy auth request\n * or `null` for current direct to gaia authentication requests\n * @param  {String} appPrivateKey the application private key. This private key is\n * unique and specific for every Blockstack ID and application combination.\n * @param  {Number} expiresAt an integer in the same format as\n * `new Date().getTime()`, milliseconds since the Unix epoch\n * @param {String} transitPublicKey the public key provide by the app\n * in its authentication request with which secrets will be encrypted\n * @param {String} hubUrl URL to the write path of the user's Gaia hub\n * @param {String} blockstackAPIUrl URL to the API endpoint to use\n * @param {String} associationToken JWT that binds the app key to the identity key\n * @return {String} signed and encoded authentication response token\n * @private\n * @ignore\n */\nexport async function makeAuthResponse(privateKey: string,\n                                       profile: {} = {},\n                                       username: string = null,\n                                       metadata: AuthMetadata,\n                                       coreToken: string = null,\n                                       appPrivateKey: string = null,\n                                       expiresAt: number = nextMonth().getTime(),\n                                       transitPublicKey: string = null,\n                                       hubUrl: string = null,\n                                       blockstackAPIUrl: string = null,\n                                       associationToken: string = null\n): Promise<string> {\n  /* Convert the private key to a public key to an issuer */\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey)\n  const address = publicKeyToAddress(publicKey)\n\n  /* See if we should encrypt with the transit key */\n  let privateKeyPayload = appPrivateKey\n  let coreTokenPayload = coreToken\n  let additionalProperties = {}\n  if (appPrivateKey !== undefined && appPrivateKey !== null) {\n    Logger.info(`blockstack.js: generating v${VERSION} auth response`)\n    if (transitPublicKey !== undefined && transitPublicKey !== null) {\n      privateKeyPayload = await encryptPrivateKey(transitPublicKey, appPrivateKey)\n      if (coreToken !== undefined && coreToken !== null) {\n        coreTokenPayload = await encryptPrivateKey(transitPublicKey, coreToken)\n      }\n    }\n    additionalProperties = {\n      email: metadata.email ? metadata.email : null,\n      profile_url: metadata.profileUrl ? metadata.profileUrl : null,\n      hubUrl,\n      blockstackAPIUrl,\n      associationToken,\n      version: VERSION\n    }\n  } else {\n    Logger.info('blockstack.js: generating legacy auth response')\n  }\n\n  /* Create the payload */\n  const payload = Object.assign({}, {\n    jti: makeUUID4(),\n    iat: Math.floor(new Date().getTime() / 1000), // JWT times are in seconds\n    exp: Math.floor(expiresAt / 1000), // JWT times are in seconds\n    iss: makeDIDFromAddress(address),\n    private_key: privateKeyPayload,\n    public_keys: [publicKey],\n    profile,\n    username,\n    core_token: coreTokenPayload\n  }, additionalProperties)\n\n  /* Sign and return the token */\n  const tokenSigner = new TokenSigner('ES256k', privateKey)\n  return tokenSigner.sign(payload)\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nvar assert = require('minimalistic-assert');\nvar inherits = require('inherits');\n\nexports.inherits = inherits;\n\nfunction isSurrogatePair(msg, i) {\n  if ((msg.charCodeAt(i) & 0xFC00) !== 0xD800) {\n    return false;\n  }\n  if (i < 0 || i + 1 >= msg.length) {\n    return false;\n  }\n  return (msg.charCodeAt(i + 1) & 0xFC00) === 0xDC00;\n}\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg === 'string') {\n    if (!enc) {\n      // Inspired by stringToUtf8ByteArray() in closure-library by Google\n      // https://github.com/google/closure-library/blob/8598d87242af59aac233270742c8984e2b2bdbe0/closure/goog/crypt/crypt.js#L117-L143\n      // Apache License 2.0\n      // https://github.com/google/closure-library/blob/master/LICENSE\n      var p = 0;\n      for (var i = 0; i < msg.length; i++) {\n        var c = msg.charCodeAt(i);\n        if (c < 128) {\n          res[p++] = c;\n        } else if (c < 2048) {\n          res[p++] = (c >> 6) | 192;\n          res[p++] = (c & 63) | 128;\n        } else if (isSurrogatePair(msg, i)) {\n          c = 0x10000 + ((c & 0x03FF) << 10) + (msg.charCodeAt(++i) & 0x03FF);\n          res[p++] = (c >> 18) | 240;\n          res[p++] = ((c >> 12) & 63) | 128;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        } else {\n          res[p++] = (c >> 12) | 224;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        }\n      }\n    } else if (enc === 'hex') {\n      msg = msg.replace(/[^a-z0-9]+/ig, '');\n      if (msg.length % 2 !== 0)\n        msg = '0' + msg;\n      for (i = 0; i < msg.length; i += 2)\n        res.push(parseInt(msg[i] + msg[i + 1], 16));\n    }\n  } else {\n    for (i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n  }\n  return res;\n}\nexports.toArray = toArray;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nexports.toHex = toHex;\n\nfunction htonl(w) {\n  var res = (w >>> 24) |\n            ((w >>> 8) & 0xff00) |\n            ((w << 8) & 0xff0000) |\n            ((w & 0xff) << 24);\n  return res >>> 0;\n}\nexports.htonl = htonl;\n\nfunction toHex32(msg, endian) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++) {\n    var w = msg[i];\n    if (endian === 'little')\n      w = htonl(w);\n    res += zero8(w.toString(16));\n  }\n  return res;\n}\nexports.toHex32 = toHex32;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nexports.zero2 = zero2;\n\nfunction zero8(word) {\n  if (word.length === 7)\n    return '0' + word;\n  else if (word.length === 6)\n    return '00' + word;\n  else if (word.length === 5)\n    return '000' + word;\n  else if (word.length === 4)\n    return '0000' + word;\n  else if (word.length === 3)\n    return '00000' + word;\n  else if (word.length === 2)\n    return '000000' + word;\n  else if (word.length === 1)\n    return '0000000' + word;\n  else\n    return word;\n}\nexports.zero8 = zero8;\n\nfunction join32(msg, start, end, endian) {\n  var len = end - start;\n  assert(len % 4 === 0);\n  var res = new Array(len / 4);\n  for (var i = 0, k = start; i < res.length; i++, k += 4) {\n    var w;\n    if (endian === 'big')\n      w = (msg[k] << 24) | (msg[k + 1] << 16) | (msg[k + 2] << 8) | msg[k + 3];\n    else\n      w = (msg[k + 3] << 24) | (msg[k + 2] << 16) | (msg[k + 1] << 8) | msg[k];\n    res[i] = w >>> 0;\n  }\n  return res;\n}\nexports.join32 = join32;\n\nfunction split32(msg, endian) {\n  var res = new Array(msg.length * 4);\n  for (var i = 0, k = 0; i < msg.length; i++, k += 4) {\n    var m = msg[i];\n    if (endian === 'big') {\n      res[k] = m >>> 24;\n      res[k + 1] = (m >>> 16) & 0xff;\n      res[k + 2] = (m >>> 8) & 0xff;\n      res[k + 3] = m & 0xff;\n    } else {\n      res[k + 3] = m >>> 24;\n      res[k + 2] = (m >>> 16) & 0xff;\n      res[k + 1] = (m >>> 8) & 0xff;\n      res[k] = m & 0xff;\n    }\n  }\n  return res;\n}\nexports.split32 = split32;\n\nfunction rotr32(w, b) {\n  return (w >>> b) | (w << (32 - b));\n}\nexports.rotr32 = rotr32;\n\nfunction rotl32(w, b) {\n  return (w << b) | (w >>> (32 - b));\n}\nexports.rotl32 = rotl32;\n\nfunction sum32(a, b) {\n  return (a + b) >>> 0;\n}\nexports.sum32 = sum32;\n\nfunction sum32_3(a, b, c) {\n  return (a + b + c) >>> 0;\n}\nexports.sum32_3 = sum32_3;\n\nfunction sum32_4(a, b, c, d) {\n  return (a + b + c + d) >>> 0;\n}\nexports.sum32_4 = sum32_4;\n\nfunction sum32_5(a, b, c, d, e) {\n  return (a + b + c + d + e) >>> 0;\n}\nexports.sum32_5 = sum32_5;\n\nfunction sum64(buf, pos, ah, al) {\n  var bh = buf[pos];\n  var bl = buf[pos + 1];\n\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  buf[pos] = hi >>> 0;\n  buf[pos + 1] = lo;\n}\nexports.sum64 = sum64;\n\nfunction sum64_hi(ah, al, bh, bl) {\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  return hi >>> 0;\n}\nexports.sum64_hi = sum64_hi;\n\nfunction sum64_lo(ah, al, bh, bl) {\n  var lo = al + bl;\n  return lo >>> 0;\n}\nexports.sum64_lo = sum64_lo;\n\nfunction sum64_4_hi(ah, al, bh, bl, ch, cl, dh, dl) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + carry;\n  return hi >>> 0;\n}\nexports.sum64_4_hi = sum64_4_hi;\n\nfunction sum64_4_lo(ah, al, bh, bl, ch, cl, dh, dl) {\n  var lo = al + bl + cl + dl;\n  return lo >>> 0;\n}\nexports.sum64_4_lo = sum64_4_lo;\n\nfunction sum64_5_hi(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n  lo = (lo + el) >>> 0;\n  carry += lo < el ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + eh + carry;\n  return hi >>> 0;\n}\nexports.sum64_5_hi = sum64_5_hi;\n\nfunction sum64_5_lo(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var lo = al + bl + cl + dl + el;\n\n  return lo >>> 0;\n}\nexports.sum64_5_lo = sum64_5_lo;\n\nfunction rotr64_hi(ah, al, num) {\n  var r = (al << (32 - num)) | (ah >>> num);\n  return r >>> 0;\n}\nexports.rotr64_hi = rotr64_hi;\n\nfunction rotr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.rotr64_lo = rotr64_lo;\n\nfunction shr64_hi(ah, al, num) {\n  return ah >>> num;\n}\nexports.shr64_hi = shr64_hi;\n\nfunction shr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.shr64_lo = shr64_lo;\n","// @ts-ignore: Could not find a declaration file for module\nimport { makeZoneFile, parseZoneFile } from 'zone-file'\nimport { extractProfile } from './profileTokens'\nimport { Person } from './profileSchemas/person'\nimport { Logger } from '../logger'\nimport { fetchPrivate } from '../fetchUtil'\n\n/**\n * \n * @param origin \n * @param tokenFileUrl \n * \n * @ignore\n */\nexport function makeProfileZoneFile(origin: string, tokenFileUrl: string): string {\n  if (tokenFileUrl.indexOf('://') < 0) {\n    throw new Error('Invalid token file url')\n  }\n\n  const urlScheme = tokenFileUrl.split('://')[0]\n  const urlParts = tokenFileUrl.split('://')[1].split('/')\n  const domain = urlParts[0]\n  const pathname = `/${urlParts.slice(1).join('/')}`\n\n  const zoneFile = {\n    $origin: origin,\n    $ttl: 3600,\n    uri: [\n      {\n        name: '_http._tcp',\n        priority: 10,\n        weight: 1,\n        target: `${urlScheme}://${domain}${pathname}`\n      }\n    ]\n  }\n\n  const zoneFileTemplate = '{$origin}\\n{$ttl}\\n{uri}\\n'\n\n\n  return makeZoneFile(zoneFile, zoneFileTemplate)\n}\n\n/**\n * \n * @param zoneFileJson \n * \n * @ignore\n */\nexport function getTokenFileUrl(zoneFileJson: any): string | null {\n  if (!zoneFileJson.hasOwnProperty('uri')) {\n    return null\n  }\n  if (!Array.isArray(zoneFileJson.uri)) {\n    return null\n  }\n  if (zoneFileJson.uri.length < 1) {\n    return null\n  }\n  const firstUriRecord = zoneFileJson.uri[0]\n\n  if (!firstUriRecord.hasOwnProperty('target')) {\n    return null\n  }\n  let tokenFileUrl = firstUriRecord.target\n\n  if (tokenFileUrl.startsWith('https')) {\n    // pass\n  } else if (tokenFileUrl.startsWith('http')) {\n    // pass\n  } else {\n    tokenFileUrl = `https://${tokenFileUrl}`\n  }\n\n  return tokenFileUrl\n}\n\n/**\n * \n * @param zoneFile \n * @param publicKeyOrAddress \n * \n * @ignore\n */\nexport function resolveZoneFileToProfile(zoneFile: any, publicKeyOrAddress: string) {\n  return new Promise((resolve, reject) => {\n    let zoneFileJson = null\n    try {\n      zoneFileJson = parseZoneFile(zoneFile)\n      if (!zoneFileJson.hasOwnProperty('$origin')) {\n        zoneFileJson = null\n      }\n    } catch (e) {\n      reject(e)\n    }\n\n    let tokenFileUrl: string | null = null\n    if (zoneFileJson && Object.keys(zoneFileJson).length > 0) {\n      tokenFileUrl = getTokenFileUrl(zoneFileJson)\n    } else {\n      let profile = null\n      try {\n        profile = JSON.parse(zoneFile)\n        profile = Person.fromLegacyFormat(profile).profile()\n      } catch (error) {\n        reject(error)\n      }\n      resolve(profile)\n      return\n    }\n\n    if (tokenFileUrl) {\n      fetchPrivate(tokenFileUrl)\n        .then(response => response.text())\n        .then(responseText => JSON.parse(responseText))\n        .then((responseJson) => {\n          const tokenRecords = responseJson\n          const profile = extractProfile(tokenRecords[0].token, publicKeyOrAddress)\n          resolve(profile)\n        })\n        .catch((error) => {\n          Logger.error(`resolveZoneFileToProfile: error fetching token file ${tokenFileUrl}: ${error}`)\n          reject(error)\n        })\n    } else {\n      Logger.debug('Token file url not found. Resolving to blank profile.')\n      resolve({})\n    }\n  })\n}\n","\nexport function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined'\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto')\n    if (!resolvedResult) {\n      return false\n    }\n    // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require\n    const cryptoModule = require('crypto') as typeof import('crypto')\n    if (!cryptoModule) {\n      return false\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule)\n      return features\n    }\n    return true\n  } catch (error) {\n    return false\n  }\n}\n\nexport const NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.'\n\nexport type TriplesecDecryptSignature =  (\n  arg: { data: Buffer; key: Buffer }, cb: (err: Error | null, buff: Buffer | null) => void\n) => void\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto'\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto'\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto'\n    }\n  } else {\n    try {\n      // eslint-disable-next-line max-len\n      // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require,@typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto')\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto'\n      }\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB)\n    }\n  }\n}\n","import * as randombytes from 'randombytes'\n\nexport { randombytes as randomBytes }\n\n/** Optional function to generate cryptographically secure random bytes */\nexport type GetRandomBytes = (count: number) => Buffer\n\n","\n\nimport {\n  getFullReadUrl,\n  connectToGaiaHub, uploadToGaiaHub, getBucketUrl, BLOCKSTACK_GAIA_HUB_LABEL, \n  GaiaHubConfig,\n  deleteFromGaiaHub\n} from './hub'\n// export { type GaiaHubConfig } from './hub'\n\nimport {\n  encryptECIES, decryptECIES, signECDSA, verifyECDSA, eciesGetJsonStringLength, \n  SignedCipherObject, CipherTextEncoding\n} from '../encryption/ec'\nimport { getPublicKeyFromPrivate, publicKeyToAddress } from '../keys'\nimport { lookupProfile } from '../profiles/profileLookup'\nimport {\n  InvalidStateError,\n  SignatureVerificationError,\n  DoesNotExist,\n  PayloadTooLargeError,\n  GaiaHubError\n} from '../errors'\n\nimport { UserSession } from '../auth/userSession'\nimport { NAME_LOOKUP_PATH } from '../auth/authConstants'\nimport { getGlobalObject, getBlockstackErrorFromResponse, megabytesToBytes } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\n\nconst etags: { [key: string]: string; } = {}\n\n\nexport interface EncryptionOptions {\n  /**\n   * If set to `true` the data is signed using ECDSA on SHA256 hashes with the user's\n   * app private key. If a string is specified, it is used as the private key instead\n   * of the user's app private key. \n   * @default false\n   */\n  sign?: boolean | string;\n  /**\n   * String encoding format for the cipherText buffer.\n   * Currently defaults to 'hex' for legacy backwards-compatibility.\n   * Only used if the `encrypt` option is also used.\n   * Note: in the future this should default to 'base64' for the significant\n   * file size reduction.\n   */\n  cipherTextEncoding?: CipherTextEncoding;\n  /**\n   * Specifies if the original unencrypted content is a ASCII or UTF-8 string. \n   * For example stringified JSON. \n   * If true, then when the ciphertext is decrypted, it will be returned as \n   * a `string` type variable, otherwise will be returned as a Buffer.\n   */\n  wasString?: boolean;\n}\n\n/**\n * Specify encryption options, and whether to sign the ciphertext.\n */\nexport interface EncryptContentOptions extends EncryptionOptions {\n  /**\n   * Encrypt the data with this key. \n   * If not provided then the current user's app public key is used. \n   */\n  publicKey?: string;\n}\n\n/**\n * Specify a valid MIME type, encryption options, and whether to sign the [[UserSession.putFile]].\n */\nexport interface PutFileOptions extends EncryptionOptions {\n  /**\n   * Specifies the Content-Type header for unencrypted data. \n   * If the `encrypt` is enabled, this option is ignored, and the \n   * Content-Type header is set to `application/json` for the ciphertext \n   * JSON envelope. \n   */\n  contentType?: string;\n  /**\n   * Encrypt the data with the app public key. \n   * If a string is specified, it is used as the public key. \n   * If the boolean `true` is specified then the current user's app public key is used. \n   * @default true\n   */\n  encrypt?: boolean | string;\n}\n\nconst SIGNATURE_FILE_SUFFIX = '.sig'\n\n/**\n * Fetch the public read URL of a user file for the specified app.\n * @param {String} path - the path to the file to read\n * @param {String} username - The Blockstack ID of the user to look up\n * @param {String} appOrigin - The app origin\n * @param {String} [zoneFileLookupURL=null] - The URL\n * to use for zonefile lookup. If falsey, this will use the\n * blockstack.js's [[getNameInfo]] function instead.\n * @return {Promise<string>} that resolves to the public read URL of the file\n * or rejects with an error\n */\nexport async function getUserAppFileUrl(\n  path: string, username: string, appOrigin: string,\n  zoneFileLookupURL?: string\n): Promise<string|null> {\n  const profile = await lookupProfile(username, zoneFileLookupURL)\n  let bucketUrl: string = null\n  if (profile.hasOwnProperty('apps')) {\n    if (profile.apps.hasOwnProperty(appOrigin)) {\n      const url = profile.apps[appOrigin]\n      const bucket = url.replace(/\\/?(\\?|#|$)/, '/$1')\n      bucketUrl = `${bucket}${path}`\n    }\n  }\n  return bucketUrl\n}\n\n/**\n * \n * \n * @deprecated \n * #### v19 Use [[UserSession.encryptContent]].\n *\n * Encrypts the data provided with the app public key.\n * @param {String|Buffer} content - data to encrypt\n * @param {Object} [options=null] - options object\n * @param {String} options.publicKey - the hex string of the ECDSA public\n * key to use for encryption. If not provided, will use user's appPublicKey.\n * @return {String} Stringified ciphertext object\n */\nexport async function encryptContent(\n  content: string | Buffer,\n  options?: EncryptContentOptions,\n  caller?: UserSession\n): Promise<string> {\n  const opts = Object.assign({}, options)\n  let privateKey: string\n  if (!opts.publicKey) {\n    privateKey = (caller || new UserSession()).loadUserData().appPrivateKey\n    opts.publicKey = getPublicKeyFromPrivate(privateKey)\n  }\n  let wasString: boolean\n  if (typeof opts.wasString === 'boolean') {\n    wasString = opts.wasString\n  } else {\n    wasString = typeof content === 'string'\n  }\n  const contentBuffer = typeof content === 'string' ? Buffer.from(content) : content\n  const cipherObject = await encryptECIES(opts.publicKey, \n                                          contentBuffer, \n                                          wasString, \n                                          opts.cipherTextEncoding)\n  let cipherPayload = JSON.stringify(cipherObject)\n  if (opts.sign) {\n    if (typeof opts.sign === 'string') {\n      privateKey = opts.sign\n    } else if (!privateKey) {\n      privateKey = (caller || new UserSession()).loadUserData().appPrivateKey\n    }\n    const signatureObject = signECDSA(privateKey, cipherPayload)\n    const signedCipherObject: SignedCipherObject = {\n      signature: signatureObject.signature,\n      publicKey: signatureObject.publicKey,\n      cipherText: cipherPayload\n    }\n    cipherPayload = JSON.stringify(signedCipherObject)\n  }\n  return cipherPayload\n}\n\n/**\n * \n * @deprecated \n * #### v19 Use [[UserSession.decryptContent]].\n * \n * Decrypts data encrypted with `encryptContent` with the\n * transit private key.\n * @param {String|Buffer} content - encrypted content.\n * @param {Object} [options=null] - options object\n * @param {String} options.privateKey - the hex string of the ECDSA private\n * key to use for decryption. If not provided, will use user's appPrivateKey.\n * @return {String|Buffer} decrypted content.\n */\nexport function decryptContent(\n  content: string,\n  options?: {\n    privateKey?: string\n  },\n  caller?: UserSession\n): Promise<string | Buffer> {\n  const opts = Object.assign({}, options)\n  if (!opts.privateKey) {\n    opts.privateKey = (caller || new UserSession()).loadUserData().appPrivateKey\n  }\n\n  try {\n    const cipherObject = JSON.parse(content)\n    return decryptECIES(opts.privateKey, cipherObject)\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error('Failed to parse encrypted content JSON. The content may not '\n                      + 'be encrypted. If using getFile, try passing { decrypt: false }.')\n    } else {\n      throw err\n    }\n  }\n}\n\n/* Get the gaia address used for servicing multiplayer reads for the given\n * (username, app) pair.\n * @private\n * @ignore\n */\nasync function getGaiaAddress(\n  app: string, username?: string, zoneFileLookupURL?: string,\n  caller?: UserSession\n): Promise<string> {\n  const opts = normalizeOptions({ app, username, zoneFileLookupURL }, caller)\n  let fileUrl: string\n  if (username) {\n    fileUrl = await getUserAppFileUrl('/', opts.username, opts.app, opts.zoneFileLookupURL)\n  } else {\n    if (!caller) {\n      caller = new UserSession()\n    }\n    const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n    fileUrl = await getFullReadUrl('/', gaiaHubConfig)\n  }\n  const matches = fileUrl.match(/([13][a-km-zA-HJ-NP-Z0-9]{26,35})/)\n  if (!matches) {\n    throw new Error('Failed to parse gaia address')\n  }\n  return matches[matches.length - 1]\n}\n/**\n * @param {Object} [options=null] - options object\n * @param {String} options.username - the Blockstack ID to lookup for multi-player storage\n * @param {String} options.app - the app to lookup for multi-player storage -\n * defaults to current origin\n * \n * @ignore\n */\nfunction normalizeOptions<T>(\n  options?: {\n    app?: string, \n    username?: string,\n    zoneFileLookupURL?: string\n  } & T,\n  caller?: UserSession\n) {\n  const opts = Object.assign({}, options)\n  if (opts.username) {\n    if (!opts.app) {\n      caller = caller || new UserSession()\n      if (!caller.appConfig) {\n        throw new InvalidStateError('Missing AppConfig')\n      }\n      opts.app = caller.appConfig.appDomain\n    }\n    if (!opts.zoneFileLookupURL) {\n      caller = caller || new UserSession()\n      if (!caller.appConfig) {\n        throw new InvalidStateError('Missing AppConfig')\n      }\n      if (!caller.store) {\n        throw new InvalidStateError('Missing store UserSession')\n      }\n      const sessionData = caller.store.getSessionData()\n      // Use the user specified coreNode if available, otherwise use the app specified coreNode. \n      const configuredCoreNode = sessionData.userData.coreNode || caller.appConfig.coreNode\n      if (configuredCoreNode) {\n        opts.zoneFileLookupURL = `${configuredCoreNode}${NAME_LOOKUP_PATH}`\n      }\n    }\n  }\n  return opts\n}\n\n/**\n * @deprecated\n * #### v19 Use [[UserSession.getFileUrl]] instead.\n * \n * @param {String} path - the path to the file to read\n * @returns {Promise<string>} that resolves to the URL or rejects with an error\n */\nexport async function getFileUrl(\n  path: string, \n  options?: GetFileUrlOptions,\n  caller?: UserSession\n): Promise<string> {\n  const opts = normalizeOptions(options, caller)\n\n  let readUrl: string\n  if (opts.username) {\n    readUrl = await getUserAppFileUrl(path, opts.username, opts.app, opts.zoneFileLookupURL)\n  } else {\n    const gaiaHubConfig = await (caller || new UserSession()).getOrSetLocalGaiaHubConnection()\n    readUrl = await getFullReadUrl(path, gaiaHubConfig)\n  }\n\n  if (!readUrl) {\n    throw new Error('Missing readURL')\n  } else {\n    return readUrl\n  }\n}\n\n/* Handle fetching the contents from a given path. Handles both\n *  multi-player reads and reads from own storage.\n * @private\n * @ignore\n */\nasync function getFileContents(path: string, app: string, username: string | undefined, \n                               zoneFileLookupURL: string | undefined,\n                               forceText: boolean,\n                               caller?: UserSession): Promise<string | ArrayBuffer | null> {\n  const opts = { app, username, zoneFileLookupURL }\n  const readUrl = await getFileUrl(path, opts, caller)\n  const response = await fetchPrivate(readUrl)\n  if (!response.ok) {\n    throw await getBlockstackErrorFromResponse(response, `getFile ${path} failed.`, null)\n  }\n  let contentType = response.headers.get('Content-Type')\n  if (typeof contentType === 'string') {\n    contentType = contentType.toLowerCase()\n  }\n  \n  const etag = response.headers.get('ETag')\n  if (etag) {\n    etags[path] = etag\n  }\n  if (forceText || contentType === null\n    || contentType.startsWith('text')\n    || contentType.startsWith('application/json')) {\n    return response.text()\n  } else {\n    return response.arrayBuffer()\n  }\n}\n\n/* Handle fetching an unencrypted file, its associated signature\n *  and then validate it. Handles both multi-player reads and reads\n *  from own storage.\n * @private\n * @ignore\n */\nasync function getFileSignedUnencrypted(path: string, opt: GetFileOptions, caller?: UserSession) {\n  // future optimization note:\n  //    in the case of _multi-player_ reads, this does a lot of excess\n  //    profile lookups to figure out where to read files\n  //    do browsers cache all these requests if Content-Cache is set?\n  const sigPath = `${path}${SIGNATURE_FILE_SUFFIX}`\n  try {\n    const [fileContents, signatureContents, gaiaAddress] = await Promise.all([\n      getFileContents(path, opt.app, opt.username, opt.zoneFileLookupURL, false, caller),\n      getFileContents(sigPath, opt.app, opt.username,\n                      opt.zoneFileLookupURL, true, caller),\n      getGaiaAddress(opt.app, opt.username, opt.zoneFileLookupURL, caller)\n    ])\n  \n    if (!fileContents) {\n      return fileContents\n    }\n    if (!gaiaAddress) {\n      throw new SignatureVerificationError('Failed to get gaia address for verification of: '\n                                            + `${path}`)\n    }\n    if (!signatureContents || typeof signatureContents !== 'string') {\n      throw new SignatureVerificationError('Failed to obtain signature for file: '\n                                            + `${path} -- looked in ${path}${SIGNATURE_FILE_SUFFIX}`)\n    }\n    let signature\n    let publicKey\n    try {\n      const sigObject = JSON.parse(signatureContents)\n      signature = sigObject.signature\n      publicKey = sigObject.publicKey\n    } catch (err) {\n      if (err instanceof SyntaxError) {\n        throw new Error('Failed to parse signature content JSON '\n                        + `(path: ${path}${SIGNATURE_FILE_SUFFIX})`\n                        + ' The content may be corrupted.')\n      } else {\n        throw err\n      }\n    }\n    const signerAddress = publicKeyToAddress(publicKey)\n    if (gaiaAddress !== signerAddress) {\n      throw new SignatureVerificationError(`Signer pubkey address (${signerAddress}) doesn't`\n                                            + ` match gaia address (${gaiaAddress})`)\n    } else if (!verifyECDSA(fileContents, publicKey, signature)) {\n      throw new SignatureVerificationError(\n        'Contents do not match ECDSA signature: '\n          + `path: ${path}, signature: ${path}${SIGNATURE_FILE_SUFFIX}`\n      )\n    } else {\n      return fileContents\n    }\n  } catch (err) {\n    // For missing .sig files, throw `SignatureVerificationError` instead of `DoesNotExist` error.\n    if (err instanceof DoesNotExist && err.message.indexOf(sigPath) >= 0) {\n      throw new SignatureVerificationError('Failed to obtain signature for file: '\n                                            + `${path} -- looked in ${path}${SIGNATURE_FILE_SUFFIX}`)\n    } else {\n      throw err\n    }\n  }\n}\n\n/* Handle signature verification and decryption for contents which are\n *  expected to be signed and encrypted. This works for single and\n *  multiplayer reads. In the case of multiplayer reads, it uses the\n *  gaia address for verification of the claimed public key.\n * @private\n * @ignore\n */\nasync function handleSignedEncryptedContents(caller: UserSession, path: string, \n                                             storedContents: string, app: string, \n                                             privateKey?: string, username?: string, \n                                             zoneFileLookupURL?: string\n): Promise<string | Buffer> {\n  const appPrivateKey = privateKey || caller.loadUserData().appPrivateKey\n\n  const appPublicKey = getPublicKeyFromPrivate(appPrivateKey)\n\n  let address: string\n  if (username) {\n    address = await getGaiaAddress(app, username, zoneFileLookupURL, caller)\n  } else {\n    address = publicKeyToAddress(appPublicKey)\n  }\n  if (!address) {\n    throw new SignatureVerificationError('Failed to get gaia address for verification of: '\n                                          + `${path}`)\n  }\n  let sigObject\n  try {\n    sigObject = JSON.parse(storedContents)\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error('Failed to parse encrypted, signed content JSON. The content may not '\n                      + 'be encrypted. If using getFile, try passing'\n                      + ' { verify: false, decrypt: false }.')\n    } else {\n      throw err\n    }\n  }\n  const signature = sigObject.signature\n  const signerPublicKey = sigObject.publicKey\n  const cipherText = sigObject.cipherText\n  const signerAddress = publicKeyToAddress(signerPublicKey)\n\n  if (!signerPublicKey || !cipherText || !signature) {\n    throw new SignatureVerificationError(\n      'Failed to get signature verification data from file:'\n        + ` ${path}`\n    )\n  } else if (signerAddress !== address) {\n    throw new SignatureVerificationError(`Signer pubkey address (${signerAddress}) doesn't`\n                                          + ` match gaia address (${address})`)\n  } else if (!verifyECDSA(cipherText, signerPublicKey, signature)) {\n    throw new SignatureVerificationError('Contents do not match ECDSA signature in file:'\n                                          + ` ${path}`)\n  } else if (typeof (privateKey) === 'string') {\n    const decryptOpt = { privateKey }\n    return caller.decryptContent(cipherText, decryptOpt)\n  } else {\n    return caller.decryptContent(cipherText)\n  }\n}\n\nexport interface GetFileUrlOptions {\n  /**\n   * The Blockstack ID to lookup for multi-player storage. \n   * If not specified, the currently signed in username is used.\n   */\n  username?: string;\n  /**\n   * The app to lookup for multi-player storage - defaults to current origin. \n   * @default `window.location.origin` \n   * Only if available in the executing environment, otherwise `undefined`.\n   */\n  app?: string;\n  /**\n   * The URL to use for zonefile lookup. If falsey, this will use \n   * the blockstack.js's [[getNameInfo]] function instead. \n   */\n  zoneFileLookupURL?: string;\n}\n\n/**\n * Used to pass options to [[UserSession.getFile]]\n */\nexport interface GetFileOptions extends GetFileUrlOptions {\n  /**\n  * Try to decrypt the data with the app private key. \n  * If a string is specified, it is used as the private key. \n   * @default true\n   */\n  decrypt?: boolean | string;\n  /**\n   * Whether the content should be verified, only to be used \n   * when [[UserSession.putFile]] was set to `sign = true`.\n   * @default false\n   */\n  verify?: boolean;\n}\n\n/**\n * Retrieves the specified file from the app's data store.\n * @param {String} path - the path to the file to read\n * @returns {Promise} that resolves to the raw data in the file\n * or rejects with an error\n */\nexport async function getFile(\n  path: string, \n  options?: GetFileOptions,\n  caller?: UserSession\n) {\n  const defaults: GetFileOptions = {\n    decrypt: true,\n    verify: false,\n    username: null,\n    app: getGlobalObject('location', { returnEmptyObject: true }).origin,\n    zoneFileLookupURL: null\n  }\n  const opt = Object.assign({}, defaults, options)\n\n  if (!caller) {\n    caller = new UserSession()\n  }\n\n  // in the case of signature verification, but no\n  //  encryption expected, need to fetch _two_ files.\n  if (opt.verify && !opt.decrypt) {\n    return getFileSignedUnencrypted(path, opt, caller)\n  }\n\n  const storedContents = await getFileContents(path, opt.app, opt.username, \n                                               opt.zoneFileLookupURL, !!opt.decrypt, caller)\n  if (storedContents === null) {\n    return storedContents\n  } else if (opt.decrypt && !opt.verify) {\n    if (typeof storedContents !== 'string') {\n      throw new Error('Expected to get back a string for the cipherText')\n    }\n    if (typeof (opt.decrypt) === 'string') {\n      const decryptOpt = { privateKey: opt.decrypt }\n      return caller.decryptContent(storedContents, decryptOpt)\n    } else {\n      return caller.decryptContent(storedContents)\n    }\n  } else if (opt.decrypt && opt.verify) {\n    if (typeof storedContents !== 'string') {\n      throw new Error('Expected to get back a string for the cipherText')\n    }\n    let decryptionKey\n    if (typeof (opt.decrypt) === 'string') {\n      decryptionKey = opt.decrypt\n    }\n    return handleSignedEncryptedContents(caller, path, storedContents,\n                                         opt.app, decryptionKey, opt.username, \n                                         opt.zoneFileLookupURL)\n  } else if (!opt.verify && !opt.decrypt) {\n    return storedContents\n  } else {\n    throw new Error('Should be unreachable.')\n  }\n}\n\n/** @ignore */\ntype PutFileContent = string | Buffer | ArrayBufferView | ArrayBufferLike | Blob\n\n/** @ignore */\nclass FileContentLoader {\n  readonly content: Buffer | Blob\n\n  readonly wasString: boolean\n\n  readonly contentType: string\n\n  readonly contentByteLength: number\n\n  private loadedData?: Promise<Buffer>\n\n  static readonly supportedTypesMsg = 'Supported types are: `string` (to be UTF8 encoded), '\n    + '`Buffer`, `Blob`, `File`, `ArrayBuffer`, `UInt8Array` or any other typed array buffer. '\n\n  constructor(content: PutFileContent, contentType: string) {\n    this.wasString = typeof content === 'string'\n    this.content = FileContentLoader.normalizeContentDataType(content, contentType)\n    this.contentType = contentType || this.detectContentType()\n    this.contentByteLength = this.detectContentLength()\n  }\n\n  private static normalizeContentDataType(content: PutFileContent, \n                                          contentType: string): Buffer | Blob {\n    try {\n      if (typeof content === 'string') {\n        // If a charset is specified it must be either utf8 or ascii, otherwise the encoded content \n        // length cannot be reliably detected. If no charset specified it will be treated as utf8. \n        const charset = (contentType || '').toLowerCase().replace('-', '')\n        if (charset.includes('charset') && !charset.includes('charset=utf8') && !charset.includes('charset=ascii')) {\n          throw new Error(`Unable to determine byte length with charset: ${contentType}`)\n        }\n        if (typeof TextEncoder !== 'undefined') {\n          const encodedString = new TextEncoder().encode(content)\n          return Buffer.from(encodedString.buffer)\n        }\n        return Buffer.from(content)\n      } else if (Buffer.isBuffer(content)) {\n        return content\n      } else if (ArrayBuffer.isView(content)) {\n        return Buffer.from(content.buffer, content.byteOffset, content.byteLength)\n      } else if (typeof Blob !== 'undefined' && content instanceof Blob) {\n        return content\n      } else if (typeof ArrayBuffer !== 'undefined' && content instanceof ArrayBuffer) {\n        return Buffer.from(content)\n      } else if (Array.isArray(content)) {\n        // Provided with a regular number `Array` -- this is either an (old) method \n        // of representing an octet array, or a dev error. Perform basic check for octet array. \n        if (content.length > 0 \n          && (!Number.isInteger(content[0]) || content[0] < 0 || content[0] > 255)) {\n          throw new Error(`Unexpected array values provided as file data: value \"${content[0]}\" at index 0 is not an octet number. ${this.supportedTypesMsg}`)\n        }\n        return Buffer.from(content)\n      } else {\n        const typeName = Object.prototype.toString.call(content)\n        throw new Error(`Unexpected type provided as file data: ${typeName}. ${this.supportedTypesMsg}`)\n      }\n    } catch (error) {\n      console.error(error)\n      throw new Error(`Error processing data: ${error}`)\n    }\n  }\n\n  private detectContentType(): string {\n    if (this.wasString) {\n      return 'text/plain; charset=utf-8'\n    } else if (typeof Blob !== 'undefined' && this.content instanceof Blob && this.content.type) {\n      return this.content.type\n    } else {\n      return 'application/octet-stream'\n    }\n  }\n\n  private detectContentLength(): number {\n    if (ArrayBuffer.isView(this.content) || Buffer.isBuffer(this.content)) {\n      return this.content.byteLength\n    } else if (typeof Blob !== 'undefined' && this.content instanceof Blob) {\n      return this.content.size\n    }\n    const typeName = Object.prototype.toString.call(this.content)\n    const error = new Error(`Unexpected type \"${typeName}\" while detecting content length`)\n    console.error(error)\n    throw error\n  }\n\n  private async loadContent(): Promise<Buffer> {\n    try {\n      if (Buffer.isBuffer(this.content)) {\n        return this.content\n      } else if (ArrayBuffer.isView(this.content)) {\n        return Buffer.from(this.content.buffer, this.content.byteOffset, this.content.byteLength)\n      } else if (typeof Blob !== 'undefined' && this.content instanceof Blob) {\n        const reader = new FileReader()\n        const readPromise = new Promise<Buffer>((resolve, reject) => {\n          reader.onerror = (err) => {\n            reject(err)\n          }\n          reader.onload = () => {\n            const arrayBuffer = reader.result as ArrayBuffer\n            resolve(Buffer.from(arrayBuffer))\n          }\n          reader.readAsArrayBuffer(this.content as Blob)\n        })\n        const result = await readPromise\n        return result\n      } else {\n        const typeName = Object.prototype.toString.call(this.content)\n        throw new Error(`Unexpected type ${typeName}`)\n      }\n    } catch (error) {\n      console.error(error)\n      const loadContentError = new Error(`Error loading content: ${error}`)\n      console.error(loadContentError)\n      throw loadContentError\n    }\n  }\n\n  load(): Promise<Buffer | string> {\n    if (this.loadedData === undefined) {\n      this.loadedData = this.loadContent()\n    }\n    return this.loadedData\n  }\n}\n\n/** \n * Determines if a gaia error response is possible to recover from\n * by refreshing the gaiaHubConfig, and retrying the request. \n */\nfunction isRecoverableGaiaError(error: GaiaHubError): boolean {\n  if (!error || !error.hubError || !error.hubError.statusCode) {\n    return false\n  }\n  const statusCode = error.hubError.statusCode\n  // 401 Unauthorized: possible expired, but renewable auth token.\n  if (statusCode === 401) {\n    return true\n  }\n  // 409 Conflict: possible concurrent writes to a file.\n  if (statusCode === 409) {\n    return true\n  }\n  // 500s: possible server-side transient error\n  if (statusCode >= 500 && statusCode <= 599) {\n    return true\n  }\n  return false\n}\n\n/**\n * Stores the data provided in the app's data store to to the file specified.\n * @param {String} path - the path to store the data in\n * @param {String|Buffer} content - the data to store in the file\n * @return {Promise} that resolves if the operation succeed and rejects\n * if it failed\n */\nexport async function putFile(\n  path: string,\n  content: string | Buffer | ArrayBufferView | Blob,\n  options?: PutFileOptions,\n  caller?: UserSession,\n): Promise<string> {\n  const defaults: PutFileOptions = {\n    encrypt: true,\n    sign: false,\n    cipherTextEncoding: 'hex'\n  }\n  const opt = Object.assign({}, defaults, options)\n\n  if (!caller) {\n    caller = new UserSession()\n  }\n\n  const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n  const maxUploadBytes = megabytesToBytes(gaiaHubConfig.max_file_upload_size_megabytes)\n  const hasMaxUpload = maxUploadBytes > 0\n\n  const contentLoader = new FileContentLoader(content, opt.contentType)\n  let contentType = contentLoader.contentType\n\n  // When not encrypting the content length can be checked immediately.\n  if (!opt.encrypt && hasMaxUpload && contentLoader.contentByteLength > maxUploadBytes) {\n    const sizeErrMsg = `The max file upload size for this hub is ${maxUploadBytes} bytes, the given content is ${contentLoader.contentByteLength} bytes`\n    const sizeErr = new PayloadTooLargeError(sizeErrMsg, null, maxUploadBytes)\n    console.error(sizeErr)\n    throw sizeErr\n  }\n  \n  // When encrypting, the content length must be calculated. Certain types like `Blob`s must\n  // be loaded into memory. \n  if (opt.encrypt && hasMaxUpload) {\n    const encryptedSize = eciesGetJsonStringLength({\n      contentLength: contentLoader.contentByteLength, \n      wasString: contentLoader.wasString,\n      sign: !!opt.sign,\n      cipherTextEncoding: opt.cipherTextEncoding\n    })\n    if (encryptedSize > maxUploadBytes) {\n      const sizeErrMsg = `The max file upload size for this hub is ${maxUploadBytes} bytes, the given content is ${encryptedSize} bytes after encryption`\n      const sizeErr = new PayloadTooLargeError(sizeErrMsg, null, maxUploadBytes)\n      console.error(sizeErr)\n      throw sizeErr\n    }\n  }\n\n  let etag: string\n  let newFile = true\n\n  if (etags[path]) {\n    newFile = false\n    etag = etags[path]\n  } \n\n  let uploadFn: (hubConfig: GaiaHubConfig) => Promise<string>\n\n  // In the case of signing, but *not* encrypting, we perform two uploads.\n  if (!opt.encrypt && opt.sign) {\n    const contentData = await contentLoader.load()\n    let privateKey: string\n    if (typeof opt.sign === 'string') {\n      privateKey = opt.sign\n    } else {\n      privateKey = caller.loadUserData().appPrivateKey\n    }\n    const signatureObject = signECDSA(privateKey, contentData)\n    const signatureContent = JSON.stringify(signatureObject)\n\n    uploadFn = async (hubConfig: GaiaHubConfig) => {\n      const writeResponse = (await Promise.all([\n        uploadToGaiaHub(path, contentData, hubConfig, contentType, newFile, etag),\n        uploadToGaiaHub(`${path}${SIGNATURE_FILE_SUFFIX}`,\n                        signatureContent, hubConfig, 'application/json')\n      ]))[0]\n      if (writeResponse.etag) {\n        etags[path] = writeResponse.etag\n      }\n      return writeResponse.publicURL\n    }\n  } else {\n    // In all other cases, we only need one upload.\n    let contentForUpload: string | Buffer | Blob\n    if (!opt.encrypt && !opt.sign) {\n      // If content does not need encrypted or signed, it can be passed directly \n      // to the fetch request without loading into memory. \n      contentForUpload = contentLoader.content\n    } else {\n      // Use the `encrypt` key, otherwise the `sign` key, if neither are specified\n      // then use the current user's app public key. \n      let publicKey: string\n      if (typeof opt.encrypt === 'string') {\n        publicKey = opt.encrypt\n      } else if (typeof opt.sign === 'string') {\n        publicKey = getPublicKeyFromPrivate(opt.sign)\n      } else {\n        publicKey = getPublicKeyFromPrivate(caller.loadUserData().appPrivateKey)\n      }\n      const contentData = await contentLoader.load()\n      contentForUpload = await encryptContent(contentData, { \n        publicKey, \n        wasString: contentLoader.wasString,\n        cipherTextEncoding: opt.cipherTextEncoding,\n        sign: opt.sign\n      })\n      contentType = 'application/json'\n    }\n\n    uploadFn = async (hubConfig: GaiaHubConfig) => {\n      const writeResponse = await uploadToGaiaHub(\n        path, contentForUpload, hubConfig, contentType, newFile, etag\n      )\n      if (writeResponse.etag) {\n        etags[path] = writeResponse.etag\n      }\n      return writeResponse.publicURL\n    }\n  }\n\n  try {\n    return await uploadFn(gaiaHubConfig)\n  } catch (error) {\n    // If the upload fails on first attempt, it could be due to a recoverable\n    // error which may succeed by refreshing the config and retrying.\n    if (isRecoverableGaiaError(error)) {\n      console.error(error)\n      console.error('Possible recoverable error during Gaia upload, retrying...')\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      return await uploadFn(freshHubConfig)\n    } else {\n      throw error\n    }\n  }\n}\n\n/**\n * Deletes the specified file from the app's data store. \n * @param path - The path to the file to delete.\n * @param options - Optional options object.\n * @param options.wasSigned - Set to true if the file was originally signed\n * in order for the corresponding signature file to also be deleted.\n * @returns Resolves when the file has been removed or rejects with an error.\n */\nexport async function deleteFile(\n  path: string, \n  options?: {\n    wasSigned?: boolean;\n  },\n  caller?: UserSession\n) {\n  if (!caller) {\n    caller = new UserSession()\n  }\n  const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n  const opts = Object.assign({}, options)\n  if (opts.wasSigned) {\n    // If signed, delete both the content file and the .sig file\n    try {\n      await deleteFromGaiaHub(path, gaiaHubConfig)\n      await deleteFromGaiaHub(`${path}${SIGNATURE_FILE_SUFFIX}`, gaiaHubConfig)\n    } catch (error) {\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      await deleteFromGaiaHub(path, freshHubConfig)\n      await deleteFromGaiaHub(`${path}${SIGNATURE_FILE_SUFFIX}`, gaiaHubConfig)\n    }\n  } else {\n    try {\n      await deleteFromGaiaHub(path, gaiaHubConfig)\n    } catch (error) {\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      await deleteFromGaiaHub(path, freshHubConfig)\n    }\n  }\n}\n\n/**\n * Get the app storage bucket URL\n * @param {String} gaiaHubUrl - the gaia hub URL\n * @param {String} appPrivateKey - the app private key used to generate the app address\n * @returns {Promise} That resolves to the URL of the app index file\n * or rejects if it fails\n */\nexport function getAppBucketUrl(gaiaHubUrl: string, appPrivateKey: string) {\n  return getBucketUrl(gaiaHubUrl, appPrivateKey)\n}\n\n/**\n * Loop over the list of files in a Gaia hub, and run a callback on each entry.\n * Not meant to be called by external clients.\n * @param {GaiaHubConfig} hubConfig - the Gaia hub config\n * @param {String | null} page - the page ID\n * @param {number} callCount - the loop count\n * @param {number} fileCount - the number of files listed so far\n * @param {function} callback - the callback to invoke on each file.  If it returns a falsey\n *  value, then the loop stops.  If it returns a truthy value, the loop continues.\n * @returns {Promise} that resolves to the number of files listed.\n * @private\n * @ignore\n */\nasync function listFilesLoop(\n  caller: UserSession,\n  hubConfig: GaiaHubConfig | null,\n  page: string | null,\n  callCount: number,\n  fileCount: number,\n  callback: (name: string) => boolean\n): Promise<number> {\n  if (callCount > 65536) {\n    // this is ridiculously huge, and probably indicates\n    // a faulty Gaia hub anyway (e.g. on that serves endless data)\n    throw new Error('Too many entries to list')\n  }\n\n  hubConfig = hubConfig || await caller.getOrSetLocalGaiaHubConnection()\n  let response: Response\n  try {\n    const pageRequest = JSON.stringify({ page })\n    const fetchOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Content-Length': `${pageRequest.length}`,\n        Authorization: `bearer ${hubConfig.token}`\n      },\n      body: pageRequest\n    }\n    response = await fetchPrivate(`${hubConfig.server}/list-files/${hubConfig.address}`, fetchOptions)\n    if (!response.ok) {\n      throw await getBlockstackErrorFromResponse(response, 'ListFiles failed.', hubConfig)\n    }\n  } catch (error) {\n    // If error occurs on the first call, perform a gaia re-connection and retry.\n    // Same logic as other gaia requests (putFile, getFile, etc).\n    if (callCount === 0) {\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      return listFilesLoop(caller, freshHubConfig, page, callCount + 1, 0, callback)\n    }\n    throw error\n  }\n\n  const responseText = await response.text()\n  const responseJSON = JSON.parse(responseText)\n  const entries = responseJSON.entries\n  const nextPage = responseJSON.page\n  if (entries === null || entries === undefined) {\n    // indicates a misbehaving Gaia hub or a misbehaving driver\n    // (i.e. the data is malformed)\n    throw new Error('Bad listFiles response: no entries')\n  }\n  let entriesLength = 0\n  for (let i = 0; i < entries.length; i++) {\n    // An entry array can have null entries, signifying a filtered entry and that there may be\n    // additional pages\n    if (entries[i] !== null) {\n      entriesLength++\n      const rc = callback(entries[i])\n      if (!rc) {\n        // callback indicates that we're done\n        return fileCount + i\n      }\n    }\n  }\n  if (nextPage && entries.length > 0) {\n    // keep going -- have more entries\n    return listFilesLoop(\n      caller, hubConfig, nextPage, callCount + 1, fileCount + entriesLength, callback\n    )\n  } else {\n    // no more entries -- end of data\n    return fileCount + entriesLength\n  }\n}\n\n/**\n * List the set of files in this application's Gaia storage bucket.\n * @param {function} callback - a callback to invoke on each named file that\n * returns `true` to continue the listing operation or `false` to end it\n * @return {Promise} that resolves to the total number of listed files. \n * If the call is ended early by the callback, the last file is excluded. \n * If an error occurs the entire call is rejected.\n */\nexport function listFiles(\n  callback: (name: string) => boolean,\n  caller?: UserSession\n): Promise<number> {\n  caller = caller || new UserSession()\n  return listFilesLoop(caller, null, null, 0, 0, callback)\n}\n\nexport { connectToGaiaHub, uploadToGaiaHub, BLOCKSTACK_GAIA_HUB_LABEL }\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeforce = require('typeforce');\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction UInt31(value) {\n  return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nexports.UInt31 = UInt31;\nfunction BIP32Path(value) {\n  return typeforce.String(value) && !!value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/);\n}\nexports.BIP32Path = BIP32Path;\nBIP32Path.toJSON = () => {\n  return 'BIP32 derivation path';\n};\nfunction Signer(obj) {\n  return (\n    (typeforce.Buffer(obj.publicKey) ||\n      typeof obj.getPublicKey === 'function') &&\n    typeof obj.sign === 'function'\n  );\n}\nexports.Signer = Signer;\nconst SATOSHI_MAX = 21 * 1e14;\nfunction Satoshi(value) {\n  return typeforce.UInt53(value) && value <= SATOSHI_MAX;\n}\nexports.Satoshi = Satoshi;\n// external dependent types\nexports.ECPoint = typeforce.quacksLike('Point');\n// exposed, external API\nexports.Network = typeforce.compile({\n  messagePrefix: typeforce.oneOf(typeforce.Buffer, typeforce.String),\n  bip32: {\n    public: typeforce.UInt32,\n    private: typeforce.UInt32,\n  },\n  pubKeyHash: typeforce.UInt8,\n  scriptHash: typeforce.UInt8,\n  wif: typeforce.UInt8,\n});\nexports.Buffer256bit = typeforce.BufferN(32);\nexports.Hash160bit = typeforce.BufferN(20);\nexports.Hash256bit = typeforce.BufferN(32);\nexports.Number = typeforce.Number; // tslint:disable-line variable-name\nexports.Array = typeforce.Array;\nexports.Boolean = typeforce.Boolean; // tslint:disable-line variable-name\nexports.String = typeforce.String; // tslint:disable-line variable-name\nexports.Buffer = typeforce.Buffer;\nexports.Hex = typeforce.Hex;\nexports.maybe = typeforce.maybe;\nexports.tuple = typeforce.tuple;\nexports.UInt8 = typeforce.UInt8;\nexports.UInt32 = typeforce.UInt32;\nexports.Function = typeforce.Function;\nexports.BufferN = typeforce.BufferN;\nexports.Null = typeforce.Null;\nexports.oneOf = typeforce.oneOf;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst createHash = require('create-hash');\nfunction ripemd160(buffer) {\n  try {\n    return createHash('rmd160')\n      .update(buffer)\n      .digest();\n  } catch (err) {\n    return createHash('ripemd160')\n      .update(buffer)\n      .digest();\n  }\n}\nexports.ripemd160 = ripemd160;\nfunction sha1(buffer) {\n  return createHash('sha1')\n    .update(buffer)\n    .digest();\n}\nexports.sha1 = sha1;\nfunction sha256(buffer) {\n  return createHash('sha256')\n    .update(buffer)\n    .digest();\n}\nexports.sha256 = sha256;\nfunction hash160(buffer) {\n  return ripemd160(sha256(buffer));\n}\nexports.hash160 = hash160;\nfunction hash256(buffer) {\n  return sha256(sha256(buffer));\n}\nexports.hash256 = hash256;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// @ts-ignore: Could not find a declaration file for module\nimport * as inspector from 'schema-inspector'\n\nimport { signProfileToken, extractProfile } from './profileTokens'\nimport { validateProofs } from './profileProofs'\nimport { makeProfileZoneFile } from './profileZoneFiles'\nimport { CheerioModuleType } from './services/service'\n\nconst schemaDefinition: {[key: string]: any} = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' }\n  }\n}\n \n/**\n * Represents a user profile\n * \n */\nexport class Profile {\n  _profile: {[key: string]: any}\n\n  constructor(profile = {}) {\n    this._profile = Object.assign({}, {\n      '@context': 'http://schema.org/'\n    }, profile)\n  }\n\n  toJSON() {\n    return Object.assign({}, this._profile)\n  }\n\n  toToken(privateKey: string): string {\n    return signProfileToken(this.toJSON(), privateKey)\n  }\n\n  static validateSchema(profile: any, strict = false): any {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): Profile {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new Profile(profile)\n  }\n\n  static makeZoneFile(domainName: string, tokenFileURL: string): string {\n    return makeProfileZoneFile(domainName, tokenFileURL)\n  }\n\n  static async validateProofs(domainName: string, cheerio: CheerioModuleType): Promise<any[]> {\n    return validateProofs(new Profile().toJSON(), domainName, cheerio)\n  }\n}\n","module.exports = require('./lib/schema-inspector');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","const BN = require('bn.js')\nconst EC = require('elliptic').ec\nconst secp256k1 = new EC('secp256k1')\nconst deterministicGenerateK = require('./rfc6979')\n\nconst ZERO32 = Buffer.alloc(32, 0)\nconst EC_GROUP_ORDER = Buffer.from('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141', 'hex')\nconst EC_P = Buffer.from('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f', 'hex')\n\nconst n = secp256k1.curve.n\nconst nDiv2 = n.shrn(1)\nconst G = secp256k1.curve.g\n\nconst THROW_BAD_PRIVATE = 'Expected Private'\nconst THROW_BAD_POINT = 'Expected Point'\nconst THROW_BAD_TWEAK = 'Expected Tweak'\nconst THROW_BAD_HASH = 'Expected Hash'\nconst THROW_BAD_SIGNATURE = 'Expected Signature'\nconst THROW_BAD_EXTRA_DATA = 'Expected Extra Data (32 bytes)'\n\nfunction isScalar (x) {\n  return Buffer.isBuffer(x) && x.length === 32\n}\n\nfunction isOrderScalar (x) {\n  if (!isScalar(x)) return false\n  return x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isPoint (p) {\n  if (!Buffer.isBuffer(p)) return false\n  if (p.length < 33) return false\n\n  const t = p[0]\n  const x = p.slice(1, 33)\n  if (x.compare(ZERO32) === 0) return false\n  if (x.compare(EC_P) >= 0) return false\n  if ((t === 0x02 || t === 0x03) && p.length === 33) {\n    try { decodeFrom(p) } catch (e) { return false } // TODO: temporary\n    return true\n  }\n\n  const y = p.slice(33)\n  if (y.compare(ZERO32) === 0) return false\n  if (y.compare(EC_P) >= 0) return false\n  if (t === 0x04 && p.length === 65) return true\n  return false\n}\n\nfunction __isPointCompressed (p) {\n  return p[0] !== 0x04\n}\n\nfunction isPointCompressed (p) {\n  if (!isPoint(p)) return false\n  return __isPointCompressed(p)\n}\n\nfunction isPrivate (x) {\n  if (!isScalar(x)) return false\n  return x.compare(ZERO32) > 0 && // > 0\n    x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isSignature (value) {\n  const r = value.slice(0, 32)\n  const s = value.slice(32, 64)\n  return Buffer.isBuffer(value) && value.length === 64 &&\n    r.compare(EC_GROUP_ORDER) < 0 &&\n    s.compare(EC_GROUP_ORDER) < 0\n}\n\nfunction assumeCompression (value, pubkey) {\n  if (value === undefined && pubkey !== undefined) return __isPointCompressed(pubkey)\n  if (value === undefined) return true\n  return value\n}\n\nfunction fromBuffer (d) { return new BN(d) }\nfunction toBuffer (d) { return d.toArrayLike(Buffer, 'be', 32) }\nfunction decodeFrom (P) { return secp256k1.curve.decodePoint(P) }\nfunction getEncoded (P, compressed) { return Buffer.from(P._encode(compressed)) }\n\nfunction pointAdd (pA, pB, __compressed) {\n  if (!isPoint(pA)) throw new TypeError(THROW_BAD_POINT)\n  if (!isPoint(pB)) throw new TypeError(THROW_BAD_POINT)\n\n  const a = decodeFrom(pA)\n  const b = decodeFrom(pB)\n  const pp = a.add(b)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed, pA)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointAddScalar (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  if (tweak.compare(ZERO32) === 0) return getEncoded(pp, compressed)\n\n  const tt = fromBuffer(tweak)\n  const qq = G.mul(tt)\n  const uu = pp.add(qq)\n  if (uu.isInfinity()) return null\n\n  return getEncoded(uu, compressed)\n}\n\nfunction pointCompress (p, compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n\n  const pp = decodeFrom(p)\n  if (pp.isInfinity()) throw new TypeError(THROW_BAD_POINT)\n\n  return getEncoded(pp, compressed)\n}\n\nfunction pointFromScalar (d, __compressed) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n\n  const dd = fromBuffer(d)\n  const pp = G.mul(dd)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointMultiply (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  const tt = fromBuffer(tweak)\n  const qq = pp.mul(tt)\n  if (qq.isInfinity()) return null\n\n  return getEncoded(qq, compressed)\n}\n\nfunction privateAdd (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.add(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction privateSub (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.sub(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction sign (hash, x) {\n  return __sign(hash, x)\n}\n\nfunction signWithEntropy (hash, x, addData) {\n  return __sign(hash, x, addData)\n}\n\nfunction __sign (hash, x, addData) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPrivate(x)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (addData !== undefined && !isScalar(addData)) throw new TypeError(THROW_BAD_EXTRA_DATA)\n\n  const d = fromBuffer(x)\n  const e = fromBuffer(hash)\n\n  let r, s\n  const checkSig = function (k) {\n    const kI = fromBuffer(k)\n    const Q = G.mul(kI)\n\n    if (Q.isInfinity()) return false\n\n    r = Q.x.umod(n)\n    if (r.isZero() === 0) return false\n\n    s = kI\n      .invm(n)\n      .mul(e.add(d.mul(r)))\n      .umod(n)\n    if (s.isZero() === 0) return false\n\n    return true\n  }\n\n  deterministicGenerateK(hash, x, checkSig, isPrivate, addData)\n\n  // enforce low S values, see bip62: 'low s values in signatures'\n  if (s.cmp(nDiv2) > 0) {\n    s = n.sub(s)\n  }\n\n  const buffer = Buffer.allocUnsafe(64)\n  toBuffer(r).copy(buffer, 0)\n  toBuffer(s).copy(buffer, 32)\n  return buffer\n}\n\nfunction verify (hash, q, signature) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPoint(q)) throw new TypeError(THROW_BAD_POINT)\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (1, isSignature enforces '< n - 1')\n  if (!isSignature(signature)) throw new TypeError(THROW_BAD_SIGNATURE)\n\n  const Q = decodeFrom(q)\n  const r = fromBuffer(signature.slice(0, 32))\n  const s = fromBuffer(signature.slice(32, 64))\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (2, enforces '> 0')\n  if (r.gtn(0) <= 0 /* || r.compareTo(n) >= 0 */) return false\n  if (s.gtn(0) <= 0 /* || s.compareTo(n) >= 0 */) return false\n\n  // 1.4.2 H = Hash(M), already done by the user\n  // 1.4.3 e = H\n  const e = fromBuffer(hash)\n\n  // Compute s^-1\n  const sInv = s.invm(n)\n\n  // 1.4.4 Compute u1 = es^1 mod n\n  //               u2 = rs^1 mod n\n  const u1 = e.mul(sInv).umod(n)\n  const u2 = r.mul(sInv).umod(n)\n\n  // 1.4.5 Compute R = (xR, yR)\n  //               R = u1G + u2Q\n  const R = G.mulAdd(u1, Q, u2)\n\n  // 1.4.5 (cont.) Enforce R is not at infinity\n  if (R.isInfinity()) return false\n\n  // 1.4.6 Convert the field element R.x to an integer\n  const xR = R.x\n\n  // 1.4.7 Set v = xR mod n\n  const v = xR.umod(n)\n\n  // 1.4.8 If v = r, output \"valid\", and if v != r, output \"invalid\"\n  return v.eq(r)\n}\n\nmodule.exports = {\n  isPoint,\n  isPointCompressed,\n  isPrivate,\n  pointAdd,\n  pointAddScalar,\n  pointCompress,\n  pointFromScalar,\n  pointMultiply,\n  privateAdd,\n  privateSub,\n  sign,\n  signWithEntropy,\n  verify\n}\n","module.exports = assert;\n\nfunction assert(val, msg) {\n  if (!val)\n    throw new Error(msg || 'Assertion failed');\n}\n\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r)\n    throw new Error(msg || ('Assertion failed: ' + l + ' != ' + r));\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction prop(object, name, f) {\n  Object.defineProperty(object, name, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const _value = f.call(this);\n      this[name] = _value;\n      return _value;\n    },\n    set(_value) {\n      Object.defineProperty(this, name, {\n        configurable: true,\n        enumerable: true,\n        value: _value,\n        writable: true,\n      });\n    },\n  });\n}\nexports.prop = prop;\nfunction value(f) {\n  let _value;\n  return () => {\n    if (_value !== undefined) return _value;\n    _value = f();\n    return _value;\n  };\n}\nexports.value = value;\n","var exports = module.exports = function SHA (algorithm) {\n  algorithm = algorithm.toLowerCase()\n\n  var Algorithm = exports[algorithm]\n  if (!Algorithm) throw new Error(algorithm + ' is not supported (we accept pull requests)')\n\n  return new Algorithm()\n}\n\nexports.sha = require('./sha')\nexports.sha1 = require('./sha1')\nexports.sha224 = require('./sha224')\nexports.sha256 = require('./sha256')\nexports.sha384 = require('./sha384')\nexports.sha512 = require('./sha512')\n","import Ripemd160Polyfill from 'ripemd160-min'\nimport { isNodeCryptoAvailable } from './cryptoUtils'\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash\n\nexport interface Ripemd160Digest {\n  digest(data: Buffer): Buffer\n}\n\nexport class Ripemd160PolyfillDigest implements Ripemd160Digest {\n  digest(data: Buffer): Buffer {\n    const instance = new Ripemd160Polyfill()\n    instance.update(data)\n    const hash = instance.digest()\n    if (Array.isArray(hash)) {\n      return Buffer.from(hash)\n    } else {\n      return Buffer.from(hash.buffer)\n    }\n  }\n}\n\nexport class NodeCryptoRipemd160Digest implements Ripemd160Digest {\n  nodeCryptoCreateHash: NodeCryptoCreateHash\n\n  constructor(nodeCryptoCreateHash: NodeCryptoCreateHash) {\n    this.nodeCryptoCreateHash = nodeCryptoCreateHash\n  }\n\n  digest(data: Buffer): Buffer {\n    try {\n      return this.nodeCryptoCreateHash('rmd160').update(data).digest()\n    } catch (error) {\n      try {\n        return this.nodeCryptoCreateHash('ripemd160').update(data).digest()\n      } catch (_err) {\n        console.log(error)\n        console.log('Node.js `crypto.createHash` exists but failing to digest for ripemd160, falling back to js implementation')\n        const polyfill = new Ripemd160PolyfillDigest()\n        return polyfill.digest(data)\n      }\n    }\n  }\n}\n\nexport function createHashRipemd160() {\n  const nodeCryptoCreateHash = isNodeCryptoAvailable(nodeCrypto => {\n    if (typeof nodeCrypto.createHash === 'function') {\n      return nodeCrypto.createHash\n    }\n    return false\n  })\n  if (nodeCryptoCreateHash) {\n    return new NodeCryptoRipemd160Digest(nodeCryptoCreateHash)\n  } else {\n    return new Ripemd160PolyfillDigest()\n  }\n}\n\nexport function hashRipemd160(data: Buffer) {\n  const hash = createHashRipemd160()\n  return hash.digest(data)\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst createHash = require(\"create-hash\");\nconst pbkdf2_1 = require(\"pbkdf2\");\nconst randomBytes = require(\"randombytes\");\nconst _wordlists_1 = require(\"./_wordlists\");\nlet DEFAULT_WORDLIST = _wordlists_1._default;\nconst INVALID_MNEMONIC = 'Invalid mnemonic';\nconst INVALID_ENTROPY = 'Invalid entropy';\nconst INVALID_CHECKSUM = 'Invalid mnemonic checksum';\nconst WORDLIST_REQUIRED = 'A wordlist is required but a default could not be found.\\n' +\n    'Please explicitly pass a 2048 word array explicitly.';\nfunction lpad(str, padString, length) {\n    while (str.length < length)\n        str = padString + str;\n    return str;\n}\nfunction binaryToByte(bin) {\n    return parseInt(bin, 2);\n}\nfunction bytesToBinary(bytes) {\n    return bytes.map(x => lpad(x.toString(2), '0', 8)).join('');\n}\nfunction deriveChecksumBits(entropyBuffer) {\n    const ENT = entropyBuffer.length * 8;\n    const CS = ENT / 32;\n    const hash = createHash('sha256')\n        .update(entropyBuffer)\n        .digest();\n    return bytesToBinary([...hash]).slice(0, CS);\n}\nfunction salt(password) {\n    return 'mnemonic' + (password || '');\n}\nfunction mnemonicToSeedSync(mnemonic, password) {\n    const mnemonicBuffer = Buffer.from((mnemonic || '').normalize('NFKD'), 'utf8');\n    const saltBuffer = Buffer.from(salt((password || '').normalize('NFKD')), 'utf8');\n    return pbkdf2_1.pbkdf2Sync(mnemonicBuffer, saltBuffer, 2048, 64, 'sha512');\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\nfunction mnemonicToSeed(mnemonic, password) {\n    return new Promise((resolve, reject) => {\n        try {\n            const mnemonicBuffer = Buffer.from((mnemonic || '').normalize('NFKD'), 'utf8');\n            const saltBuffer = Buffer.from(salt((password || '').normalize('NFKD')), 'utf8');\n            pbkdf2_1.pbkdf2(mnemonicBuffer, saltBuffer, 2048, 64, 'sha512', (err, data) => {\n                if (err)\n                    return reject(err);\n                else\n                    return resolve(data);\n            });\n        }\n        catch (error) {\n            return reject(error);\n        }\n    });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    wordlist = wordlist || DEFAULT_WORDLIST;\n    if (!wordlist) {\n        throw new Error(WORDLIST_REQUIRED);\n    }\n    const words = (mnemonic || '').normalize('NFKD').split(' ');\n    if (words.length % 3 !== 0)\n        throw new Error(INVALID_MNEMONIC);\n    // convert word indices to 11 bit binary strings\n    const bits = words\n        .map(word => {\n        const index = wordlist.indexOf(word);\n        if (index === -1)\n            throw new Error(INVALID_MNEMONIC);\n        return lpad(index.toString(2), '0', 11);\n    })\n        .join('');\n    // split the binary string into ENT/CS\n    const dividerIndex = Math.floor(bits.length / 33) * 32;\n    const entropyBits = bits.slice(0, dividerIndex);\n    const checksumBits = bits.slice(dividerIndex);\n    // calculate the checksum and compare\n    const entropyBytes = entropyBits.match(/(.{1,8})/g).map(binaryToByte);\n    if (entropyBytes.length < 16)\n        throw new Error(INVALID_ENTROPY);\n    if (entropyBytes.length > 32)\n        throw new Error(INVALID_ENTROPY);\n    if (entropyBytes.length % 4 !== 0)\n        throw new Error(INVALID_ENTROPY);\n    const entropy = Buffer.from(entropyBytes);\n    const newChecksum = deriveChecksumBits(entropy);\n    if (newChecksum !== checksumBits)\n        throw new Error(INVALID_CHECKSUM);\n    return entropy.toString('hex');\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\nfunction entropyToMnemonic(entropy, wordlist) {\n    if (!Buffer.isBuffer(entropy))\n        entropy = Buffer.from(entropy, 'hex');\n    wordlist = wordlist || DEFAULT_WORDLIST;\n    if (!wordlist) {\n        throw new Error(WORDLIST_REQUIRED);\n    }\n    // 128 <= ENT <= 256\n    if (entropy.length < 16)\n        throw new TypeError(INVALID_ENTROPY);\n    if (entropy.length > 32)\n        throw new TypeError(INVALID_ENTROPY);\n    if (entropy.length % 4 !== 0)\n        throw new TypeError(INVALID_ENTROPY);\n    const entropyBits = bytesToBinary([...entropy]);\n    const checksumBits = deriveChecksumBits(entropy);\n    const bits = entropyBits + checksumBits;\n    const chunks = bits.match(/(.{1,11})/g);\n    const words = chunks.map(binary => {\n        const index = binaryToByte(binary);\n        return wordlist[index];\n    });\n    return wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093' // Japanese wordlist\n        ? words.join('\\u3000')\n        : words.join(' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\nfunction generateMnemonic(strength, rng, wordlist) {\n    strength = strength || 128;\n    if (strength % 32 !== 0)\n        throw new TypeError(INVALID_ENTROPY);\n    rng = rng || randomBytes;\n    return entropyToMnemonic(rng(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nfunction setDefaultWordlist(language) {\n    const result = _wordlists_1.wordlists[language];\n    if (result)\n        DEFAULT_WORDLIST = result;\n    else\n        throw new Error('Could not find wordlist for language \"' + language + '\"');\n}\nexports.setDefaultWordlist = setDefaultWordlist;\nfunction getDefaultWordlist() {\n    if (!DEFAULT_WORDLIST)\n        throw new Error('No Default Wordlist set');\n    return Object.keys(_wordlists_1.wordlists).filter(lang => {\n        if (lang === 'JA' || lang === 'EN')\n            return false;\n        return _wordlists_1.wordlists[lang].every((word, index) => word === DEFAULT_WORDLIST[index]);\n    })[0];\n}\nexports.getDefaultWordlist = getDefaultWordlist;\nvar _wordlists_2 = require(\"./_wordlists\");\nexports.wordlists = _wordlists_2.wordlists;\n","var Buffer = require('safe-buffer').Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n","import * as queryString from 'query-string'\nimport { decodeToken } from 'jsontokens'\nimport { BLOCKSTACK_HANDLER, getGlobalObject, updateQueryStringParameter } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\n\n\nimport { Logger } from '../logger'\n\n/**\n * Retrieves the authentication request from the query string\n * @return {String|null} the authentication request or `null` if\n * the query string parameter `authRequest` is not found\n * @private\n * @ignore \n */\nexport function getAuthRequestFromURL() {\n  const location = getGlobalObject('location', { throwIfUnavailable: true, usageDesc: 'getAuthRequestFromURL' })\n  const queryDict = queryString.parse(location.search)\n  if (queryDict.authRequest) {\n    return (<string>queryDict.authRequest).split(`${BLOCKSTACK_HANDLER}:`).join('')\n  } else {\n    return null\n  }\n}\n\n/**\n * Fetches the contents of the manifest file specified in the authentication request\n *\n * @param  {String} authRequest encoded and signed authentication request\n * @return {Promise<Object|String>} Returns a `Promise` that resolves to the JSON\n * object manifest file unless there's an error in which case rejects with an error\n * message.\n * @private\n * @ignore \n */\nexport async function fetchAppManifest(authRequest: string): Promise<any> {\n  if (!authRequest) {\n    throw new Error('Invalid auth request')\n  }\n  const payload = decodeToken(authRequest).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  const manifestURI = payload.manifest_uri as string\n  try {\n    Logger.debug(`Fetching manifest from ${manifestURI}`)\n    const response = await fetchPrivate(manifestURI)\n    const responseText = await response.text()\n    const responseJSON = JSON.parse(responseText)\n    return { ...responseJSON, manifestURI }\n  } catch (error) {\n    console.log(error)\n    throw new Error('Could not fetch manifest.json')\n  }\n}\n\n/**\n * Redirect the user's browser to the app using the `redirect_uri`\n * specified in the authentication request, passing the authentication\n * response token as a query parameter.\n *\n * @param {String} authRequest  encoded and signed authentication request token\n * @param {String} authResponse encoded and signed authentication response token\n * @return {void}\n * @throws {Error} if there is no redirect uri\n * @private\n * @ignore \n */\nexport function redirectUserToApp(authRequest: string, authResponse: string) {\n  const payload = decodeToken(authRequest).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  let redirectURI = payload.redirect_uri as string\n  Logger.debug(redirectURI)\n  if (redirectURI) {\n    redirectURI = updateQueryStringParameter(redirectURI, 'authResponse', authResponse)\n  } else {\n    throw new Error('Invalid redirect URI')\n  }\n  const location = getGlobalObject('location', { throwIfUnavailable: true, usageDesc: 'redirectUserToApp' })\n  location.href = redirectURI\n}\n","/**\n * \n * @ignore\n */\nexport function containsValidProofStatement(searchText: string, name: string | null = null) {\n  if (!name) {\n    return false\n  }\n\n  searchText = searchText.toLowerCase()\n\n  if (name.split('.').length < 2) {\n    throw new Error('Please provide the fully qualified Blockstack name.')\n  }\n\n  let username = null\n\n  // support legacy Blockstack ID proofs\n  if (name.endsWith('.id')) {\n    username = name.split('.id')[0]\n  }\n\n  const verificationStyles = username != null ? [\n    `verifying myself: my bitcoin username is +${username}`,\n    `verifying myself: my bitcoin username is ${username}`,\n    `verifying myself: my openname is ${username}`,\n    `verifying that +${username} is my bitcoin username`,\n    `verifying that ${username} is my bitcoin username`,\n    `verifying that ${username} is my openname`,\n    `verifying that +${username} is my openname`,\n    `verifying i am +${username} on my passcard`,\n    `verifying that +${username} is my blockchain id`,\n    `verifying that \"${name}\" is my blockstack id`, // id\n    `verifying that ${name} is my blockstack id`,\n    `verifying that &quot;${name}&quot; is my blockstack id`\n  ] : [ // only these formats are valid for non-.id tlds\n    `verifying that \"${name}\" is my blockstack id`, // id\n    `verifying that ${name} is my blockstack id`,\n    `verifying that &quot;${name}&quot; is my blockstack id`\n  ]\n\n  for (let i = 0; i < verificationStyles.length; i++) {\n    const verificationStyle = verificationStyles[i]\n    if (searchText.includes(verificationStyle)) {\n      return true\n    }\n  }\n\n  if (username != null\n      && searchText.includes('verifymyonename')\n      && searchText.includes(`+${username}`)) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * \n * @ignore\n */\nexport function containsValidAddressProofStatement(proofStatement: string, address: string) {\n  proofStatement = proofStatement.split(address)[0].toLowerCase() + address\n\n  const verificationStyles = [\n    `verifying my blockstack id is secured with the address ${address}`\n  ]\n\n  for (let i = 0; i < verificationStyles.length; i++) {\n    const verificationStyle = verificationStyles[i]\n    if (proofStatement.includes(verificationStyle)) {\n      return true\n    }\n  }\n\n  return false\n}\n","import { validateMnemonic, mnemonicToEntropy, entropyToMnemonic } from 'bip39'\nimport { randomBytes, GetRandomBytes } from './cryptoRandom'\nimport { createSha2Hash } from './sha2Hash'\nimport { createHmacSha256 } from './hmacSha256'\nimport { createCipher } from './aesCipher'\nimport { createPbkdf2 } from './pbkdf2'\nimport { TriplesecDecryptSignature } from './cryptoUtils'\n\n/**\n * Encrypt a raw mnemonic phrase to be password protected\n * @param {string} phrase - Raw mnemonic phrase\n * @param {string} password - Password to encrypt mnemonic with\n * @return {Promise<Buffer>} The encrypted phrase\n * @private\n * @ignore \n * */\nexport async function encryptMnemonic(phrase: string, password: string, opts?: {\n  getRandomBytes?: GetRandomBytes\n}): Promise<Buffer> {\n  // hex encoded mnemonic string\n  let mnemonicEntropy: string\n  try {\n    // must be bip39 mnemonic\n    mnemonicEntropy = mnemonicToEntropy(phrase)\n  } catch (error) {\n    console.error('Invalid mnemonic phrase provided')\n    console.error(error)\n    throw new Error('Not a valid bip39 mnemonic')\n  }\n \n  // normalize plaintext to fixed length byte string\n  const plaintextNormalized = Buffer.from(mnemonicEntropy, 'hex')\n\n  // AES-128-CBC with SHA256 HMAC\n  const pbkdf2 = await createPbkdf2()\n  let salt: Buffer\n  if (opts && opts.getRandomBytes) {\n    salt = opts.getRandomBytes(16)\n  } else {\n    salt = randomBytes(16)\n  }\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512')\n  const encKey = keysAndIV.slice(0, 16)\n  const macKey = keysAndIV.slice(16, 32)\n  const iv = keysAndIV.slice(32, 48)\n\n  const cipher = await createCipher()\n  const cipherText = await cipher.encrypt('aes-128-cbc', encKey, iv, plaintextNormalized)\n\n  const hmacPayload = Buffer.concat([salt, cipherText])\n  const hmacSha256 = await createHmacSha256()\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload)\n\n  const payload = Buffer.concat([salt, hmacDigest, cipherText])\n  return payload\n}\n\n// Used to distinguish bad password during decrypt vs invalid format\nclass PasswordError extends Error { }\n\n/**\n* @ignore\n*/\nasync function decryptMnemonicBuffer(dataBuffer: Buffer, password: string): Promise<string> {\n  const salt = dataBuffer.slice(0, 16)\n  const hmacSig = dataBuffer.slice(16, 48)   // 32 bytes\n  const cipherText = dataBuffer.slice(48)\n  const hmacPayload = Buffer.concat([salt, cipherText])\n\n  const pbkdf2 = await createPbkdf2()\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512')\n  const encKey = keysAndIV.slice(0, 16)\n  const macKey = keysAndIV.slice(16, 32)\n  const iv = keysAndIV.slice(32, 48)\n\n  const decipher = await createCipher()\n  const decryptedResult = await decipher.decrypt('aes-128-cbc', encKey, iv, cipherText)\n\n  const hmacSha256 = await createHmacSha256()\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload)\n\n  // hash both hmacSig and hmacDigest so string comparison time\n  // is uncorrelated to the ciphertext\n  const sha2Hash = await createSha2Hash()\n  const hmacSigHash = await sha2Hash.digest(hmacSig)\n  const hmacDigestHash = await sha2Hash.digest(hmacDigest)\n\n  if (!hmacSigHash.equals(hmacDigestHash)) {\n    // not authentic\n    throw new PasswordError('Wrong password (HMAC mismatch)')\n  }\n\n  let mnemonic: string\n  try {\n    mnemonic = entropyToMnemonic(decryptedResult)\n  } catch (error) {\n    console.error('Error thrown by `entropyToMnemonic`')\n    console.error(error)\n    throw new PasswordError('Wrong password (invalid plaintext)')\n  }\n  if (!validateMnemonic(mnemonic)) {\n    throw new PasswordError('Wrong password (invalid plaintext)')\n  }\n\n  return mnemonic\n}\n\n\n/**\n * Decrypt legacy triplesec keys\n * @param {Buffer} dataBuffer - The encrypted key\n * @param {String} password - Password for data\n * @return {Promise<Buffer>} Decrypted seed\n * @private\n * @ignore \n */\nfunction decryptLegacy(dataBuffer: Buffer, \n                       password: string, \n                       triplesecDecrypt: TriplesecDecryptSignature\n): Promise<Buffer> {\n  return new Promise<Buffer>((resolve, reject) => {\n    if (!triplesecDecrypt) {\n      reject(new Error('The `triplesec.decrypt` function must be provided'))\n    }\n    triplesecDecrypt(\n      {\n        key: Buffer.from(password),\n        data: dataBuffer\n      },\n      (err, plaintextBuffer) => {\n        if (!err) {\n          resolve(plaintextBuffer)\n        } else {\n          reject(err)\n        }\n      }\n    )\n  })\n}\n\n/**\n * Decrypt an encrypted mnemonic phrase with a password. \n * Legacy triplesec encrypted payloads are also supported. \n * @param data - Buffer or hex-encoded string of the encrypted mnemonic\n * @param password - Password for data\n * @return the raw mnemonic phrase\n * @private\n * @ignore \n */\nexport async function decryptMnemonic(data: (string | Buffer), \n                                      password: string, \n                                      triplesecDecrypt: TriplesecDecryptSignature\n): Promise<string> {\n  const dataBuffer = Buffer.isBuffer(data) ? data : Buffer.from(data, 'hex')\n  try {\n    return await decryptMnemonicBuffer(dataBuffer, password)\n  } catch (err) {\n    // If it was a password error, don't even bother with legacy\n    if (err instanceof PasswordError) {\n      throw err\n    }\n    const data = await decryptLegacy(dataBuffer, password, triplesecDecrypt)\n    return data.toString()\n  }\n}\n","// @ts-ignore: Could not find a declaration file for module\nimport * as inspector from 'schema-inspector'\n\nimport { Profile } from '../profile'\nimport { extractProfile } from '../profileTokens'\nimport { getPersonFromLegacyFormat } from './personLegacy'\nimport {\n  getName, getFamilyName, getGivenName, getAvatarUrl, getDescription,\n  getVerifiedAccounts, getAddress, getBirthDate,\n  getConnections, getOrganizations\n} from './personUtils'\n\nconst schemaDefinition = {\n  type: 'object',\n  strict: false,\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true },\n    name: { type: 'string', optional: true },\n    givenName: { type: 'string', optional: true },\n    familyName: { type: 'string', optional: true },\n    description: { type: 'string', optional: true },\n    image: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          name: { type: 'string', optional: true },\n          contentUrl: { type: 'string', optional: true }\n        }\n      }\n    },\n    website: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          url: { type: 'string', optional: true }\n        }\n      }\n    },\n    account: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          service: { type: 'string', optional: true },\n          identifier: { type: 'string', optional: true },\n          proofType: { type: 'string', optional: true },\n          proofUrl: { type: 'string', optional: true },\n          proofMessage: { type: 'string', optional: true },\n          proofSignature: { type: 'string', optional: true }\n        }\n      }\n    },\n    worksFor: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          '@id': { type: 'string', optional: true }\n        }\n      }\n    },\n    knows: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          '@id': { type: 'string', optional: true }\n        }\n      }\n    },\n    address: {\n      type: 'object',\n      optional: true,\n      properties: {\n        '@type': { type: 'string' },\n        streetAddress: { type: 'string', optional: true },\n        addressLocality: { type: 'string', optional: true },\n        postalCode: { type: 'string', optional: true },\n        addressCountry: { type: 'string', optional: true }\n      }\n    },\n    birthDate: { type: 'string', optional: true },\n    taxID: { type: 'string', optional: true }\n  }\n}\n\n/**\n * @ignore\n */\nexport class Person extends Profile {\n  constructor(profile = {}) {\n    super(profile)\n    this._profile = Object.assign({}, {\n      '@type': 'Person'\n    }, this._profile)\n  }\n\n  static validateSchema(profile: any, strict = false) {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): Person {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new Person(profile)\n  }\n\n  static fromLegacyFormat(legacyProfile: any) {\n    const profile = getPersonFromLegacyFormat(legacyProfile)\n    return new Person(profile)\n  }\n\n  toJSON() {\n    return {\n      profile: this.profile(),\n      name: this.name(),\n      givenName: this.givenName(),\n      familyName: this.familyName(),\n      description: this.description(),\n      avatarUrl: this.avatarUrl(),\n      verifiedAccounts: this.verifiedAccounts(),\n      address: this.address(),\n      birthDate: this.birthDate(),\n      connections: this.connections(),\n      organizations: this.organizations()\n    }\n  }\n\n  profile() {\n    return Object.assign({}, this._profile)\n  }\n\n  name() {\n    return getName(this.profile())\n  }\n\n  givenName() {\n    return getGivenName(this.profile())\n  }\n\n  familyName() {\n    return getFamilyName(this.profile())\n  }\n\n  description() {\n    return getDescription(this.profile())\n  }\n\n  avatarUrl() {\n    return getAvatarUrl(this.profile())\n  }\n\n  verifiedAccounts(verifications?: any[]) {\n    return getVerifiedAccounts(this.profile(), verifications)\n  }\n\n  address() {\n    return getAddress(this.profile())\n  }\n\n  birthDate() {\n    return getBirthDate(this.profile())\n  }\n\n  connections() {\n    return getConnections(this.profile())\n  }\n\n  organizations() {\n    return getOrganizations(this.profile())\n  }\n}\n","export function getName(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let name = null\n  if (profile.name) {\n    name = profile.name\n  } else if (profile.givenName || profile.familyName) {\n    name = ''\n    if (profile.givenName) {\n      name = profile.givenName\n    }\n    if (profile.familyName) {\n      name += ` ${profile.familyName}`\n    }\n  }\n  return name\n}\n\n/**\n * \n * @ignore\n */\nexport function getGivenName(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let givenName = null\n  if (profile.givenName) {\n    givenName = profile.givenName\n  } else if (profile.name) {\n    const nameParts = profile.name.split(' ')\n    givenName = nameParts.slice(0, -1).join(' ')\n  }\n  return givenName\n}\n\n/**\n * \n * @ignore\n */\nexport function getFamilyName(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let familyName = null\n  if (profile.familyName) {\n    familyName = profile.familyName\n  } else if (profile.name) {\n    const nameParts = profile.name.split(' ')\n    familyName = nameParts.pop()\n  }\n  return familyName\n}\n\n/**\n * \n * @ignore\n */\nexport function getDescription(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let description = null\n  if (profile.description) {\n    description = profile.description\n  }\n  return description\n}\n\n/**\n * \n * @ignore\n */\nexport function getAvatarUrl(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let avatarContentUrl: string | null = null\n  if (profile.image) {\n    profile.image.map((image: any) => {\n      if (image.name === 'avatar') {\n        avatarContentUrl = image.contentUrl\n        return avatarContentUrl\n      } else {\n        return null\n      }\n    })\n  }\n  return avatarContentUrl\n}\n\n/**\n * \n * @ignore\n */\nexport function getVerifiedAccounts(profile: any, verifications?: any[]) {\n  if (!profile) {\n    return null\n  }\n\n  const filteredAccounts: any[] = []\n  if (profile.hasOwnProperty('account') && verifications) {\n    profile.account.map((account: any) => {\n      let accountIsValid = false\n      let proofUrl = null\n\n      verifications.map((verification) => {\n        if (verification.hasOwnProperty('proof_url')) {\n          verification.proofUrl = verification.proof_url\n        }\n        if (verification.valid\n            && verification.service === account.service\n            && verification.identifier === account.identifier\n            && verification.proofUrl) {\n          accountIsValid = true\n          proofUrl = verification.proofUrl\n          return true\n        } else {\n          return false\n        }\n      })\n\n      if (accountIsValid) {\n        account.proofUrl = proofUrl\n        filteredAccounts.push(account)\n        return account\n      } else {\n        return null\n      }\n    })\n  }\n  return filteredAccounts\n}\n\n/**\n * \n * @ignore\n */\nexport function getOrganizations(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  const organizations: any[] = []\n\n  if (profile.hasOwnProperty('worksFor')) {\n    return profile.worksFor\n  }\n\n  return organizations\n}\n\n/**\n * \n * @ignore\n */\nexport function getConnections(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let connections = []\n\n  if (profile.hasOwnProperty('knows')) {\n    connections = profile.knows\n  }\n\n  return connections\n}\n\n/**\n * \n * @ignore\n */\nexport function getAddress(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let addressString = null\n\n  if (profile.hasOwnProperty('address')) {\n    const addressParts = []\n\n    if (profile.address.hasOwnProperty('streetAddress')) {\n      addressParts.push(profile.address.streetAddress)\n    }\n    if (profile.address.hasOwnProperty('addressLocality')) {\n      addressParts.push(profile.address.addressLocality)\n    }\n    if (profile.address.hasOwnProperty('postalCode')) {\n      addressParts.push(profile.address.postalCode)\n    }\n    if (profile.address.hasOwnProperty('addressCountry')) {\n      addressParts.push(profile.address.addressCountry)\n    }\n\n    if (addressParts.length) {\n      addressString = addressParts.join(', ')\n    }\n  }\n\n  return addressString\n}\n\n/**\n * \n * @ignore\n */\nexport function getBirthDate(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  const monthNames = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ]\n\n  let birthDateString = null\n\n  if (profile.hasOwnProperty('birthDate')) {\n    const date = new Date(profile.birthDate)\n    birthDateString = `${monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`\n  }\n\n  return birthDateString\n}\n","import { getCryptoLib } from './cryptoUtils'\n\ntype NodeCryptoCreateCipher = typeof import('crypto').createCipheriv;\ntype NodeCryptoCreateDecipher = typeof import('crypto').createDecipheriv;\n\nexport type CipherAlgorithm = 'aes-256-cbc' | 'aes-128-cbc';\n\nexport interface AesCipher {\n  encrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): Promise<Buffer>;\n\n  decrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): Promise<Buffer>;\n}\n\nexport class NodeCryptoAesCipher implements AesCipher {\n  createCipher: NodeCryptoCreateCipher\n\n  createDecipher: NodeCryptoCreateDecipher\n\n  constructor(createCipher: NodeCryptoCreateCipher, createDecipher: NodeCryptoCreateDecipher) {\n    this.createCipher = createCipher\n    this.createDecipher = createDecipher\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cipher = this.createCipher(algorithm, key, iv)\n    const result = Buffer.concat([cipher.update(data), cipher.final()])\n    return Promise.resolve(result)\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cipher = this.createDecipher(algorithm, key, iv)\n    const result = Buffer.concat([cipher.update(data), cipher.final()])\n    return Promise.resolve(result)\n  }\n}\n\nexport class WebCryptoAesCipher implements AesCipher {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    let algo: string\n    let length: number\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC'\n      length = 128\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC'\n      length = 256\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw', key,\n      { name: algo, length },\n      false, ['encrypt']\n    )\n    const result = await this.subtleCrypto.encrypt({ name: algo, iv }, cryptoKey, data)\n    return Buffer.from(result)\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    let algo: string\n    let length: number\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC'\n      length = 128\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC'\n      length = 256\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw', key,\n      { name: algo, length },\n      false, ['decrypt']\n    )\n    const result = await this.subtleCrypto.decrypt({ name: algo, iv }, cryptoKey, data)\n    return Buffer.from(result)\n  }\n}\n\nexport async function createCipher(): Promise<AesCipher> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoAesCipher(cryptoLib.lib)\n  } else {\n    return new NodeCryptoAesCipher(cryptoLib.lib.createCipheriv, cryptoLib.lib.createDecipheriv)\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","'use strict'\n\nvar createHash = require('create-hash')\nvar bs58checkBase = require('./base')\n\n// SHA256(SHA256(buffer))\nfunction sha256x2 (buffer) {\n  var tmp = createHash('sha256').update(buffer).digest()\n  return createHash('sha256').update(tmp).digest()\n}\n\nmodule.exports = bs58checkBase(sha256x2)\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction BlockHash() {\n  this.pending = null;\n  this.pendingTotal = 0;\n  this.blockSize = this.constructor.blockSize;\n  this.outSize = this.constructor.outSize;\n  this.hmacStrength = this.constructor.hmacStrength;\n  this.padLength = this.constructor.padLength / 8;\n  this.endian = 'big';\n\n  this._delta8 = this.blockSize / 8;\n  this._delta32 = this.blockSize / 32;\n}\nexports.BlockHash = BlockHash;\n\nBlockHash.prototype.update = function update(msg, enc) {\n  // Convert message to array, pad it, and join into 32bit blocks\n  msg = utils.toArray(msg, enc);\n  if (!this.pending)\n    this.pending = msg;\n  else\n    this.pending = this.pending.concat(msg);\n  this.pendingTotal += msg.length;\n\n  // Enough data, try updating\n  if (this.pending.length >= this._delta8) {\n    msg = this.pending;\n\n    // Process pending data in blocks\n    var r = msg.length % this._delta8;\n    this.pending = msg.slice(msg.length - r, msg.length);\n    if (this.pending.length === 0)\n      this.pending = null;\n\n    msg = utils.join32(msg, 0, msg.length - r, this.endian);\n    for (var i = 0; i < msg.length; i += this._delta32)\n      this._update(msg, i, i + this._delta32);\n  }\n\n  return this;\n};\n\nBlockHash.prototype.digest = function digest(enc) {\n  this.update(this._pad());\n  assert(this.pending === null);\n\n  return this._digest(enc);\n};\n\nBlockHash.prototype._pad = function pad() {\n  var len = this.pendingTotal;\n  var bytes = this._delta8;\n  var k = bytes - ((len + this.padLength) % bytes);\n  var res = new Array(k + this.padLength);\n  res[0] = 0x80;\n  for (var i = 1; i < k; i++)\n    res[i] = 0;\n\n  // Append length\n  len <<= 3;\n  if (this.endian === 'big') {\n    for (var t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = len & 0xff;\n  } else {\n    res[i++] = len & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n\n    for (t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n  }\n\n  return res;\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\n","/**\n * This logic is in a separate file with no dependencies so that it can be \n * loaded and executed as soon as possible to fulfill the purpose of the protocol \n * detection technique. The effectiveness of this is obviously subject to how web \n * apps bundle/consume the blockstack.js lib. \n */ \n\nconst GLOBAL_DETECTION_CACHE_KEY = '_blockstackDidCheckEchoReply'\nconst ECHO_REPLY_PARAM = 'echoReply'\nconst AUTH_CONTINUATION_PARAM = 'authContinuation'\n\n\nfunction getQueryStringParams(query: string): Record<string, string> {\n  if (!query) {\n    return {}\n  }\n  // Trim a starting `?` character if exists\n  const trimmed = /^[?#]/.test(query) ? query.slice(1) : query\n  return trimmed\n    .split('&')\n    .reduce((params, param) => {\n      const [key, value] = param.split('=')\n      params[key] = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : ''\n      return params\n    }, {} as Record<string, string>)\n}\n\n\n/**\n * Checks if the current window location URL contains an 'echoReply' parameter \n * which indicates that this page was only opened to signal back to the originating \n * tab that the protocol handler is installed. \n * If found, then localStorage events are used to notify the other tab,\n * and this page is redirected back to the Blockstack authenticator URL. \n * This function caches its result and will not trigger multiple redirects when\n * invoked multiple times. \n * @returns True if detected and the page will be automatically redirected. \n * @hidden\n */\nexport function protocolEchoReplyDetection(): boolean {\n  // Check that the `window` APIs exist\n  let globalScope: Window\n  if (typeof self !== 'undefined') {\n    globalScope = self\n  } else if (typeof window !== 'undefined') {\n    globalScope = window\n  } else {\n    // Exit detection function - we are not running in a browser environment.\n    return false\n  }\n  \n  if (!globalScope.location || !globalScope.localStorage) {\n    // Exit detection function - we are not running in a browser environment.\n    return false\n  }\n\n  // Avoid performing the check twice and triggered multiple redirect timers.\n  const existingDetection = (globalScope as any)[GLOBAL_DETECTION_CACHE_KEY]\n  if (typeof existingDetection === 'boolean') {\n    return existingDetection\n  }\n\n  const searchParams = getQueryStringParams(globalScope.location.search)\n  const echoReplyParam = searchParams[ECHO_REPLY_PARAM]\n  if (echoReplyParam) {\n    (globalScope as any)[GLOBAL_DETECTION_CACHE_KEY] = true\n\n    // Use localStorage to notify originated tab that protocol handler is available and working.\n    const echoReplyKey = `echo-reply-${echoReplyParam}`\n\n    // Set the echo-reply result in localStorage for the other window to see.\n    globalScope.localStorage.setItem(echoReplyKey, 'success')\n\n    // Redirect back to the localhost auth url, as opposed to another protocol launch.\n    // This will re-use the same tab rather than creating another useless one.\n    globalScope.setTimeout(() => {\n      const authContinuationParam = searchParams[AUTH_CONTINUATION_PARAM]\n      globalScope.location.href = authContinuationParam\n    }, 10)\n\n    return true\n  }\n\n  return false\n}\n","import { getCryptoLib } from './cryptoUtils'\n\nexport interface Hmac {\n  digest(key: Buffer, data: Buffer): Promise<Buffer>;\n}\n\ntype NodeCryptoCreateHmac = typeof import('crypto').createHmac\n\nexport class NodeCryptoHmacSha256 implements Hmac {\n  createHmac: NodeCryptoCreateHmac\n\n  constructor(createHmac: NodeCryptoCreateHmac) {\n    this.createHmac = createHmac\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const result = this.createHmac('sha256', key)\n      .update(data)\n      .digest()\n    return Promise.resolve(result)\n  }\n}\n\nexport class WebCryptoHmacSha256 implements Hmac {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw', key, { name: 'HMAC', hash: 'SHA-256' },\n      true, ['sign']\n    )\n    const sig = await this.subtleCrypto.sign(\n      // The `hash` is only specified for non-compliant browsers like Edge. \n      { name: 'HMAC', hash: 'SHA-256' }, \n      cryptoKey, data\n    )\n    return Buffer.from(sig)\n  }\n}\n\nexport async function createHmacSha256(): Promise<Hmac> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoHmacSha256(cryptoLib.lib)\n  } else {\n    return new NodeCryptoHmacSha256(cryptoLib.lib.createHmac)\n  }\n}\n\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"makeZoneFile\", {\n  enumerable: true,\n  get: function () {\n    return _makeZoneFile.makeZoneFile;\n  }\n});\nObject.defineProperty(exports, \"parseZoneFile\", {\n  enumerable: true,\n  get: function () {\n    return _parseZoneFile.parseZoneFile;\n  }\n});\nObject.defineProperty(exports, \"ZoneFile\", {\n  enumerable: true,\n  get: function () {\n    return _zoneFile.ZoneFile;\n  }\n});\n\nvar _makeZoneFile = require(\"./makeZoneFile\");\n\nvar _parseZoneFile = require(\"./parseZoneFile\");\n\nvar _zoneFile = require(\"./zoneFile\");","'use strict'\nvar inherits = require('inherits')\nvar MD5 = require('md5.js')\nvar RIPEMD160 = require('ripemd160')\nvar sha = require('sha.js')\nvar Base = require('cipher-base')\n\nfunction Hash (hash) {\n  Base.call(this, 'digest')\n\n  this._hash = hash\n}\n\ninherits(Hash, Base)\n\nHash.prototype._update = function (data) {\n  this._hash.update(data)\n}\n\nHash.prototype._final = function () {\n  return this._hash.digest()\n}\n\nmodule.exports = function createHash (alg) {\n  alg = alg.toLowerCase()\n  if (alg === 'md5') return new MD5()\n  if (alg === 'rmd160' || alg === 'ripemd160') return new RIPEMD160()\n\n  return new Hash(sha(alg))\n}\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar getNAF = utils.getNAF;\nvar getJSF = utils.getJSF;\nvar assert = utils.assert;\n\nfunction BaseCurve(type, conf) {\n  this.type = type;\n  this.p = new BN(conf.p, 16);\n\n  // Use Montgomery, when there is no fast reduction for the prime\n  this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);\n\n  // Useful for many curves\n  this.zero = new BN(0).toRed(this.red);\n  this.one = new BN(1).toRed(this.red);\n  this.two = new BN(2).toRed(this.red);\n\n  // Curve configuration, optional\n  this.n = conf.n && new BN(conf.n, 16);\n  this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);\n\n  // Temporary arrays\n  this._wnafT1 = new Array(4);\n  this._wnafT2 = new Array(4);\n  this._wnafT3 = new Array(4);\n  this._wnafT4 = new Array(4);\n\n  // Generalized Greg Maxwell's trick\n  var adjustCount = this.n && this.p.div(this.n);\n  if (!adjustCount || adjustCount.cmpn(100) > 0) {\n    this.redN = null;\n  } else {\n    this._maxwellTrick = true;\n    this.redN = this.n.toRed(this.red);\n  }\n}\nmodule.exports = BaseCurve;\n\nBaseCurve.prototype.point = function point() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype.validate = function validate() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype._fixedNafMul = function _fixedNafMul(p, k) {\n  assert(p.precomputed);\n  var doubles = p._getDoubles();\n\n  var naf = getNAF(k, 1);\n  var I = (1 << (doubles.step + 1)) - (doubles.step % 2 === 0 ? 2 : 1);\n  I /= 3;\n\n  // Translate into more windowed form\n  var repr = [];\n  for (var j = 0; j < naf.length; j += doubles.step) {\n    var nafW = 0;\n    for (var k = j + doubles.step - 1; k >= j; k--)\n      nafW = (nafW << 1) + naf[k];\n    repr.push(nafW);\n  }\n\n  var a = this.jpoint(null, null, null);\n  var b = this.jpoint(null, null, null);\n  for (var i = I; i > 0; i--) {\n    for (var j = 0; j < repr.length; j++) {\n      var nafW = repr[j];\n      if (nafW === i)\n        b = b.mixedAdd(doubles.points[j]);\n      else if (nafW === -i)\n        b = b.mixedAdd(doubles.points[j].neg());\n    }\n    a = a.add(b);\n  }\n  return a.toP();\n};\n\nBaseCurve.prototype._wnafMul = function _wnafMul(p, k) {\n  var w = 4;\n\n  // Precompute window\n  var nafPoints = p._getNAFPoints(w);\n  w = nafPoints.wnd;\n  var wnd = nafPoints.points;\n\n  // Get NAF form\n  var naf = getNAF(k, w);\n\n  // Add `this`*(N+1) for every w-NAF index\n  var acc = this.jpoint(null, null, null);\n  for (var i = naf.length - 1; i >= 0; i--) {\n    // Count zeroes\n    for (var k = 0; i >= 0 && naf[i] === 0; i--)\n      k++;\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n\n    if (i < 0)\n      break;\n    var z = naf[i];\n    assert(z !== 0);\n    if (p.type === 'affine') {\n      // J +- P\n      if (z > 0)\n        acc = acc.mixedAdd(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.mixedAdd(wnd[(-z - 1) >> 1].neg());\n    } else {\n      // J +- J\n      if (z > 0)\n        acc = acc.add(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.add(wnd[(-z - 1) >> 1].neg());\n    }\n  }\n  return p.type === 'affine' ? acc.toP() : acc;\n};\n\nBaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW,\n                                                       points,\n                                                       coeffs,\n                                                       len,\n                                                       jacobianResult) {\n  var wndWidth = this._wnafT1;\n  var wnd = this._wnafT2;\n  var naf = this._wnafT3;\n\n  // Fill all arrays\n  var max = 0;\n  for (var i = 0; i < len; i++) {\n    var p = points[i];\n    var nafPoints = p._getNAFPoints(defW);\n    wndWidth[i] = nafPoints.wnd;\n    wnd[i] = nafPoints.points;\n  }\n\n  // Comb small window NAFs\n  for (var i = len - 1; i >= 1; i -= 2) {\n    var a = i - 1;\n    var b = i;\n    if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {\n      naf[a] = getNAF(coeffs[a], wndWidth[a]);\n      naf[b] = getNAF(coeffs[b], wndWidth[b]);\n      max = Math.max(naf[a].length, max);\n      max = Math.max(naf[b].length, max);\n      continue;\n    }\n\n    var comb = [\n      points[a], /* 1 */\n      null, /* 3 */\n      null, /* 5 */\n      points[b] /* 7 */\n    ];\n\n    // Try to avoid Projective points, if possible\n    if (points[a].y.cmp(points[b].y) === 0) {\n      comb[1] = points[a].add(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].add(points[b].neg());\n    } else {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    }\n\n    var index = [\n      -3, /* -1 -1 */\n      -1, /* -1 0 */\n      -5, /* -1 1 */\n      -7, /* 0 -1 */\n      0, /* 0 0 */\n      7, /* 0 1 */\n      5, /* 1 -1 */\n      1, /* 1 0 */\n      3  /* 1 1 */\n    ];\n\n    var jsf = getJSF(coeffs[a], coeffs[b]);\n    max = Math.max(jsf[0].length, max);\n    naf[a] = new Array(max);\n    naf[b] = new Array(max);\n    for (var j = 0; j < max; j++) {\n      var ja = jsf[0][j] | 0;\n      var jb = jsf[1][j] | 0;\n\n      naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];\n      naf[b][j] = 0;\n      wnd[a] = comb;\n    }\n  }\n\n  var acc = this.jpoint(null, null, null);\n  var tmp = this._wnafT4;\n  for (var i = max; i >= 0; i--) {\n    var k = 0;\n\n    while (i >= 0) {\n      var zero = true;\n      for (var j = 0; j < len; j++) {\n        tmp[j] = naf[j][i] | 0;\n        if (tmp[j] !== 0)\n          zero = false;\n      }\n      if (!zero)\n        break;\n      k++;\n      i--;\n    }\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n    if (i < 0)\n      break;\n\n    for (var j = 0; j < len; j++) {\n      var z = tmp[j];\n      var p;\n      if (z === 0)\n        continue;\n      else if (z > 0)\n        p = wnd[j][(z - 1) >> 1];\n      else if (z < 0)\n        p = wnd[j][(-z - 1) >> 1].neg();\n\n      if (p.type === 'affine')\n        acc = acc.mixedAdd(p);\n      else\n        acc = acc.add(p);\n    }\n  }\n  // Zeroify references\n  for (var i = 0; i < len; i++)\n    wnd[i] = null;\n\n  if (jacobianResult)\n    return acc;\n  else\n    return acc.toP();\n};\n\nfunction BasePoint(curve, type) {\n  this.curve = curve;\n  this.type = type;\n  this.precomputed = null;\n}\nBaseCurve.BasePoint = BasePoint;\n\nBasePoint.prototype.eq = function eq(/*other*/) {\n  throw new Error('Not implemented');\n};\n\nBasePoint.prototype.validate = function validate() {\n  return this.curve.validate(this);\n};\n\nBaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  bytes = utils.toArray(bytes, enc);\n\n  var len = this.p.byteLength();\n\n  // uncompressed, hybrid-odd, hybrid-even\n  if ((bytes[0] === 0x04 || bytes[0] === 0x06 || bytes[0] === 0x07) &&\n      bytes.length - 1 === 2 * len) {\n    if (bytes[0] === 0x06)\n      assert(bytes[bytes.length - 1] % 2 === 0);\n    else if (bytes[0] === 0x07)\n      assert(bytes[bytes.length - 1] % 2 === 1);\n\n    var res =  this.point(bytes.slice(1, 1 + len),\n                          bytes.slice(1 + len, 1 + 2 * len));\n\n    return res;\n  } else if ((bytes[0] === 0x02 || bytes[0] === 0x03) &&\n              bytes.length - 1 === len) {\n    return this.pointFromX(bytes.slice(1, 1 + len), bytes[0] === 0x03);\n  }\n  throw new Error('Unknown point format');\n};\n\nBasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {\n  return this.encode(enc, true);\n};\n\nBasePoint.prototype._encode = function _encode(compact) {\n  var len = this.curve.p.byteLength();\n  var x = this.getX().toArray('be', len);\n\n  if (compact)\n    return [ this.getY().isEven() ? 0x02 : 0x03 ].concat(x);\n\n  return [ 0x04 ].concat(x, this.getY().toArray('be', len)) ;\n};\n\nBasePoint.prototype.encode = function encode(enc, compact) {\n  return utils.encode(this._encode(compact), enc);\n};\n\nBasePoint.prototype.precompute = function precompute(power) {\n  if (this.precomputed)\n    return this;\n\n  var precomputed = {\n    doubles: null,\n    naf: null,\n    beta: null\n  };\n  precomputed.naf = this._getNAFPoints(8);\n  precomputed.doubles = this._getDoubles(4, power);\n  precomputed.beta = this._getBeta();\n  this.precomputed = precomputed;\n\n  return this;\n};\n\nBasePoint.prototype._hasDoubles = function _hasDoubles(k) {\n  if (!this.precomputed)\n    return false;\n\n  var doubles = this.precomputed.doubles;\n  if (!doubles)\n    return false;\n\n  return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);\n};\n\nBasePoint.prototype._getDoubles = function _getDoubles(step, power) {\n  if (this.precomputed && this.precomputed.doubles)\n    return this.precomputed.doubles;\n\n  var doubles = [ this ];\n  var acc = this;\n  for (var i = 0; i < power; i += step) {\n    for (var j = 0; j < step; j++)\n      acc = acc.dbl();\n    doubles.push(acc);\n  }\n  return {\n    step: step,\n    points: doubles\n  };\n};\n\nBasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {\n  if (this.precomputed && this.precomputed.naf)\n    return this.precomputed.naf;\n\n  var res = [ this ];\n  var max = (1 << wnd) - 1;\n  var dbl = max === 1 ? null : this.dbl();\n  for (var i = 1; i < max; i++)\n    res[i] = res[i - 1].add(dbl);\n  return {\n    wnd: wnd,\n    points: res\n  };\n};\n\nBasePoint.prototype._getBeta = function _getBeta() {\n  return null;\n};\n\nBasePoint.prototype.dblp = function dblp(k) {\n  var r = this;\n  for (var i = 0; i < k; i++)\n    r = r.dbl();\n  return r;\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst embed_1 = require('./embed');\nexports.embed = embed_1.p2data;\nconst p2ms_1 = require('./p2ms');\nexports.p2ms = p2ms_1.p2ms;\nconst p2pk_1 = require('./p2pk');\nexports.p2pk = p2pk_1.p2pk;\nconst p2pkh_1 = require('./p2pkh');\nexports.p2pkh = p2pkh_1.p2pkh;\nconst p2sh_1 = require('./p2sh');\nexports.p2sh = p2sh_1.p2sh;\nconst p2wpkh_1 = require('./p2wpkh');\nexports.p2wpkh = p2wpkh_1.p2wpkh;\nconst p2wsh_1 = require('./p2wsh');\nexports.p2wsh = p2wsh_1.p2wsh;\n// TODO\n// witness commitment\n","'use strict'\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils = require('./bufferutils');\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nfunction varSliceSize(someScript) {\n  const length = someScript.length;\n  return varuint.encodingLength(length) + length;\n}\nfunction vectorSize(someVector) {\n  const length = someVector.length;\n  return (\n    varuint.encodingLength(length) +\n    someVector.reduce((sum, witness) => {\n      return sum + varSliceSize(witness);\n    }, 0)\n  );\n}\nconst EMPTY_SCRIPT = Buffer.allocUnsafe(0);\nconst EMPTY_WITNESS = [];\nconst ZERO = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000000',\n  'hex',\n);\nconst ONE = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000001',\n  'hex',\n);\nconst VALUE_UINT64_MAX = Buffer.from('ffffffffffffffff', 'hex');\nconst BLANK_OUTPUT = {\n  script: EMPTY_SCRIPT,\n  valueBuffer: VALUE_UINT64_MAX,\n};\nfunction isOutput(out) {\n  return out.value !== undefined;\n}\nclass Transaction {\n  constructor() {\n    this.version = 1;\n    this.locktime = 0;\n    this.ins = [];\n    this.outs = [];\n  }\n  static fromBuffer(buffer, _NO_STRICT) {\n    let offset = 0;\n    function readSlice(n) {\n      offset += n;\n      return buffer.slice(offset - n, offset);\n    }\n    function readUInt32() {\n      const i = buffer.readUInt32LE(offset);\n      offset += 4;\n      return i;\n    }\n    function readInt32() {\n      const i = buffer.readInt32LE(offset);\n      offset += 4;\n      return i;\n    }\n    function readUInt64() {\n      const i = bufferutils.readUInt64LE(buffer, offset);\n      offset += 8;\n      return i;\n    }\n    function readVarInt() {\n      const vi = varuint.decode(buffer, offset);\n      offset += varuint.decode.bytes;\n      return vi;\n    }\n    function readVarSlice() {\n      return readSlice(readVarInt());\n    }\n    function readVector() {\n      const count = readVarInt();\n      const vector = [];\n      for (let i = 0; i < count; i++) vector.push(readVarSlice());\n      return vector;\n    }\n    const tx = new Transaction();\n    tx.version = readInt32();\n    const marker = buffer.readUInt8(offset);\n    const flag = buffer.readUInt8(offset + 1);\n    let hasWitnesses = false;\n    if (\n      marker === Transaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === Transaction.ADVANCED_TRANSACTION_FLAG\n    ) {\n      offset += 2;\n      hasWitnesses = true;\n    }\n    const vinLen = readVarInt();\n    for (let i = 0; i < vinLen; ++i) {\n      tx.ins.push({\n        hash: readSlice(32),\n        index: readUInt32(),\n        script: readVarSlice(),\n        sequence: readUInt32(),\n        witness: EMPTY_WITNESS,\n      });\n    }\n    const voutLen = readVarInt();\n    for (let i = 0; i < voutLen; ++i) {\n      tx.outs.push({\n        value: readUInt64(),\n        script: readVarSlice(),\n      });\n    }\n    if (hasWitnesses) {\n      for (let i = 0; i < vinLen; ++i) {\n        tx.ins[i].witness = readVector();\n      }\n      // was this pointless?\n      if (!tx.hasWitnesses())\n        throw new Error('Transaction has superfluous witness data');\n    }\n    tx.locktime = readUInt32();\n    if (_NO_STRICT) return tx;\n    if (offset !== buffer.length)\n      throw new Error('Transaction has unexpected data');\n    return tx;\n  }\n  static fromHex(hex) {\n    return Transaction.fromBuffer(Buffer.from(hex, 'hex'), false);\n  }\n  static isCoinbaseHash(buffer) {\n    typeforce(types.Hash256bit, buffer);\n    for (let i = 0; i < 32; ++i) {\n      if (buffer[i] !== 0) return false;\n    }\n    return true;\n  }\n  isCoinbase() {\n    return (\n      this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash)\n    );\n  }\n  addInput(hash, index, sequence, scriptSig) {\n    typeforce(\n      types.tuple(\n        types.Hash256bit,\n        types.UInt32,\n        types.maybe(types.UInt32),\n        types.maybe(types.Buffer),\n      ),\n      arguments,\n    );\n    if (types.Null(sequence)) {\n      sequence = Transaction.DEFAULT_SEQUENCE;\n    }\n    // Add the input and return the input's index\n    return (\n      this.ins.push({\n        hash,\n        index,\n        script: scriptSig || EMPTY_SCRIPT,\n        sequence: sequence,\n        witness: EMPTY_WITNESS,\n      }) - 1\n    );\n  }\n  addOutput(scriptPubKey, value) {\n    typeforce(types.tuple(types.Buffer, types.Satoshi), arguments);\n    // Add the output and return the output's index\n    return (\n      this.outs.push({\n        script: scriptPubKey,\n        value,\n      }) - 1\n    );\n  }\n  hasWitnesses() {\n    return this.ins.some(x => {\n      return x.witness.length !== 0;\n    });\n  }\n  weight() {\n    const base = this.__byteLength(false);\n    const total = this.__byteLength(true);\n    return base * 3 + total;\n  }\n  virtualSize() {\n    return Math.ceil(this.weight() / 4);\n  }\n  byteLength() {\n    return this.__byteLength(true);\n  }\n  clone() {\n    const newTx = new Transaction();\n    newTx.version = this.version;\n    newTx.locktime = this.locktime;\n    newTx.ins = this.ins.map(txIn => {\n      return {\n        hash: txIn.hash,\n        index: txIn.index,\n        script: txIn.script,\n        sequence: txIn.sequence,\n        witness: txIn.witness,\n      };\n    });\n    newTx.outs = this.outs.map(txOut => {\n      return {\n        script: txOut.script,\n        value: txOut.value,\n      };\n    });\n    return newTx;\n  }\n  /**\n   * Hash transaction for signing a specific input.\n   *\n   * Bitcoin uses a different hash for each signed transaction input.\n   * This method copies the transaction, makes the necessary changes based on the\n   * hashType, and then hashes the result.\n   * This hash can then be used to sign the provided transaction input.\n   */\n  hashForSignature(inIndex, prevOutScript, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, /* types.UInt8 */ types.Number),\n      arguments,\n    );\n    // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L29\n    if (inIndex >= this.ins.length) return ONE;\n    // ignore OP_CODESEPARATOR\n    const ourScript = bscript.compile(\n      bscript.decompile(prevOutScript).filter(x => {\n        return x !== script_1.OPS.OP_CODESEPARATOR;\n      }),\n    );\n    const txTmp = this.clone();\n    // SIGHASH_NONE: ignore all outputs? (wildcard payee)\n    if ((hashType & 0x1f) === Transaction.SIGHASH_NONE) {\n      txTmp.outs = [];\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, i) => {\n        if (i === inIndex) return;\n        input.sequence = 0;\n      });\n      // SIGHASH_SINGLE: ignore all outputs, except at the same index?\n    } else if ((hashType & 0x1f) === Transaction.SIGHASH_SINGLE) {\n      // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L60\n      if (inIndex >= this.outs.length) return ONE;\n      // truncate outputs after\n      txTmp.outs.length = inIndex + 1;\n      // \"blank\" outputs before\n      for (let i = 0; i < inIndex; i++) {\n        txTmp.outs[i] = BLANK_OUTPUT;\n      }\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, y) => {\n        if (y === inIndex) return;\n        input.sequence = 0;\n      });\n    }\n    // SIGHASH_ANYONECANPAY: ignore inputs entirely?\n    if (hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      txTmp.ins = [txTmp.ins[inIndex]];\n      txTmp.ins[0].script = ourScript;\n      // SIGHASH_ALL: only ignore input scripts\n    } else {\n      // \"blank\" others input scripts\n      txTmp.ins.forEach(input => {\n        input.script = EMPTY_SCRIPT;\n      });\n      txTmp.ins[inIndex].script = ourScript;\n    }\n    // serialize and hash\n    const buffer = Buffer.allocUnsafe(txTmp.__byteLength(false) + 4);\n    buffer.writeInt32LE(hashType, buffer.length - 4);\n    txTmp.__toBuffer(buffer, 0, false);\n    return bcrypto.hash256(buffer);\n  }\n  hashForWitnessV0(inIndex, prevOutScript, value, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, types.Satoshi, types.UInt32),\n      arguments,\n    );\n    let tbuffer = Buffer.from([]);\n    let toffset = 0;\n    function writeSlice(slice) {\n      toffset += slice.copy(tbuffer, toffset);\n    }\n    function writeUInt32(i) {\n      toffset = tbuffer.writeUInt32LE(i, toffset);\n    }\n    function writeUInt64(i) {\n      toffset = bufferutils.writeUInt64LE(tbuffer, i, toffset);\n    }\n    function writeVarInt(i) {\n      varuint.encode(i, tbuffer, toffset);\n      toffset += varuint.encode.bytes;\n    }\n    function writeVarSlice(slice) {\n      writeVarInt(slice.length);\n      writeSlice(slice);\n    }\n    let hashOutputs = ZERO;\n    let hashPrevouts = ZERO;\n    let hashSequence = ZERO;\n    if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {\n      tbuffer = Buffer.allocUnsafe(36 * this.ins.length);\n      toffset = 0;\n      this.ins.forEach(txIn => {\n        writeSlice(txIn.hash);\n        writeUInt32(txIn.index);\n      });\n      hashPrevouts = bcrypto.hash256(tbuffer);\n    }\n    if (\n      !(hashType & Transaction.SIGHASH_ANYONECANPAY) &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      tbuffer = Buffer.allocUnsafe(4 * this.ins.length);\n      toffset = 0;\n      this.ins.forEach(txIn => {\n        writeUInt32(txIn.sequence);\n      });\n      hashSequence = bcrypto.hash256(tbuffer);\n    }\n    if (\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      const txOutsSize = this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0);\n      tbuffer = Buffer.allocUnsafe(txOutsSize);\n      toffset = 0;\n      this.outs.forEach(out => {\n        writeUInt64(out.value);\n        writeVarSlice(out.script);\n      });\n      hashOutputs = bcrypto.hash256(tbuffer);\n    } else if (\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE &&\n      inIndex < this.outs.length\n    ) {\n      const output = this.outs[inIndex];\n      tbuffer = Buffer.allocUnsafe(8 + varSliceSize(output.script));\n      toffset = 0;\n      writeUInt64(output.value);\n      writeVarSlice(output.script);\n      hashOutputs = bcrypto.hash256(tbuffer);\n    }\n    tbuffer = Buffer.allocUnsafe(156 + varSliceSize(prevOutScript));\n    toffset = 0;\n    const input = this.ins[inIndex];\n    writeUInt32(this.version);\n    writeSlice(hashPrevouts);\n    writeSlice(hashSequence);\n    writeSlice(input.hash);\n    writeUInt32(input.index);\n    writeVarSlice(prevOutScript);\n    writeUInt64(value);\n    writeUInt32(input.sequence);\n    writeSlice(hashOutputs);\n    writeUInt32(this.locktime);\n    writeUInt32(hashType);\n    return bcrypto.hash256(tbuffer);\n  }\n  getHash(forWitness) {\n    // wtxid for coinbase is always 32 bytes of 0x00\n    if (forWitness && this.isCoinbase()) return Buffer.alloc(32, 0);\n    return bcrypto.hash256(this.__toBuffer(undefined, undefined, forWitness));\n  }\n  getId() {\n    // transaction hash's are displayed in reverse order\n    return bufferutils_1.reverseBuffer(this.getHash(false)).toString('hex');\n  }\n  toBuffer(buffer, initialOffset) {\n    return this.__toBuffer(buffer, initialOffset, true);\n  }\n  toHex() {\n    return this.toBuffer(undefined, undefined).toString('hex');\n  }\n  setInputScript(index, scriptSig) {\n    typeforce(types.tuple(types.Number, types.Buffer), arguments);\n    this.ins[index].script = scriptSig;\n  }\n  setWitness(index, witness) {\n    typeforce(types.tuple(types.Number, [types.Buffer]), arguments);\n    this.ins[index].witness = witness;\n  }\n  __byteLength(_ALLOW_WITNESS) {\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    return (\n      (hasWitnesses ? 10 : 8) +\n      varuint.encodingLength(this.ins.length) +\n      varuint.encodingLength(this.outs.length) +\n      this.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n      }, 0) +\n      this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0) +\n      (hasWitnesses\n        ? this.ins.reduce((sum, input) => {\n            return sum + vectorSize(input.witness);\n          }, 0)\n        : 0)\n    );\n  }\n  __toBuffer(buffer, initialOffset, _ALLOW_WITNESS) {\n    if (!buffer) buffer = Buffer.allocUnsafe(this.__byteLength(_ALLOW_WITNESS));\n    let offset = initialOffset || 0;\n    function writeSlice(slice) {\n      offset += slice.copy(buffer, offset);\n    }\n    function writeUInt8(i) {\n      offset = buffer.writeUInt8(i, offset);\n    }\n    function writeUInt32(i) {\n      offset = buffer.writeUInt32LE(i, offset);\n    }\n    function writeInt32(i) {\n      offset = buffer.writeInt32LE(i, offset);\n    }\n    function writeUInt64(i) {\n      offset = bufferutils.writeUInt64LE(buffer, i, offset);\n    }\n    function writeVarInt(i) {\n      varuint.encode(i, buffer, offset);\n      offset += varuint.encode.bytes;\n    }\n    function writeVarSlice(slice) {\n      writeVarInt(slice.length);\n      writeSlice(slice);\n    }\n    function writeVector(vector) {\n      writeVarInt(vector.length);\n      vector.forEach(writeVarSlice);\n    }\n    writeInt32(this.version);\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    if (hasWitnesses) {\n      writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);\n      writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);\n    }\n    writeVarInt(this.ins.length);\n    this.ins.forEach(txIn => {\n      writeSlice(txIn.hash);\n      writeUInt32(txIn.index);\n      writeVarSlice(txIn.script);\n      writeUInt32(txIn.sequence);\n    });\n    writeVarInt(this.outs.length);\n    this.outs.forEach(txOut => {\n      if (isOutput(txOut)) {\n        writeUInt64(txOut.value);\n      } else {\n        writeSlice(txOut.valueBuffer);\n      }\n      writeVarSlice(txOut.script);\n    });\n    if (hasWitnesses) {\n      this.ins.forEach(input => {\n        writeVector(input.witness);\n      });\n    }\n    writeUInt32(this.locktime);\n    // avoid slicing unless necessary\n    if (initialOffset !== undefined) return buffer.slice(initialOffset, offset);\n    return buffer;\n  }\n}\nTransaction.DEFAULT_SEQUENCE = 0xffffffff;\nTransaction.SIGHASH_ALL = 0x01;\nTransaction.SIGHASH_NONE = 0x02;\nTransaction.SIGHASH_SINGLE = 0x03;\nTransaction.SIGHASH_ANYONECANPAY = 0x80;\nTransaction.ADVANCED_TRANSACTION_MARKER = 0x00;\nTransaction.ADVANCED_TRANSACTION_FLAG = 0x01;\nexports.Transaction = Transaction;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// Number.MAX_SAFE_INTEGER\nconst MAX_SAFE_INTEGER = 9007199254740991;\nfunction checkUInt53(n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)\n    throw new RangeError('value out of range');\n}\nfunction encode(_number, buffer, offset) {\n  checkUInt53(_number);\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(_number));\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  // 8 bit\n  if (_number < 0xfd) {\n    buffer.writeUInt8(_number, offset);\n    Object.assign(encode, { bytes: 1 });\n    // 16 bit\n  } else if (_number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset);\n    buffer.writeUInt16LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 3 });\n    // 32 bit\n  } else if (_number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset);\n    buffer.writeUInt32LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 5 });\n    // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset);\n    buffer.writeUInt32LE(_number >>> 0, offset + 1);\n    buffer.writeUInt32LE((_number / 0x100000000) | 0, offset + 5);\n    Object.assign(encode, { bytes: 9 });\n  }\n  return buffer;\n}\nexports.encode = encode;\nfunction decode(buffer, offset) {\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  const first = buffer.readUInt8(offset);\n  // 8 bit\n  if (first < 0xfd) {\n    Object.assign(decode, { bytes: 1 });\n    return first;\n    // 16 bit\n  } else if (first === 0xfd) {\n    Object.assign(decode, { bytes: 3 });\n    return buffer.readUInt16LE(offset + 1);\n    // 32 bit\n  } else if (first === 0xfe) {\n    Object.assign(decode, { bytes: 5 });\n    return buffer.readUInt32LE(offset + 1);\n    // 64 bit\n  } else {\n    Object.assign(decode, { bytes: 9 });\n    const lo = buffer.readUInt32LE(offset + 1);\n    const hi = buffer.readUInt32LE(offset + 5);\n    const _number = hi * 0x0100000000 + lo;\n    checkUInt53(_number);\n    return _number;\n  }\n}\nexports.decode = decode;\nfunction encodingLength(_number) {\n  checkUInt53(_number);\n  return _number < 0xfd\n    ? 1\n    : _number <= 0xffff\n    ? 3\n    : _number <= 0xffffffff\n    ? 5\n    : 9;\n}\nexports.encodingLength = encodingLength;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MissingParametersError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'MissingParametersError';\n        this.message = (message || '');\n    }\n}\nexports.MissingParametersError = MissingParametersError;\nclass InvalidTokenError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'InvalidTokenError';\n        this.message = (message || '');\n    }\n}\nexports.InvalidTokenError = InvalidTokenError;\n//# sourceMappingURL=errors.js.map","\nimport { DEFAULT_SCOPE, DEFAULT_BLOCKSTACK_HOST, AuthScope } from './authConstants'\nimport { getGlobalObject } from '../utils'\n\n/**\n * Configuration data for the current app.\n *\n * On browser platforms, creating an instance of this\n * class without any arguments will use\n * `window.location.origin` as the app domain.\n * On non-browser platforms, you need to\n * specify an app domain as the second argument.\n * \n */\nexport class AppConfig {\n  /**\n   * Blockstack apps are uniquely identified by their app domain.\n   *\n   */\n  appDomain: string\n\n  /**\n   * An array of string representing permissions requested by the app.\n   *\n   */\n  scopes: Array<AuthScope | string>\n\n\n  /**\n   * Path on app domain to redirect users to after authentication. The\n   * authentication response token will be postpended in a query.\n   *\n   */\n  redirectPath: string\n\n  /**\n   * Path relative to app domain of app's manifest file.\n   *\n   * This file needs to have CORS headers set so that it can be fetched\n   * from any origin. Typically this means return the header `Access-Control-Allow-Origin: *`.\n   *\n   */\n  manifestPath: string\n\n  /**\n   * The URL of Blockstack core node to use for this app. If this is\n   * `null`, the core node specified by the user or default core node\n   * will be used.\n   *\n   */\n  coreNode: string\n\n  /**\n   * The URL of a web-based Blockstack Authenticator to use in the event\n   * the user doesn't have Blockstack installed on their machine. If this\n   * is not specified, the current default in this library will be used.\n   *\n   */\n  authenticatorURL?: string\n\n  /**\n   * @param {Array<string>} scopes - permissions this app is requesting\n   * @param {string} appDomain - the app domain\n   * @param {string} redirectPath - path on app domain to redirect users to after authentication\n   * @param {string} manifestPath - path relative to app domain of app's manifest file\n   * @param {string} coreNode - override the default or user selected core node\n   * @param {string} authenticatorURL - the web-based fall back authenticator \n   * ([[DEFAULT_BLOCKSTACK_HOST]])\n   */\n  constructor(scopes: Array<string> = DEFAULT_SCOPE.slice(),\n              appDomain: string = getGlobalObject('location', { returnEmptyObject: true }).origin,\n              redirectPath: string = '',\n              manifestPath: string = '/manifest.json',\n              coreNode: string | null = null,\n              authenticatorURL: string = DEFAULT_BLOCKSTACK_HOST) {\n    this.appDomain = appDomain\n    this.scopes = scopes\n    this.redirectPath = redirectPath\n    this.manifestPath = manifestPath\n    this.coreNode = coreNode\n    this.authenticatorURL = authenticatorURL\n  }\n\n  /**\n   * The location to which the authenticator should\n   * redirect the user.\n   * @returns {string} - URI\n   */\n  redirectURI(): string {\n    return `${this.appDomain}${this.redirectPath}`\n  }\n\n  /**\n   * The location of the app's manifest file.\n   * @returns {string} - URI\n   */\n  manifestURI(): string {\n    return `${this.appDomain}${this.manifestPath}`\n  }\n}\n","import { TxOutput, address as bjsAddress, networks, Transaction, payments, Network } from 'bitcoinjs-lib'\nimport * as FormData from 'form-data'\nimport * as BN from 'bn.js'\nimport { MissingParameterError, RemoteServiceError } from './errors'\nimport { Logger } from './logger'\nimport { config } from './config'\nimport { fetchPrivate } from './fetchUtil'\nimport { createSha2Hash } from './encryption/sha2Hash'\nimport { hashRipemd160 } from './encryption/hashRipemd160'\n\nexport interface UTXO {\n  value?: number;\n  confirmations?: number;\n  tx_hash: string;\n  tx_output_n: number;\n}\n\nexport interface PriceInfo {\n  units: string;\n  amount: BN;\n}\n\nexport interface AccountTokens {\n  tokens: string[];\n}\n\nexport interface TransactionInfo {\n  block_height: number;\n  [key: string]: any;\n}\n\nconst SATOSHIS_PER_BTC = 1e8\nconst TX_BROADCAST_SERVICE_ZONE_FILE_ENDPOINT = 'zone-file'\nconst TX_BROADCAST_SERVICE_REGISTRATION_ENDPOINT = 'registration'\nconst TX_BROADCAST_SERVICE_TX_ENDPOINT = 'transaction'\n\n/**\n * @private\n * @ignore\n */\nexport class BitcoinNetwork {\n  broadcastTransaction(transaction: string): Promise<any> {\n    return Promise.reject(new Error(`Not implemented, broadcastTransaction(${transaction})`))\n  }\n\n  getBlockHeight(): Promise<number> {\n    return Promise.reject(new Error('Not implemented, getBlockHeight()'))\n  }\n\n  getTransactionInfo(txid: string): Promise<TransactionInfo> {\n    return Promise.reject(new Error(`Not implemented, getTransactionInfo(${txid})`))\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return Promise.reject(new Error(`Not implemented, getNetworkedUTXOs(${address})`))\n  }\n}\n/**\n * Use the methods in class to build third-party wallets or in DApps that register names. \n */\nexport class BlockstackNetwork {\n  blockstackAPIUrl: string\n\n  broadcastServiceUrl: string\n\n  /**\n   * @ignore\n   */\n  layer1: Network\n\n  DUST_MINIMUM: number\n\n  includeUtxoMap: {[address: string]: UTXO[]}\n\n  excludeUtxoSet: UTXO[]\n\n  btc: BitcoinNetwork\n\n  MAGIC_BYTES: string\n\n  constructor(apiUrl: string, broadcastServiceUrl: string,\n              bitcoinAPI: BitcoinNetwork,\n              network = networks.bitcoin) {\n    this.blockstackAPIUrl = apiUrl\n    this.broadcastServiceUrl = broadcastServiceUrl\n    this.layer1 = network\n    this.btc = bitcoinAPI\n\n    this.DUST_MINIMUM = 5500\n    this.includeUtxoMap = {}\n    this.excludeUtxoSet = []\n    this.MAGIC_BYTES = 'id'\n  }\n\n  /**\n   * @ignore\n   */\n  coerceAddress(address: string) {\n    const { hash, version } = bjsAddress.fromBase58Check(address)\n    const scriptHashes = [networks.bitcoin.scriptHash,\n                          networks.testnet.scriptHash]\n    const pubKeyHashes = [networks.bitcoin.pubKeyHash,\n                          networks.testnet.pubKeyHash]\n    let coercedVersion\n    if (scriptHashes.indexOf(version) >= 0) {\n      coercedVersion = this.layer1.scriptHash\n    } else if (pubKeyHashes.indexOf(version) >= 0) {\n      coercedVersion = this.layer1.pubKeyHash\n    } else {\n      throw new Error(`Unrecognized address version number ${version} in ${address}`)\n    }\n    return bjsAddress.toBase58Check(hash, coercedVersion)\n  }\n\n  /**\n   * This is intended for use in third-party wallets or in DApps that register names.\n   */\n  getDefaultBurnAddress() {\n    return this.coerceAddress('1111111111111111111114oLvT2')\n  }\n\n  /**\n   * Get the price of a name via the legacy /v1/prices API endpoint. This is \n   * intended for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamePriceV1(fullyQualifiedName: string): Promise<PriceInfo> {\n    // legacy code path\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/prices/names/${fullyQualifiedName}`)\n      .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(`Failed to query name price for ${fullyQualifiedName}`)\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then(resp => resp.name_price)\n      .then((namePrice) => {\n        if (!namePrice || !namePrice.satoshis) {\n          throw new Error(\n            `Failed to get price for ${fullyQualifiedName}. Does the namespace exist?`\n          )\n        }\n        if (namePrice.satoshis < this.DUST_MINIMUM) {\n          namePrice.satoshis = this.DUST_MINIMUM\n        }\n        const result = {\n          units: 'BTC',\n          amount: new BN(String(namePrice.satoshis))\n        }\n        return result\n      })\n  }\n\n  /**\n   * Get the price of a namespace via the legacy /v1/prices API endpoint. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamespacePriceV1(namespaceID: string): Promise<PriceInfo> {\n    // legacy code path\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/prices/namespaces/${namespaceID}`)\n      .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(`Failed to query name price for ${namespaceID}`)\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then((namespacePrice) => {\n        if (!namespacePrice || !namespacePrice.satoshis) {\n          throw new Error(`Failed to get price for ${namespaceID}`)\n        }\n        if (namespacePrice.satoshis < this.DUST_MINIMUM) {\n          namespacePrice.satoshis = this.DUST_MINIMUM\n        }\n        const result = {\n          units: 'BTC',\n          amount: new BN(String(namespacePrice.satoshis))\n        }\n        return result\n      })\n  }\n  \n  /**\n   * Get the price of a name via the /v2/prices API endpoint. This is intended \n   * for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamePriceV2(fullyQualifiedName: string): Promise<PriceInfo> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v2/prices/names/${fullyQualifiedName}`)\n      .then((resp) => {\n        if (resp.status !== 200) {\n          // old core node \n          throw new Error('The upstream node does not handle the /v2/ price namespace')\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then(resp => resp.name_price)\n      .then((namePrice) => {\n        if (!namePrice) {\n          throw new Error(\n            `Failed to get price for ${fullyQualifiedName}. Does the namespace exist?`\n          )\n        }\n        const result = {\n          units: namePrice.units,\n          amount: new BN(namePrice.amount)\n        }\n        if (namePrice.units === 'BTC') {\n          // must be at least dust-minimum\n          const dustMin = new BN(String(this.DUST_MINIMUM))\n          if (result.amount.ucmp(dustMin) < 0) {\n            result.amount = dustMin\n          }\n        }\n        return result\n      })\n  }\n\n  /**\n   * Get the price of a namespace via the /v2/prices API endpoint.\n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamespacePriceV2(namespaceID: string): Promise<PriceInfo> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v2/prices/namespaces/${namespaceID}`)\n      .then((resp) => {\n        if (resp.status !== 200) {\n          // old core node \n          throw new Error('The upstream node does not handle the /v2/ price namespace')\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then((namespacePrice) => {\n        if (!namespacePrice) {\n          throw new Error(`Failed to get price for ${namespaceID}`)\n        }\n        const result = {\n          units: namespacePrice.units,\n          amount: new BN(namespacePrice.amount)\n        }\n        if (namespacePrice.units === 'BTC') {\n          // must be at least dust-minimum\n          const dustMin = new BN(String(this.DUST_MINIMUM))\n          if (result.amount.ucmp(dustMin) < 0) {\n            result.amount = dustMin\n          }\n        }\n        return result\n      })\n  }\n\n  /**\n   * Get the price of a name. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }, where\n   *   .units encodes the cryptocurrency units to pay (e.g. BTC, STACKS), and\n   *   .amount encodes the number of units, in the smallest denominiated amount\n   *   (e.g. if .units is BTC, .amount will be satoshis; if .units is STACKS, \n   *   .amount will be microStacks)\n   */\n  getNamePrice(fullyQualifiedName: string): Promise<PriceInfo> {\n    // handle v1 or v2 \n    return Promise.resolve().then(() => this.getNamePriceV2(fullyQualifiedName))\n      .catch(() => this.getNamePriceV1(fullyQualifiedName))\n  }\n\n  /**\n   * Get the price of a namespace. This is intended for use in third-party \n   * wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }, where\n   *   .units encodes the cryptocurrency units to pay (e.g. BTC, STACKS), and\n   *   .amount encodes the number of units, in the smallest denominiated amount\n   *   (e.g. if .units is BTC, .amount will be satoshis; if .units is STACKS, \n   *   .amount will be microStacks)\n   */\n  getNamespacePrice(namespaceID: string): Promise<PriceInfo> {\n    // handle v1 or v2 \n    return Promise.resolve().then(() => this.getNamespacePriceV2(namespaceID))\n      .catch(() => this.getNamespacePriceV1(namespaceID))\n  }\n\n  /**\n   * How many blocks can pass between a name expiring and the name being able to be\n   * re-registered by a different owner. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName unused\n   * @return a promise to the number of blocks\n   */\n  getGracePeriod(_fullyQualifiedName?: string) {\n    return Promise.resolve(5000)\n  }\n\n  /**\n   * Get the names -- both on-chain and off-chain -- owned by an address. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param address the blockchain address (the hash of the owner public key)\n   * @return a promise that resolves to a list of names (Strings)\n   */\n  getNamesOwned(address: string): Promise<string[]> {\n    const networkAddress = this.coerceAddress(address)\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/addresses/bitcoin/${networkAddress}`)\n      .then(resp => resp.json())\n      .then(obj => obj.names)\n  }\n\n  /**\n   * Get the blockchain address to which a name's registration fee must be sent\n   * (the address will depend on the namespace in which it is registered.) \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param namespace the namespace ID\n   * @return a promise that resolves to an address (String)\n   */\n  getNamespaceBurnAddress(namespace: string): Promise<string> {\n    return Promise.all([\n      fetchPrivate(`${this.blockstackAPIUrl}/v1/namespaces/${namespace}`),\n      this.getBlockHeight()\n    ])\n      .then(([resp, blockHeight]) => {\n        if (resp.status === 404) {\n          throw new Error(`No such namespace '${namespace}'`)\n        } else {\n          return Promise.all([resp.json(), blockHeight])\n        }\n      })\n      .then(([namespaceInfo, blockHeight]) => {\n        let address = this.getDefaultBurnAddress()\n        if (namespaceInfo.version === 2) {\n          // pay-to-namespace-creator if this namespace is less than 1 year old\n          if (namespaceInfo.reveal_block + 52595 >= blockHeight) {\n            address = namespaceInfo.address\n          }\n        }\n        return address\n      })\n      .then(address => this.coerceAddress(address))\n  }\n\n  /**\n   * Get WHOIS-like information for a name, including the address that owns it,\n   * the block at which it expires, and the zone file anchored to it (if available).\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query.  Can be on-chain of off-chain.\n   * @return a promise that resolves to the WHOIS-like information \n   */\n  getNameInfo(fullyQualifiedName: string) {\n    Logger.debug(this.blockstackAPIUrl)\n    const nameLookupURL = `${this.blockstackAPIUrl}/v1/names/${fullyQualifiedName}`\n    return fetchPrivate(nameLookupURL)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Name not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((nameInfo) => {\n        Logger.debug(`nameInfo: ${JSON.stringify(nameInfo)}`)\n        // the returned address _should_ be in the correct network ---\n        //  blockstackd gets into trouble because it tries to coerce back to mainnet\n        //  and the regtest transaction generation libraries want to use testnet addresses\n        if (nameInfo.address) {\n          return Object.assign({}, nameInfo, { address: this.coerceAddress(nameInfo.address) })\n        } else {\n          return nameInfo\n        }\n      })\n  }\n\n  /**\n   * Get the pricing parameters and creation history of a namespace. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise that resolves to the namespace information.\n   */\n  getNamespaceInfo(namespaceID: string) {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/namespaces/${namespaceID}`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Namespace not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((namespaceInfo) => {\n        // the returned address _should_ be in the correct network ---\n        //  blockstackd gets into trouble because it tries to coerce back to mainnet\n        //  and the regtest transaction generation libraries want to use testnet addresses\n        if (namespaceInfo.address && namespaceInfo.recipient_address) {\n          return Object.assign({}, namespaceInfo, {\n            address: this.coerceAddress(namespaceInfo.address),\n            recipient_address: this.coerceAddress(namespaceInfo.recipient_address)\n          })\n        } else {\n          return namespaceInfo\n        }\n      })\n  }\n\n  /**\n   * Get a zone file, given its hash.  Throws an exception if the zone file\n   * obtained does not match the hash. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * \n   * @param zonefileHash the ripemd160(sha256) hash of the zone file\n   * @return a promise that resolves to the zone file's text\n   */\n  getZonefile(zonefileHash: string): Promise<string> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/zonefiles/${zonefileHash}`)\n      .then((resp) => {\n        if (resp.status === 200) {\n          return resp.text()\n            .then(async (body) => {\n              const sha2Hash = await createSha2Hash()\n              const sha256 = await sha2Hash.digest(Buffer.from(body))\n              const h = hashRipemd160(sha256).toString('hex')\n              if (h !== zonefileHash) {\n                throw new Error(`Zone file contents hash to ${h}, not ${zonefileHash}`)\n              }\n              return body\n            })\n        } else {\n          throw new Error(`Bad response status: ${resp.status}`)\n        }\n      })\n  }\n\n  /**\n   * Get the status of an account for a particular token holding.  This includes its total number of\n   * expenditures and credits, lockup times, last `txid`, and so on. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param address the account\n   * @param tokenType the token type to query\n   * @return a promise that resolves to an object representing the state of the account\n   *   for this token\n   */\n  getAccountStatus(address: string, tokenType: string) {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/accounts/${address}/${tokenType}/status`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      }).then((accountStatus) => {\n        // coerce all addresses, and convert credit/debit to biginteger\n        const formattedStatus = Object.assign({}, accountStatus, {\n          address: this.coerceAddress(accountStatus.address),\n          debit_value: new BN(String(accountStatus.debit_value)),\n          credit_value: new BN(String(accountStatus.credit_value))\n        })\n        return formattedStatus\n      })\n  }\n  \n  \n  /**\n   * Get a page of an account's transaction history. This is intended for use in \n   * third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @param page the page number.  Page 0 is the most recent transactions\n   * @return a promise that resolves to an Array of Objects, where each Object encodes\n   *   states of the account at various block heights (e.g. prior balances, txids, etc)\n   */\n  getAccountHistoryPage(address: string,\n                        page: number): Promise<any[]> {\n    const url = `${this.blockstackAPIUrl}/v1/accounts/${address}/history?page=${page}`\n    return fetchPrivate(url)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((historyList) => {\n        if (historyList.error) {\n          throw new Error(`Unable to get account history page: ${historyList.error}`)\n        }\n        // coerse all addresses and convert to bigint\n        return historyList.map((histEntry: any) => {\n          histEntry.address = this.coerceAddress(histEntry.address)\n          histEntry.debit_value = new BN(String(histEntry.debit_value))\n          histEntry.credit_value = new BN(String(histEntry.credit_value))\n          return histEntry\n        })\n      })\n  }\n\n  /**\n   * Get the state(s) of an account at a particular block height.  This includes the state of the\n   * account beginning with this block's transactions, as well as all of the states the account\n   * passed through when this block was processed (if any).\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @param blockHeight the block to query\n   * @return a promise that resolves to an Array of Objects, where each Object encodes\n   *   states of the account at this block.\n   */\n  getAccountAt(address: string, blockHeight: number): Promise<any[]> {\n    const url = `${this.blockstackAPIUrl}/v1/accounts/${address}/history/${blockHeight}`\n    return fetchPrivate(url)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((historyList) => {\n        if (historyList.error) {\n          throw new Error(`Unable to get historic account state: ${historyList.error}`)\n        }\n        // coerce all addresses \n        return historyList.map((histEntry: any) => {\n          histEntry.address = this.coerceAddress(histEntry.address)\n          histEntry.debit_value = new BN(String(histEntry.debit_value))\n          histEntry.credit_value = new BN(String(histEntry.credit_value))\n          return histEntry\n        })\n      })\n  }\n\n  /**\n   * Get the set of token types that this account owns. This is intended for use \n   * in third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @return a promise that resolves to an Array of Strings, where each item encodes the \n   *   type of token this account holds (excluding the underlying blockchain's tokens)\n   */\n  getAccountTokens(address: string): Promise<AccountTokens> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/accounts/${address}/tokens`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((tokenList) => {\n        if (tokenList.error) {\n          throw new Error(`Unable to get token list: ${tokenList.error}`)\n        }\n        return tokenList\n      })\n  }\n\n  /**\n   * Get the number of tokens owned by an account.  If the account does not exist or has no\n   * tokens of this type, then 0 will be returned. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @param tokenType the type of token to query.\n   * @return a promise that resolves to a BigInteger that encodes the number of tokens \n   *   held by this account.\n   */\n  getAccountBalance(address: string, tokenType: string): Promise<BN> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/accounts/${address}/${tokenType}/balance`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          // talking to an older blockstack core node without the accounts API\n          return Promise.resolve().then(() => new BN('0'))\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((tokenBalance) => {\n        if (tokenBalance.error) {\n          throw new Error(`Unable to get account balance: ${tokenBalance.error}`)\n        }\n        let balance = '0'\n        if (tokenBalance && tokenBalance.balance) {\n          balance = tokenBalance.balance\n        }\n        return new BN(balance)\n      })\n  }\n\n\n  /**\n   * Performs a POST request to the given URL. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param endpoint  the name of\n   * @param body [description]\n   * @return Returns a `Promise` that resolves to the object requested.\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   * with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   * parameter\n   *\n   * @private\n   */\n  broadcastServiceFetchHelper(endpoint: string, body: any): Promise<any|Error> {\n    const requestHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n\n    const options = {\n      method: 'POST',\n      headers: requestHeaders,\n      body: JSON.stringify(body)\n    }\n\n    const url = `${this.broadcastServiceUrl}/v1/broadcast/${endpoint}`\n    return fetchPrivate(url, options)\n      .then((response) => {\n        if (response.ok) {\n          return response.json()\n        } else {\n          throw new RemoteServiceError(response)\n        }\n      })\n  }\n\n  /**\n   * Broadcasts a signed bitcoin transaction to the network optionally waiting to broadcast the\n   * transaction until a second transaction has a certain number of confirmations.\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   *\n   * @param transaction the hex-encoded transaction to broadcast\n   * @param transactionToWatch the hex transaction id of the transaction to watch for\n   * the specified number of confirmations before broadcasting the `transaction`\n   * @param confirmations the number of confirmations `transactionToWatch` must have\n   * before broadcasting `transaction`.\n   * @return Returns a Promise that resolves to an object with a\n   * `transaction_hash` key containing the transaction hash of the broadcasted transaction.\n   *\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   *   with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   *   parameter\n   * @private\n   */\n  broadcastTransaction(\n    transaction: string,\n    transactionToWatch: string = null,\n    confirmations: number = 6\n  ) {\n    if (!transaction) {\n      const error = new MissingParameterError('transaction')\n      return Promise.reject(error)\n    }\n\n    if (!confirmations && confirmations !== 0) {\n      const error = new MissingParameterError('confirmations')\n      return Promise.reject(error)\n    }\n\n    if (transactionToWatch === null) {\n      return this.btc.broadcastTransaction(transaction)\n    } else {\n      /*\n       * POST /v1/broadcast/transaction\n       * Request body:\n       * JSON.stringify({\n       *  transaction,\n       *  transactionToWatch,\n       *  confirmations\n       * })\n       */\n      const endpoint = TX_BROADCAST_SERVICE_TX_ENDPOINT\n\n      const requestBody = {\n        transaction,\n        transactionToWatch,\n        confirmations\n      }\n\n      return this.broadcastServiceFetchHelper(endpoint, requestBody)\n    }\n  }\n\n  /**\n   * Broadcasts a zone file to the Atlas network via the transaction broadcast service.\n   * This is intended for use in third-party wallets or in DApps that register names.\n   *\n   * @param zoneFile the zone file to be broadcast to the Atlas network\n   * @param transactionToWatch the hex transaction id of the transaction\n   * to watch for confirmation before broadcasting the zone file to the Atlas network\n   * @return Returns a Promise that resolves to an object with a\n   * `transaction_hash` key containing the transaction hash of the broadcasted transaction.\n   *\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   *   with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   *   parameter\n   * @private\n   */\n  broadcastZoneFile(\n    zoneFile?: string,\n    transactionToWatch: string = null\n  ) {\n    if (!zoneFile) {\n      return Promise.reject(new MissingParameterError('zoneFile'))\n    }\n\n    // TODO: validate zonefile\n\n    if (transactionToWatch) {\n      // broadcast via transaction broadcast service\n\n      /*\n       * POST /v1/broadcast/zone-file\n       * Request body:\n       * JSON.stringify({\n       *  zoneFile,\n       *  transactionToWatch\n       * })\n       */\n\n      const requestBody = {\n        zoneFile,\n        transactionToWatch\n      }\n\n      const endpoint = TX_BROADCAST_SERVICE_ZONE_FILE_ENDPOINT\n\n      return this.broadcastServiceFetchHelper(endpoint, requestBody)\n    } else {\n      // broadcast via core endpoint\n\n      // zone file is two words but core's api treats it as one word 'zonefile'\n      const requestBody = { zonefile: zoneFile }\n\n      return fetchPrivate(`${this.blockstackAPIUrl}/v1/zonefile/`,\n                          {\n                            method: 'POST',\n                            body: JSON.stringify(requestBody),\n                            headers: {\n                              'Content-Type': 'application/json'\n                            }\n                          })\n        .then((resp) => {\n          const json = resp.json()\n          return json\n            .then((respObj) => {\n              if (respObj.hasOwnProperty('error')) {\n                throw new RemoteServiceError(resp)\n              }\n              return respObj.servers\n            })\n        })\n    }\n  }\n\n  /**\n   * Sends the preorder and registration transactions and zone file\n   * for a Blockstack name registration along with the to the transaction\n   *  broadcast service.\n   *\n   * The transaction broadcast:\n   *\n   * * immediately broadcasts the preorder transaction\n   * * broadcasts the register transactions after the preorder transaction\n   * has an appropriate number of confirmations\n   * * broadcasts the zone file to the Atlas network after the register transaction\n   * has an appropriate number of confirmations\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   *\n   * @param preorderTransaction the hex-encoded, signed preorder transaction generated\n   * using the `makePreorder` function\n   * @param registerTransaction the hex-encoded, signed register transaction generated\n   * using the `makeRegister` function\n   * @param zoneFile the zone file to be broadcast to the Atlas network\n   * @return Returns a Promise that resolves to an object with a\n   * `transaction_hash` key containing the transaction hash of the broadcasted transaction.\n   *\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   *   with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   *   parameter\n   * @private\n   */\n  broadcastNameRegistration(\n    preorderTransaction: string,\n    registerTransaction: string,\n    zoneFile: string\n  ) {\n    /*\n       * POST /v1/broadcast/registration\n       * Request body:\n       * JSON.stringify({\n       * preorderTransaction,\n       * registerTransaction,\n       * zoneFile\n       * })\n       */\n\n    if (!preorderTransaction) {\n      const error = new MissingParameterError('preorderTransaction')\n      return Promise.reject(error)\n    }\n\n    if (!registerTransaction) {\n      const error = new MissingParameterError('registerTransaction')\n      return Promise.reject(error)\n    }\n\n    if (!zoneFile) {\n      const error = new MissingParameterError('zoneFile')\n      return Promise.reject(error)\n    }\n\n    const requestBody = {\n      preorderTransaction,\n      registerTransaction,\n      zoneFile\n    }\n\n    const endpoint = TX_BROADCAST_SERVICE_REGISTRATION_ENDPOINT\n\n    return this.broadcastServiceFetchHelper(endpoint, requestBody)\n  }\n\n  /**\n   * @ignore\n   */\n  getFeeRate(): Promise<number> {\n    return fetchPrivate('https://bitcoinfees.earn.com/api/v1/fees/recommended')\n      .then(resp => resp.json())\n      .then(rates => Math.floor(rates.fastestFee))\n  }\n\n  /**\n   * @ignore\n   */\n  countDustOutputs() {\n    throw new Error('Not implemented.')\n  }\n\n  /**\n   * @ignore\n   */\n  getUTXOs(address: string): Promise<UTXO[]> {\n    return this.getNetworkedUTXOs(address)\n      .then((networkedUTXOs) => {\n        let returnSet = networkedUTXOs.concat()\n        if (this.includeUtxoMap.hasOwnProperty(address)) {\n          returnSet = networkedUTXOs.concat(this.includeUtxoMap[address])\n        }\n\n        // aaron: I am *well* aware this is O(n)*O(m) runtime\n        //    however, clients should clear the exclude set periodically\n        const excludeSet = this.excludeUtxoSet\n        returnSet = returnSet.filter(\n          (utxo) => {\n            const inExcludeSet = excludeSet.reduce(\n              (inSet, utxoToCheck) => inSet || (utxoToCheck.tx_hash === utxo.tx_hash\n                          && utxoToCheck.tx_output_n === utxo.tx_output_n), false\n            )\n            return !inExcludeSet\n          }\n        )\n\n        return returnSet\n      })\n  }\n\n  /**\n   * This will modify the network's utxo set to include UTXOs\n   *  from the given transaction and exclude UTXOs *spent* in\n   *  that transaction. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param txHex - the hex-encoded transaction to use\n   * @return no return value, this modifies the UTXO config state\n   * @private\n   * @ignore\n   */\n  modifyUTXOSetFrom(txHex: string) {\n    const tx = Transaction.fromHex(txHex)\n\n    const excludeSet: UTXO[] = this.excludeUtxoSet.concat()\n\n    tx.ins.forEach((utxoUsed) => {\n      const reverseHash = Buffer.from(utxoUsed.hash)\n      reverseHash.reverse()\n      excludeSet.push({\n        tx_hash: reverseHash.toString('hex'),\n        tx_output_n: utxoUsed.index\n      })\n    })\n\n    this.excludeUtxoSet = excludeSet\n\n    const txHash = Buffer.from(tx.getHash().reverse()).toString('hex')\n    tx.outs.forEach((utxoCreated, txOutputN) => {\n      const isNullData = function isNullData(script: Buffer) {\n        try {\n          payments.embed({ output: script }, { validate: true })\n          return true\n        } catch (_) {\n          return false\n        }\n      }\n      if (isNullData(utxoCreated.script)) {\n        return\n      }\n      const address = bjsAddress.fromOutputScript(\n        utxoCreated.script, this.layer1\n      )\n\n      let includeSet: UTXO[] = []\n      if (this.includeUtxoMap.hasOwnProperty(address)) {\n        includeSet = includeSet.concat(this.includeUtxoMap[address])\n      }\n\n      includeSet.push({\n        tx_hash: txHash,\n        confirmations: 0,\n        value: (utxoCreated as TxOutput).value,\n        tx_output_n: txOutputN\n      })\n      this.includeUtxoMap[address] = includeSet\n    })\n  }\n\n  /**\n   * @ignore\n   */\n  resetUTXOs(address: string) {\n    delete this.includeUtxoMap[address]\n    this.excludeUtxoSet = []\n  }\n\n  /**\n   * @ignore\n   */\n  getConsensusHash() {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/blockchains/bitcoin/consensus`)\n      .then(resp => resp.json())\n      .then(x => x.consensus_hash)\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    return this.btc.getTransactionInfo(txHash)\n  }\n\n  /**\n   * @ignore\n   */\n  getBlockHeight() {\n    return this.btc.getBlockHeight()\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return this.btc.getNetworkedUTXOs(address)\n  }\n}\n\n/**\n * @ignore\n */\nexport class LocalRegtest extends BlockstackNetwork {\n  constructor(apiUrl: string, broadcastServiceUrl: string,\n              bitcoinAPI: BitcoinNetwork) {\n    super(apiUrl, broadcastServiceUrl, bitcoinAPI, networks.testnet)\n  }\n\n  getFeeRate(): Promise<number> {\n    return Promise.resolve(Math.floor(0.00001000 * SATOSHIS_PER_BTC))\n  }\n}\n\n/**\n * @ignore\n */\nexport class BitcoindAPI extends BitcoinNetwork {\n  bitcoindUrl: string\n\n  bitcoindCredentials: {username: string, password: string}\n\n  importedBefore: any\n\n  constructor(bitcoindUrl: string, bitcoindCredentials: {username: string, password: string}) {\n    super()\n    this.bitcoindUrl = bitcoindUrl\n    this.bitcoindCredentials = bitcoindCredentials\n    this.importedBefore = {}\n  }\n\n  broadcastTransaction(transaction: string) {\n    const jsonRPC = {\n      jsonrpc: '1.0',\n      method: 'sendrawtransaction',\n      params: [transaction]\n    }\n    const authString =      Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n    return fetchPrivate(this.bitcoindUrl, {\n      method: 'POST',\n      body: JSON.stringify(jsonRPC),\n      headers\n    })\n      .then(resp => resp.json())\n      .then(respObj => respObj.result)\n  }\n\n  getBlockHeight() {\n    const jsonRPC = {\n      jsonrpc: '1.0',\n      method: 'getblockcount'\n    }\n    const authString =      Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n    return fetchPrivate(this.bitcoindUrl, {\n      method: 'POST',\n      body: JSON.stringify(jsonRPC),\n      headers\n    })\n      .then(resp => resp.json())\n      .then(respObj => respObj.result)\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    const jsonRPC = {\n      jsonrpc: '1.0',\n      method: 'gettransaction',\n      params: [txHash]\n    }\n    const authString =      Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n    return fetchPrivate(this.bitcoindUrl, {\n      method: 'POST',\n      body: JSON.stringify(jsonRPC),\n      headers\n    })\n      .then(resp => resp.json())\n      .then(respObj => respObj.result)\n      .then(txInfo => txInfo.blockhash)\n      .then((blockhash) => {\n        const jsonRPCBlock = {\n          jsonrpc: '1.0',\n          method: 'getblockheader',\n          params: [blockhash]\n        }\n        headers.Authorization = `Basic ${authString}`\n        return fetchPrivate(this.bitcoindUrl, {\n          method: 'POST',\n          body: JSON.stringify(jsonRPCBlock),\n          headers\n        })\n      })\n      .then(resp => resp.json())\n      .then((respObj) => {\n        if (!respObj || !respObj.result) {\n          // unconfirmed \n          throw new Error('Unconfirmed transaction')\n        } else {\n          return { block_height: respObj.result.height }\n        }\n      })\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    const jsonRPCImport = {\n      jsonrpc: '1.0',\n      method: 'importaddress',\n      params: [address]\n    }\n    const jsonRPCUnspent = {\n      jsonrpc: '1.0',\n      method: 'listunspent',\n      params: [0, 9999999, [address]]\n    }\n    const authString = Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n\n    const importPromise = (this.importedBefore[address])\n      ? Promise.resolve()\n      : fetchPrivate(this.bitcoindUrl, {\n        method: 'POST',\n        body: JSON.stringify(jsonRPCImport),\n        headers\n      })\n        .then(() => { this.importedBefore[address] = true })\n\n    return importPromise\n      .then(() => fetchPrivate(this.bitcoindUrl, {\n        method: 'POST',\n        body: JSON.stringify(jsonRPCUnspent),\n        headers\n      }))\n      .then(resp => resp.json())\n      .then(x => x.result)\n      .then(utxos => utxos.map(\n        (x: any) => ({\n          value: Math.round(x.amount * SATOSHIS_PER_BTC),\n          confirmations: x.confirmations,\n          tx_hash: x.txid,\n          tx_output_n: x.vout\n        })\n      ))\n  }\n}\n\n/**\n * @ignore\n */\nexport class InsightClient extends BitcoinNetwork {\n  apiUrl: string\n\n  constructor(insightUrl: string = 'https://utxo.technofractal.com/') {\n    super()\n    this.apiUrl = insightUrl\n  }\n\n  broadcastTransaction(transaction: string) {\n    const jsonData = { rawtx: transaction }\n    return fetchPrivate(`${this.apiUrl}/tx/send`,\n                        {\n                          method: 'POST',\n                          headers: { 'Content-Type': 'application/json' },\n                          body: JSON.stringify(jsonData)\n                        })\n      .then(resp => resp.json())\n  }\n\n  getBlockHeight() {\n    return fetchPrivate(`${this.apiUrl}/status`)\n      .then(resp => resp.json())\n      .then(status => status.blocks)\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    return fetchPrivate(`${this.apiUrl}/tx/${txHash}`)\n      .then(resp => resp.json())\n      .then((transactionInfo) => {\n        if (transactionInfo.error) {\n          throw new Error(`Error finding transaction: ${transactionInfo.error}`)\n        }\n        return fetchPrivate(`${this.apiUrl}/block/${transactionInfo.blockHash}`)\n      })\n      .then(resp => resp.json())\n      .then(blockInfo => ({ block_height: blockInfo.height }))\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return fetchPrivate(`${this.apiUrl}/addr/${address}/utxo`)\n      .then(resp => resp.json())\n      .then(utxos => utxos.map(\n        (x: any) => ({\n          value: x.satoshis,\n          confirmations: x.confirmations,\n          tx_hash: x.txid,\n          tx_output_n: x.vout\n        })\n      ))\n  }\n}\n\n\n/**\n * @ignore\n */\nexport class BlockchainInfoApi extends BitcoinNetwork {\n  utxoProviderUrl: string\n\n  constructor(blockchainInfoUrl: string = 'https://blockchain.info') {\n    super()\n    this.utxoProviderUrl = blockchainInfoUrl\n  }\n\n  getBlockHeight() {\n    return fetchPrivate(`${this.utxoProviderUrl}/latestblock?cors=true`)\n      .then(resp => resp.json())\n      .then(blockObj => blockObj.height)\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return fetchPrivate(`${this.utxoProviderUrl}/unspent?format=json&active=${address}&cors=true`)\n      .then((resp) => {\n        if (resp.status === 500) {\n          Logger.debug('UTXO provider 500 usually means no UTXOs: returning []')\n          return {\n            unspent_outputs: []\n          }\n        } else {\n          return resp.json()\n        }\n      })\n      .then(utxoJSON => utxoJSON.unspent_outputs)\n      .then(utxoList => utxoList.map(\n        (utxo: any) => {\n          const utxoOut = {\n            value: utxo.value,\n            tx_output_n: utxo.tx_output_n,\n            confirmations: utxo.confirmations,\n            tx_hash: utxo.tx_hash_big_endian\n          }\n          return utxoOut\n        }\n      ))\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    return fetchPrivate(`${this.utxoProviderUrl}/rawtx/${txHash}?cors=true`)\n      .then((resp) => {\n        if (resp.status === 200) {\n          return resp.json()\n        } else {\n          throw new Error(`Could not lookup transaction info for '${txHash}'. Server error.`)\n        }\n      })\n      .then(respObj => ({ block_height: respObj.block_height }))\n  }\n\n  broadcastTransaction(transaction: string) {\n    const form = new FormData()\n    form.append('tx', transaction)\n    return fetchPrivate(`${this.utxoProviderUrl}/pushtx?cors=true`,\n                        {\n                          method: 'POST',\n                          body: <any>form\n                        })\n      .then((resp) => {\n        const text = resp.text()\n        return text\n          .then((respText) => {\n            if (respText.toLowerCase().indexOf('transaction submitted') >= 0) {\n              const txHash = Buffer.from(\n                Transaction.fromHex(transaction)\n                  .getHash()\n                  .reverse()).toString('hex') // big_endian\n              return txHash\n            } else {\n              throw new RemoteServiceError(resp,\n                                           `Broadcast transaction failed with message: ${respText}`)\n            }\n          })\n      })\n  }\n}\n\n\n/**\n* @ignore\n*/\nconst LOCAL_REGTEST = new LocalRegtest(\n  'http://localhost:16268',\n  'http://localhost:16269',\n  new BitcoindAPI('http://localhost:18332/',\n                  { username: 'blockstack', password: 'blockstacksystem' })\n)\n\n/**\n* Instance of [[BlockstackNetwork]] set to the default endpoints. \n*/\nexport const MAINNET_DEFAULT = new BlockstackNetwork(\n  'https://core.blockstack.org',\n  'https://broadcast.blockstack.org',\n  new BlockchainInfoApi()\n)\n\n/**\n * Get WHOIS-like information for a name, including the address that owns it,\n * the block at which it expires, and the zone file anchored to it (if available). \n * This is intended for use in third-party wallets or in DApps that register names.\n * @param fullyQualifiedName the name to query.  Can be on-chain of off-chain.\n * @return a promise that resolves to the WHOIS-like information \n */\nexport function getNameInfo(fullyQualifiedName: string) {\n  return config.network.getNameInfo(fullyQualifiedName)\n}\n\n/**\n* @ignore\n*/\nexport const network = {\n  BlockstackNetwork,\n  LocalRegtest,\n  BlockchainInfoApi,\n  BitcoindAPI,\n  InsightClient,\n  defaults: { LOCAL_REGTEST, MAINNET_DEFAULT }\n}\n","'use strict';\n\nvar elliptic = exports;\n\nelliptic.version = require('../package.json').version;\nelliptic.utils = require('./elliptic/utils');\nelliptic.rand = require('brorand');\nelliptic.curve = require('./elliptic/curve');\nelliptic.curves = require('./elliptic/curves');\n\n// Protocols\nelliptic.ec = require('./elliptic/ec');\nelliptic.eddsa = require('./elliptic/eddsa');\n","\nimport { resolveZoneFileToProfile } from './profileZoneFiles'\nimport { config } from '../config'\nimport { fetchPrivate } from '../fetchUtil'\n\n/**\n * Look up a user profile by blockstack ID\n *\n * @param {string} username - The Blockstack ID of the profile to look up\n * @param {string} [zoneFileLookupURL=null] - The URL\n * to use for zonefile lookup. If falsey, lookupProfile will use the\n * blockstack.js [[getNameInfo]] function.\n * @returns {Promise} that resolves to a profile object\n */\nexport function lookupProfile(username: string, zoneFileLookupURL?: string): \n  Promise<Record<string, any>> {\n  if (!username) {\n    return Promise.reject()\n  }\n  let lookupPromise\n  if (zoneFileLookupURL) {\n    const url = `${zoneFileLookupURL.replace(/\\/$/, '')}/${username}`\n    lookupPromise = fetchPrivate(url)\n      .then(response => response.json())\n  } else {\n    lookupPromise = config.network.getNameInfo(username)\n  }\n  return lookupPromise\n    .then((responseJSON) => {\n      if (responseJSON.hasOwnProperty('zonefile')\n          && responseJSON.hasOwnProperty('address')) {\n        return resolveZoneFileToProfile(responseJSON.zonefile, responseJSON.address)\n      } else {\n        throw new Error('Invalid zonefile lookup response: did not contain `address`'\n                        + ' or `zonefile` field')\n      }\n    })\n}\n","/**\n * \n * @param serviceName \n * @param data \n * \n * @ignore\n */\nfunction formatAccount(serviceName: string, data: any) {\n  let proofUrl\n  if (data.proof && data.proof.url) {\n    proofUrl = data.proof.url\n  }\n  return {\n    '@type': 'Account',\n    service: serviceName,\n    identifier: data.username,\n    proofType: 'http',\n    proofUrl\n  }\n}\n\n/**\n * \n * @param profile \n * \n * @ignore\n */\nexport function getPersonFromLegacyFormat(profile: any) {\n  const profileData: {\n    ['@type']: string, \n    account?: any[],\n    name?: string,\n    description?: string,\n    address?: {\n      ['@type']: string,\n      addressLocality: string\n    },\n    image?: any[],\n    website?: Array<{\n      ['@type']: string,\n      url: string\n    }>\n  } = {\n    '@type': 'Person'\n  }\n\n  if (profile) {\n    if (profile.name && profile.name.formatted) {\n      profileData.name = profile.name.formatted\n    }\n\n    if (profile.bio) {\n      profileData.description = profile.bio\n    }\n\n    if (profile.location && profile.location.formatted) {\n      profileData.address = {\n        '@type': 'PostalAddress',\n        addressLocality: profile.location.formatted\n      }\n    }\n\n    const images = []\n    if (profile.avatar && profile.avatar.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'avatar',\n        contentUrl: profile.avatar.url\n      })\n    }\n    if (profile.cover && profile.cover.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'cover',\n        contentUrl: profile.cover.url\n      })\n    }\n    if (images.length) {\n      profileData.image = images\n    }\n\n    if (profile.website) {\n      profileData.website = [{\n        '@type': 'WebSite',\n        url: profile.website\n      }]\n    }\n\n    const accounts = []\n    if (profile.bitcoin && profile.bitcoin.address) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'payment',\n        service: 'bitcoin',\n        identifier: profile.bitcoin.address\n      })\n    }\n    if (profile.twitter && profile.twitter.username) {\n      accounts.push(formatAccount('twitter', profile.twitter))\n    }\n    if (profile.facebook && profile.facebook.username) {\n      accounts.push(formatAccount('facebook', profile.facebook))\n    }\n    if (profile.github && profile.github.username) {\n      accounts.push(formatAccount('github', profile.github))\n    }\n\n    if (profile.auth) {\n      if (profile.auth.length > 0) {\n        if (profile.auth[0] && profile.auth[0].publicKeychain) {\n          accounts.push({\n            '@type': 'Account',\n            role: 'key',\n            service: 'bip32',\n            identifier: profile.auth[0].publicKeychain\n          })\n        }\n      }\n    }\n    if (profile.pgp && profile.pgp.url) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'key',\n        service: 'pgp',\n        identifier: profile.pgp.fingerprint,\n        contentUrl: profile.pgp.url\n      })\n    }\n\n    profileData.account = accounts\n  }\n\n  return profileData\n}\n","\nimport { TransactionBuilder, ECPair } from 'bitcoinjs-lib'\nimport { hexStringToECPair, ecPairToAddress } from '../keys'\n\n/**\n * @ignore\n */\nexport interface TransactionSigner {\n  /**\n   * @returns version number of the signer, currently, should always be 1\n   * @private\n   * @ignore\n   */\n  signerVersion(): number;\n  /**\n   * @returns a string representing the transaction signer's address\n   * (usually Base58 check encoding)\n   * @private\n   * @ignore\n   */\n  getAddress(): Promise<string>;\n  /**\n   * Signs a transaction input\n   * @param {TransactionBuilder} transaction - the transaction to sign\n   * @param {number} inputIndex - the input on the transaction to sign\n   * @private\n   * @ignore\n   */\n  signTransaction(transaction: TransactionBuilder, inputIndex: number): Promise<void>;\n}\n\n/**\n * Class representing a transaction signer for pubkeyhash addresses\n * (a.k.a. single-sig addresses)\n * @private\n * @ignore\n */\nexport class PubkeyHashSigner implements TransactionSigner {\n  ecPair: ECPair.ECPairInterface\n\n  constructor(ecPair: ECPair.ECPairInterface) {\n    this.ecPair = ecPair\n  }\n\n  static fromHexString(keyHex: string) {\n    return new PubkeyHashSigner(hexStringToECPair(keyHex))\n  }\n\n  signerVersion(): number {\n    return 1\n  }\n\n  getAddress(): Promise<string> {\n    return Promise.resolve()\n      .then(() => ecPairToAddress(this.ecPair))\n  }\n\n  signTransaction(transaction: TransactionBuilder, inputIndex: number): Promise<void> {\n    return Promise.resolve()\n      .then(() => {\n        transaction.sign(inputIndex, this.ecPair)\n      })\n  }\n}\n","import { containsValidProofStatement, containsValidAddressProofStatement } from './serviceUtils'\nimport { fetchPrivate } from '../../fetchUtil'\nimport { AccountProofInfo } from '../profileProofs'\n\nexport type CheerioModuleType = typeof import('cheerio')\n\n/**\n * @ignore\n */\nexport abstract class Service {\n  async validateProof(proof: AccountProofInfo,\n                      ownerAddress: string,\n                      cheerio: CheerioModuleType,\n                      name: string = null\n  ): Promise<AccountProofInfo> {\n    try {\n      const proofUrl = this.getProofUrl(proof)\n      const res = await fetchPrivate(proofUrl)\n      if (res.status !== 200) {\n        throw new Error(`Proof url ${proofUrl} returned unexpected http status ${res.status}.\n            Unable to validate proof.`)\n      }\n      const text = await res.text()\n\n      // Validate identity in provided proof body/tags if required\n      if (this.shouldValidateIdentityInBody()\n          && proof.identifier !== this.getProofIdentity(text, cheerio)) {\n        return proof\n      }\n      const proofText = this.getProofStatement(text, cheerio)\n      proof.valid = containsValidProofStatement(proofText, name)\n        || containsValidAddressProofStatement(proofText, ownerAddress)\n      return proof\n    } catch (error) {\n      console.error(error)\n      proof.valid = false\n      return proof\n    }\n  }\n\n  shouldValidateIdentityInBody() {\n    return false\n  }\n\n  prefixScheme(proofUrl: string) {\n    if (!proofUrl.startsWith('https://') && !proofUrl.startsWith('http://')) {\n      return `https://${proofUrl}`\n    } else if (proofUrl.startsWith('http://')) {\n      return proofUrl.replace('http://', 'https://')\n    } else {\n      return proofUrl\n    }\n  }\n\n  getProofIdentity(searchText: string, _cheerio: CheerioModuleType): string {\n    return searchText\n  }\n\n  abstract getProofUrl(proof: AccountProofInfo): string;\n\n  abstract getProofStatement(searchText: string, cheerio: CheerioModuleType): string;\n\n  abstract normalizeUrl(proof: AccountProofInfo): string;\n}\n","import { Facebook } from './facebook'\nimport { Github } from './github'\nimport { Twitter } from './twitter'\nimport { Instagram } from './instagram'\nimport { HackerNews } from './hackerNews'\nimport { LinkedIn } from './linkedIn'\nimport { Service } from './service'\n\n\n\n/** @ignore */\nexport const profileServices: {\n  [serviceName: string]: Service\n} = {\n  facebook: new Facebook(),\n  github: new Github(),\n  twitter: new Twitter(),\n  instagram: new Instagram(),\n  hackerNews: new HackerNews(),\n  linkedIn: new LinkedIn()\n}\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Facebook extends Service {\n  getProofUrl(proof: AccountProofInfo) {\n    return this.normalizeUrl(proof)\n  }\n\n  normalizeUrl(proof: AccountProofInfo) {\n    let proofUrl = proof.proof_url.toLowerCase()\n    const urlRegex = /(?:http[s]*:\\/\\/){0,1}(?:[a-zA-Z0-9-]+\\.)+facebook\\.com/\n\n    proofUrl = super.prefixScheme(proofUrl)\n\n    if (proofUrl.startsWith('https://facebook.com')) {\n      let tokens = proofUrl.split('https://facebook.com')\n      proofUrl = `https://www.facebook.com${tokens[1]}`\n      tokens = proofUrl.split('https://www.facebook.com/')[1].split('/posts/')\n      const postId = tokens[1]\n      proofUrl = `https://www.facebook.com/${proof.identifier}/posts/${postId}`\n    } else if (proofUrl.match(urlRegex)) {\n      const tokens = proofUrl.split('facebook.com/')[1].split('/posts/')\n      const postId = tokens[1]\n      proofUrl = `https://www.facebook.com/${proof.identifier}/posts/${postId}`\n    } else {\n      throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n    }\n\n    return proofUrl\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const statement = $('meta[name=\"description\"]').attr('content')\n    return (statement !== undefined) ? statement.trim() : ''\n  }\n\n  getBaseUrls(): string[] {\n    return []\n  }\n}\n\nexport { Facebook }\n","\nimport { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Github extends Service {\n  getBaseUrls() {\n    const baseUrls = ['https://gist.github.com/', 'http://gist.github.com', 'gist.github.com']\n    return baseUrls\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n    let proofUrl = proof.proof_url.toLowerCase()\n\n    proofUrl = super.prefixScheme(proofUrl)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      const requiredPrefix = `${baseUrls[i]}${proof.identifier}`.toLowerCase()\n      if (proofUrl.startsWith(requiredPrefix)) {\n        const raw = proofUrl.endsWith('/') ? 'raw' : '/raw'\n        return `${proofUrl}${raw}`\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  getProofStatement(searchText: string, _cheerio: CheerioModuleType) {\n    return searchText\n  }\n}\n\nexport { Github }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Twitter extends Service {\n  getBaseUrls() {\n    const baseUrls = [\n      'https://twitter.com/',\n      'http://twitter.com/',\n      'twitter.com/'\n    ]\n    return baseUrls\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const statement = $('meta[property=\"og:description\"]').attr('content')\n    if (statement !== undefined) {\n      return statement.trim().replace('', '').replace('', '')\n    } else {\n      return ''\n    }\n  }\n\n  getProofUrl(proof: AccountProofInfo): string {\n    const baseUrls = this.getBaseUrls()\n\n    let proofUrl = proof.proof_url.toLowerCase()\n    proofUrl = this.prefixScheme(proofUrl)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      const requiredPrefix = `${baseUrls[i]}${proof.identifier}`.toLowerCase()\n      if (proofUrl.startsWith(requiredPrefix)) {\n        return proofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n}\n\nexport { Twitter }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Instagram extends Service {\n  getBaseUrls() {\n    const baseUrls = ['https://www.instagram.com/', 'https://instagram.com/']\n    return baseUrls\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n    const normalizedProofUrl = this.normalizeUrl(proof)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      if (normalizedProofUrl.startsWith(`${baseUrls[i]}`)) {\n        return normalizedProofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  normalizeUrl(proof: AccountProofInfo) {\n    let proofUrl = proof.proof_url\n    proofUrl = super.prefixScheme(proofUrl)\n\n    if (proofUrl.startsWith('https://instagram.com')) {\n      const tokens = proofUrl.split('https://instagram.com')\n      proofUrl = `https://www.instagram.com${tokens[1]}`\n    }\n    return proofUrl\n  }\n\n  shouldValidateIdentityInBody() {\n    return true\n  }\n\n  getProofIdentity(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const username = $('meta[property=\"og:description\"]').attr('content')\n    if (username !== undefined && username.split(':').length > 1) {\n      return username.split(':')[0].match(/(@\\w+)/)[0].substr(1)\n    } else {\n      return ''\n    }\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const statement = $('meta[property=\"og:description\"]')\n      .attr('content')\n\n    if (statement !== undefined && statement.split(':').length > 1) {\n      return statement.split(':')[1].trim().replace('', '').replace('', '')\n    } else {\n      return ''\n    }\n  }\n}\n\nexport { Instagram }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass HackerNews extends Service {\n  getBaseUrls() {\n    const baseUrls = [\n      'https://news.ycombinator.com/user?id=',\n      'http://news.ycombinator.com/user?id=',\n      'news.ycombinator.com/user?id='\n    ]\n    return baseUrls\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n\n    const proofUrl = super.prefixScheme(proof.proof_url)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      if (proofUrl === `${baseUrls[i]}${proof.identifier}`) {\n        return proofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const tables = $('#hnmain').children().find('table')\n    let statement = ''\n\n    if (tables.length > 0) {\n      tables.each((tableIndex, table) => {\n        const rows = $(table).find('tr')\n\n        if (rows.length > 0) {\n          rows.each((idx, row) => {\n            const heading = $(row).find('td')\n              .first()\n              .text()\n              .trim()\n\n            if (heading === 'about:') {\n              statement = $(row).find('td')\n                .last()\n                .text()\n                .trim()\n            }\n          })\n        }\n      })\n    }\n\n    return statement\n  }\n}\n\nexport { HackerNews }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass LinkedIn extends Service {\n  getBaseUrls() {\n    const baseUrls = [\n      'https://www.linkedin.com/feed/update/',\n      'http://www.linkedin.com/feed/update/',\n      'www.linkedin.com/feed/update/'\n    ]\n    return baseUrls\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n    \n    let proofUrl = proof.proof_url.toLowerCase()\n    proofUrl = super.prefixScheme(proofUrl)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      if (proofUrl.startsWith(`${baseUrls[i]}`)) {\n        return proofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  shouldValidateIdentityInBody() {\n    return true\n  }\n\n  getProofIdentity(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const profileLink = $('body > main header a')\n\n    if (profileLink !== undefined) {\n      if (profileLink.attr('href') === undefined) {\n        return ''\n      }\n      const url = profileLink.attr('href')\n\n      // Parse URL for identifier\n      const identifier = url.split('?').shift().split('/').pop()\n\n      return identifier\n    } else {\n      return ''\n    }\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const postContent = $('head > meta[property=\"og:title\"]')\n    let statement = ''\n\n    if (postContent !== undefined) {\n      statement = postContent.attr('content')\n    }\n\n    return statement\n  }\n}\n\nexport { LinkedIn }\n","import { profileServices } from './services'\nimport { CheerioModuleType } from './services/service'\n\nexport interface AccountProofInfo {\n  service: string;\n  identifier: string;\n  proof_url: string;\n  valid?: boolean;\n}\n\n/**\n * Validates the social proofs in a user's profile. Currently supports validation of \n * Facebook, Twitter, GitHub, Instagram, LinkedIn and HackerNews accounts.\n *\n * @param {Object} profile The JSON of the profile to be validated\n * @param {string} ownerAddress The owner bitcoin address to be validated\n * @param {string} [name=null] The Blockstack name to be validated \n * @returns {Promise} that resolves to an array of validated proof objects\n */\nexport function validateProofs(profile: any,\n                               ownerAddress: string,\n                               cheerio: CheerioModuleType,\n                               name: string = null): Promise<AccountProofInfo[]> {\n  if (!profile) {\n    throw new Error('Profile must not be null')\n  }\n\n  let accounts: any[] = []\n  const proofsToValidate: Promise<AccountProofInfo>[] = []\n\n  if (profile.hasOwnProperty('account')) {\n    accounts = profile.account\n  } else {\n    return Promise.resolve([])\n  }\n\n  accounts.forEach((account) => {\n    // skip if proof service is not supported\n    if (account.hasOwnProperty('service')\n        && !profileServices.hasOwnProperty(account.service)) {\n      return\n    }\n\n    if (!(account.hasOwnProperty('proofType')\n        && account.proofType === 'http'\n        && account.hasOwnProperty('proofUrl'))) {\n      return\n    }\n\n    const proof: AccountProofInfo = {\n      service: account.service,\n      proof_url: account.proof_url || account.proofUrl,\n      identifier: account.identifier,\n      valid: false\n    }\n\n    proofsToValidate.push(profileServices[account.service]\n      .validateProof(proof, ownerAddress, cheerio, name))\n  })\n\n  return Promise.all(proofsToValidate)\n}\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\t\t\t\tif (value === undefined || (options.skipNull && value === null)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined || (options.skipNull && value === null)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(',')];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined || (options.skipNull && value === null)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(',') > -1;\n\t\t\t\tconst newValue = isArray ? value.split(',') : value;\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t}, options);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = Object.assign({}, object);\n\tif (options.skipNull) {\n\t\tfor (const key of Object.keys(objectCopy)) {\n\t\t\tif (objectCopy[key] === undefined || objectCopy[key] === null) {\n\t\t\t\tdelete objectCopy[key];\n\t\t\t}\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: removeHash(input).split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","'use strict'\nvar Buffer = require('buffer').Buffer\nvar inherits = require('inherits')\nvar HashBase = require('hash-base')\n\nvar ARRAY16 = new Array(16)\n\nvar zl = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n]\n\nvar zr = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n]\n\nvar sl = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n]\n\nvar sr = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n]\n\nvar hl = [0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]\nvar hr = [0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]\n\nfunction RIPEMD160 () {\n  HashBase.call(this, 64)\n\n  // state\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n}\n\ninherits(RIPEMD160, HashBase)\n\nRIPEMD160.prototype._update = function () {\n  var words = ARRAY16\n  for (var j = 0; j < 16; ++j) words[j] = this._block.readInt32LE(j * 4)\n\n  var al = this._a | 0\n  var bl = this._b | 0\n  var cl = this._c | 0\n  var dl = this._d | 0\n  var el = this._e | 0\n\n  var ar = this._a | 0\n  var br = this._b | 0\n  var cr = this._c | 0\n  var dr = this._d | 0\n  var er = this._e | 0\n\n  // computation\n  for (var i = 0; i < 80; i += 1) {\n    var tl\n    var tr\n    if (i < 16) {\n      tl = fn1(al, bl, cl, dl, el, words[zl[i]], hl[0], sl[i])\n      tr = fn5(ar, br, cr, dr, er, words[zr[i]], hr[0], sr[i])\n    } else if (i < 32) {\n      tl = fn2(al, bl, cl, dl, el, words[zl[i]], hl[1], sl[i])\n      tr = fn4(ar, br, cr, dr, er, words[zr[i]], hr[1], sr[i])\n    } else if (i < 48) {\n      tl = fn3(al, bl, cl, dl, el, words[zl[i]], hl[2], sl[i])\n      tr = fn3(ar, br, cr, dr, er, words[zr[i]], hr[2], sr[i])\n    } else if (i < 64) {\n      tl = fn4(al, bl, cl, dl, el, words[zl[i]], hl[3], sl[i])\n      tr = fn2(ar, br, cr, dr, er, words[zr[i]], hr[3], sr[i])\n    } else { // if (i<80) {\n      tl = fn5(al, bl, cl, dl, el, words[zl[i]], hl[4], sl[i])\n      tr = fn1(ar, br, cr, dr, er, words[zr[i]], hr[4], sr[i])\n    }\n\n    al = el\n    el = dl\n    dl = rotl(cl, 10)\n    cl = bl\n    bl = tl\n\n    ar = er\n    er = dr\n    dr = rotl(cr, 10)\n    cr = br\n    br = tr\n  }\n\n  // update state\n  var t = (this._b + cl + dr) | 0\n  this._b = (this._c + dl + er) | 0\n  this._c = (this._d + el + ar) | 0\n  this._d = (this._e + al + br) | 0\n  this._e = (this._a + bl + cr) | 0\n  this._a = t\n}\n\nRIPEMD160.prototype._digest = function () {\n  // create padding and handle blocks\n  this._block[this._blockOffset++] = 0x80\n  if (this._blockOffset > 56) {\n    this._block.fill(0, this._blockOffset, 64)\n    this._update()\n    this._blockOffset = 0\n  }\n\n  this._block.fill(0, this._blockOffset, 56)\n  this._block.writeUInt32LE(this._length[0], 56)\n  this._block.writeUInt32LE(this._length[1], 60)\n  this._update()\n\n  // produce result\n  var buffer = Buffer.alloc ? Buffer.alloc(20) : new Buffer(20)\n  buffer.writeInt32LE(this._a, 0)\n  buffer.writeInt32LE(this._b, 4)\n  buffer.writeInt32LE(this._c, 8)\n  buffer.writeInt32LE(this._d, 12)\n  buffer.writeInt32LE(this._e, 16)\n  return buffer\n}\n\nfunction rotl (x, n) {\n  return (x << n) | (x >>> (32 - n))\n}\n\nfunction fn1 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn2 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn3 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b | (~c)) ^ d) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn4 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn5 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + (b ^ (c | (~d))) + m + k) | 0, s) + e) | 0\n}\n\nmodule.exports = RIPEMD160\n","var Buffer = require('safe-buffer').Buffer\nvar Transform = require('stream').Transform\nvar StringDecoder = require('string_decoder').StringDecoder\nvar inherits = require('inherits')\n\nfunction CipherBase (hashMode) {\n  Transform.call(this)\n  this.hashMode = typeof hashMode === 'string'\n  if (this.hashMode) {\n    this[hashMode] = this._finalOrDigest\n  } else {\n    this.final = this._finalOrDigest\n  }\n  if (this._final) {\n    this.__final = this._final\n    this._final = null\n  }\n  this._decoder = null\n  this._encoding = null\n}\ninherits(CipherBase, Transform)\n\nCipherBase.prototype.update = function (data, inputEnc, outputEnc) {\n  if (typeof data === 'string') {\n    data = Buffer.from(data, inputEnc)\n  }\n\n  var outData = this._update(data)\n  if (this.hashMode) return this\n\n  if (outputEnc) {\n    outData = this._toString(outData, outputEnc)\n  }\n\n  return outData\n}\n\nCipherBase.prototype.setAutoPadding = function () {}\nCipherBase.prototype.getAuthTag = function () {\n  throw new Error('trying to get auth tag in unsupported state')\n}\n\nCipherBase.prototype.setAuthTag = function () {\n  throw new Error('trying to set auth tag in unsupported state')\n}\n\nCipherBase.prototype.setAAD = function () {\n  throw new Error('trying to set aad in unsupported state')\n}\n\nCipherBase.prototype._transform = function (data, _, next) {\n  var err\n  try {\n    if (this.hashMode) {\n      this._update(data)\n    } else {\n      this.push(this._update(data))\n    }\n  } catch (e) {\n    err = e\n  } finally {\n    next(err)\n  }\n}\nCipherBase.prototype._flush = function (done) {\n  var err\n  try {\n    this.push(this.__final())\n  } catch (e) {\n    err = e\n  }\n\n  done(err)\n}\nCipherBase.prototype._finalOrDigest = function (outputEnc) {\n  var outData = this.__final() || Buffer.alloc(0)\n  if (outputEnc) {\n    outData = this._toString(outData, outputEnc, true)\n  }\n  return outData\n}\n\nCipherBase.prototype._toString = function (value, enc, fin) {\n  if (!this._decoder) {\n    this._decoder = new StringDecoder(enc)\n    this._encoding = enc\n  }\n\n  if (this._encoding !== enc) throw new Error('can\\'t switch encodings')\n\n  var out = this._decoder.write(value)\n  if (fin) {\n    out += this._decoder.end()\n  }\n\n  return out\n}\n\nmodule.exports = CipherBase\n","'use strict';\n\nvar curves = exports;\n\nvar hash = require('hash.js');\nvar curve = require('./curve');\nvar utils = require('./utils');\n\nvar assert = utils.assert;\n\nfunction PresetCurve(options) {\n  if (options.type === 'short')\n    this.curve = new curve.short(options);\n  else if (options.type === 'edwards')\n    this.curve = new curve.edwards(options);\n  else\n    this.curve = new curve.mont(options);\n  this.g = this.curve.g;\n  this.n = this.curve.n;\n  this.hash = options.hash;\n\n  assert(this.g.validate(), 'Invalid curve');\n  assert(this.g.mul(this.n).isInfinity(), 'Invalid curve, G*N != O');\n}\ncurves.PresetCurve = PresetCurve;\n\nfunction defineCurve(name, options) {\n  Object.defineProperty(curves, name, {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      var curve = new PresetCurve(options);\n      Object.defineProperty(curves, name, {\n        configurable: true,\n        enumerable: true,\n        value: curve\n      });\n      return curve;\n    }\n  });\n}\n\ndefineCurve('p192', {\n  type: 'short',\n  prime: 'p192',\n  p: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',\n  b: '64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',\n  n: 'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012',\n    '07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811'\n  ]\n});\n\ndefineCurve('p224', {\n  type: 'short',\n  prime: 'p224',\n  p: 'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',\n  b: 'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',\n  n: 'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    'b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21',\n    'bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34'\n  ]\n});\n\ndefineCurve('p256', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',\n  a: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',\n  b: '5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',\n  n: 'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296',\n    '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5'\n  ]\n});\n\ndefineCurve('p384', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 ffffffff',\n  a: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 fffffffc',\n  b: 'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f ' +\n     '5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',\n  n: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 ' +\n     'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',\n  hash: hash.sha384,\n  gRed: false,\n  g: [\n    'aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 ' +\n    '5502f25d bf55296c 3a545e38 72760ab7',\n    '3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 ' +\n    '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f'\n  ]\n});\n\ndefineCurve('p521', {\n  type: 'short',\n  prime: null,\n  p: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff',\n  a: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff fffffffc',\n  b: '00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b ' +\n     '99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd ' +\n     '3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',\n  n: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 ' +\n     'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',\n  hash: hash.sha512,\n  gRed: false,\n  g: [\n    '000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 ' +\n    '053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 ' +\n    'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66',\n    '00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 ' +\n    '579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 ' +\n    '3fad0761 353c7086 a272c240 88be9476 9fd16650'\n  ]\n});\n\ndefineCurve('curve25519', {\n  type: 'mont',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '76d06',\n  b: '1',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '9'\n  ]\n});\n\ndefineCurve('ed25519', {\n  type: 'edwards',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '-1',\n  c: '1',\n  // -121665 * (121666^(-1)) (mod P)\n  d: '52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a',\n\n    // 4/5\n    '6666666666666666666666666666666666666666666666666666666666666658'\n  ]\n});\n\nvar pre;\ntry {\n  pre = require('./precomputed/secp256k1');\n} catch (e) {\n  pre = undefined;\n}\n\ndefineCurve('secp256k1', {\n  type: 'short',\n  prime: 'k256',\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',\n  a: '0',\n  b: '7',\n  n: 'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',\n  h: '1',\n  hash: hash.sha256,\n\n  // Precomputed endomorphism\n  beta: '7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',\n  lambda: '5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',\n  basis: [\n    {\n      a: '3086d221a7d46bcde86c90e49284eb15',\n      b: '-e4437ed6010e88286f547fa90abfe4c3'\n    },\n    {\n      a: '114ca50f7a8e2f3f657c1108d9d44cfd8',\n      b: '3086d221a7d46bcde86c90e49284eb15'\n    }\n  ],\n\n  gRed: false,\n  g: [\n    '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    '483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',\n    pre\n  ]\n});\n","var hash = exports;\n\nhash.utils = require('./hash/utils');\nhash.common = require('./hash/common');\nhash.sha = require('./hash/sha');\nhash.ripemd = require('./hash/ripemd');\nhash.hmac = require('./hash/hmac');\n\n// Proxy hash functions to the main object\nhash.sha1 = hash.sha.sha1;\nhash.sha256 = hash.sha.sha256;\nhash.sha224 = hash.sha.sha224;\nhash.sha384 = hash.sha.sha384;\nhash.sha512 = hash.sha.sha512;\nhash.ripemd160 = hash.ripemd.ripemd160;\n","var types = {\n  Array: function (value) { return value !== null && value !== undefined && value.constructor === Array },\n  Boolean: function (value) { return typeof value === 'boolean' },\n  Function: function (value) { return typeof value === 'function' },\n  Nil: function (value) { return value === undefined || value === null },\n  Number: function (value) { return typeof value === 'number' },\n  Object: function (value) { return typeof value === 'object' },\n  String: function (value) { return typeof value === 'string' },\n  '': function () { return true }\n}\n\n// TODO: deprecate\ntypes.Null = types.Nil\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst types = require('./types');\nconst bech32 = require('bech32');\nconst bs58check = require('bs58check');\nconst typeforce = require('typeforce');\nfunction fromBase58Check(address) {\n  const payload = bs58check.decode(address);\n  // TODO: 4.0.0, move to \"toOutputScript\"\n  if (payload.length < 21) throw new TypeError(address + ' is too short');\n  if (payload.length > 21) throw new TypeError(address + ' is too long');\n  const version = payload.readUInt8(0);\n  const hash = payload.slice(1);\n  return { version, hash };\n}\nexports.fromBase58Check = fromBase58Check;\nfunction fromBech32(address) {\n  const result = bech32.decode(address);\n  const data = bech32.fromWords(result.words.slice(1));\n  return {\n    version: result.words[0],\n    prefix: result.prefix,\n    data: Buffer.from(data),\n  };\n}\nexports.fromBech32 = fromBech32;\nfunction toBase58Check(hash, version) {\n  typeforce(types.tuple(types.Hash160bit, types.UInt8), arguments);\n  const payload = Buffer.allocUnsafe(21);\n  payload.writeUInt8(version, 0);\n  hash.copy(payload, 1);\n  return bs58check.encode(payload);\n}\nexports.toBase58Check = toBase58Check;\nfunction toBech32(data, version, prefix) {\n  const words = bech32.toWords(data);\n  words.unshift(version);\n  return bech32.encode(prefix, words);\n}\nexports.toBech32 = toBech32;\nfunction fromOutputScript(output, network) {\n  // TODO: Network\n  network = network || networks.bitcoin;\n  try {\n    return payments.p2pkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2sh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wpkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wsh({ output, network }).address;\n  } catch (e) {}\n  throw new Error(bscript.toASM(output) + ' has no matching Address');\n}\nexports.fromOutputScript = fromOutputScript;\nfunction toOutputScript(address, network) {\n  network = network || networks.bitcoin;\n  let decodeBase58;\n  let decodeBech32;\n  try {\n    decodeBase58 = fromBase58Check(address);\n  } catch (e) {}\n  if (decodeBase58) {\n    if (decodeBase58.version === network.pubKeyHash)\n      return payments.p2pkh({ hash: decodeBase58.hash }).output;\n    if (decodeBase58.version === network.scriptHash)\n      return payments.p2sh({ hash: decodeBase58.hash }).output;\n  } else {\n    try {\n      decodeBech32 = fromBech32(address);\n    } catch (e) {}\n    if (decodeBech32) {\n      if (decodeBech32.prefix !== network.bech32)\n        throw new Error(address + ' has an invalid prefix');\n      if (decodeBech32.version === 0) {\n        if (decodeBech32.data.length === 20)\n          return payments.p2wpkh({ hash: decodeBech32.data }).output;\n        if (decodeBech32.data.length === 32)\n          return payments.p2wsh({ hash: decodeBech32.data }).output;\n      }\n    }\n  }\n  throw new Error(address + ' has no matching Script');\n}\nexports.toOutputScript = toOutputScript;\n","'use strict'\nvar ALPHABET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l'\n\n// pre-compute lookup table\nvar ALPHABET_MAP = {}\nfor (var z = 0; z < ALPHABET.length; z++) {\n  var x = ALPHABET.charAt(z)\n\n  if (ALPHABET_MAP[x] !== undefined) throw new TypeError(x + ' is ambiguous')\n  ALPHABET_MAP[x] = z\n}\n\nfunction polymodStep (pre) {\n  var b = pre >> 25\n  return ((pre & 0x1FFFFFF) << 5) ^\n    (-((b >> 0) & 1) & 0x3b6a57b2) ^\n    (-((b >> 1) & 1) & 0x26508e6d) ^\n    (-((b >> 2) & 1) & 0x1ea119fa) ^\n    (-((b >> 3) & 1) & 0x3d4233dd) ^\n    (-((b >> 4) & 1) & 0x2a1462b3)\n}\n\nfunction prefixChk (prefix) {\n  var chk = 1\n  for (var i = 0; i < prefix.length; ++i) {\n    var c = prefix.charCodeAt(i)\n    if (c < 33 || c > 126) throw new Error('Invalid prefix (' + prefix + ')')\n\n    chk = polymodStep(chk) ^ (c >> 5)\n  }\n  chk = polymodStep(chk)\n\n  for (i = 0; i < prefix.length; ++i) {\n    var v = prefix.charCodeAt(i)\n    chk = polymodStep(chk) ^ (v & 0x1f)\n  }\n  return chk\n}\n\nfunction encode (prefix, words, LIMIT) {\n  LIMIT = LIMIT || 90\n  if ((prefix.length + 7 + words.length) > LIMIT) throw new TypeError('Exceeds length limit')\n\n  prefix = prefix.toLowerCase()\n\n  // determine chk mod\n  var chk = prefixChk(prefix)\n  var result = prefix + '1'\n  for (var i = 0; i < words.length; ++i) {\n    var x = words[i]\n    if ((x >> 5) !== 0) throw new Error('Non 5-bit word')\n\n    chk = polymodStep(chk) ^ x\n    result += ALPHABET.charAt(x)\n  }\n\n  for (i = 0; i < 6; ++i) {\n    chk = polymodStep(chk)\n  }\n  chk ^= 1\n\n  for (i = 0; i < 6; ++i) {\n    var v = (chk >> ((5 - i) * 5)) & 0x1f\n    result += ALPHABET.charAt(v)\n  }\n\n  return result\n}\n\nfunction decode (str, LIMIT) {\n  LIMIT = LIMIT || 90\n  if (str.length < 8) throw new TypeError(str + ' too short')\n  if (str.length > LIMIT) throw new TypeError('Exceeds length limit')\n\n  // don't allow mixed case\n  var lowered = str.toLowerCase()\n  var uppered = str.toUpperCase()\n  if (str !== lowered && str !== uppered) throw new Error('Mixed-case string ' + str)\n  str = lowered\n\n  var split = str.lastIndexOf('1')\n  if (split === -1) throw new Error('No separator character for ' + str)\n  if (split === 0) throw new Error('Missing prefix for ' + str)\n\n  var prefix = str.slice(0, split)\n  var wordChars = str.slice(split + 1)\n  if (wordChars.length < 6) throw new Error('Data too short')\n\n  var chk = prefixChk(prefix)\n  var words = []\n  for (var i = 0; i < wordChars.length; ++i) {\n    var c = wordChars.charAt(i)\n    var v = ALPHABET_MAP[c]\n    if (v === undefined) throw new Error('Unknown character ' + c)\n    chk = polymodStep(chk) ^ v\n\n    // not in the checksum?\n    if (i + 6 >= wordChars.length) continue\n    words.push(v)\n  }\n\n  if (chk !== 1) throw new Error('Invalid checksum for ' + str)\n  return { prefix: prefix, words: words }\n}\n\nfunction convert (data, inBits, outBits, pad) {\n  var value = 0\n  var bits = 0\n  var maxV = (1 << outBits) - 1\n\n  var result = []\n  for (var i = 0; i < data.length; ++i) {\n    value = (value << inBits) | data[i]\n    bits += inBits\n\n    while (bits >= outBits) {\n      bits -= outBits\n      result.push((value >> bits) & maxV)\n    }\n  }\n\n  if (pad) {\n    if (bits > 0) {\n      result.push((value << (outBits - bits)) & maxV)\n    }\n  } else {\n    if (bits >= inBits) throw new Error('Excess padding')\n    if ((value << (outBits - bits)) & maxV) throw new Error('Non-zero padding')\n  }\n\n  return result\n}\n\nfunction toWords (bytes) {\n  return convert(bytes, 8, 5, true)\n}\n\nfunction fromWords (words) {\n  return convert(words, 5, 8, false)\n}\n\nmodule.exports = {\n  decode: decode,\n  encode: encode,\n  toWords: toWords,\n  fromWords: fromWords\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst NETWORKS = require('./networks');\nconst types = require('./types');\nconst ecc = require('tiny-secp256k1');\nconst randomBytes = require('randombytes');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst isOptions = typeforce.maybe(\n  typeforce.compile({\n    compressed: types.maybe(types.Boolean),\n    network: types.maybe(types.Network),\n  }),\n);\nclass ECPair {\n  constructor(__D, __Q, options) {\n    this.__D = __D;\n    this.__Q = __Q;\n    this.lowR = false;\n    if (options === undefined) options = {};\n    this.compressed =\n      options.compressed === undefined ? true : options.compressed;\n    this.network = options.network || NETWORKS.bitcoin;\n    if (__Q !== undefined) this.__Q = ecc.pointCompress(__Q, this.compressed);\n  }\n  get privateKey() {\n    return this.__D;\n  }\n  get publicKey() {\n    if (!this.__Q) this.__Q = ecc.pointFromScalar(this.__D, this.compressed);\n    return this.__Q;\n  }\n  toWIF() {\n    if (!this.__D) throw new Error('Missing private key');\n    return wif.encode(this.network.wif, this.__D, this.compressed);\n  }\n  sign(hash, lowR) {\n    if (!this.__D) throw new Error('Missing private key');\n    if (lowR === undefined) lowR = this.lowR;\n    if (lowR === false) {\n      return ecc.sign(hash, this.__D);\n    } else {\n      let sig = ecc.sign(hash, this.__D);\n      const extraData = Buffer.alloc(32, 0);\n      let counter = 0;\n      // if first try is lowR, skip the loop\n      // for second try and on, add extra entropy counting up\n      while (sig[0] > 0x7f) {\n        counter++;\n        extraData.writeUIntLE(counter, 0, 6);\n        sig = ecc.signWithEntropy(hash, this.__D, extraData);\n      }\n      return sig;\n    }\n  }\n  verify(hash, signature) {\n    return ecc.verify(hash, this.publicKey, signature);\n  }\n}\nfunction fromPrivateKey(buffer, options) {\n  typeforce(types.Buffer256bit, buffer);\n  if (!ecc.isPrivate(buffer))\n    throw new TypeError('Private key not in range [1, n)');\n  typeforce(isOptions, options);\n  return new ECPair(buffer, undefined, options);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPublicKey(buffer, options) {\n  typeforce(ecc.isPoint, buffer);\n  typeforce(isOptions, options);\n  return new ECPair(undefined, buffer, options);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromWIF(wifString, network) {\n  const decoded = wif.decode(wifString);\n  const version = decoded.version;\n  // list of networks?\n  if (types.Array(network)) {\n    network = network\n      .filter(x => {\n        return version === x.wif;\n      })\n      .pop();\n    if (!network) throw new Error('Unknown network version');\n    // otherwise, assume a network object (or default to bitcoin)\n  } else {\n    network = network || NETWORKS.bitcoin;\n    if (version !== network.wif) throw new Error('Invalid network version');\n  }\n  return fromPrivateKey(decoded.privateKey, {\n    compressed: decoded.compressed,\n    network: network,\n  });\n}\nexports.fromWIF = fromWIF;\nfunction makeRandom(options) {\n  typeforce(isOptions, options);\n  if (options === undefined) options = {};\n  const rng = options.rng || randomBytes;\n  let d;\n  do {\n    d = rng(32);\n    typeforce(types.Buffer256bit, d);\n  } while (!ecc.isPrivate(d));\n  return fromPrivateKey(d, options);\n}\nexports.makeRandom = makeRandom;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../typeFields');\nconst globalXpub = require('./global/globalXpub');\nconst unsignedTx = require('./global/unsignedTx');\nconst finalScriptSig = require('./input/finalScriptSig');\nconst finalScriptWitness = require('./input/finalScriptWitness');\nconst nonWitnessUtxo = require('./input/nonWitnessUtxo');\nconst partialSig = require('./input/partialSig');\nconst porCommitment = require('./input/porCommitment');\nconst sighashType = require('./input/sighashType');\nconst witnessUtxo = require('./input/witnessUtxo');\nconst bip32Derivation = require('./shared/bip32Derivation');\nconst checkPubkey = require('./shared/checkPubkey');\nconst redeemScript = require('./shared/redeemScript');\nconst witnessScript = require('./shared/witnessScript');\nconst globals = {\n  unsignedTx,\n  globalXpub,\n  // pass an Array of key bytes that require pubkey beside the key\n  checkPubkey: checkPubkey.makeChecker([]),\n};\nexports.globals = globals;\nconst inputs = {\n  nonWitnessUtxo,\n  partialSig,\n  sighashType,\n  finalScriptSig,\n  finalScriptWitness,\n  porCommitment,\n  witnessUtxo,\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.InputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.InputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.InputTypes.PARTIAL_SIG,\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.inputs = inputs;\nconst outputs = {\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.OutputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.OutputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.outputs = outputs;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst varuint = require('./varint');\nexports.range = n => [...Array(n).keys()];\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction keyValsToBuffer(keyVals) {\n  const buffers = keyVals.map(keyValToBuffer);\n  buffers.push(Buffer.from([0]));\n  return Buffer.concat(buffers);\n}\nexports.keyValsToBuffer = keyValsToBuffer;\nfunction keyValToBuffer(keyVal) {\n  const keyLen = keyVal.key.length;\n  const valLen = keyVal.value.length;\n  const keyVarIntLen = varuint.encodingLength(keyLen);\n  const valVarIntLen = varuint.encodingLength(valLen);\n  const buffer = Buffer.allocUnsafe(\n    keyVarIntLen + keyLen + valVarIntLen + valLen,\n  );\n  varuint.encode(keyLen, buffer, 0);\n  keyVal.key.copy(buffer, keyVarIntLen);\n  varuint.encode(valLen, buffer, keyVarIntLen + keyLen);\n  keyVal.value.copy(buffer, keyVarIntLen + keyLen + valVarIntLen);\n  return buffer;\n}\nexports.keyValToBuffer = keyValToBuffer;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","module.exports = require('./dist/base64url').default;\nmodule.exports.default = module.exports;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst secp256k1_1 = require(\"./secp256k1\");\nexports.SECP256K1Client = secp256k1_1.SECP256K1Client;\nconst cryptoClients = {\n    ES256K: secp256k1_1.SECP256K1Client\n};\nexports.cryptoClients = cryptoClients;\n//# sourceMappingURL=index.js.map","import { getCryptoLib } from './cryptoUtils'\n\nexport type Pbkdf2Digests = 'sha512' | 'sha256'\n\nexport interface Pbkdf2 {\n  derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): Promise<Buffer>;\n}\n\ntype NodePbkdf2Fn = typeof import('crypto').pbkdf2\n\nexport class NodeCryptoPbkdf2 implements Pbkdf2 {\n  nodePbkdf2: NodePbkdf2Fn\n\n  constructor(nodePbkdf2: NodePbkdf2Fn) {\n    this.nodePbkdf2 = nodePbkdf2\n  }\n\n  async derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): \n    Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`)\n    }\n    return new Promise((resolve, reject) => {\n      this.nodePbkdf2(password, salt, iterations, keyLength, digest, (error, result) => {\n        if (error) {\n          reject(error)\n        }\n        resolve(result)\n      })\n    })\n  }\n}\n\nexport class WebCryptoPbkdf2 implements Pbkdf2 {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): \n    Promise<Buffer> {\n    let algo: string\n    if (digest === 'sha256') {\n      algo = 'SHA-256'\n    } else if (digest === 'sha512') {\n      algo = 'SHA-512'\n    } else {\n      throw new Error(`Unsupported Pbkdf2 digest algorithm \"${digest}\"`)\n    }\n    let result: ArrayBuffer\n    const passwordBytes = Buffer.from(password, 'utf8')\n    try {\n      const key = await this.subtleCrypto.importKey(\n        'raw', passwordBytes, 'PBKDF2', false, ['deriveBits']\n      )\n      result = await this.subtleCrypto.deriveBits({\n        name: 'PBKDF2', salt, iterations, hash: { name: algo }\n      }, key, keyLength * 8)\n    } catch (error) {\n      // Browser appears to support WebCrypto but missing pbkdf2 support.\n      const partialWebCrypto = new WebCryptoPartialPbkdf2(this.subtleCrypto)\n      return partialWebCrypto.derive(password, salt, iterations, keyLength, digest)\n    }\n    return Buffer.from(result)\n  }\n}\n\nexport class WebCryptoPartialPbkdf2 implements Pbkdf2 {\n  // An async implementation for browsers that support WebCrypto hmac \n  // but not pbkdf2. Extracted from crypto-browserify/pbkdf2 and modified to \n  // use WebCrypto for hmac operations.\n  // Original: https://github.com/crypto-browserify/pbkdf2/tree/v3.0.17/lib\n\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): \n    Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`)\n    }\n    const key = Buffer.from(password, 'utf8')\n    const algo = digest === 'sha512' ? 'SHA-512' : 'SHA-256'\n    const algoOpts = { name: 'HMAC', hash: algo }\n    const hmacDigest = (key: ArrayBuffer, data: ArrayBuffer) => this.subtleCrypto\n      .importKey('raw', key, algoOpts, true, ['sign'])\n      .then(cryptoKey => this.subtleCrypto.sign(algoOpts, cryptoKey, data))\n      .then(result => new Uint8Array(result))\n  \n    const DK = new Uint8Array(keyLength)\n    const saltLength = salt.length\n    const block1 = new Uint8Array(saltLength + 4)\n    block1.set(salt)\n    let destPos = 0\n    const hLen = digest === 'sha512' ? 64 : 32\n    const l = Math.ceil(keyLength / hLen)\n  \n    function writeUInt32BE(data: Uint8Array, value: number, offset: number) {\n      value = +value\n      offset >>>= 0\n      data[offset] = (value >>> 24)\n      data[offset + 1] = (value >>> 16)\n      data[offset + 2] = (value >>> 8)\n      data[offset + 3] = (value & 0xff)\n      return offset + 4\n    }\n  \n    for (let i = 1; i <= l; i++) {\n      writeUInt32BE(block1, i, saltLength)\n      // eslint-disable-next-line no-await-in-loop\n      const T = await hmacDigest(key, block1)\n      let U = T\n      for (let j = 1; j < iterations; j++) {\n        // eslint-disable-next-line no-await-in-loop\n        U = await hmacDigest(key, U)\n        for (let k = 0; k < hLen; k++) {\n          T[k] ^= U[k]\n        }\n      }\n      DK.set(T.subarray(0, DK.byteLength - destPos), destPos)\n      destPos += hLen\n    }\n    return Buffer.from(DK.buffer)\n  }\n}\n\nexport async function createPbkdf2(): Promise<Pbkdf2> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoPbkdf2(cryptoLib.lib)\n  } else {\n    return new NodeCryptoPbkdf2(cryptoLib.lib.pbkdf2)\n  }\n}\n\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict'\nvar inherits = require('inherits')\nvar HashBase = require('hash-base')\nvar Buffer = require('safe-buffer').Buffer\n\nvar ARRAY16 = new Array(16)\n\nfunction MD5 () {\n  HashBase.call(this, 64)\n\n  // state\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n}\n\ninherits(MD5, HashBase)\n\nMD5.prototype._update = function () {\n  var M = ARRAY16\n  for (var i = 0; i < 16; ++i) M[i] = this._block.readInt32LE(i * 4)\n\n  var a = this._a\n  var b = this._b\n  var c = this._c\n  var d = this._d\n\n  a = fnF(a, b, c, d, M[0], 0xd76aa478, 7)\n  d = fnF(d, a, b, c, M[1], 0xe8c7b756, 12)\n  c = fnF(c, d, a, b, M[2], 0x242070db, 17)\n  b = fnF(b, c, d, a, M[3], 0xc1bdceee, 22)\n  a = fnF(a, b, c, d, M[4], 0xf57c0faf, 7)\n  d = fnF(d, a, b, c, M[5], 0x4787c62a, 12)\n  c = fnF(c, d, a, b, M[6], 0xa8304613, 17)\n  b = fnF(b, c, d, a, M[7], 0xfd469501, 22)\n  a = fnF(a, b, c, d, M[8], 0x698098d8, 7)\n  d = fnF(d, a, b, c, M[9], 0x8b44f7af, 12)\n  c = fnF(c, d, a, b, M[10], 0xffff5bb1, 17)\n  b = fnF(b, c, d, a, M[11], 0x895cd7be, 22)\n  a = fnF(a, b, c, d, M[12], 0x6b901122, 7)\n  d = fnF(d, a, b, c, M[13], 0xfd987193, 12)\n  c = fnF(c, d, a, b, M[14], 0xa679438e, 17)\n  b = fnF(b, c, d, a, M[15], 0x49b40821, 22)\n\n  a = fnG(a, b, c, d, M[1], 0xf61e2562, 5)\n  d = fnG(d, a, b, c, M[6], 0xc040b340, 9)\n  c = fnG(c, d, a, b, M[11], 0x265e5a51, 14)\n  b = fnG(b, c, d, a, M[0], 0xe9b6c7aa, 20)\n  a = fnG(a, b, c, d, M[5], 0xd62f105d, 5)\n  d = fnG(d, a, b, c, M[10], 0x02441453, 9)\n  c = fnG(c, d, a, b, M[15], 0xd8a1e681, 14)\n  b = fnG(b, c, d, a, M[4], 0xe7d3fbc8, 20)\n  a = fnG(a, b, c, d, M[9], 0x21e1cde6, 5)\n  d = fnG(d, a, b, c, M[14], 0xc33707d6, 9)\n  c = fnG(c, d, a, b, M[3], 0xf4d50d87, 14)\n  b = fnG(b, c, d, a, M[8], 0x455a14ed, 20)\n  a = fnG(a, b, c, d, M[13], 0xa9e3e905, 5)\n  d = fnG(d, a, b, c, M[2], 0xfcefa3f8, 9)\n  c = fnG(c, d, a, b, M[7], 0x676f02d9, 14)\n  b = fnG(b, c, d, a, M[12], 0x8d2a4c8a, 20)\n\n  a = fnH(a, b, c, d, M[5], 0xfffa3942, 4)\n  d = fnH(d, a, b, c, M[8], 0x8771f681, 11)\n  c = fnH(c, d, a, b, M[11], 0x6d9d6122, 16)\n  b = fnH(b, c, d, a, M[14], 0xfde5380c, 23)\n  a = fnH(a, b, c, d, M[1], 0xa4beea44, 4)\n  d = fnH(d, a, b, c, M[4], 0x4bdecfa9, 11)\n  c = fnH(c, d, a, b, M[7], 0xf6bb4b60, 16)\n  b = fnH(b, c, d, a, M[10], 0xbebfbc70, 23)\n  a = fnH(a, b, c, d, M[13], 0x289b7ec6, 4)\n  d = fnH(d, a, b, c, M[0], 0xeaa127fa, 11)\n  c = fnH(c, d, a, b, M[3], 0xd4ef3085, 16)\n  b = fnH(b, c, d, a, M[6], 0x04881d05, 23)\n  a = fnH(a, b, c, d, M[9], 0xd9d4d039, 4)\n  d = fnH(d, a, b, c, M[12], 0xe6db99e5, 11)\n  c = fnH(c, d, a, b, M[15], 0x1fa27cf8, 16)\n  b = fnH(b, c, d, a, M[2], 0xc4ac5665, 23)\n\n  a = fnI(a, b, c, d, M[0], 0xf4292244, 6)\n  d = fnI(d, a, b, c, M[7], 0x432aff97, 10)\n  c = fnI(c, d, a, b, M[14], 0xab9423a7, 15)\n  b = fnI(b, c, d, a, M[5], 0xfc93a039, 21)\n  a = fnI(a, b, c, d, M[12], 0x655b59c3, 6)\n  d = fnI(d, a, b, c, M[3], 0x8f0ccc92, 10)\n  c = fnI(c, d, a, b, M[10], 0xffeff47d, 15)\n  b = fnI(b, c, d, a, M[1], 0x85845dd1, 21)\n  a = fnI(a, b, c, d, M[8], 0x6fa87e4f, 6)\n  d = fnI(d, a, b, c, M[15], 0xfe2ce6e0, 10)\n  c = fnI(c, d, a, b, M[6], 0xa3014314, 15)\n  b = fnI(b, c, d, a, M[13], 0x4e0811a1, 21)\n  a = fnI(a, b, c, d, M[4], 0xf7537e82, 6)\n  d = fnI(d, a, b, c, M[11], 0xbd3af235, 10)\n  c = fnI(c, d, a, b, M[2], 0x2ad7d2bb, 15)\n  b = fnI(b, c, d, a, M[9], 0xeb86d391, 21)\n\n  this._a = (this._a + a) | 0\n  this._b = (this._b + b) | 0\n  this._c = (this._c + c) | 0\n  this._d = (this._d + d) | 0\n}\n\nMD5.prototype._digest = function () {\n  // create padding and handle blocks\n  this._block[this._blockOffset++] = 0x80\n  if (this._blockOffset > 56) {\n    this._block.fill(0, this._blockOffset, 64)\n    this._update()\n    this._blockOffset = 0\n  }\n\n  this._block.fill(0, this._blockOffset, 56)\n  this._block.writeUInt32LE(this._length[0], 56)\n  this._block.writeUInt32LE(this._length[1], 60)\n  this._update()\n\n  // produce result\n  var buffer = Buffer.allocUnsafe(16)\n  buffer.writeInt32LE(this._a, 0)\n  buffer.writeInt32LE(this._b, 4)\n  buffer.writeInt32LE(this._c, 8)\n  buffer.writeInt32LE(this._d, 12)\n  return buffer\n}\n\nfunction rotl (x, n) {\n  return (x << n) | (x >>> (32 - n))\n}\n\nfunction fnF (a, b, c, d, m, k, s) {\n  return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnG (a, b, c, d, m, k, s) {\n  return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnH (a, b, c, d, m, k, s) {\n  return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnI (a, b, c, d, m, k, s) {\n  return (rotl((a + ((c ^ (b | (~d)))) + m + k) | 0, s) + b) | 0\n}\n\nmodule.exports = MD5\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\nvar Transform = require('stream').Transform\nvar inherits = require('inherits')\n\nfunction throwIfNotStringOrBuffer (val, prefix) {\n  if (!Buffer.isBuffer(val) && typeof val !== 'string') {\n    throw new TypeError(prefix + ' must be a string or a buffer')\n  }\n}\n\nfunction HashBase (blockSize) {\n  Transform.call(this)\n\n  this._block = Buffer.allocUnsafe(blockSize)\n  this._blockSize = blockSize\n  this._blockOffset = 0\n  this._length = [0, 0, 0, 0]\n\n  this._finalized = false\n}\n\ninherits(HashBase, Transform)\n\nHashBase.prototype._transform = function (chunk, encoding, callback) {\n  var error = null\n  try {\n    this.update(chunk, encoding)\n  } catch (err) {\n    error = err\n  }\n\n  callback(error)\n}\n\nHashBase.prototype._flush = function (callback) {\n  var error = null\n  try {\n    this.push(this.digest())\n  } catch (err) {\n    error = err\n  }\n\n  callback(error)\n}\n\nHashBase.prototype.update = function (data, encoding) {\n  throwIfNotStringOrBuffer(data, 'Data')\n  if (this._finalized) throw new Error('Digest already called')\n  if (!Buffer.isBuffer(data)) data = Buffer.from(data, encoding)\n\n  // consume data\n  var block = this._block\n  var offset = 0\n  while (this._blockOffset + data.length - offset >= this._blockSize) {\n    for (var i = this._blockOffset; i < this._blockSize;) block[i++] = data[offset++]\n    this._update()\n    this._blockOffset = 0\n  }\n  while (offset < data.length) block[this._blockOffset++] = data[offset++]\n\n  // update length\n  for (var j = 0, carry = data.length * 8; carry > 0; ++j) {\n    this._length[j] += carry\n    carry = (this._length[j] / 0x0100000000) | 0\n    if (carry > 0) this._length[j] -= 0x0100000000 * carry\n  }\n\n  return this\n}\n\nHashBase.prototype._update = function () {\n  throw new Error('_update is not implemented')\n}\n\nHashBase.prototype.digest = function (encoding) {\n  if (this._finalized) throw new Error('Digest already called')\n  this._finalized = true\n\n  var digest = this._digest()\n  if (encoding !== undefined) digest = digest.toString(encoding)\n\n  // reset state\n  this._block.fill(0)\n  this._blockOffset = 0\n  for (var i = 0; i < 4; ++i) this._length[i] = 0\n\n  return digest\n}\n\nHashBase.prototype._digest = function () {\n  throw new Error('_digest is not implemented')\n}\n\nmodule.exports = HashBase\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n  0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n  0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n  0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n  0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n  0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n  0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n  0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n  0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n  0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n  0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n  0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n  0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n  0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n  0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n  0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2\n]\n\nvar W = new Array(64)\n\nfunction Sha256 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha256, Hash)\n\nSha256.prototype.init = function () {\n  this._a = 0x6a09e667\n  this._b = 0xbb67ae85\n  this._c = 0x3c6ef372\n  this._d = 0xa54ff53a\n  this._e = 0x510e527f\n  this._f = 0x9b05688c\n  this._g = 0x1f83d9ab\n  this._h = 0x5be0cd19\n\n  return this\n}\n\nfunction ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x) {\n  return (x >>> 2 | x << 30) ^ (x >>> 13 | x << 19) ^ (x >>> 22 | x << 10)\n}\n\nfunction sigma1 (x) {\n  return (x >>> 6 | x << 26) ^ (x >>> 11 | x << 21) ^ (x >>> 25 | x << 7)\n}\n\nfunction gamma0 (x) {\n  return (x >>> 7 | x << 25) ^ (x >>> 18 | x << 14) ^ (x >>> 3)\n}\n\nfunction gamma1 (x) {\n  return (x >>> 17 | x << 15) ^ (x >>> 19 | x << 13) ^ (x >>> 10)\n}\n\nSha256.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n  var f = this._f | 0\n  var g = this._g | 0\n  var h = this._h | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 64; ++i) W[i] = (gamma1(W[i - 2]) + W[i - 7] + gamma0(W[i - 15]) + W[i - 16]) | 0\n\n  for (var j = 0; j < 64; ++j) {\n    var T1 = (h + sigma1(e) + ch(e, f, g) + K[j] + W[j]) | 0\n    var T2 = (sigma0(a) + maj(a, b, c)) | 0\n\n    h = g\n    g = f\n    f = e\n    e = (d + T1) | 0\n    d = c\n    c = b\n    b = a\n    a = (T1 + T2) | 0\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n  this._f = (f + this._f) | 0\n  this._g = (g + this._g) | 0\n  this._h = (h + this._h) | 0\n}\n\nSha256.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(32)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n  H.writeInt32BE(this._h, 28)\n\n  return H\n}\n\nmodule.exports = Sha256\n","var inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n]\n\nvar W = new Array(160)\n\nfunction Sha512 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha512, Hash)\n\nSha512.prototype.init = function () {\n  this._ah = 0x6a09e667\n  this._bh = 0xbb67ae85\n  this._ch = 0x3c6ef372\n  this._dh = 0xa54ff53a\n  this._eh = 0x510e527f\n  this._fh = 0x9b05688c\n  this._gh = 0x1f83d9ab\n  this._hh = 0x5be0cd19\n\n  this._al = 0xf3bcc908\n  this._bl = 0x84caa73b\n  this._cl = 0xfe94f82b\n  this._dl = 0x5f1d36f1\n  this._el = 0xade682d1\n  this._fl = 0x2b3e6c1f\n  this._gl = 0xfb41bd6b\n  this._hl = 0x137e2179\n\n  return this\n}\n\nfunction Ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x, xl) {\n  return (x >>> 28 | xl << 4) ^ (xl >>> 2 | x << 30) ^ (xl >>> 7 | x << 25)\n}\n\nfunction sigma1 (x, xl) {\n  return (x >>> 14 | xl << 18) ^ (x >>> 18 | xl << 14) ^ (xl >>> 9 | x << 23)\n}\n\nfunction Gamma0 (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7)\n}\n\nfunction Gamma0l (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7 | xl << 25)\n}\n\nfunction Gamma1 (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6)\n}\n\nfunction Gamma1l (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6 | xl << 26)\n}\n\nfunction getCarry (a, b) {\n  return (a >>> 0) < (b >>> 0) ? 1 : 0\n}\n\nSha512.prototype._update = function (M) {\n  var W = this._w\n\n  var ah = this._ah | 0\n  var bh = this._bh | 0\n  var ch = this._ch | 0\n  var dh = this._dh | 0\n  var eh = this._eh | 0\n  var fh = this._fh | 0\n  var gh = this._gh | 0\n  var hh = this._hh | 0\n\n  var al = this._al | 0\n  var bl = this._bl | 0\n  var cl = this._cl | 0\n  var dl = this._dl | 0\n  var el = this._el | 0\n  var fl = this._fl | 0\n  var gl = this._gl | 0\n  var hl = this._hl | 0\n\n  for (var i = 0; i < 32; i += 2) {\n    W[i] = M.readInt32BE(i * 4)\n    W[i + 1] = M.readInt32BE(i * 4 + 4)\n  }\n  for (; i < 160; i += 2) {\n    var xh = W[i - 15 * 2]\n    var xl = W[i - 15 * 2 + 1]\n    var gamma0 = Gamma0(xh, xl)\n    var gamma0l = Gamma0l(xl, xh)\n\n    xh = W[i - 2 * 2]\n    xl = W[i - 2 * 2 + 1]\n    var gamma1 = Gamma1(xh, xl)\n    var gamma1l = Gamma1l(xl, xh)\n\n    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n    var Wi7h = W[i - 7 * 2]\n    var Wi7l = W[i - 7 * 2 + 1]\n\n    var Wi16h = W[i - 16 * 2]\n    var Wi16l = W[i - 16 * 2 + 1]\n\n    var Wil = (gamma0l + Wi7l) | 0\n    var Wih = (gamma0 + Wi7h + getCarry(Wil, gamma0l)) | 0\n    Wil = (Wil + gamma1l) | 0\n    Wih = (Wih + gamma1 + getCarry(Wil, gamma1l)) | 0\n    Wil = (Wil + Wi16l) | 0\n    Wih = (Wih + Wi16h + getCarry(Wil, Wi16l)) | 0\n\n    W[i] = Wih\n    W[i + 1] = Wil\n  }\n\n  for (var j = 0; j < 160; j += 2) {\n    Wih = W[j]\n    Wil = W[j + 1]\n\n    var majh = maj(ah, bh, ch)\n    var majl = maj(al, bl, cl)\n\n    var sigma0h = sigma0(ah, al)\n    var sigma0l = sigma0(al, ah)\n    var sigma1h = sigma1(eh, el)\n    var sigma1l = sigma1(el, eh)\n\n    // t1 = h + sigma1 + ch + K[j] + W[j]\n    var Kih = K[j]\n    var Kil = K[j + 1]\n\n    var chh = Ch(eh, fh, gh)\n    var chl = Ch(el, fl, gl)\n\n    var t1l = (hl + sigma1l) | 0\n    var t1h = (hh + sigma1h + getCarry(t1l, hl)) | 0\n    t1l = (t1l + chl) | 0\n    t1h = (t1h + chh + getCarry(t1l, chl)) | 0\n    t1l = (t1l + Kil) | 0\n    t1h = (t1h + Kih + getCarry(t1l, Kil)) | 0\n    t1l = (t1l + Wil) | 0\n    t1h = (t1h + Wih + getCarry(t1l, Wil)) | 0\n\n    // t2 = sigma0 + maj\n    var t2l = (sigma0l + majl) | 0\n    var t2h = (sigma0h + majh + getCarry(t2l, sigma0l)) | 0\n\n    hh = gh\n    hl = gl\n    gh = fh\n    gl = fl\n    fh = eh\n    fl = el\n    el = (dl + t1l) | 0\n    eh = (dh + t1h + getCarry(el, dl)) | 0\n    dh = ch\n    dl = cl\n    ch = bh\n    cl = bl\n    bh = ah\n    bl = al\n    al = (t1l + t2l) | 0\n    ah = (t1h + t2h + getCarry(al, t1l)) | 0\n  }\n\n  this._al = (this._al + al) | 0\n  this._bl = (this._bl + bl) | 0\n  this._cl = (this._cl + cl) | 0\n  this._dl = (this._dl + dl) | 0\n  this._el = (this._el + el) | 0\n  this._fl = (this._fl + fl) | 0\n  this._gl = (this._gl + gl) | 0\n  this._hl = (this._hl + hl) | 0\n\n  this._ah = (this._ah + ah + getCarry(this._al, al)) | 0\n  this._bh = (this._bh + bh + getCarry(this._bl, bl)) | 0\n  this._ch = (this._ch + ch + getCarry(this._cl, cl)) | 0\n  this._dh = (this._dh + dh + getCarry(this._dl, dl)) | 0\n  this._eh = (this._eh + eh + getCarry(this._el, el)) | 0\n  this._fh = (this._fh + fh + getCarry(this._fl, fl)) | 0\n  this._gh = (this._gh + gh + getCarry(this._gl, gl)) | 0\n  this._hh = (this._hh + hh + getCarry(this._hl, hl)) | 0\n}\n\nSha512.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(64)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n  writeInt64BE(this._gh, this._gl, 48)\n  writeInt64BE(this._hh, this._hl, 56)\n\n  return H\n}\n\nmodule.exports = Sha512\n","'use strict'\nvar inherits = require('inherits')\nvar Legacy = require('./legacy')\nvar Base = require('cipher-base')\nvar Buffer = require('safe-buffer').Buffer\nvar md5 = require('create-hash/md5')\nvar RIPEMD160 = require('ripemd160')\n\nvar sha = require('sha.js')\n\nvar ZEROS = Buffer.alloc(128)\n\nfunction Hmac (alg, key) {\n  Base.call(this, 'digest')\n  if (typeof key === 'string') {\n    key = Buffer.from(key)\n  }\n\n  var blocksize = (alg === 'sha512' || alg === 'sha384') ? 128 : 64\n\n  this._alg = alg\n  this._key = key\n  if (key.length > blocksize) {\n    var hash = alg === 'rmd160' ? new RIPEMD160() : sha(alg)\n    key = hash.update(key).digest()\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = this._ipad = Buffer.allocUnsafe(blocksize)\n  var opad = this._opad = Buffer.allocUnsafe(blocksize)\n\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n  this._hash = alg === 'rmd160' ? new RIPEMD160() : sha(alg)\n  this._hash.update(ipad)\n}\n\ninherits(Hmac, Base)\n\nHmac.prototype._update = function (data) {\n  this._hash.update(data)\n}\n\nHmac.prototype._final = function () {\n  var h = this._hash.digest()\n  var hash = this._alg === 'rmd160' ? new RIPEMD160() : sha(this._alg)\n  return hash.update(this._opad).update(h).digest()\n}\n\nmodule.exports = function createHmac (alg, key) {\n  alg = alg.toLowerCase()\n  if (alg === 'rmd160' || alg === 'ripemd160') {\n    return new Hmac('rmd160', key)\n  }\n  if (alg === 'md5') {\n    return new Legacy(md5, key)\n  }\n  return new Hmac(alg, key)\n}\n","var MD5 = require('md5.js')\n\nmodule.exports = function (buffer) {\n  return new MD5().update(buffer).digest()\n}\n","'use strict';\n\nvar utils = exports;\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg !== 'string') {\n    for (var i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n    return res;\n  }\n  if (enc === 'hex') {\n    msg = msg.replace(/[^a-z0-9]+/ig, '');\n    if (msg.length % 2 !== 0)\n      msg = '0' + msg;\n    for (var i = 0; i < msg.length; i += 2)\n      res.push(parseInt(msg[i] + msg[i + 1], 16));\n  } else {\n    for (var i = 0; i < msg.length; i++) {\n      var c = msg.charCodeAt(i);\n      var hi = c >> 8;\n      var lo = c & 0xff;\n      if (hi)\n        res.push(hi, lo);\n      else\n        res.push(lo);\n    }\n  }\n  return res;\n}\nutils.toArray = toArray;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nutils.zero2 = zero2;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nutils.toHex = toHex;\n\nutils.encode = function encode(arr, enc) {\n  if (enc === 'hex')\n    return toHex(arr);\n  else\n    return arr;\n};\n","var r;\n\nmodule.exports = function rand(len) {\n  if (!r)\n    r = new Rand(null);\n\n  return r.generate(len);\n};\n\nfunction Rand(rand) {\n  this.rand = rand;\n}\nmodule.exports.Rand = Rand;\n\nRand.prototype.generate = function generate(len) {\n  return this._rand(len);\n};\n\n// Emulate crypto API using randy\nRand.prototype._rand = function _rand(n) {\n  if (this.rand.getBytes)\n    return this.rand.getBytes(n);\n\n  var res = new Uint8Array(n);\n  for (var i = 0; i < res.length; i++)\n    res[i] = this.rand.getByte();\n  return res;\n};\n\nif (typeof self === 'object') {\n  if (self.crypto && self.crypto.getRandomValues) {\n    // Modern browsers\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.crypto.getRandomValues(arr);\n      return arr;\n    };\n  } else if (self.msCrypto && self.msCrypto.getRandomValues) {\n    // IE\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.msCrypto.getRandomValues(arr);\n      return arr;\n    };\n\n  // Safari's WebWorkers do not have `crypto`\n  } else if (typeof window === 'object') {\n    // Old junk\n    Rand.prototype._rand = function() {\n      throw new Error('Not implemented yet');\n    };\n  }\n} else {\n  // Node.js or Web worker with no crypto support\n  try {\n    var crypto = require('crypto');\n    if (typeof crypto.randomBytes !== 'function')\n      throw new Error('Not supported');\n\n    Rand.prototype._rand = function _rand(n) {\n      return crypto.randomBytes(n);\n    };\n  } catch (e) {\n  }\n}\n","'use strict';\n\nvar curve = exports;\n\ncurve.base = require('./base');\ncurve.short = require('./short');\ncurve.mont = require('./mont');\ncurve.edwards = require('./edwards');\n","'use strict';\n\nvar utils = require('../utils');\nvar rotr32 = utils.rotr32;\n\nfunction ft_1(s, x, y, z) {\n  if (s === 0)\n    return ch32(x, y, z);\n  if (s === 1 || s === 3)\n    return p32(x, y, z);\n  if (s === 2)\n    return maj32(x, y, z);\n}\nexports.ft_1 = ft_1;\n\nfunction ch32(x, y, z) {\n  return (x & y) ^ ((~x) & z);\n}\nexports.ch32 = ch32;\n\nfunction maj32(x, y, z) {\n  return (x & y) ^ (x & z) ^ (y & z);\n}\nexports.maj32 = maj32;\n\nfunction p32(x, y, z) {\n  return x ^ y ^ z;\n}\nexports.p32 = p32;\n\nfunction s0_256(x) {\n  return rotr32(x, 2) ^ rotr32(x, 13) ^ rotr32(x, 22);\n}\nexports.s0_256 = s0_256;\n\nfunction s1_256(x) {\n  return rotr32(x, 6) ^ rotr32(x, 11) ^ rotr32(x, 25);\n}\nexports.s1_256 = s1_256;\n\nfunction g0_256(x) {\n  return rotr32(x, 7) ^ rotr32(x, 18) ^ (x >>> 3);\n}\nexports.g0_256 = g0_256;\n\nfunction g1_256(x) {\n  return rotr32(x, 17) ^ rotr32(x, 19) ^ (x >>> 10);\n}\nexports.g1_256 = g1_256;\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\nvar assert = require('minimalistic-assert');\n\nvar sum32 = utils.sum32;\nvar sum32_4 = utils.sum32_4;\nvar sum32_5 = utils.sum32_5;\nvar ch32 = shaCommon.ch32;\nvar maj32 = shaCommon.maj32;\nvar s0_256 = shaCommon.s0_256;\nvar s1_256 = shaCommon.s1_256;\nvar g0_256 = shaCommon.g0_256;\nvar g1_256 = shaCommon.g1_256;\n\nvar BlockHash = common.BlockHash;\n\nvar sha256_K = [\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n  0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n  0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n  0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n  0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n  0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n];\n\nfunction SHA256() {\n  if (!(this instanceof SHA256))\n    return new SHA256();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n  ];\n  this.k = sha256_K;\n  this.W = new Array(64);\n}\nutils.inherits(SHA256, BlockHash);\nmodule.exports = SHA256;\n\nSHA256.blockSize = 512;\nSHA256.outSize = 256;\nSHA256.hmacStrength = 192;\nSHA256.padLength = 64;\n\nSHA256.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i++)\n    W[i] = sum32_4(g1_256(W[i - 2]), W[i - 7], g0_256(W[i - 15]), W[i - 16]);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n  var f = this.h[5];\n  var g = this.h[6];\n  var h = this.h[7];\n\n  assert(this.k.length === W.length);\n  for (i = 0; i < W.length; i++) {\n    var T1 = sum32_5(h, s1_256(e), ch32(e, f, g), this.k[i], W[i]);\n    var T2 = sum32(s0_256(a), maj32(a, b, c));\n    h = g;\n    g = f;\n    f = e;\n    e = sum32(d, T1);\n    d = c;\n    c = b;\n    b = a;\n    a = sum32(T1, T2);\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n  this.h[5] = sum32(this.h[5], f);\n  this.h[6] = sum32(this.h[6], g);\n  this.h[7] = sum32(this.h[7], h);\n};\n\nSHA256.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar assert = require('minimalistic-assert');\n\nvar rotr64_hi = utils.rotr64_hi;\nvar rotr64_lo = utils.rotr64_lo;\nvar shr64_hi = utils.shr64_hi;\nvar shr64_lo = utils.shr64_lo;\nvar sum64 = utils.sum64;\nvar sum64_hi = utils.sum64_hi;\nvar sum64_lo = utils.sum64_lo;\nvar sum64_4_hi = utils.sum64_4_hi;\nvar sum64_4_lo = utils.sum64_4_lo;\nvar sum64_5_hi = utils.sum64_5_hi;\nvar sum64_5_lo = utils.sum64_5_lo;\n\nvar BlockHash = common.BlockHash;\n\nvar sha512_K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction SHA512() {\n  if (!(this instanceof SHA512))\n    return new SHA512();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xf3bcc908,\n    0xbb67ae85, 0x84caa73b,\n    0x3c6ef372, 0xfe94f82b,\n    0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1,\n    0x9b05688c, 0x2b3e6c1f,\n    0x1f83d9ab, 0xfb41bd6b,\n    0x5be0cd19, 0x137e2179 ];\n  this.k = sha512_K;\n  this.W = new Array(160);\n}\nutils.inherits(SHA512, BlockHash);\nmodule.exports = SHA512;\n\nSHA512.blockSize = 1024;\nSHA512.outSize = 512;\nSHA512.hmacStrength = 192;\nSHA512.padLength = 128;\n\nSHA512.prototype._prepareBlock = function _prepareBlock(msg, start) {\n  var W = this.W;\n\n  // 32 x 32bit words\n  for (var i = 0; i < 32; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i += 2) {\n    var c0_hi = g1_512_hi(W[i - 4], W[i - 3]);  // i - 2\n    var c0_lo = g1_512_lo(W[i - 4], W[i - 3]);\n    var c1_hi = W[i - 14];  // i - 7\n    var c1_lo = W[i - 13];\n    var c2_hi = g0_512_hi(W[i - 30], W[i - 29]);  // i - 15\n    var c2_lo = g0_512_lo(W[i - 30], W[i - 29]);\n    var c3_hi = W[i - 32];  // i - 16\n    var c3_lo = W[i - 31];\n\n    W[i] = sum64_4_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n    W[i + 1] = sum64_4_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n  }\n};\n\nSHA512.prototype._update = function _update(msg, start) {\n  this._prepareBlock(msg, start);\n\n  var W = this.W;\n\n  var ah = this.h[0];\n  var al = this.h[1];\n  var bh = this.h[2];\n  var bl = this.h[3];\n  var ch = this.h[4];\n  var cl = this.h[5];\n  var dh = this.h[6];\n  var dl = this.h[7];\n  var eh = this.h[8];\n  var el = this.h[9];\n  var fh = this.h[10];\n  var fl = this.h[11];\n  var gh = this.h[12];\n  var gl = this.h[13];\n  var hh = this.h[14];\n  var hl = this.h[15];\n\n  assert(this.k.length === W.length);\n  for (var i = 0; i < W.length; i += 2) {\n    var c0_hi = hh;\n    var c0_lo = hl;\n    var c1_hi = s1_512_hi(eh, el);\n    var c1_lo = s1_512_lo(eh, el);\n    var c2_hi = ch64_hi(eh, el, fh, fl, gh, gl);\n    var c2_lo = ch64_lo(eh, el, fh, fl, gh, gl);\n    var c3_hi = this.k[i];\n    var c3_lo = this.k[i + 1];\n    var c4_hi = W[i];\n    var c4_lo = W[i + 1];\n\n    var T1_hi = sum64_5_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n    var T1_lo = sum64_5_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n\n    c0_hi = s0_512_hi(ah, al);\n    c0_lo = s0_512_lo(ah, al);\n    c1_hi = maj64_hi(ah, al, bh, bl, ch, cl);\n    c1_lo = maj64_lo(ah, al, bh, bl, ch, cl);\n\n    var T2_hi = sum64_hi(c0_hi, c0_lo, c1_hi, c1_lo);\n    var T2_lo = sum64_lo(c0_hi, c0_lo, c1_hi, c1_lo);\n\n    hh = gh;\n    hl = gl;\n\n    gh = fh;\n    gl = fl;\n\n    fh = eh;\n    fl = el;\n\n    eh = sum64_hi(dh, dl, T1_hi, T1_lo);\n    el = sum64_lo(dl, dl, T1_hi, T1_lo);\n\n    dh = ch;\n    dl = cl;\n\n    ch = bh;\n    cl = bl;\n\n    bh = ah;\n    bl = al;\n\n    ah = sum64_hi(T1_hi, T1_lo, T2_hi, T2_lo);\n    al = sum64_lo(T1_hi, T1_lo, T2_hi, T2_lo);\n  }\n\n  sum64(this.h, 0, ah, al);\n  sum64(this.h, 2, bh, bl);\n  sum64(this.h, 4, ch, cl);\n  sum64(this.h, 6, dh, dl);\n  sum64(this.h, 8, eh, el);\n  sum64(this.h, 10, fh, fl);\n  sum64(this.h, 12, gh, gl);\n  sum64(this.h, 14, hh, hl);\n};\n\nSHA512.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\nfunction ch64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ ((~xh) & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction ch64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ ((~xl) & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ (xh & zh) ^ (yh & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ (xl & zl) ^ (yl & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 28);\n  var c1_hi = rotr64_hi(xl, xh, 2);  // 34\n  var c2_hi = rotr64_hi(xl, xh, 7);  // 39\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 28);\n  var c1_lo = rotr64_lo(xl, xh, 2);  // 34\n  var c2_lo = rotr64_lo(xl, xh, 7);  // 39\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 14);\n  var c1_hi = rotr64_hi(xh, xl, 18);\n  var c2_hi = rotr64_hi(xl, xh, 9);  // 41\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 14);\n  var c1_lo = rotr64_lo(xh, xl, 18);\n  var c2_lo = rotr64_lo(xl, xh, 9);  // 41\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 1);\n  var c1_hi = rotr64_hi(xh, xl, 8);\n  var c2_hi = shr64_hi(xh, xl, 7);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 1);\n  var c1_lo = rotr64_lo(xh, xl, 8);\n  var c2_lo = shr64_lo(xh, xl, 7);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 19);\n  var c1_hi = rotr64_hi(xl, xh, 29);  // 61\n  var c2_hi = shr64_hi(xh, xl, 6);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 19);\n  var c1_lo = rotr64_lo(xl, xh, 29);  // 61\n  var c2_lo = shr64_lo(xh, xl, 6);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n","var native = require('./native')\n\nfunction getTypeName (fn) {\n  return fn.name || fn.toString().match(/function (.*?)\\s*\\(/)[1]\n}\n\nfunction getValueTypeName (value) {\n  return native.Nil(value) ? '' : getTypeName(value.constructor)\n}\n\nfunction getValue (value) {\n  if (native.Function(value)) return ''\n  if (native.String(value)) return JSON.stringify(value)\n  if (value && native.Object(value)) return ''\n  return value\n}\n\nfunction captureStackTrace (e, t) {\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(e, t)\n  }\n}\n\nfunction tfJSON (type) {\n  if (native.Function(type)) return type.toJSON ? type.toJSON() : getTypeName(type)\n  if (native.Array(type)) return 'Array'\n  if (type && native.Object(type)) return 'Object'\n\n  return type !== undefined ? type : ''\n}\n\nfunction tfErrorString (type, value, valueTypeName) {\n  var valueJson = getValue(value)\n\n  return 'Expected ' + tfJSON(type) + ', got' +\n    (valueTypeName !== '' ? ' ' + valueTypeName : '') +\n    (valueJson !== '' ? ' ' + valueJson : '')\n}\n\nfunction TfTypeError (type, value, valueTypeName) {\n  valueTypeName = valueTypeName || getValueTypeName(value)\n  this.message = tfErrorString(type, value, valueTypeName)\n\n  captureStackTrace(this, TfTypeError)\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfTypeError.prototype = Object.create(Error.prototype)\nTfTypeError.prototype.constructor = TfTypeError\n\nfunction tfPropertyErrorString (type, label, name, value, valueTypeName) {\n  var description = '\" of type '\n  if (label === 'key') description = '\" with key type '\n\n  return tfErrorString('property \"' + tfJSON(name) + description + tfJSON(type), value, valueTypeName)\n}\n\nfunction TfPropertyTypeError (type, property, label, value, valueTypeName) {\n  if (type) {\n    valueTypeName = valueTypeName || getValueTypeName(value)\n    this.message = tfPropertyErrorString(type, label, property, value, valueTypeName)\n  } else {\n    this.message = 'Unexpected property \"' + property + '\"'\n  }\n\n  captureStackTrace(this, TfTypeError)\n  this.__label = label\n  this.__property = property\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfPropertyTypeError.prototype = Object.create(Error.prototype)\nTfPropertyTypeError.prototype.constructor = TfTypeError\n\nfunction tfCustomError (expected, actual) {\n  return new TfTypeError(expected, {}, actual)\n}\n\nfunction tfSubError (e, property, label) {\n  // sub child?\n  if (e instanceof TfPropertyTypeError) {\n    property = property + '.' + e.__property\n\n    e = new TfPropertyTypeError(\n      e.__type, property, e.__label, e.__value, e.__valueTypeName\n    )\n\n  // child?\n  } else if (e instanceof TfTypeError) {\n    e = new TfPropertyTypeError(\n      e.__type, property, label, e.__value, e.__valueTypeName\n    )\n  }\n\n  captureStackTrace(e)\n  return e\n}\n\nmodule.exports = {\n  TfTypeError: TfTypeError,\n  TfPropertyTypeError: TfPropertyTypeError,\n  tfCustomError: tfCustomError,\n  tfSubError: tfSubError,\n  tfJSON: tfJSON,\n  getValueTypeName: getValueTypeName\n}\n","var bs58check = require('bs58check')\n\nfunction decodeRaw (buffer, version) {\n  // check version only if defined\n  if (version !== undefined && buffer[0] !== version) throw new Error('Invalid network version')\n\n  // uncompressed\n  if (buffer.length === 33) {\n    return {\n      version: buffer[0],\n      privateKey: buffer.slice(1, 33),\n      compressed: false\n    }\n  }\n\n  // invalid length\n  if (buffer.length !== 34) throw new Error('Invalid WIF length')\n\n  // invalid compression flag\n  if (buffer[33] !== 0x01) throw new Error('Invalid compression flag')\n\n  return {\n    version: buffer[0],\n    privateKey: buffer.slice(1, 33),\n    compressed: true\n  }\n}\n\nfunction encodeRaw (version, privateKey, compressed) {\n  var result = new Buffer(compressed ? 34 : 33)\n\n  result.writeUInt8(version, 0)\n  privateKey.copy(result, 1)\n\n  if (compressed) {\n    result[33] = 0x01\n  }\n\n  return result\n}\n\nfunction decode (string, version) {\n  return decodeRaw(bs58check.decode(string), version)\n}\n\nfunction encode (version, privateKey, compressed) {\n  if (typeof version === 'number') return bs58check.encode(encodeRaw(version, privateKey, compressed))\n\n  return bs58check.encode(\n    encodeRaw(\n      version.version,\n      version.privateKey,\n      version.compressed\n    )\n  )\n}\n\nmodule.exports = {\n  decode: decode,\n  decodeRaw: decodeRaw,\n  encode: encode,\n  encodeRaw: encodeRaw\n}\n","// Reference https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki\n// Format: 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n// NOTE: SIGHASH byte ignored AND restricted, truncate before use\n\nvar Buffer = require('safe-buffer').Buffer\n\nfunction check (buffer) {\n  if (buffer.length < 8) return false\n  if (buffer.length > 72) return false\n  if (buffer[0] !== 0x30) return false\n  if (buffer[1] !== buffer.length - 2) return false\n  if (buffer[2] !== 0x02) return false\n\n  var lenR = buffer[3]\n  if (lenR === 0) return false\n  if (5 + lenR >= buffer.length) return false\n  if (buffer[4 + lenR] !== 0x02) return false\n\n  var lenS = buffer[5 + lenR]\n  if (lenS === 0) return false\n  if ((6 + lenR + lenS) !== buffer.length) return false\n\n  if (buffer[4] & 0x80) return false\n  if (lenR > 1 && (buffer[4] === 0x00) && !(buffer[5] & 0x80)) return false\n\n  if (buffer[lenR + 6] & 0x80) return false\n  if (lenS > 1 && (buffer[lenR + 6] === 0x00) && !(buffer[lenR + 7] & 0x80)) return false\n  return true\n}\n\nfunction decode (buffer) {\n  if (buffer.length < 8) throw new Error('DER sequence length is too short')\n  if (buffer.length > 72) throw new Error('DER sequence length is too long')\n  if (buffer[0] !== 0x30) throw new Error('Expected DER sequence')\n  if (buffer[1] !== buffer.length - 2) throw new Error('DER sequence length is invalid')\n  if (buffer[2] !== 0x02) throw new Error('Expected DER integer')\n\n  var lenR = buffer[3]\n  if (lenR === 0) throw new Error('R length is zero')\n  if (5 + lenR >= buffer.length) throw new Error('R length is too long')\n  if (buffer[4 + lenR] !== 0x02) throw new Error('Expected DER integer (2)')\n\n  var lenS = buffer[5 + lenR]\n  if (lenS === 0) throw new Error('S length is zero')\n  if ((6 + lenR + lenS) !== buffer.length) throw new Error('S length is invalid')\n\n  if (buffer[4] & 0x80) throw new Error('R value is negative')\n  if (lenR > 1 && (buffer[4] === 0x00) && !(buffer[5] & 0x80)) throw new Error('R value excessively padded')\n\n  if (buffer[lenR + 6] & 0x80) throw new Error('S value is negative')\n  if (lenS > 1 && (buffer[lenR + 6] === 0x00) && !(buffer[lenR + 7] & 0x80)) throw new Error('S value excessively padded')\n\n  // non-BIP66 - extract R, S values\n  return {\n    r: buffer.slice(4, 4 + lenR),\n    s: buffer.slice(6 + lenR)\n  }\n}\n\n/*\n * Expects r and s to be positive DER integers.\n *\n * The DER format uses the most significant bit as a sign bit (& 0x80).\n * If the significant bit is set AND the integer is positive, a 0x00 is prepended.\n *\n * Examples:\n *\n *      0 =>     0x00\n *      1 =>     0x01\n *     -1 =>     0xff\n *    127 =>     0x7f\n *   -127 =>     0x81\n *    128 =>   0x0080\n *   -128 =>     0x80\n *    255 =>   0x00ff\n *   -255 =>   0xff01\n *  16300 =>   0x3fac\n * -16300 =>   0xc054\n *  62300 => 0x00f35c\n * -62300 => 0xff0ca4\n*/\nfunction encode (r, s) {\n  var lenR = r.length\n  var lenS = s.length\n  if (lenR === 0) throw new Error('R length is zero')\n  if (lenS === 0) throw new Error('S length is zero')\n  if (lenR > 33) throw new Error('R length is too long')\n  if (lenS > 33) throw new Error('S length is too long')\n  if (r[0] & 0x80) throw new Error('R value is negative')\n  if (s[0] & 0x80) throw new Error('S value is negative')\n  if (lenR > 1 && (r[0] === 0x00) && !(r[1] & 0x80)) throw new Error('R value excessively padded')\n  if (lenS > 1 && (s[0] === 0x00) && !(s[1] & 0x80)) throw new Error('S value excessively padded')\n\n  var signature = Buffer.allocUnsafe(6 + lenR + lenS)\n\n  // 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n  signature[0] = 0x30\n  signature[1] = signature.length - 2\n  signature[2] = 0x02\n  signature[3] = r.length\n  r.copy(signature, 4)\n  signature[4 + lenR] = 0x02\n  signature[5 + lenR] = s.length\n  s.copy(signature, 6 + lenR)\n\n  return signature\n}\n\nmodule.exports = {\n  check: check,\n  decode: decode,\n  encode: encode\n}\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\n\n// Number.MAX_SAFE_INTEGER\nvar MAX_SAFE_INTEGER = 9007199254740991\n\nfunction checkUInt53 (n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0) throw new RangeError('value out of range')\n}\n\nfunction encode (number, buffer, offset) {\n  checkUInt53(number)\n\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(number))\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  // 8 bit\n  if (number < 0xfd) {\n    buffer.writeUInt8(number, offset)\n    encode.bytes = 1\n\n  // 16 bit\n  } else if (number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n    encode.bytes = 3\n\n  // 32 bit\n  } else if (number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n    encode.bytes = 5\n\n  // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset)\n    buffer.writeUInt32LE(number >>> 0, offset + 1)\n    buffer.writeUInt32LE((number / 0x100000000) | 0, offset + 5)\n    encode.bytes = 9\n  }\n\n  return buffer\n}\n\nfunction decode (buffer, offset) {\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  var first = buffer.readUInt8(offset)\n\n  // 8 bit\n  if (first < 0xfd) {\n    decode.bytes = 1\n    return first\n\n  // 16 bit\n  } else if (first === 0xfd) {\n    decode.bytes = 3\n    return buffer.readUInt16LE(offset + 1)\n\n  // 32 bit\n  } else if (first === 0xfe) {\n    decode.bytes = 5\n    return buffer.readUInt32LE(offset + 1)\n\n  // 64 bit\n  } else {\n    decode.bytes = 9\n    var lo = buffer.readUInt32LE(offset + 1)\n    var hi = buffer.readUInt32LE(offset + 5)\n    var number = hi * 0x0100000000 + lo\n    checkUInt53(number)\n\n    return number\n  }\n}\n\nfunction encodingLength (number) {\n  checkUInt53(number)\n\n  return (\n    number < 0xfd ? 1\n      : number <= 0xffff ? 3\n        : number <= 0xffffffff ? 5\n          : 9\n  )\n}\n\nmodule.exports = { encode: encode, decode: decode, encodingLength: encodingLength }\n","'use strict';\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, '__esModule', { value: true });\n__export(require('./fromBuffer'));\n__export(require('./toBuffer'));\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst converter = require('./converter');\nfunction checkForInput(inputs, inputIndex) {\n  const input = inputs[inputIndex];\n  if (input === undefined) throw new Error(`No input #${inputIndex}`);\n  return input;\n}\nexports.checkForInput = checkForInput;\nfunction checkForOutput(outputs, outputIndex) {\n  const output = outputs[outputIndex];\n  if (output === undefined) throw new Error(`No output #${outputIndex}`);\n  return output;\n}\nexports.checkForOutput = checkForOutput;\nfunction checkHasKey(checkKeyVal, keyVals, enumLength) {\n  if (checkKeyVal.key[0] < enumLength) {\n    throw new Error(\n      `Use the method for your specific key instead of addUnknownKeyVal*`,\n    );\n  }\n  if (\n    keyVals &&\n    keyVals.filter(kv => kv.key.equals(checkKeyVal.key)).length !== 0\n  ) {\n    throw new Error(`Duplicate Key: ${checkKeyVal.key.toString('hex')}`);\n  }\n}\nexports.checkHasKey = checkHasKey;\nfunction getEnumLength(myenum) {\n  let count = 0;\n  Object.keys(myenum).forEach(val => {\n    if (Number(isNaN(Number(val)))) {\n      count++;\n    }\n  });\n  return count;\n}\nexports.getEnumLength = getEnumLength;\nfunction inputCheckUncleanFinalized(inputIndex, input) {\n  let result = false;\n  if (!input.nonWitnessUtxo !== !input.witnessUtxo) {\n    const needScriptSig = !!input.redeemScript;\n    const needWitnessScript = !!input.witnessScript;\n    const scriptSigOK = !needScriptSig || !!input.finalScriptSig;\n    const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;\n    const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;\n    result = scriptSigOK && witnessScriptOK && hasOneFinal;\n  }\n  if (result === false) {\n    throw new Error(\n      `Input #${inputIndex} has too much or too little data to clean`,\n    );\n  }\n}\nexports.inputCheckUncleanFinalized = inputCheckUncleanFinalized;\nfunction throwForUpdateMaker(typeName, name, expected, data) {\n  throw new Error(\n    `Data for ${typeName} key ${name} is incorrect: Expected ` +\n      `${expected} and got ${JSON.stringify(data)}`,\n  );\n}\nfunction updateMaker(typeName) {\n  return (updateData, mainData) => {\n    for (const name of Object.keys(updateData)) {\n      // @ts-ignore\n      const data = updateData[name];\n      // @ts-ignore\n      const { canAdd, canAddToArray, check, expected } =\n        // @ts-ignore\n        converter[typeName + 's'][name] || {};\n      const isArray = !!canAddToArray;\n      // If unknown data. ignore and do not add\n      if (check) {\n        if (isArray) {\n          if (\n            !Array.isArray(data) ||\n            // @ts-ignore\n            (mainData[name] && !Array.isArray(mainData[name]))\n          ) {\n            throw new Error(`Key type ${name} must be an array`);\n          }\n          if (!data.every(check)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          // @ts-ignore\n          const arr = mainData[name] || [];\n          const dupeCheckSet = new Set();\n          if (!data.every(v => canAddToArray(arr, v, dupeCheckSet))) {\n            throw new Error('Can not add duplicate data to array');\n          }\n          // @ts-ignore\n          mainData[name] = arr.concat(data);\n        } else {\n          if (!check(data)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          if (!canAdd(mainData, data)) {\n            throw new Error(`Can not add duplicate data to ${typeName}`);\n          }\n          // @ts-ignore\n          mainData[name] = data;\n        }\n      }\n    }\n  };\n}\nexports.updateGlobal = updateMaker('global');\nexports.updateInput = updateMaker('input');\nexports.updateOutput = updateMaker('output');\nfunction addInputAttributes(inputs, data) {\n  const index = inputs.length - 1;\n  const input = checkForInput(inputs, index);\n  exports.updateInput(data, input);\n}\nexports.addInputAttributes = addInputAttributes;\nfunction addOutputAttributes(outputs, data) {\n  const index = outputs.length - 1;\n  const output = checkForInput(outputs, index);\n  exports.updateOutput(data, output);\n}\nexports.addOutputAttributes = addOutputAttributes;\nfunction defaultVersionSetter(version, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Version: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(version, 0);\n  return txBuf;\n}\nexports.defaultVersionSetter = defaultVersionSetter;\nfunction defaultLocktimeSetter(locktime, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Locktime: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(locktime, txBuf.length - 4);\n  return txBuf;\n}\nexports.defaultLocktimeSetter = defaultLocktimeSetter;\n","'use strict';\n// OP_0 {pubKeyHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 22 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x14\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness pubKeyHash output';\n};\n","'use strict';\n// OP_0 {scriptHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 34 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x20\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness scriptHash output';\n};\n","(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(typeof self !== 'undefined' ? self : this);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sha_js_1 = require(\"sha.js\");\nfunction hashSha256(input) {\n    const hashFunction = new sha_js_1.sha256();\n    return hashFunction.update(input).digest();\n}\nexports.hashSha256 = hashSha256;\nfunction hashSha256Async(input) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const isSubtleCryptoAvailable = typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n            if (isSubtleCryptoAvailable) {\n                // Use the W3C Web Crypto API if available (running in a web browser).\n                const buffer = typeof input === 'string' ? Buffer.from(input) : input;\n                const hash = yield crypto.subtle.digest('SHA-256', buffer);\n                return Buffer.from(hash);\n            }\n            else {\n                // Otherwise try loading the Node.js `crypto` module (running in Node.js, or an older browser with a polyfill).\n                const nodeCrypto = require('crypto');\n                if (!nodeCrypto.createHash) {\n                    throw new Error('`crypto` module does not contain `createHash`');\n                }\n                return Promise.resolve(nodeCrypto.createHash('sha256').update(input).digest());\n            }\n        }\n        catch (error) {\n            console.log(error);\n            console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, ' +\n                'nor the or the Node.js `require(\"crypto\").createHash` module is available. ' +\n                'Falling back to JS implementation.');\n            return Promise.resolve(hashSha256(input));\n        }\n    });\n}\nexports.hashSha256Async = hashSha256Async;\n//# sourceMappingURL=sha256.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeZoneFile = makeZoneFile;\n\nvar _zoneFileTemplate = require(\"./zoneFileTemplate\");\n\nfunction makeZoneFile(jsonZoneFile, template = (0, _zoneFileTemplate.getZoneFileTemplate)()) {\n  template = processOrigin(jsonZoneFile['$origin'], template);\n  template = processTTL(jsonZoneFile['$ttl'], template);\n  template = processSOA(jsonZoneFile['soa'], template);\n  template = processNS(jsonZoneFile['ns'], template);\n  template = processA(jsonZoneFile['a'], template);\n  template = processAAAA(jsonZoneFile['aaaa'], template);\n  template = processCNAME(jsonZoneFile['cname'], template);\n  template = processMX(jsonZoneFile['mx'], template);\n  template = processPTR(jsonZoneFile['ptr'], template);\n  template = processTXT(jsonZoneFile['txt'], template);\n  template = processSRV(jsonZoneFile['srv'], template);\n  template = processSPF(jsonZoneFile['spf'], template);\n  template = processURI(jsonZoneFile['uri'], template);\n  template = processValues(jsonZoneFile, template);\n  return template.replace(/\\n{2,}/gim, '\\n\\n');\n}\n\n;\n\nfunction processOrigin(data, template) {\n  let ret = '';\n\n  if (typeof data !== 'undefined') {\n    ret += '$ORIGIN ' + data;\n  }\n\n  return template.replace('{$origin}', ret);\n}\n\n;\n\nfunction processTTL(data, template) {\n  let ret = '';\n\n  if (typeof data !== 'undefined') {\n    ret += '$TTL ' + data;\n  }\n\n  return template.replace('{$ttl}', ret);\n}\n\n;\n\nfunction processSOA(data, template) {\n  let ret = template;\n\n  if (typeof data !== 'undefined') {\n    data.name = data.name || '@';\n    data.ttl = data.ttl || '';\n\n    for (const key in data) {\n      const value = data[key];\n      ret = ret.replace('{' + key + '}', value + '\\t');\n    }\n  }\n\n  return ret;\n}\n\n;\n\nfunction processNS(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tNS\\t' + record.host + '\\n';\n    }\n  }\n\n  return template.replace('{ns}', ret);\n}\n\n;\n\nfunction processA(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tA\\t' + record.ip + '\\n';\n    }\n  }\n\n  return template.replace('{a}', ret);\n}\n\n;\n\nfunction processAAAA(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tAAAA\\t' + record.ip + '\\n';\n    }\n  }\n\n  return template.replace('{aaaa}', ret);\n}\n\n;\n\nfunction processCNAME(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tCNAME\\t' + record.alias + '\\n';\n    }\n  }\n\n  return template.replace('{cname}', ret);\n}\n\n;\n\nfunction processMX(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tMX\\t' + record.preference + '\\t' + record.host + '\\n';\n    }\n  }\n\n  return template.replace('{mx}', ret);\n}\n\n;\n\nfunction processPTR(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tPTR\\t' + record.host + '\\n';\n    }\n  }\n\n  return template.replace('{ptr}', ret);\n}\n\n;\n\nfunction processTXT(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tTXT\\t';\n      const txtData = record.txt;\n\n      if (typeof txtData === 'string') {\n        ret += '\"' + txtData + '\"';\n      } else if (txtData instanceof Array) {\n        ret += txtData.map(function (datum) {\n          return '\"' + datum + '\"';\n        }).join(' ');\n      }\n\n      ret += '\\n';\n    }\n  }\n\n  return template.replace('{txt}', ret);\n}\n\n;\n\nfunction processSRV(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tSRV\\t' + record.priority + '\\t';\n      ret += record.weight + '\\t';\n      ret += record.port + '\\t';\n      ret += record.target + '\\n';\n    }\n  }\n\n  return template.replace('{srv}', ret);\n}\n\n;\n\nfunction processSPF(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tSPF\\t' + record.data + '\\n';\n    }\n  }\n\n  return template.replace('{spf}', ret);\n}\n\n;\n\nfunction processURI(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tURI\\t' + record.priority + '\\t';\n      ret += record.weight + '\\t';\n      ret += '\"' + record.target + '\"\\n';\n    }\n  }\n\n  return template.replace('{uri}', ret);\n}\n\n;\n\nfunction processValues(jsonZoneFile, template) {\n  template = template.replace('{zone}', jsonZoneFile['$origin'] || (jsonZoneFile['soa'] ? jsonZoneFile['soa']['name'] : false) || '');\n  template = template.replace('{datetime}', new Date().toISOString());\n  const time = Math.round(Date.now() / 1000);\n  return template.replace('{time}', `${time}`);\n}\n\n;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseZoneFile = parseZoneFile;\n\nfunction parseZoneFile(text) {\n  text = removeComments(text);\n  text = flatten(text);\n  return parseRRs(text);\n}\n\n;\n\nfunction removeComments(text) {\n  const re = /(^|[^\\\\]);.*/g;\n  return text.replace(re, function (m, g1) {\n    return g1 ? g1 : ''; // if g1 is set/matched, re-insert it, else remove\n  });\n}\n\nfunction flatten(text) {\n  const captured = [];\n  const re = /\\([\\s\\S]*?\\)/gim;\n  let match = re.exec(text);\n\n  while (match !== null) {\n    const replacement = match[0].replace(/\\s+/gm, ' ');\n    captured.push({\n      match,\n      replacement\n    }); // captured Text, index, input\n\n    match = re.exec(text);\n  }\n\n  const arrText = text.split('');\n\n  for (const cur of captured) {\n    const {\n      match,\n      replacement\n    } = cur;\n    arrText.splice(match.index, match[0].length, replacement);\n  }\n\n  return arrText.join('').replace(/\\(|\\)/gim, ' ');\n}\n\nfunction parseRRs(text) {\n  const ret = {};\n  const rrs = text.split('\\n');\n\n  for (const rr of rrs) {\n    if (!rr || !rr.trim()) {\n      continue;\n    }\n\n    const uRR = rr.toUpperCase();\n\n    if (/\\s+TXT\\s+/.test(uRR)) {\n      ret.txt = ret.txt || [];\n      ret.txt.push(parseTXT(rr));\n    } else if (uRR.indexOf('$ORIGIN') === 0) {\n      ret.$origin = rr.split(/\\s+/g)[1];\n    } else if (uRR.indexOf('$TTL') === 0) {\n      ret.$ttl = parseInt(rr.split(/\\s+/g)[1], 10);\n    } else if (/\\s+SOA\\s+/.test(uRR)) {\n      ret.soa = parseSOA(rr);\n    } else if (/\\s+NS\\s+/.test(uRR)) {\n      ret.ns = ret.ns || [];\n      ret.ns.push(parseNS(rr));\n    } else if (/\\s+A\\s+/.test(uRR)) {\n      ret.a = ret.a || [];\n      ret.a.push(parseA(rr, ret.a));\n    } else if (/\\s+AAAA\\s+/.test(uRR)) {\n      ret.aaaa = ret.aaaa || [];\n      ret.aaaa.push(parseAAAA(rr));\n    } else if (/\\s+CNAME\\s+/.test(uRR)) {\n      ret.cname = ret.cname || [];\n      ret.cname.push(parseCNAME(rr));\n    } else if (/\\s+MX\\s+/.test(uRR)) {\n      ret.mx = ret.mx || [];\n      ret.mx.push(parseMX(rr));\n    } else if (/\\s+PTR\\s+/.test(uRR)) {\n      ret.ptr = ret.ptr || [];\n      ret.ptr.push(parsePTR(rr, ret.ptr, ret.$origin));\n    } else if (/\\s+SRV\\s+/.test(uRR)) {\n      ret.srv = ret.srv || [];\n      ret.srv.push(parseSRV(rr));\n    } else if (/\\s+SPF\\s+/.test(uRR)) {\n      ret.spf = ret.spf || [];\n      ret.spf.push(parseSPF(rr));\n    } else if (/\\s+URI\\s+/.test(uRR)) {\n      ret.uri = ret.uri || [];\n      ret.uri.push(parseURI(rr));\n    }\n  }\n\n  return ret;\n}\n\nfunction parseSOA(rr) {\n  const soa = {};\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  soa.name = rrTokens[0];\n  soa.minimum = parseInt(rrTokens[l - 1], 10);\n  soa.expire = parseInt(rrTokens[l - 2], 10);\n  soa.retry = parseInt(rrTokens[l - 3], 10);\n  soa.refresh = parseInt(rrTokens[l - 4], 10);\n  soa.serial = parseInt(rrTokens[l - 5], 10);\n  soa.rname = rrTokens[l - 6];\n  soa.mname = rrTokens[l - 7];\n  if (!isNaN(rrTokens[1])) soa.ttl = parseInt(rrTokens[1], 10);\n  return soa;\n}\n\nfunction parseNS(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    host: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseA(rr, recordsSoFar) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const urrTokens = rr.trim().toUpperCase().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    ip: rrTokens[l - 1]\n  };\n\n  if (urrTokens.lastIndexOf('A') === 0) {\n    if (recordsSoFar.length) {\n      result.name = recordsSoFar[recordsSoFar.length - 1].name;\n    } else {\n      result.name = '@';\n    }\n  }\n\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseAAAA(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    ip: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseCNAME(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    alias: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseMX(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    preference: parseInt(rrTokens[l - 2], 10),\n    host: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseTXT(rr) {\n  const rrTokens = rr.trim().match(/[^\\s\\\"']+|\\\"[^\\\"]*\\\"|'[^']*'/g);\n  if (!rrTokens) throw new Error('Failure to tokenize TXT record');\n  const l = rrTokens.length;\n  const indexTXT = rrTokens.indexOf('TXT');\n\n  function stripText(txt) {\n    if (txt.indexOf('\\\"') > -1) {\n      txt = txt.split('\\\"')[1];\n    }\n\n    if (txt.indexOf('\"') > -1) {\n      txt = txt.split('\"')[1];\n    }\n\n    return txt;\n  }\n\n  let tokenTxt;\n\n  if (l - indexTXT - 1 > 1) {\n    tokenTxt = rrTokens.slice(indexTXT + 1).map(stripText);\n  } else {\n    tokenTxt = stripText(rrTokens[l - 1]);\n  }\n\n  const result = {\n    name: rrTokens[0],\n    txt: tokenTxt\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parsePTR(rr, recordsSoFar, currentOrigin) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const urrTokens = rr.trim().toUpperCase().split(/\\s+/g);\n\n  if (urrTokens.lastIndexOf('PTR') === 0 && recordsSoFar[recordsSoFar.length - 1]) {\n    rrTokens.unshift(recordsSoFar[recordsSoFar.length - 1].name);\n  }\n\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    fullname: rrTokens[0] + '.' + currentOrigin,\n    host: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseSRV(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    target: rrTokens[l - 1],\n    priority: parseInt(rrTokens[l - 4], 10),\n    weight: parseInt(rrTokens[l - 3], 10),\n    port: parseInt(rrTokens[l - 2], 10)\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseSPF(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const result = {\n    name: rrTokens[0],\n    data: ''\n  };\n  let l = rrTokens.length;\n\n  while (l-- > 4) {\n    result.data = rrTokens[l] + ' ' + result.data.trim();\n  }\n\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseURI(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    target: rrTokens[l - 1].replace(/\"/g, ''),\n    priority: parseInt(rrTokens[l - 3], 10),\n    weight: parseInt(rrTokens[l - 2], 10)\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}","\n\nimport { TransactionBuilder, address as bjsAddress, TxOutput } from 'bitcoinjs-lib'\nimport * as BN from 'bn.js'\n\nimport {\n  addUTXOsToFund, DUST_MINIMUM,\n  estimateTXBytes, sumOutputValues, hash160, signInputs, getTransactionInsideBuilder\n} from './utils'\nimport {\n  makePreorderSkeleton, makeRegisterSkeleton,\n  makeUpdateSkeleton, makeTransferSkeleton, makeRenewalSkeleton,\n  makeRevokeSkeleton, makeNamespacePreorderSkeleton,\n  makeNamespaceRevealSkeleton, makeNamespaceReadySkeleton,\n  makeNameImportSkeleton, makeAnnounceSkeleton,\n  makeTokenTransferSkeleton, BlockstackNamespace\n} from './skeletons'\n\nimport { config } from '../config'\nimport { InvalidAmountError, InvalidParameterError } from '../errors'\nimport { TransactionSigner, PubkeyHashSigner } from './signers'\nimport { UTXO } from '../network'\n\nconst dummyConsensusHash = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'\nconst dummyZonefileHash  = 'ffffffffffffffffffffffffffffffffffffffff'\n\n/**\n* @ignore\n*/\nfunction addOwnerInput(utxos: UTXO[],\n                       ownerAddress: string,\n                       txB: TransactionBuilder,\n                       addChangeOut: boolean = true\n) {\n  // add an owner UTXO and a change out.\n  if (utxos.length <= 0) {\n    throw new Error('Owner has no UTXOs for UPDATE.')\n  }\n\n  utxos.sort((a, b) => a.value - b.value)\n  const ownerUTXO = utxos[0]\n  const ownerInput = txB.addInput(ownerUTXO.tx_hash, ownerUTXO.tx_output_n)\n  if (addChangeOut) {\n    txB.addOutput(ownerAddress, ownerUTXO.value)\n  }\n  return { index: ownerInput, value: ownerUTXO.value }\n}\n\n/**\n* @ignore\n*/\nfunction fundTransaction(txB: TransactionBuilder, paymentAddress: string,\n                         utxos: UTXO[],\n                         feeRate: number, inAmounts: number, changeIndex: number | null = null\n) {\n  // change index for the payer.\n  if (changeIndex === null) {\n    changeIndex = txB.addOutput(paymentAddress, DUST_MINIMUM)\n  }\n  // fund the transaction fee.\n  const txFee = estimateTXBytes(txB, 0, 0) * feeRate\n  const outAmounts = sumOutputValues(txB)\n  const change = addUTXOsToFund(txB, utxos, txFee + outAmounts - inAmounts, feeRate)\n  const txInner = getTransactionInsideBuilder(txB)\n  const txOut = txInner.outs[changeIndex] as TxOutput\n  txOut.value += change\n  return txB\n}\n\n/**\n* @ignore\n*/\nfunction returnTransactionHex(txB: TransactionBuilder,\n                              buildIncomplete: boolean = false\n) {\n  if (buildIncomplete) {\n    return txB.buildIncomplete().toHex()\n  } else {\n    return txB.build().toHex()\n  }\n}\n\n/**\n* @ignore\n*/\nfunction getTransactionSigner(input: string | TransactionSigner): TransactionSigner {\n  if (typeof input === 'string') {\n    return PubkeyHashSigner.fromHexString(input)\n  } else {\n    return input\n  }\n}\n\n/**\n * Estimates cost of a preorder transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to preorder\n * @param {String} destinationAddress - the address to receive the name (this\n *    must be passed as the 'registrationAddress' in the register transaction)\n * @param {String} paymentAddress - the address funding the preorder\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the preorder. This includes a 5500 satoshi dust output for the preorder.\n *    Even though this is a change output, the payer must supply enough funds\n *    to generate this output, so we include it in the cost.\n * @private\n */\nfunction estimatePreorder(fullyQualifiedName: string,\n                          destinationAddress: string,\n                          paymentAddress: string,\n                          paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const preorderPromise = network.getNamePrice(fullyQualifiedName)\n    .then(namePrice => makePreorderSkeleton(\n      fullyQualifiedName, dummyConsensusHash, paymentAddress,\n      network.getDefaultBurnAddress(), namePrice,\n      destinationAddress\n    ))\n\n  return Promise.all([network.getFeeRate(), preorderPromise])\n    .then(([feeRate, preorderTX]) => {\n      const outputsValue = sumOutputValues(preorderTX)\n      const txFee = feeRate * estimateTXBytes(preorderTX, paymentUtxos, 0)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of a register transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to register\n * @param {String} registerAddress - the address to receive the name\n * @param {String} paymentAddress - the address funding the register\n * @param {Boolean} includingZonefile - whether or not we will broadcast\n *    a zonefile hash as part  of the register\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the register.\n * @private\n */\nfunction estimateRegister(fullyQualifiedName: string,\n                          registerAddress: string,\n                          paymentAddress: string,\n                          includingZonefile: boolean = false,\n                          paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  let valueHash\n  if (includingZonefile) {\n    valueHash = dummyZonefileHash\n  }\n\n  const registerTX = makeRegisterSkeleton(\n    fullyQualifiedName, registerAddress, valueHash\n  )\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(registerTX)\n      // 1 additional output for payer change\n      const txFee = feeRate * estimateTXBytes(registerTX, paymentUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of an update transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to update\n * @param {String} ownerAddress - the owner of the name\n * @param {String} paymentAddress - the address funding the update\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the update.\n * @private\n */\nasync function estimateUpdate(fullyQualifiedName: string,\n                              ownerAddress: string,\n                              paymentAddress: string,\n                              paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  const updateTX = makeUpdateSkeleton(\n    fullyQualifiedName, dummyConsensusHash, dummyZonefileHash\n  )\n\n  const feeRate = await network.getFeeRate()\n  const outputsValue = sumOutputValues(updateTX)\n  // 1 additional input for the owner\n  // 2 additional outputs for owner / payer change\n  const txFee = feeRate * estimateTXBytes(updateTX, 1 + paymentUtxos, 2)\n  return txFee + outputsValue\n}\n\n/**\n * Estimates cost of an transfer transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to transfer\n * @param {String} destinationAddress - the next owner of the name\n * @param {String} ownerAddress - the current owner of the name\n * @param {String} paymentAddress - the address funding the transfer\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the transfer.\n * @private\n */\nasync function estimateTransfer(fullyQualifiedName: string,\n                                destinationAddress: string,\n                                ownerAddress: string,\n                                paymentAddress: string,\n                                paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  const transferTX = makeTransferSkeleton(\n    fullyQualifiedName, dummyConsensusHash,\n    destinationAddress)\n\n  const feeRate = await network.getFeeRate()\n  const outputsValue = sumOutputValues(transferTX)\n  // 1 additional input for the owner\n  // 2 additional outputs for owner / payer change\n  const txFee = feeRate * estimateTXBytes(transferTX, 1 + paymentUtxos, 2)\n  return txFee + outputsValue\n}\n\n/**\n * Estimates cost of an transfer transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to renew\n * @param {String} destinationAddress - the next owner of the name\n * @param {String} ownerAddress - the current owner of the name\n * @param {String} paymentAddress - the address funding the transfer\n * @param {Boolean} includingZonefile - whether or not we will broadcast a zonefile hash\n      in the renewal operation\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the transfer.\n * @private\n */\nfunction estimateRenewal(fullyQualifiedName: string,\n                         destinationAddress: string,\n                         ownerAddress: string,\n                         paymentAddress: string,\n                         includingZonefile: boolean = false,\n                         paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  let valueHash: string\n  if (includingZonefile) {\n    valueHash = dummyZonefileHash\n  }\n\n  const renewalPromise = network.getNamePrice(fullyQualifiedName)\n    .then(namePrice => makeRenewalSkeleton(\n      fullyQualifiedName, destinationAddress, ownerAddress,\n      network.getDefaultBurnAddress(), namePrice, valueHash\n    ))\n\n  return Promise.all([network.getFeeRate(), renewalPromise])\n    .then(([feeRate, renewalTX]) => {\n      const outputsValue = sumOutputValues(renewalTX)\n      // 1 additional input for the owner\n      // and renewal skeleton includes all outputs for owner change, but not for payer change.\n      const txFee = feeRate * estimateTXBytes(renewalTX, 1 + paymentUtxos, 1)\n      return txFee + outputsValue - 5500 // don't count the dust change for old owner.\n    })\n}\n\n/**\n * Estimates cost of a revoke transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to revoke\n * @param {String} ownerAddress - the current owner of the name\n * @param {String} paymentAddress  the address funding the revoke\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund the\n *    revoke.\n * @private\n */\nfunction estimateRevoke(fullyQualifiedName: string,\n                        ownerAddress: string,\n                        paymentAddress: string,\n                        paymentUtxos: number = 1\n): Promise<number>  {\n  const network = config.network\n  const revokeTX = makeRevokeSkeleton(fullyQualifiedName)\n\n  return Promise.all([network.getFeeRate()])\n    .then(([feeRate]) => {\n      const outputsValue = sumOutputValues(revokeTX)\n      // 1 additional input for owner\n      // 1 additional output for payer change\n      const txFee = feeRate * estimateTXBytes(revokeTX, 1 + paymentUtxos, 2)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of a namespace preorder transaction for a namespace\n * @param {String} namespaceID - the namespace to preorder\n * @param {String} revealAddress - the address to receive the namespace (this\n *    must be passed as the 'revealAddress' in the namespace-reveal transaction)\n * @param {String} paymentAddress - the address funding the preorder\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the preorder. This includes a 5500 satoshi dust output for the preorder.\n *    Even though this is a change output, the payer must supply enough funds\n *    to generate this output, so we include it in the cost.\n * @private\n */\nfunction estimateNamespacePreorder(namespaceID: string,\n                                   revealAddress: string,\n                                   paymentAddress: string,\n                                   paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  const preorderPromise = network.getNamespacePrice(namespaceID)\n    .then(namespacePrice => makeNamespacePreorderSkeleton(\n      namespaceID, dummyConsensusHash, paymentAddress, revealAddress,\n      namespacePrice\n    ))\n\n  return Promise.all([network.getFeeRate(), preorderPromise])\n    .then(([feeRate, preorderTX]) => {\n      const outputsValue = sumOutputValues(preorderTX)\n      const txFee = feeRate * estimateTXBytes(preorderTX, paymentUtxos, 0)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of a namesapce reveal transaction for a namespace\n * @param {BlockstackNamespace} namespace - the namespace to reveal\n * @param {String} revealAddress - the address to receive the namespace\n *    (this must have been passed as 'revealAddress' to a prior namespace\n *    preorder)\n * @param {String} paymentAddress - the address that pays for this transaction\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address\n * @returns {Promise} - a promise which resolves to the satoshi cost to\n *    fund the reveal.  This includes a 5500 satoshi dust output for the\n *    preorder.  Even though this is a change output, the payer must have\n *    enough funds to generate this output, so we include it in the cost.\n * @private\n */\nfunction estimateNamespaceReveal(namespace: BlockstackNamespace,\n                                 revealAddress: string,\n                                 paymentAddress: string,\n                                 paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const revealTX = makeNamespaceRevealSkeleton(namespace, revealAddress)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(revealTX)\n      // 1 additional output for payer change\n      const txFee = feeRate * estimateTXBytes(revealTX, paymentUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of a namespace-ready transaction for a namespace\n * @param {String} namespaceID - the namespace to ready\n * @param {Number} revealUtxos - the number of UTXOs we expect will\n *  be required from the reveal address\n * @returns {Promise} - a promise which resolves to the satoshi cost to\n *  fund this namespacey-ready transaction.\n * @private\n */\nfunction estimateNamespaceReady(namespaceID: string,\n                                revealUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const readyTX = makeNamespaceReadySkeleton(namespaceID)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(readyTX)\n      const txFee = feeRate * estimateTXBytes(readyTX, revealUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of a name-import transaction\n * @param {String} name - the fully-qualified name\n * @param {String} recipientAddr - the recipient\n * @param {String} zonefileHash - the zone file hash\n * @param {Number} importUtxos - the number of UTXOs we expect will\n *  be required from the importer address\n * @returns {Promise} - a promise which resolves to the satoshi cost\n *  to fund this name-import transaction\n * @private\n */\nfunction estimateNameImport(name: string,\n                            recipientAddr: string,\n                            zonefileHash: string,\n                            importUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const importTX = makeNameImportSkeleton(name, recipientAddr, zonefileHash)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(importTX)\n      const txFee = feeRate * estimateTXBytes(importTX, importUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of an announce transaction\n * @param {String} messageHash - the hash of the message\n * @param {Number} senderUtxos - the number of utxos we expect will\n *  be required from the importer address\n * @returns {Promise} - a promise which resolves to the satoshi cost\n *  to fund this announce transaction\n * @private\n */\nfunction estimateAnnounce(messageHash: string,\n                          senderUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const announceTX = makeAnnounceSkeleton(messageHash)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(announceTX)\n      const txFee = feeRate * estimateTXBytes(announceTX, senderUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of a token-transfer transaction\n * @param {String} recipientAddress - the recipient of the tokens\n * @param {String} tokenType - the type of token to spend\n * @param {Object} tokenAmount - a 64-bit unsigned BigInteger encoding the number of tokens\n *   to spend\n * @param {String} scratchArea - an arbitrary string to store with the transaction\n * @param {Number} senderUtxos - the number of utxos we expect will\n *  be required from the importer address\n * @param {Number} additionalOutputs - the number of outputs we expect to add beyond\n *  just the recipient output (default = 1, if the token owner is also the bitcoin funder)\n * @returns {Promise} - a promise which resolves to the satoshi cost to\n *  fund this token-transfer transaction\n * @private\n */\nfunction estimateTokenTransfer(recipientAddress: string,\n                               tokenType: string,\n                               tokenAmount: BN,\n                               scratchArea: string,\n                               senderUtxos: number = 1,\n                               additionalOutputs: number = 1\n) {\n  const network = config.network\n  const tokenTransferTX = makeTokenTransferSkeleton(\n    recipientAddress, dummyConsensusHash, tokenType, tokenAmount, scratchArea)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(tokenTransferTX)\n      const txFee = feeRate * estimateTXBytes(tokenTransferTX, senderUtxos, additionalOutputs)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Generates a preorder transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to pre-order\n * @param {String} destinationAddress - the address to receive the name (this\n *    must be passed as the 'registrationAddress' in the register transaction)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction or a transaction signer object\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makePreorder(fullyQualifiedName: string,\n                            destinationAddress: string,\n                            paymentKeyIn: string | TransactionSigner,\n                            buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const namespace = fullyQualifiedName.split('.').pop()\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const preorderAddress = await paymentKey.getAddress()\n\n\n  const preorderPromise = Promise.all([network.getConsensusHash(),\n                                       network.getNamePrice(fullyQualifiedName),\n                                       network.getNamespaceBurnAddress(namespace)])\n    .then(([consensusHash, namePrice, burnAddress]) => makePreorderSkeleton(\n      fullyQualifiedName, consensusHash, preorderAddress, burnAddress,\n      namePrice, destinationAddress\n    ))\n\n  return Promise.all([network.getUTXOs(preorderAddress), network.getFeeRate(), preorderPromise])\n    .then(([utxos, feeRate, preorderSkeleton]) => {\n      const txB = TransactionBuilder.fromTransaction(preorderSkeleton, network.layer1)\n      txB.setVersion(1)\n\n      const changeIndex = 1 // preorder skeleton always creates a change output at index = 1\n      const signingTxB = fundTransaction(txB, preorderAddress, utxos, feeRate, 0, changeIndex)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates an update transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to update\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of the\n *    owner key, or a transaction signer object. This will provide one\n *    UTXO input, and also recieve a dust output.\n * @param {String | TransactionSigner} paymentKeyIn - a hex string, or a\n *    transaction signer object, of the private key used to fund the\n *    transaction's txfees\n * @param {String} zonefile - the zonefile data to update (this will be hashed\n *    to include in the transaction), the zonefile itself must be published\n *    after the UPDATE propagates.\n * @param {String} valueHash - if given, this is the hash to store (instead of\n *    zonefile).  zonefile will be ignored if this is given.\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makeUpdate(fullyQualifiedName: string,\n                          ownerKeyIn: string | TransactionSigner,\n                          paymentKeyIn: string | TransactionSigner,\n                          zonefile: string,\n                          valueHash: string = '',\n                          buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n  if (!valueHash && !zonefile) {\n    return Promise.reject(\n      new Error('Need zonefile or valueHash arguments')\n    )\n  }\n  if (valueHash.length === 0) {\n    if (!zonefile) {\n      return Promise.reject(\n        new Error('Need zonefile or valueHash arguments')\n      )\n    }\n    valueHash = hash160(Buffer.from(zonefile)).toString('hex')\n  } else if (valueHash.length !== 40) {\n    return Promise.reject(\n      new Error(`Invalid valueHash ${valueHash}`)\n    )\n  }\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const txPromise = network.getConsensusHash()\n        .then(consensusHash => makeUpdateSkeleton(fullyQualifiedName, consensusHash, valueHash))\n        .then((updateTX) => {\n          const txB = TransactionBuilder.fromTransaction(updateTX, network.layer1)\n          txB.setVersion(1)\n          return txB\n        })\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB)\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a register transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to register\n * @param {String} registerAddress - the address to receive the name (this\n *    must have been passed as the 'destinationAddress' in the preorder transaction)\n *    this address will receive a dust UTXO\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key (or a TransactionSigner object) used to fund the\n *    transaction (this *must* be the same as the payment address used\n *    to fund the preorder)\n * @param {String} zonefile - the zonefile data to include (this will be hashed\n *    to include in the transaction), the zonefile itself must be published\n *    after the UPDATE propagates.\n * @param {String} valueHash - the hash of the zone file data to include.\n *    It will be used instead of zonefile, if given\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makeRegister(fullyQualifiedName: string,\n                            registerAddress: string,\n                            paymentKeyIn: string | TransactionSigner,\n                            zonefile: string = null,\n                            valueHash: string = null,\n                            buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n  if (!valueHash && !!zonefile) {\n    valueHash = hash160(Buffer.from(zonefile)).toString('hex')\n  } else if (!!valueHash && valueHash.length !== 40) {\n    return Promise.reject(\n      new Error(`Invalid zonefile hash ${valueHash}`)\n    )\n  }\n\n  const registerSkeleton = makeRegisterSkeleton(\n    fullyQualifiedName, registerAddress, valueHash\n  )\n\n  const txB = TransactionBuilder.fromTransaction(registerSkeleton, network.layer1)\n  txB.setVersion(1)\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const paymentAddress = await paymentKey.getAddress()\n\n  return Promise.all([network.getUTXOs(paymentAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const signingTxB = fundTransaction(txB, paymentAddress, utxos, feeRate, 0)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a transfer transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to transfer\n * @param {String} destinationAddress - the address to receive the name.\n *    this address will receive a dust UTXO\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of\n *    the current owner's private key (or a TransactionSigner object)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction (or a\n *    TransactionSigner object)\n * @param {Boolean} keepZonefile - if true, then preserve the name's zone file\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *   indicating whether the function should attempt to return an unsigned (or not fully signed)\n *   transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nfunction makeTransfer(fullyQualifiedName: string,\n                      destinationAddress: string,\n                      ownerKeyIn: string | TransactionSigner,\n                      paymentKeyIn: string | TransactionSigner,\n                      keepZonefile: boolean = false,\n                      buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const txPromise = network.getConsensusHash()\n        .then(consensusHash => makeTransferSkeleton(\n          fullyQualifiedName, consensusHash, destinationAddress, keepZonefile\n        ))\n        .then((transferTX) => {\n          const txB = TransactionBuilder\n            .fromTransaction(transferTX, network.layer1)\n          txB.setVersion(1)\n          return txB\n        })\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB)\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a revoke transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to revoke\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of\n *    the current owner's private key (or a TransactionSigner object)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction (or a\n *    TransactionSigner object)\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nfunction makeRevoke(fullyQualifiedName: string,\n                    ownerKeyIn: string | TransactionSigner,\n                    paymentKeyIn: string | TransactionSigner,\n                    buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const revokeTX = makeRevokeSkeleton(fullyQualifiedName)\n      const txPromise = TransactionBuilder.fromTransaction(revokeTX, network.layer1)\n      txPromise.setVersion(1)\n\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB)\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a renewal transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to transfer\n * @param {String} destinationAddress - the address to receive the name after renewal\n *    this address will receive a dust UTXO\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of\n *    the current owner's private key (or a TransactionSigner object)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the renewal (or a TransactionSigner\n *    object)\n * @param {String} zonefile - the zonefile data to include, if given (this will be hashed\n *    to include in the transaction), the zonefile itself must be published\n *    after the RENEWAL propagates.\n * @param {String} valueHash - the raw zone file hash to include (this will be used\n *    instead of zonefile, if given).\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makeRenewal(fullyQualifiedName: string,\n                           destinationAddress: string,\n                           ownerKeyIn: string | TransactionSigner,\n                           paymentKeyIn: string | TransactionSigner,\n                           zonefile: string = null,\n                           valueHash: string = null,\n                           buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  if (!valueHash && !!zonefile) {\n    valueHash = hash160(Buffer.from(zonefile)).toString('hex')\n  }\n\n  const namespace = fullyQualifiedName.split('.').pop()\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const txPromise = Promise.all([network.getNamePrice(fullyQualifiedName),\n                                     network.getNamespaceBurnAddress(namespace)])\n        .then(([namePrice, burnAddress]) => makeRenewalSkeleton(\n          fullyQualifiedName, destinationAddress, ownerAddress,\n          burnAddress, namePrice, valueHash\n        ))\n        .then((tx) => {\n          const txB = TransactionBuilder.fromTransaction(tx, network.layer1)\n          txB.setVersion(1)\n          return txB\n        })\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB, false)\n          const txInner = getTransactionInsideBuilder(txB)\n          const ownerOutput = txInner.outs[2] as TxOutput\n          const ownerOutputAddr = bjsAddress.fromOutputScript(\n            ownerOutput.script, network.layer1\n          )\n          if (ownerOutputAddr !== ownerAddress) {\n            return Promise.reject(\n              new Error(`Original owner ${ownerAddress} should have an output at `\n                        + `index 2 in transaction was ${ownerOutputAddr}`)\n            )\n          }\n          ownerOutput.value = ownerInput.value\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a namespace preorder transaction for a namespace\n * @param {String} namespaceID - the namespace to pre-order\n * @param {String} revealAddress - the address to receive the namespace (this\n *    must be passed as the 'revealAddress' in the namespace-reveal transaction)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction (or a\n *    TransactionSigner object)\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n * \n * @ignore\n */\nasync function makeNamespacePreorder(namespaceID: string,\n                                     revealAddress: string,\n                                     paymentKeyIn: string | TransactionSigner,\n                                     buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const preorderAddress = await paymentKey.getAddress()\n  const preorderPromise = Promise.all([network.getConsensusHash(),\n                                       network.getNamespacePrice(namespaceID)])\n    .then(([consensusHash, namespacePrice]) => makeNamespacePreorderSkeleton(\n      namespaceID, consensusHash, preorderAddress, revealAddress,\n      namespacePrice))\n\n  return Promise.all([network.getUTXOs(preorderAddress), network.getFeeRate(), preorderPromise])\n    .then(([utxos, feeRate, preorderSkeleton]) => {\n      const txB = TransactionBuilder.fromTransaction(preorderSkeleton, network.layer1)\n      txB.setVersion(1)\n\n      const changeIndex = 1 // preorder skeleton always creates a change output at index = 1\n      const signingTxB = fundTransaction(txB, preorderAddress, utxos, feeRate, 0, changeIndex)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a namespace reveal transaction for a namespace\n * @param {BlockstackNamespace} namespace - the namespace to reveal\n * @param {String} revealAddress - the address to receive the namespace (this\n *   must be passed as the 'revealAddress' in the namespace-reveal transaction)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string (or\n *   a TransactionSigner object) of the private key used to fund the\n *   transaction\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *   indicating whether the function should attempt to return an unsigned (or not fully signed)\n *   transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *   this function *does not* perform the requisite safety checks -- please see\n *   the safety module for those.\n * @private\n */\nasync function makeNamespaceReveal(namespace: BlockstackNamespace,\n                                   revealAddress: string,\n                                   paymentKeyIn: string | TransactionSigner,\n                                   buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  if (!namespace.check()) {\n    return Promise.reject(new Error('Invalid namespace'))\n  }\n\n  const namespaceRevealTX = makeNamespaceRevealSkeleton(namespace, revealAddress)\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const preorderAddress = await paymentKey.getAddress()\n  return Promise.all([network.getUTXOs(preorderAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder\n        .fromTransaction(namespaceRevealTX, network.layer1)\n      txB.setVersion(1)\n      const signingTxB = fundTransaction(txB, preorderAddress, utxos, feeRate, 0)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a namespace ready transaction for a namespace\n * @param {String} namespaceID - the namespace to launch\n * @param {String | TransactionSigner} revealKeyIn - the private key\n *  of the 'revealAddress' used to reveal the namespace\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *  indicating whether the function should attempt to return an unsigned (or not fully signed)\n *  transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *  this function *does not* perform the requisite safety checks -- please see\n *  the safety module for those.\n * @private\n */\nasync function makeNamespaceReady(namespaceID: string,\n                                  revealKeyIn: string | TransactionSigner,\n                                  buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const namespaceReadyTX = makeNamespaceReadySkeleton(namespaceID)\n\n  const revealKey = getTransactionSigner(revealKeyIn)\n\n  const revealAddress = await revealKey.getAddress()\n  return Promise.all([network.getUTXOs(revealAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder.fromTransaction(namespaceReadyTX, network.layer1)\n      txB.setVersion(1)\n      const signingTxB = fundTransaction(txB, revealAddress, utxos, feeRate, 0)\n      return signInputs(signingTxB, revealKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a name import transaction for a namespace\n * @param {String} name - the name to import\n * @param {String} recipientAddr - the address to receive the name\n * @param {String} zonefileHash - the hash of the zonefile to give this name\n * @param {String | TransactionSigner} importerKeyIn - the private key\n * that pays for the import\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * this function does not perform the requisite safety checks -- please see\n * the safety module for those.\n * @private\n */\nasync function makeNameImport(name: string,\n                              recipientAddr: string,\n                              zonefileHash: string,\n                              importerKeyIn: string | TransactionSigner,\n                              buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const nameImportTX = makeNameImportSkeleton(name, recipientAddr, zonefileHash)\n\n  const importerKey = getTransactionSigner(importerKeyIn)\n\n  const importerAddress = await importerKey.getAddress()\n  return Promise.all([network.getUTXOs(importerAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder.fromTransaction(nameImportTX, network.layer1)\n      const signingTxB = fundTransaction(txB, importerAddress, utxos, feeRate, 0)\n      return signInputs(signingTxB, importerKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates an announce transaction\n * @param {String} messageHash - the hash of the message to send.  Should be\n *  an already-announced zone file hash\n * @param {String | TransactionSigner} senderKeyIn - the private key\n *  that pays for the transaction.  Should be the key that owns the\n *  name that the message recipients subscribe to\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * this function does not perform the requisite safety checks -- please see the\n * safety module for those.\n * @private\n */\nasync function makeAnnounce(messageHash: string,\n                            senderKeyIn: string | TransactionSigner,\n                            buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const announceTX = makeAnnounceSkeleton(messageHash)\n\n  const senderKey = getTransactionSigner(senderKeyIn)\n\n  const senderAddress = await senderKey.getAddress()\n  return Promise.all([network.getUTXOs(senderAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder.fromTransaction(announceTX, network.layer1)\n      const signingTxB = fundTransaction(txB, senderAddress, utxos, feeRate, 0)\n      return signInputs(signingTxB, senderKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a token-transfer transaction\n * @param {String} recipientAddress - the address to receive the tokens\n * @param {String} tokenType - the type of tokens to send\n * @param {Object} tokenAmount - the BigInteger encoding of an unsigned 64-bit number of\n *  tokens to send\n * @param {String} scratchArea - an arbitrary string to include with the transaction\n * @param {String | TransactionSigner} senderKeyIn - the hex-encoded private key to send\n *   the tokens\n * @param {String | TransactionSigner} btcFunderKeyIn - the hex-encoded private key to fund\n *   the bitcoin fees for the transaction. Optional -- if not passed, will attempt to\n *   fund with sender key.\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *   indicating whether the function should attempt to return an unsigned (or not fully signed)\n *   transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * This function does not perform the requisite safety checks -- please see the\n * safety module for those.\n * @private\n */\nfunction makeTokenTransfer(recipientAddress: string, tokenType: string,\n                           tokenAmount: BN, scratchArea: string,\n                           senderKeyIn: string | TransactionSigner,\n                           btcFunderKeyIn?: string | TransactionSigner,\n                           buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n  const separateFunder = !!btcFunderKeyIn\n\n  const senderKey = getTransactionSigner(senderKeyIn)\n  const btcKey = btcFunderKeyIn ? getTransactionSigner(btcFunderKeyIn) : senderKey\n\n  const txPromise = network.getConsensusHash()\n    .then(consensusHash =>  makeTokenTransferSkeleton(\n      recipientAddress, consensusHash, tokenType, tokenAmount, scratchArea))\n\n  return Promise.all([senderKey.getAddress(), btcKey.getAddress()])\n    .then(([senderAddress, btcAddress]) => {\n      const btcUTXOsPromise = separateFunder\n        ? network.getUTXOs(btcAddress) : Promise.resolve<UTXO[]>([])\n      return Promise.all([\n        network.getUTXOs(senderAddress),\n        btcUTXOsPromise,\n        network.getFeeRate(),\n        txPromise\n      ]).then(([senderUTXOs, btcUTXOs, feeRate, tokenTransferTX]) => {\n        const txB = TransactionBuilder.fromTransaction(tokenTransferTX, network.layer1)\n\n        if (separateFunder) {\n          const payerInput = addOwnerInput(senderUTXOs, senderAddress, txB)\n          const signingTxB = fundTransaction(txB, btcAddress, btcUTXOs, feeRate, payerInput.value)\n          return signInputs(signingTxB, btcKey,\n                            [{ index: payerInput.index, signer: senderKey }])\n        } else {\n          const signingTxB = fundTransaction(txB, senderAddress, senderUTXOs, feeRate, 0)\n          return signInputs(signingTxB, senderKey)\n        }\n      })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a bitcoin spend to a specified address. This will fund up to `amount`\n *   of satoshis from the payer's UTXOs. It will generate a change output if and only\n *   if the amount of leftover change is *greater* than the additional fees associated\n *   with the extra output. If the requested amount is not enough to fund the transaction's\n *   associated fees, then this will reject with a InvalidAmountError\n *\n * UTXOs are selected largest to smallest, and UTXOs which cannot fund the fees associated\n *   with their own input will not be included.\n *\n * If you specify an amount > the total balance of the payer address, then this will\n *   generate a maximum spend transaction\n *\n * @param {String} destinationAddress - the address to receive the bitcoin payment\n * @param {String | TransactionSigner} paymentKeyIn - the private key\n *    used to fund the bitcoin spend\n * @param {number} amount - the amount in satoshis for the payment address to\n *    spend in this transaction\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * @private\n */\nasync function makeBitcoinSpend(destinationAddress: string,\n                                paymentKeyIn: string | TransactionSigner,\n                                amount: number,\n                                buildIncomplete: boolean = false\n): Promise<string> {\n  if (amount <= 0) {\n    return Promise.reject(new InvalidParameterError('amount', 'amount must be greater than zero'))\n  }\n\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const paymentAddress = await paymentKey.getAddress()\n\n  return Promise.all([network.getUTXOs(paymentAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = new TransactionBuilder(network.layer1)\n      txB.setVersion(1)\n      const destinationIndex = txB.addOutput(destinationAddress, 0)\n\n      // will add utxos up to _amount_ and return the amount of leftover _change_\n      let change\n      try {\n        change = addUTXOsToFund(txB, utxos, amount, feeRate, false)\n      } catch (err) {\n        if (err.name === 'NotEnoughFundsError') {\n          // actual amount funded = amount requested - remainder\n          amount -= err.leftToFund\n          change = 0\n        } else {\n          throw err\n        }\n      }\n\n      let feesToPay = feeRate * estimateTXBytes(txB, 0, 0)\n      const feeForChange = feeRate * (estimateTXBytes(txB, 0, 1)) - feesToPay\n\n      // it's worthwhile to add a change output\n      if (change > feeForChange) {\n        feesToPay += feeForChange\n        txB.addOutput(paymentAddress, change)\n      }\n\n      // now let's compute how much output is leftover once we pay the fees.\n      const outputAmount = amount - feesToPay\n      if (outputAmount < DUST_MINIMUM) {\n        throw new InvalidAmountError(feesToPay, amount)\n      }\n\n      // we need to manually set the output values now\n      const txInner = getTransactionInsideBuilder(txB)\n      const txOut = txInner.outs[destinationIndex] as TxOutput\n      txOut.value = outputAmount\n\n      // ready to sign.\n      return signInputs(txB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\nexport const transactions = {\n  makeRenewal,\n  makeUpdate,\n  makePreorder,\n  makeRegister,\n  makeTransfer,\n  makeRevoke,\n  makeNamespacePreorder,\n  makeNamespaceReveal,\n  makeNamespaceReady,\n  makeBitcoinSpend,\n  makeNameImport,\n  makeAnnounce,\n  makeTokenTransfer,\n  BlockstackNamespace,\n  estimatePreorder,\n  estimateRegister,\n  estimateTransfer,\n  estimateUpdate,\n  estimateRenewal,\n  estimateRevoke,\n  estimateNamespacePreorder,\n  estimateNamespaceReveal,\n  estimateNamespaceReady,\n  estimateNameImport,\n  estimateAnnounce,\n  estimateTokenTransfer\n}\n","import { payments, bip32, BIP32Interface, ECPair } from 'bitcoinjs-lib'\nimport { mnemonicToSeed, generateMnemonic } from 'bip39'\nimport { encryptMnemonic, decryptMnemonic } from './encryption/wallet'\nimport { randomBytes, GetRandomBytes } from './encryption/cryptoRandom'\nimport { hashSha256Sync } from './encryption/sha2Hash'\nimport { TriplesecDecryptSignature } from './encryption/cryptoUtils'\nimport { ecPairToHexString } from './keys'\n\nconst APPS_NODE_INDEX = 0\nconst IDENTITY_KEYCHAIN = 888\nconst BLOCKSTACK_ON_BITCOIN = 0\n\nconst BITCOIN_BIP_44_PURPOSE = 44\nconst BITCOIN_COIN_TYPE = 0\nconst BITCOIN_ACCOUNT_INDEX = 0\n\nconst EXTERNAL_ADDRESS = 'EXTERNAL_ADDRESS'\nconst CHANGE_ADDRESS = 'CHANGE_ADDRESS'\n\n/**\n * \n * @ignore\n */\nexport type IdentityKeyPair = {\n  key: string,\n  keyID: string,\n  address: string,\n  appsNodeKey: string,\n  salt: string\n}\n\n/**\n * \n * @ignore\n */\nfunction hashCode(string: string) {\n  let hash = 0\n  if (string.length === 0) return hash\n  for (let i = 0; i < string.length; i++) {\n    const character = string.charCodeAt(i)\n    hash = (hash << 5) - hash + character\n    hash &= hash\n  }\n  return hash & 0x7fffffff\n}\n\n/**\n * \n * @ignore\n */\nfunction getNodePrivateKey(node: BIP32Interface): string {\n  return ecPairToHexString(ECPair.fromPrivateKey(node.privateKey))\n}\n\n/**\n * \n * @ignore\n */\nfunction getNodePublicKey(node: BIP32Interface): string {\n  return node.publicKey.toString('hex')\n}\n\n/**\n * Get a BIP32 node for an application-specific domain.\n * @param {String} appsNode - the BIP32Interface ir base58-encoded private key for\n * applications node\n * @param {String} salt - a string, used to salt the\n * application-specific addresses\n * @param {String} appDomain - the appDomain to generate a key for\n * @return {String} the private key hex-string. this will be a 64\n * character string\n * @ignore\n */\nexport function getLegacyAppNode(appsNode: string | BIP32Interface, \n                                 salt: string, appDomain: string): BIP32Interface {\n  const hashBuffer = hashSha256Sync(Buffer.from(`${appDomain}${salt}`))\n  const hash = hashBuffer.toString('hex')\n  const appIndex = hashCode(hash)\n  const appNodeInstance = typeof appsNode === 'string' ? bip32.fromBase58(appsNode) : appsNode\n  return appNodeInstance.deriveHardened(appIndex)\n}\n\n/**\n * The `BlockstackWallet` class manages the hierarchical derivation\n * paths for a standard Blockstack client wallet. This includes paths\n * for Bitcoin payment address, Blockstack identity addresses, Blockstack\n * application specific addresses.\n * \n * @ignore\n */\nexport class BlockstackWallet {\n  rootNode: BIP32Interface\n\n  constructor(rootNode: BIP32Interface) {\n    this.rootNode = rootNode\n  }\n\n  toBase58(): string {\n    return this.rootNode.toBase58()\n  }\n\n  /**\n   * Initialize a Blockstack wallet from a seed buffer\n   * @param {Buffer} seed - the input seed for initializing the root node\n   *  of the hierarchical wallet\n   * @return {BlockstackWallet} the constructed wallet\n   */\n  static fromSeedBuffer(seed: Buffer): BlockstackWallet {\n    return new BlockstackWallet(bip32.fromSeed(seed))\n  }\n\n  /**\n   * Initialize a Blockstack wallet from a base58 string\n   * @param {string} keychain - the Base58 string used to initialize\n   *  the root node of the hierarchical wallet\n   * @return {BlockstackWallet} the constructed wallet\n   */\n  static fromBase58(keychain: string): BlockstackWallet {\n    return new BlockstackWallet(bip32.fromBase58(keychain))\n  }\n\n  /**\n   * Initialize a blockstack wallet from an encrypted phrase & password. Throws\n   * if the password is incorrect. Supports all formats of Blockstack phrases.\n   * @param {string} data - The encrypted phrase as a hex-encoded string\n   * @param {string} password - The plain password\n   * @return {Promise<BlockstackWallet>} the constructed wallet\n   * \n   * @ignore\n   */\n  static async fromEncryptedMnemonic(data: string | Buffer, password: string, \n                                     triplesecDecrypt: TriplesecDecryptSignature\n  ): Promise<BlockstackWallet> {\n    try {\n      const mnemonic = await decryptMnemonic(data, password, triplesecDecrypt)\n      const seed = await mnemonicToSeed(mnemonic)\n      return new BlockstackWallet(bip32.fromSeed(seed))\n    } catch (err) {\n      if (err.message && err.message.startsWith('bad header;')) {\n        throw new Error('Incorrect password')\n      } else {\n        throw err\n      }\n    }\n  }\n\n  /**\n   * Generate a BIP-39 12 word mnemonic\n   * @return {Promise<string>} space-separated 12 word phrase\n   */\n  static generateMnemonic() {\n    return generateMnemonic(128, randomBytes)\n  }\n\n  /**\n   * Encrypt a mnemonic phrase with a password\n   * @param {string} mnemonic - Raw mnemonic phrase\n   * @param {string} password - Password to encrypt mnemonic with\n   * @return {Promise<string>} Hex-encoded encrypted mnemonic\n   * \n   */\n  static async encryptMnemonic(mnemonic: string, password: string, opts?: {\n    getRandomBytes?: GetRandomBytes\n  }): Promise<string> {\n    const encryptedBuffer = await encryptMnemonic(mnemonic, password, opts)\n    return encryptedBuffer.toString('hex')\n  }\n\n  getIdentityPrivateKeychain(): BIP32Interface { \n    return this.rootNode\n      .deriveHardened(IDENTITY_KEYCHAIN)\n      .deriveHardened(BLOCKSTACK_ON_BITCOIN)\n  }\n\n  getBitcoinPrivateKeychain(): BIP32Interface { \n    return this.rootNode\n      .deriveHardened(BITCOIN_BIP_44_PURPOSE)\n      .deriveHardened(BITCOIN_COIN_TYPE)\n      .deriveHardened(BITCOIN_ACCOUNT_INDEX)\n  }\n\n  getBitcoinNode(addressIndex: number, chainType: string = EXTERNAL_ADDRESS): BIP32Interface {\n    return BlockstackWallet.getNodeFromBitcoinKeychain(\n      this.getBitcoinPrivateKeychain().toBase58(),\n      addressIndex,\n      chainType\n    )\n  }\n\n  getIdentityAddressNode(identityIndex: number): BIP32Interface {\n    const identityPrivateKeychain = this.getIdentityPrivateKeychain()\n    return identityPrivateKeychain.deriveHardened(identityIndex)\n  }\n\n  static getAppsNode(identityNode: BIP32Interface): BIP32Interface {\n    return identityNode.deriveHardened(APPS_NODE_INDEX)\n  }\n\n  /**\n   * Get a salt for use with creating application specific addresses\n   * @return {String} the salt\n   */\n  getIdentitySalt(): string {\n    const identityPrivateKeychain = this.getIdentityPrivateKeychain()\n    // NOTE: This is being decoded as a utf8 string rather than a hex string\n    const publicKeyHex = Buffer.from(getNodePublicKey(identityPrivateKeychain))\n    return hashSha256Sync(publicKeyHex).toString('hex')\n  }\n\n  /**\n   * Get a bitcoin receive address at a given index\n   * @param {number} addressIndex - the index of the address\n   * @return {String} address\n   */\n  getBitcoinAddress(addressIndex: number): string { \n    return BlockstackWallet.getAddressFromBIP32Node(this.getBitcoinNode(addressIndex))\n  }\n\n  /**\n   * Get the private key hex-string for a given bitcoin receive address\n   * @param {number} addressIndex - the index of the address\n   * @return {String} the hex-string. this will be either 64\n   * characters long to denote an uncompressed bitcoin address, or 66\n   * characters long for a compressed bitcoin address.\n   */\n  getBitcoinPrivateKey(addressIndex: number): string {\n    return getNodePrivateKey(this.getBitcoinNode(addressIndex))\n  }\n\n  /**\n   * Get the root node for the bitcoin public keychain\n   * @return {String} base58-encoding of the public node\n   */\n  getBitcoinPublicKeychain(): BIP32Interface {\n    return this.getBitcoinPrivateKeychain().neutered()\n  }\n\n  /**\n   * Get the root node for the identity public keychain\n   * @return {String} base58-encoding of the public node\n   */\n  getIdentityPublicKeychain(): BIP32Interface {\n    return this.getIdentityPrivateKeychain().neutered()\n  }\n\n  static getNodeFromBitcoinKeychain(\n    keychainBase58: string,\n    addressIndex: number,\n    chainType: string = EXTERNAL_ADDRESS\n  ): BIP32Interface {\n    let chain\n    if (chainType === EXTERNAL_ADDRESS) {\n      chain = 0\n    } else if (chainType === CHANGE_ADDRESS) {\n      chain = 1\n    } else {\n      throw new Error('Invalid chain type')\n    }\n    const keychain = bip32.fromBase58(keychainBase58)\n\n    return keychain.derive(chain).derive(addressIndex)\n  }\n\n  /**\n   * Get a bitcoin address given a base-58 encoded bitcoin node\n   * (usually called the account node)\n   * @param {String} keychainBase58 - base58-encoding of the node\n   * @param {number} addressIndex - index of the address to get\n   * @param {String} chainType - either 'EXTERNAL_ADDRESS' (for a\n   * \"receive\" address) or 'CHANGE_ADDRESS'\n   * @return {String} the address\n   */\n  static getAddressFromBitcoinKeychain(keychainBase58: string, addressIndex: number,\n                                       chainType: string = EXTERNAL_ADDRESS): string {\n    return BlockstackWallet.getAddressFromBIP32Node(BlockstackWallet\n      .getNodeFromBitcoinKeychain(keychainBase58, addressIndex, chainType))\n  }\n\n  /**\n   * Get a ECDSA private key hex-string for an application-specific\n   *  address.\n   * @param {String} appsNodeKey - the base58-encoded private key for\n   * applications node (the `appsNodeKey` return in getIdentityKeyPair())\n   * @param {String} salt - a string, used to salt the\n   * application-specific addresses\n   * @param {String} appDomain - the appDomain to generate a key for\n   * @return {String} the private key hex-string. this will be a 64\n   * character string\n   */\n  static getLegacyAppPrivateKey(appsNodeKey: string, \n                                salt: string, appDomain: string): string {\n    const appNode = getLegacyAppNode(appsNodeKey, salt, appDomain)\n    return getNodePrivateKey(appNode).slice(0, 64)\n  }\n\n  static getAddressFromBIP32Node(node: BIP32Interface) {\n    return payments.p2pkh({ pubkey: node.publicKey }).address\n  }\n\n  /**\n   * Get a ECDSA private key hex-string for an application-specific\n   *  address.\n   * @param {String} appsNodeKey - the base58-encoded private key for\n   * applications node (the `appsNodeKey` return in getIdentityKeyPair())\n   * @param {String} salt - a string, used to salt the\n   * application-specific addresses\n   * @param {String} appDomain - the appDomain to generate a key for\n   * @return {String} the private key hex-string. this will be a 64\n   * character string\n   */\n  static getAppPrivateKey(appsNodeKey: string, salt: string, appDomain: string): \n    string {\n    const hashBuffer = hashSha256Sync(Buffer.from(`${appDomain}${salt}`))\n    const hash = hashBuffer.toString('hex')\n    const appIndexHexes: string[] = []\n    // note: there's hardcoded numbers here, precisely because I want this\n    //   code to be very specific to the derivation paths we expect.\n    if (hash.length !== 64) {\n      throw new Error(`Unexpected app-domain hash length of ${hash.length}`)\n    }\n    for (let i = 0; i < 11; i++) { // split the hash into 3-byte chunks\n      // because child nodes can only be up to 2^31,\n      // and we shouldn't deal in partial bytes.\n      appIndexHexes.push(hash.slice(i * 6, i * 6 + 6))\n    }\n    let appNode = bip32.fromBase58(appsNodeKey)\n    appIndexHexes.forEach((hex) => {\n      if (hex.length > 6) {\n        throw new Error('Invalid hex string length')\n      }\n      appNode = appNode.deriveHardened(parseInt(hex, 16))\n    })\n    return getNodePrivateKey(appNode).slice(0, 64)\n  }\n\n  /**\n   * Get the keypair information for a given identity index. This\n   * information is used to obtain the private key for an identity address\n   * and derive application specific keys for that address.\n   * @param {number} addressIndex - the identity index\n   * @param {boolean} alwaysUncompressed - if true, always return a\n   *   private-key hex string corresponding to the uncompressed address\n   * @return {Object} an IdentityKeyPair type object with keys:\n   *   .key {String} - the private key hex-string\n   *   .keyID {String} - the public key hex-string\n   *   .address {String} - the identity address\n   *   .appsNodeKey {String} - the base-58 encoding of the applications node\n   *   .salt {String} - the salt used for creating app-specific addresses\n   */\n  getIdentityKeyPair(addressIndex: number, \n                     alwaysUncompressed: boolean = false): IdentityKeyPair {\n    const identityNode = this.getIdentityAddressNode(addressIndex)\n\n    const address = BlockstackWallet.getAddressFromBIP32Node(identityNode)\n    let identityKey = getNodePrivateKey(identityNode)\n    if (alwaysUncompressed && identityKey.length === 66) {\n      identityKey = identityKey.slice(0, 64)\n    }\n\n    const identityKeyID = getNodePublicKey(identityNode)\n    const appsNodeKey = BlockstackWallet.getAppsNode(identityNode).toBase58()\n    const salt = this.getIdentitySalt()\n    const keyPair = {\n      key: identityKey,\n      keyID: identityKeyID,\n      address,\n      appsNodeKey,\n      salt\n    }\n    return keyPair\n  }\n}\n","var MAX_ALLOC = Math.pow(2, 30) - 1 // default in iojs\n\nfunction checkBuffer (buf, name) {\n  if (typeof buf !== 'string' && !Buffer.isBuffer(buf)) {\n    throw new TypeError(name + ' must be a buffer or string')\n  }\n}\n\nmodule.exports = function (password, salt, iterations, keylen) {\n  checkBuffer(password, 'Password')\n  checkBuffer(salt, 'Salt')\n\n  if (typeof iterations !== 'number') {\n    throw new TypeError('Iterations not a number')\n  }\n\n  if (iterations < 0) {\n    throw new TypeError('Bad iterations')\n  }\n\n  if (typeof keylen !== 'number') {\n    throw new TypeError('Key length not a number')\n  }\n\n  if (keylen < 0 || keylen > MAX_ALLOC || keylen !== keylen) { /* eslint no-self-compare: 0 */\n    throw new TypeError('Bad key length')\n  }\n}\n","var defaultEncoding\n/* istanbul ignore next */\nif (process.browser) {\n  defaultEncoding = 'utf-8'\n} else {\n  var pVersionMajor = parseInt(process.version.split('.')[0].slice(1), 10)\n\n  defaultEncoding = pVersionMajor >= 6 ? 'utf-8' : 'binary'\n}\nmodule.exports = defaultEncoding\n","var md5 = require('create-hash/md5')\nvar RIPEMD160 = require('ripemd160')\nvar sha = require('sha.js')\n\nvar checkParameters = require('./precondition')\nvar defaultEncoding = require('./default-encoding')\nvar Buffer = require('safe-buffer').Buffer\nvar ZEROS = Buffer.alloc(128)\nvar sizes = {\n  md5: 16,\n  sha1: 20,\n  sha224: 28,\n  sha256: 32,\n  sha384: 48,\n  sha512: 64,\n  rmd160: 20,\n  ripemd160: 20\n}\n\nfunction Hmac (alg, key, saltLen) {\n  var hash = getDigest(alg)\n  var blocksize = (alg === 'sha512' || alg === 'sha384') ? 128 : 64\n\n  if (key.length > blocksize) {\n    key = hash(key)\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = Buffer.allocUnsafe(blocksize + sizes[alg])\n  var opad = Buffer.allocUnsafe(blocksize + sizes[alg])\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  var ipad1 = Buffer.allocUnsafe(blocksize + saltLen + 4)\n  ipad.copy(ipad1, 0, 0, blocksize)\n  this.ipad1 = ipad1\n  this.ipad2 = ipad\n  this.opad = opad\n  this.alg = alg\n  this.blocksize = blocksize\n  this.hash = hash\n  this.size = sizes[alg]\n}\n\nHmac.prototype.run = function (data, ipad) {\n  data.copy(ipad, this.blocksize)\n  var h = this.hash(ipad)\n  h.copy(this.opad, this.blocksize)\n  return this.hash(this.opad)\n}\n\nfunction getDigest (alg) {\n  function shaFunc (data) {\n    return sha(alg).update(data).digest()\n  }\n  function rmd160Func (data) {\n    return new RIPEMD160().update(data).digest()\n  }\n\n  if (alg === 'rmd160' || alg === 'ripemd160') return rmd160Func\n  if (alg === 'md5') return md5\n  return shaFunc\n}\n\nfunction pbkdf2 (password, salt, iterations, keylen, digest) {\n  checkParameters(password, salt, iterations, keylen)\n\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, defaultEncoding)\n  if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, defaultEncoding)\n\n  digest = digest || 'sha1'\n\n  var hmac = new Hmac(digest, password, salt.length)\n\n  var DK = Buffer.allocUnsafe(keylen)\n  var block1 = Buffer.allocUnsafe(salt.length + 4)\n  salt.copy(block1, 0, 0, salt.length)\n\n  var destPos = 0\n  var hLen = sizes[digest]\n  var l = Math.ceil(keylen / hLen)\n\n  for (var i = 1; i <= l; i++) {\n    block1.writeUInt32BE(i, salt.length)\n\n    var T = hmac.run(block1, hmac.ipad1)\n    var U = T\n\n    for (var j = 1; j < iterations; j++) {\n      U = hmac.run(U, hmac.ipad2)\n      for (var k = 0; k < hLen; k++) T[k] ^= U[k]\n    }\n\n    T.copy(DK, destPos)\n    destPos += hLen\n  }\n\n  return DK\n}\n\nmodule.exports = pbkdf2\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// browserify by default only pulls in files that are hard coded in requires\n// In order of last to first in this file, the default wordlist will be chosen\n// based on what is present. (Bundles may remove wordlists they don't need)\nconst wordlists = {};\nexports.wordlists = wordlists;\nlet _default;\nexports._default = _default;\ntry {\n    exports._default = _default = require('./wordlists/chinese_simplified.json');\n    wordlists.chinese_simplified = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/chinese_traditional.json');\n    wordlists.chinese_traditional = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/korean.json');\n    wordlists.korean = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/french.json');\n    wordlists.french = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/italian.json');\n    wordlists.italian = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/spanish.json');\n    wordlists.spanish = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/japanese.json');\n    wordlists.japanese = _default;\n    wordlists.JA = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/english.json');\n    wordlists.english = _default;\n    wordlists.EN = _default;\n}\ncatch (err) { }\n","/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n","// Extracted from https://github.com/crypto-browserify/ripemd160\nconst ARRAY16 = new Array(16);\nconst zl = [\n    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n    7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n    3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n    1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n    4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\nconst zr = [\n    5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n    6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n    15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n    8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n    12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\nconst sl = [\n    11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n    7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n    11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n    11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n    9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\nconst sr = [\n    8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n    9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n    9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n    15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n    8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\nconst hl = [0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e];\nconst hr = [0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000];\nfunction rotl(x, n) {\n    return (x << n) | (x >>> (32 - n));\n}\nfunction fn1(a, b, c, d, e, m, k, s) {\n    return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + e) | 0;\n}\nfunction fn2(a, b, c, d, e, m, k, s) {\n    return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + e) | 0;\n}\nfunction fn3(a, b, c, d, e, m, k, s) {\n    return (rotl((a + ((b | (~c)) ^ d) + m + k) | 0, s) + e) | 0;\n}\nfunction fn4(a, b, c, d, e, m, k, s) {\n    return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + e) | 0;\n}\nfunction fn5(a, b, c, d, e, m, k, s) {\n    return (rotl((a + (b ^ (c | (~d))) + m + k) | 0, s) + e) | 0;\n}\nfunction readInt32LE(buffer, offset) {\n    offset >>>= 0;\n    return (buffer[offset])\n        | (buffer[offset + 1] << 8)\n        | (buffer[offset + 2] << 16)\n        | (buffer[offset + 3] << 24);\n}\nfunction writeUInt32LE(buffer, value, offset) {\n    value = +value;\n    offset >>>= 0;\n    buffer[offset + 3] = (value >>> 24);\n    buffer[offset + 2] = (value >>> 16);\n    buffer[offset + 1] = (value >>> 8);\n    buffer[offset] = (value & 0xff);\n    return offset + 4;\n}\nfunction writeInt32LE(buffer, value, offset) {\n    value = +value;\n    offset >>>= 0;\n    buffer[offset] = (value & 0xff);\n    buffer[offset + 1] = (value >>> 8);\n    buffer[offset + 2] = (value >>> 16);\n    buffer[offset + 3] = (value >>> 24);\n    return offset + 4;\n}\nfunction createArray(size) {\n    if (typeof Uint8Array !== 'undefined') {\n        return new Uint8Array(size);\n    }\n    else {\n        return new Array(size);\n    }\n}\nexport default class RIPEMD160 {\n    constructor() {\n        this._block = createArray(64);\n        this._blockSize = 64;\n        this._blockOffset = 0;\n        this._length = [0, 0, 0, 0];\n        this._finalized = false;\n        this._a = 0x67452301;\n        this._b = 0xefcdab89;\n        this._c = 0x98badcfe;\n        this._d = 0x10325476;\n        this._e = 0xc3d2e1f0;\n    }\n    update(data) {\n        if (this._finalized)\n            throw new Error('Digest already called');\n        // consume data\n        const block = this._block;\n        let offset = 0;\n        while (this._blockOffset + data.length - offset >= this._blockSize) {\n            for (let i = this._blockOffset; i < this._blockSize;)\n                block[i++] = data[offset++];\n            this._update();\n            this._blockOffset = 0;\n        }\n        while (offset < data.length)\n            block[this._blockOffset++] = data[offset++];\n        // update length\n        for (let j = 0, carry = data.length * 8; carry > 0; ++j) {\n            this._length[j] += carry;\n            carry = (this._length[j] / 0x0100000000) | 0;\n            if (carry > 0)\n                this._length[j] -= 0x0100000000 * carry;\n        }\n        return this;\n    }\n    _update() {\n        const words = ARRAY16;\n        for (let j = 0; j < 16; ++j) {\n            words[j] = readInt32LE(this._block, j * 4);\n        }\n        let al = this._a | 0;\n        let bl = this._b | 0;\n        let cl = this._c | 0;\n        let dl = this._d | 0;\n        let el = this._e | 0;\n        let ar = this._a | 0;\n        let br = this._b | 0;\n        let cr = this._c | 0;\n        let dr = this._d | 0;\n        let er = this._e | 0;\n        // computation\n        for (let i = 0; i < 80; i += 1) {\n            let tl;\n            let tr;\n            if (i < 16) {\n                tl = fn1(al, bl, cl, dl, el, words[zl[i]], hl[0], sl[i]);\n                tr = fn5(ar, br, cr, dr, er, words[zr[i]], hr[0], sr[i]);\n            }\n            else if (i < 32) {\n                tl = fn2(al, bl, cl, dl, el, words[zl[i]], hl[1], sl[i]);\n                tr = fn4(ar, br, cr, dr, er, words[zr[i]], hr[1], sr[i]);\n            }\n            else if (i < 48) {\n                tl = fn3(al, bl, cl, dl, el, words[zl[i]], hl[2], sl[i]);\n                tr = fn3(ar, br, cr, dr, er, words[zr[i]], hr[2], sr[i]);\n            }\n            else if (i < 64) {\n                tl = fn4(al, bl, cl, dl, el, words[zl[i]], hl[3], sl[i]);\n                tr = fn2(ar, br, cr, dr, er, words[zr[i]], hr[3], sr[i]);\n            }\n            else { // if (i<80) {\n                tl = fn5(al, bl, cl, dl, el, words[zl[i]], hl[4], sl[i]);\n                tr = fn1(ar, br, cr, dr, er, words[zr[i]], hr[4], sr[i]);\n            }\n            al = el;\n            el = dl;\n            dl = rotl(cl, 10);\n            cl = bl;\n            bl = tl;\n            ar = er;\n            er = dr;\n            dr = rotl(cr, 10);\n            cr = br;\n            br = tr;\n        }\n        // update state\n        const t = (this._b + cl + dr) | 0;\n        this._b = (this._c + dl + er) | 0;\n        this._c = (this._d + el + ar) | 0;\n        this._d = (this._e + al + br) | 0;\n        this._e = (this._a + bl + cr) | 0;\n        this._a = t;\n    }\n    digest() {\n        if (this._finalized) {\n            throw new Error('Digest already called');\n        }\n        this._finalized = true;\n        // create padding and handle blocks\n        this._block[this._blockOffset++] = 0x80;\n        if (this._blockOffset > 56) {\n            this._block.fill(0, this._blockOffset, 64);\n            this._update();\n            this._blockOffset = 0;\n        }\n        this._block.fill(0, this._blockOffset, 56);\n        writeUInt32LE(this._block, this._length[0], 56);\n        writeUInt32LE(this._block, this._length[1], 60);\n        this._update();\n        // produce result\n        const buffer = createArray(20);\n        writeInt32LE(buffer, this._a, 0);\n        writeInt32LE(buffer, this._b, 4);\n        writeInt32LE(buffer, this._c, 8);\n        writeInt32LE(buffer, this._d, 12);\n        writeInt32LE(buffer, this._e, 16);\n        // reset state\n        this._block.fill(0);\n        this._blockOffset = 0;\n        for (let i = 0; i < 4; ++i) {\n            this._length[i] = 0;\n        }\n        return buffer;\n    }\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bip32_1 = require(\"./bip32\");\nexports.fromSeed = bip32_1.fromSeed;\nexports.fromBase58 = bip32_1.fromBase58;\nexports.fromPublicKey = bip32_1.fromPublicKey;\nexports.fromPrivateKey = bip32_1.fromPrivateKey;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto = require(\"./crypto\");\nconst bs58check = require('bs58check');\nconst ecc = require('tiny-secp256k1');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst UINT256_TYPE = typeforce.BufferN(32);\nconst NETWORK_TYPE = typeforce.compile({\n    wif: typeforce.UInt8,\n    bip32: {\n        public: typeforce.UInt32,\n        private: typeforce.UInt32,\n    },\n});\nconst BITCOIN = {\n    wif: 0x80,\n    bip32: {\n        public: 0x0488b21e,\n        private: 0x0488ade4,\n    },\n};\nconst HIGHEST_BIT = 0x80000000;\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction BIP32Path(value) {\n    return (typeforce.String(value) && value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/) !== null);\n}\nfunction UInt31(value) {\n    return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nclass BIP32 {\n    constructor(__D, __Q, chainCode, network, __DEPTH = 0, __INDEX = 0, __PARENT_FINGERPRINT = 0x00000000) {\n        this.__D = __D;\n        this.__Q = __Q;\n        this.chainCode = chainCode;\n        this.network = network;\n        this.__DEPTH = __DEPTH;\n        this.__INDEX = __INDEX;\n        this.__PARENT_FINGERPRINT = __PARENT_FINGERPRINT;\n        typeforce(NETWORK_TYPE, network);\n        this.lowR = false;\n    }\n    get depth() {\n        return this.__DEPTH;\n    }\n    get index() {\n        return this.__INDEX;\n    }\n    get parentFingerprint() {\n        return this.__PARENT_FINGERPRINT;\n    }\n    get publicKey() {\n        if (this.__Q === undefined)\n            this.__Q = ecc.pointFromScalar(this.__D, true);\n        return this.__Q;\n    }\n    get privateKey() {\n        return this.__D;\n    }\n    get identifier() {\n        return crypto.hash160(this.publicKey);\n    }\n    get fingerprint() {\n        return this.identifier.slice(0, 4);\n    }\n    // Private === not neutered\n    // Public === neutered\n    isNeutered() {\n        return this.__D === undefined;\n    }\n    neutered() {\n        return fromPublicKeyLocal(this.publicKey, this.chainCode, this.network, this.depth, this.index, this.parentFingerprint);\n    }\n    toBase58() {\n        const network = this.network;\n        const version = !this.isNeutered()\n            ? network.bip32.private\n            : network.bip32.public;\n        const buffer = Buffer.allocUnsafe(78);\n        // 4 bytes: version bytes\n        buffer.writeUInt32BE(version, 0);\n        // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ....\n        buffer.writeUInt8(this.depth, 4);\n        // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n        buffer.writeUInt32BE(this.parentFingerprint, 5);\n        // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n        // This is encoded in big endian. (0x00000000 if master key)\n        buffer.writeUInt32BE(this.index, 9);\n        // 32 bytes: the chain code\n        this.chainCode.copy(buffer, 13);\n        // 33 bytes: the public key or private key data\n        if (!this.isNeutered()) {\n            // 0x00 + k for private keys\n            buffer.writeUInt8(0, 45);\n            this.privateKey.copy(buffer, 46);\n            // 33 bytes: the public key\n        }\n        else {\n            // X9.62 encoding for public keys\n            this.publicKey.copy(buffer, 45);\n        }\n        return bs58check.encode(buffer);\n    }\n    toWIF() {\n        if (!this.privateKey)\n            throw new TypeError('Missing private key');\n        return wif.encode(this.network.wif, this.privateKey, true);\n    }\n    // https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#child-key-derivation-ckd-functions\n    derive(index) {\n        typeforce(typeforce.UInt32, index);\n        const isHardened = index >= HIGHEST_BIT;\n        const data = Buffer.allocUnsafe(37);\n        // Hardened child\n        if (isHardened) {\n            if (this.isNeutered())\n                throw new TypeError('Missing private key for hardened child key');\n            // data = 0x00 || ser256(kpar) || ser32(index)\n            data[0] = 0x00;\n            this.privateKey.copy(data, 1);\n            data.writeUInt32BE(index, 33);\n            // Normal child\n        }\n        else {\n            // data = serP(point(kpar)) || ser32(index)\n            //      = serP(Kpar) || ser32(index)\n            this.publicKey.copy(data, 0);\n            data.writeUInt32BE(index, 33);\n        }\n        const I = crypto.hmacSHA512(this.chainCode, data);\n        const IL = I.slice(0, 32);\n        const IR = I.slice(32);\n        // if parse256(IL) >= n, proceed with the next value for i\n        if (!ecc.isPrivate(IL))\n            return this.derive(index + 1);\n        // Private parent key -> private child key\n        let hd;\n        if (!this.isNeutered()) {\n            // ki = parse256(IL) + kpar (mod n)\n            const ki = ecc.privateAdd(this.privateKey, IL);\n            // In case ki == 0, proceed with the next value for i\n            if (ki == null)\n                return this.derive(index + 1);\n            hd = fromPrivateKeyLocal(ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n            // Public parent key -> public child key\n        }\n        else {\n            // Ki = point(parse256(IL)) + Kpar\n            //    = G*IL + Kpar\n            const Ki = ecc.pointAddScalar(this.publicKey, IL, true);\n            // In case Ki is the point at infinity, proceed with the next value for i\n            if (Ki === null)\n                return this.derive(index + 1);\n            hd = fromPublicKeyLocal(Ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n        }\n        return hd;\n    }\n    deriveHardened(index) {\n        typeforce(UInt31, index);\n        // Only derives hardened private keys by default\n        return this.derive(index + HIGHEST_BIT);\n    }\n    derivePath(path) {\n        typeforce(BIP32Path, path);\n        let splitPath = path.split('/');\n        if (splitPath[0] === 'm') {\n            if (this.parentFingerprint)\n                throw new TypeError('Expected master, got child');\n            splitPath = splitPath.slice(1);\n        }\n        return splitPath.reduce((prevHd, indexStr) => {\n            let index;\n            if (indexStr.slice(-1) === `'`) {\n                index = parseInt(indexStr.slice(0, -1), 10);\n                return prevHd.deriveHardened(index);\n            }\n            else {\n                index = parseInt(indexStr, 10);\n                return prevHd.derive(index);\n            }\n        }, this);\n    }\n    sign(hash, lowR) {\n        if (!this.privateKey)\n            throw new Error('Missing private key');\n        if (lowR === undefined)\n            lowR = this.lowR;\n        if (lowR === false) {\n            return ecc.sign(hash, this.privateKey);\n        }\n        else {\n            let sig = ecc.sign(hash, this.privateKey);\n            const extraData = Buffer.alloc(32, 0);\n            let counter = 0;\n            // if first try is lowR, skip the loop\n            // for second try and on, add extra entropy counting up\n            while (sig[0] > 0x7f) {\n                counter++;\n                extraData.writeUIntLE(counter, 0, 6);\n                sig = ecc.signWithEntropy(hash, this.privateKey, extraData);\n            }\n            return sig;\n        }\n    }\n    verify(hash, signature) {\n        return ecc.verify(hash, this.publicKey, signature);\n    }\n}\nfunction fromBase58(inString, network) {\n    const buffer = bs58check.decode(inString);\n    if (buffer.length !== 78)\n        throw new TypeError('Invalid buffer length');\n    network = network || BITCOIN;\n    // 4 bytes: version bytes\n    const version = buffer.readUInt32BE(0);\n    if (version !== network.bip32.private && version !== network.bip32.public)\n        throw new TypeError('Invalid network version');\n    // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ...\n    const depth = buffer[4];\n    // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n    const parentFingerprint = buffer.readUInt32BE(5);\n    if (depth === 0) {\n        if (parentFingerprint !== 0x00000000)\n            throw new TypeError('Invalid parent fingerprint');\n    }\n    // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n    // This is encoded in MSB order. (0x00000000 if master key)\n    const index = buffer.readUInt32BE(9);\n    if (depth === 0 && index !== 0)\n        throw new TypeError('Invalid index');\n    // 32 bytes: the chain code\n    const chainCode = buffer.slice(13, 45);\n    let hd;\n    // 33 bytes: private key data (0x00 + k)\n    if (version === network.bip32.private) {\n        if (buffer.readUInt8(45) !== 0x00)\n            throw new TypeError('Invalid private key');\n        const k = buffer.slice(46, 78);\n        hd = fromPrivateKeyLocal(k, chainCode, network, depth, index, parentFingerprint);\n        // 33 bytes: public key data (0x02 + X or 0x03 + X)\n    }\n    else {\n        const X = buffer.slice(45, 78);\n        hd = fromPublicKeyLocal(X, chainCode, network, depth, index, parentFingerprint);\n    }\n    return hd;\n}\nexports.fromBase58 = fromBase58;\nfunction fromPrivateKey(privateKey, chainCode, network) {\n    return fromPrivateKeyLocal(privateKey, chainCode, network);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPrivateKeyLocal(privateKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        privateKey: UINT256_TYPE,\n        chainCode: UINT256_TYPE,\n    }, { privateKey, chainCode });\n    network = network || BITCOIN;\n    if (!ecc.isPrivate(privateKey))\n        throw new TypeError('Private key not in range [1, n)');\n    return new BIP32(privateKey, undefined, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromPublicKey(publicKey, chainCode, network) {\n    return fromPublicKeyLocal(publicKey, chainCode, network);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromPublicKeyLocal(publicKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        publicKey: typeforce.BufferN(33),\n        chainCode: UINT256_TYPE,\n    }, { publicKey, chainCode });\n    network = network || BITCOIN;\n    // verify the X coordinate is a point on the curve\n    if (!ecc.isPoint(publicKey))\n        throw new TypeError('Point is not on the curve');\n    return new BIP32(undefined, publicKey, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromSeed(seed, network) {\n    typeforce(typeforce.Buffer, seed);\n    if (seed.length < 16)\n        throw new TypeError('Seed should be at least 128 bits');\n    if (seed.length > 64)\n        throw new TypeError('Seed should be at most 512 bits');\n    network = network || BITCOIN;\n    const I = crypto.hmacSHA512(Buffer.from('Bitcoin seed', 'utf8'), seed);\n    const IL = I.slice(0, 32);\n    const IR = I.slice(32);\n    return fromPrivateKey(IL, IR, network);\n}\nexports.fromSeed = fromSeed;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst createHash = require('create-hash');\nconst createHmac = require('create-hmac');\nfunction hash160(buffer) {\n    const sha256Hash = createHash('sha256')\n        .update(buffer)\n        .digest();\n    try {\n        return createHash('rmd160')\n            .update(sha256Hash)\n            .digest();\n    }\n    catch (err) {\n        return createHash('ripemd160')\n            .update(sha256Hash)\n            .digest();\n    }\n}\nexports.hash160 = hash160;\nfunction hmacSHA512(key, data) {\n    return createHmac('sha512', key)\n        .update(data)\n        .digest();\n}\nexports.hmacSHA512 = hmacSHA512;\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","module.exports = require('./lib/_stream_writable.js');\n","module.exports = require('./lib/_stream_duplex.js');\n","module.exports = require('./readable').Transform\n","module.exports = require('./readable').PassThrough\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-0, as defined\n * in FIPS PUB 180-1\n * This source code is derived from sha1.js of the same repository.\n * The difference between SHA-0 and SHA-1 is just a bitwise rotate left\n * operation was added.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha, Hash)\n\nSha.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16]\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n","/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('inherits')\nvar Sha256 = require('./sha256')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar W = new Array(64)\n\nfunction Sha224 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha224, Sha256)\n\nSha224.prototype.init = function () {\n  this._a = 0xc1059ed8\n  this._b = 0x367cd507\n  this._c = 0x3070dd17\n  this._d = 0xf70e5939\n  this._e = 0xffc00b31\n  this._f = 0x68581511\n  this._g = 0x64f98fa7\n  this._h = 0xbefa4fa4\n\n  return this\n}\n\nSha224.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(28)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n\n  return H\n}\n\nmodule.exports = Sha224\n","var inherits = require('inherits')\nvar SHA512 = require('./sha512')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar W = new Array(160)\n\nfunction Sha384 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha384, SHA512)\n\nSha384.prototype.init = function () {\n  this._ah = 0xcbbb9d5d\n  this._bh = 0x629a292a\n  this._ch = 0x9159015a\n  this._dh = 0x152fecd8\n  this._eh = 0x67332667\n  this._fh = 0x8eb44a87\n  this._gh = 0xdb0c2e0d\n  this._hh = 0x47b5481d\n\n  this._al = 0xc1059ed8\n  this._bl = 0x367cd507\n  this._cl = 0x3070dd17\n  this._dl = 0xf70e5939\n  this._el = 0xffc00b31\n  this._fl = 0x68581511\n  this._gl = 0x64f98fa7\n  this._hl = 0xbefa4fa4\n\n  return this\n}\n\nSha384.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(48)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n\n  return H\n}\n\nmodule.exports = Sha384\n","'use strict'\nvar inherits = require('inherits')\nvar Buffer = require('safe-buffer').Buffer\n\nvar Base = require('cipher-base')\n\nvar ZEROS = Buffer.alloc(128)\nvar blocksize = 64\n\nfunction Hmac (alg, key) {\n  Base.call(this, 'digest')\n  if (typeof key === 'string') {\n    key = Buffer.from(key)\n  }\n\n  this._alg = alg\n  this._key = key\n\n  if (key.length > blocksize) {\n    key = alg(key)\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = this._ipad = Buffer.allocUnsafe(blocksize)\n  var opad = this._opad = Buffer.allocUnsafe(blocksize)\n\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  this._hash = [ipad]\n}\n\ninherits(Hmac, Base)\n\nHmac.prototype._update = function (data) {\n  this._hash.push(data)\n}\n\nHmac.prototype._final = function () {\n  var h = this._alg(Buffer.concat(this._hash))\n  return this._alg(Buffer.concat([this._opad, h]))\n}\nmodule.exports = Hmac\n","'use strict'\n\nvar base58 = require('bs58')\nvar Buffer = require('safe-buffer').Buffer\n\nmodule.exports = function (checksumFn) {\n  // Encode a buffer as a base58-check encoded string\n  function encode (payload) {\n    var checksum = checksumFn(payload)\n\n    return base58.encode(Buffer.concat([\n      payload,\n      checksum\n    ], payload.length + 4))\n  }\n\n  function decodeRaw (buffer) {\n    var payload = buffer.slice(0, -4)\n    var checksum = buffer.slice(-4)\n    var newChecksum = checksumFn(payload)\n\n    if (checksum[0] ^ newChecksum[0] |\n        checksum[1] ^ newChecksum[1] |\n        checksum[2] ^ newChecksum[2] |\n        checksum[3] ^ newChecksum[3]) return\n\n    return payload\n  }\n\n  // Decode a base58-check encoded string to a buffer, no result if checksum is wrong\n  function decodeUnsafe (string) {\n    var buffer = base58.decodeUnsafe(string)\n    if (!buffer) return\n\n    return decodeRaw(buffer)\n  }\n\n  function decode (string) {\n    var buffer = base58.decode(string)\n    var payload = decodeRaw(buffer, checksumFn)\n    if (!payload) throw new Error('Invalid checksum')\n    return payload\n  }\n\n  return {\n    encode: encode,\n    decode: decode,\n    decodeUnsafe: decodeUnsafe\n  }\n}\n","var basex = require('base-x')\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\n// @ts-ignore\nvar _Buffer = require('safe-buffer').Buffer\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  BASE_MAP.fill(255)\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (!_Buffer.isBuffer(source)) { throw new TypeError('Expected Buffer') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return _Buffer.alloc(0) }\n    var psz = 0\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = _Buffer.allocUnsafe(zeroes + (size - it4))\n    vch.fill(0x00, 0, zeroes)\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction ShortCurve(conf) {\n  Base.call(this, 'short', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.tinv = this.two.redInvm();\n\n  this.zeroA = this.a.fromRed().cmpn(0) === 0;\n  this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;\n\n  // If the curve is endomorphic, precalculate beta and lambda\n  this.endo = this._getEndomorphism(conf);\n  this._endoWnafT1 = new Array(4);\n  this._endoWnafT2 = new Array(4);\n}\ninherits(ShortCurve, Base);\nmodule.exports = ShortCurve;\n\nShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {\n  // No efficient endomorphism\n  if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)\n    return;\n\n  // Compute beta and lambda, that lambda * P = (beta * Px; Py)\n  var beta;\n  var lambda;\n  if (conf.beta) {\n    beta = new BN(conf.beta, 16).toRed(this.red);\n  } else {\n    var betas = this._getEndoRoots(this.p);\n    // Choose the smallest beta\n    beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];\n    beta = beta.toRed(this.red);\n  }\n  if (conf.lambda) {\n    lambda = new BN(conf.lambda, 16);\n  } else {\n    // Choose the lambda that is matching selected beta\n    var lambdas = this._getEndoRoots(this.n);\n    if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {\n      lambda = lambdas[0];\n    } else {\n      lambda = lambdas[1];\n      assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);\n    }\n  }\n\n  // Get basis vectors, used for balanced length-two representation\n  var basis;\n  if (conf.basis) {\n    basis = conf.basis.map(function(vec) {\n      return {\n        a: new BN(vec.a, 16),\n        b: new BN(vec.b, 16)\n      };\n    });\n  } else {\n    basis = this._getEndoBasis(lambda);\n  }\n\n  return {\n    beta: beta,\n    lambda: lambda,\n    basis: basis\n  };\n};\n\nShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {\n  // Find roots of for x^2 + x + 1 in F\n  // Root = (-1 +- Sqrt(-3)) / 2\n  //\n  var red = num === this.p ? this.red : BN.mont(num);\n  var tinv = new BN(2).toRed(red).redInvm();\n  var ntinv = tinv.redNeg();\n\n  var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);\n\n  var l1 = ntinv.redAdd(s).fromRed();\n  var l2 = ntinv.redSub(s).fromRed();\n  return [ l1, l2 ];\n};\n\nShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {\n  // aprxSqrt >= sqrt(this.n)\n  var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));\n\n  // 3.74\n  // Run EGCD, until r(L + 1) < aprxSqrt\n  var u = lambda;\n  var v = this.n.clone();\n  var x1 = new BN(1);\n  var y1 = new BN(0);\n  var x2 = new BN(0);\n  var y2 = new BN(1);\n\n  // NOTE: all vectors are roots of: a + b * lambda = 0 (mod n)\n  var a0;\n  var b0;\n  // First vector\n  var a1;\n  var b1;\n  // Second vector\n  var a2;\n  var b2;\n\n  var prevR;\n  var i = 0;\n  var r;\n  var x;\n  while (u.cmpn(0) !== 0) {\n    var q = v.div(u);\n    r = v.sub(q.mul(u));\n    x = x2.sub(q.mul(x1));\n    var y = y2.sub(q.mul(y1));\n\n    if (!a1 && r.cmp(aprxSqrt) < 0) {\n      a0 = prevR.neg();\n      b0 = x1;\n      a1 = r.neg();\n      b1 = x;\n    } else if (a1 && ++i === 2) {\n      break;\n    }\n    prevR = r;\n\n    v = u;\n    u = r;\n    x2 = x1;\n    x1 = x;\n    y2 = y1;\n    y1 = y;\n  }\n  a2 = r.neg();\n  b2 = x;\n\n  var len1 = a1.sqr().add(b1.sqr());\n  var len2 = a2.sqr().add(b2.sqr());\n  if (len2.cmp(len1) >= 0) {\n    a2 = a0;\n    b2 = b0;\n  }\n\n  // Normalize signs\n  if (a1.negative) {\n    a1 = a1.neg();\n    b1 = b1.neg();\n  }\n  if (a2.negative) {\n    a2 = a2.neg();\n    b2 = b2.neg();\n  }\n\n  return [\n    { a: a1, b: b1 },\n    { a: a2, b: b2 }\n  ];\n};\n\nShortCurve.prototype._endoSplit = function _endoSplit(k) {\n  var basis = this.endo.basis;\n  var v1 = basis[0];\n  var v2 = basis[1];\n\n  var c1 = v2.b.mul(k).divRound(this.n);\n  var c2 = v1.b.neg().mul(k).divRound(this.n);\n\n  var p1 = c1.mul(v1.a);\n  var p2 = c2.mul(v2.a);\n  var q1 = c1.mul(v1.b);\n  var q2 = c2.mul(v2.b);\n\n  // Calculate answer\n  var k1 = k.sub(p1).sub(p2);\n  var k2 = q1.add(q2).neg();\n  return { k1: k1, k2: k2 };\n};\n\nShortCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  // XXX Is there any way to tell if the number is odd without converting it\n  // to non-red form?\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nShortCurve.prototype.validate = function validate(point) {\n  if (point.inf)\n    return true;\n\n  var x = point.x;\n  var y = point.y;\n\n  var ax = this.a.redMul(x);\n  var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);\n  return y.redSqr().redISub(rhs).cmpn(0) === 0;\n};\n\nShortCurve.prototype._endoWnafMulAdd =\n    function _endoWnafMulAdd(points, coeffs, jacobianResult) {\n  var npoints = this._endoWnafT1;\n  var ncoeffs = this._endoWnafT2;\n  for (var i = 0; i < points.length; i++) {\n    var split = this._endoSplit(coeffs[i]);\n    var p = points[i];\n    var beta = p._getBeta();\n\n    if (split.k1.negative) {\n      split.k1.ineg();\n      p = p.neg(true);\n    }\n    if (split.k2.negative) {\n      split.k2.ineg();\n      beta = beta.neg(true);\n    }\n\n    npoints[i * 2] = p;\n    npoints[i * 2 + 1] = beta;\n    ncoeffs[i * 2] = split.k1;\n    ncoeffs[i * 2 + 1] = split.k2;\n  }\n  var res = this._wnafMulAdd(1, npoints, ncoeffs, i * 2, jacobianResult);\n\n  // Clean-up references to points and coefficients\n  for (var j = 0; j < i * 2; j++) {\n    npoints[j] = null;\n    ncoeffs[j] = null;\n  }\n  return res;\n};\n\nfunction Point(curve, x, y, isRed) {\n  Base.BasePoint.call(this, curve, 'affine');\n  if (x === null && y === null) {\n    this.x = null;\n    this.y = null;\n    this.inf = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    // Force redgomery representation when loading from JSON\n    if (isRed) {\n      this.x.forceRed(this.curve.red);\n      this.y.forceRed(this.curve.red);\n    }\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    this.inf = false;\n  }\n}\ninherits(Point, Base.BasePoint);\n\nShortCurve.prototype.point = function point(x, y, isRed) {\n  return new Point(this, x, y, isRed);\n};\n\nShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {\n  return Point.fromJSON(this, obj, red);\n};\n\nPoint.prototype._getBeta = function _getBeta() {\n  if (!this.curve.endo)\n    return;\n\n  var pre = this.precomputed;\n  if (pre && pre.beta)\n    return pre.beta;\n\n  var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);\n  if (pre) {\n    var curve = this.curve;\n    var endoMul = function(p) {\n      return curve.point(p.x.redMul(curve.endo.beta), p.y);\n    };\n    pre.beta = beta;\n    beta.precomputed = {\n      beta: null,\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(endoMul)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(endoMul)\n      }\n    };\n  }\n  return beta;\n};\n\nPoint.prototype.toJSON = function toJSON() {\n  if (!this.precomputed)\n    return [ this.x, this.y ];\n\n  return [ this.x, this.y, this.precomputed && {\n    doubles: this.precomputed.doubles && {\n      step: this.precomputed.doubles.step,\n      points: this.precomputed.doubles.points.slice(1)\n    },\n    naf: this.precomputed.naf && {\n      wnd: this.precomputed.naf.wnd,\n      points: this.precomputed.naf.points.slice(1)\n    }\n  } ];\n};\n\nPoint.fromJSON = function fromJSON(curve, obj, red) {\n  if (typeof obj === 'string')\n    obj = JSON.parse(obj);\n  var res = curve.point(obj[0], obj[1], red);\n  if (!obj[2])\n    return res;\n\n  function obj2point(obj) {\n    return curve.point(obj[0], obj[1], red);\n  }\n\n  var pre = obj[2];\n  res.precomputed = {\n    beta: null,\n    doubles: pre.doubles && {\n      step: pre.doubles.step,\n      points: [ res ].concat(pre.doubles.points.map(obj2point))\n    },\n    naf: pre.naf && {\n      wnd: pre.naf.wnd,\n      points: [ res ].concat(pre.naf.points.map(obj2point))\n    }\n  };\n  return res;\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  return this.inf;\n};\n\nPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.inf)\n    return p;\n\n  // P + O = P\n  if (p.inf)\n    return this;\n\n  // P + P = 2P\n  if (this.eq(p))\n    return this.dbl();\n\n  // P + (-P) = O\n  if (this.neg().eq(p))\n    return this.curve.point(null, null);\n\n  // P + Q = O\n  if (this.x.cmp(p.x) === 0)\n    return this.curve.point(null, null);\n\n  var c = this.y.redSub(p.y);\n  if (c.cmpn(0) !== 0)\n    c = c.redMul(this.x.redSub(p.x).redInvm());\n  var nx = c.redSqr().redISub(this.x).redISub(p.x);\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.inf)\n    return this;\n\n  // 2P = O\n  var ys1 = this.y.redAdd(this.y);\n  if (ys1.cmpn(0) === 0)\n    return this.curve.point(null, null);\n\n  var a = this.curve.a;\n\n  var x2 = this.x.redSqr();\n  var dyinv = ys1.redInvm();\n  var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);\n\n  var nx = c.redSqr().redISub(this.x.redAdd(this.x));\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.getX = function getX() {\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  return this.y.fromRed();\n};\n\nPoint.prototype.mul = function mul(k) {\n  k = new BN(k, 16);\n  if (this.isInfinity())\n    return this;\n  else if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else if (this.curve.endo)\n    return this.curve._endoWnafMulAdd([ this ], [ k ]);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs, true);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2, true);\n};\n\nPoint.prototype.eq = function eq(p) {\n  return this === p ||\n         this.inf === p.inf &&\n             (this.inf || this.x.cmp(p.x) === 0 && this.y.cmp(p.y) === 0);\n};\n\nPoint.prototype.neg = function neg(_precompute) {\n  if (this.inf)\n    return this;\n\n  var res = this.curve.point(this.x, this.y.redNeg());\n  if (_precompute && this.precomputed) {\n    var pre = this.precomputed;\n    var negate = function(p) {\n      return p.neg();\n    };\n    res.precomputed = {\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(negate)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(negate)\n      }\n    };\n  }\n  return res;\n};\n\nPoint.prototype.toJ = function toJ() {\n  if (this.inf)\n    return this.curve.jpoint(null, null, null);\n\n  var res = this.curve.jpoint(this.x, this.y, this.curve.one);\n  return res;\n};\n\nfunction JPoint(curve, x, y, z) {\n  Base.BasePoint.call(this, curve, 'jacobian');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.one;\n    this.y = this.curve.one;\n    this.z = new BN(0);\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = new BN(z, 16);\n  }\n  if (!this.x.red)\n    this.x = this.x.toRed(this.curve.red);\n  if (!this.y.red)\n    this.y = this.y.toRed(this.curve.red);\n  if (!this.z.red)\n    this.z = this.z.toRed(this.curve.red);\n\n  this.zOne = this.z === this.curve.one;\n}\ninherits(JPoint, Base.BasePoint);\n\nShortCurve.prototype.jpoint = function jpoint(x, y, z) {\n  return new JPoint(this, x, y, z);\n};\n\nJPoint.prototype.toP = function toP() {\n  if (this.isInfinity())\n    return this.curve.point(null, null);\n\n  var zinv = this.z.redInvm();\n  var zinv2 = zinv.redSqr();\n  var ax = this.x.redMul(zinv2);\n  var ay = this.y.redMul(zinv2).redMul(zinv);\n\n  return this.curve.point(ax, ay);\n};\n\nJPoint.prototype.neg = function neg() {\n  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);\n};\n\nJPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p;\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 12M + 4S + 7A\n  var pz2 = p.z.redSqr();\n  var z2 = this.z.redSqr();\n  var u1 = this.x.redMul(pz2);\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y.redMul(pz2.redMul(p.z));\n  var s2 = p.y.redMul(z2.redMul(this.z));\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(p.z).redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mixedAdd = function mixedAdd(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p.toJ();\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 8M + 3S + 7A\n  var z2 = this.z.redSqr();\n  var u1 = this.x;\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y;\n  var s2 = p.y.redMul(z2).redMul(this.z);\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.dblp = function dblp(pow) {\n  if (pow === 0)\n    return this;\n  if (this.isInfinity())\n    return this;\n  if (!pow)\n    return this.dbl();\n\n  if (this.curve.zeroA || this.curve.threeA) {\n    var r = this;\n    for (var i = 0; i < pow; i++)\n      r = r.dbl();\n    return r;\n  }\n\n  // 1M + 2S + 1A + N * (4S + 5M + 8A)\n  // N = 1 => 6M + 6S + 9A\n  var a = this.curve.a;\n  var tinv = this.curve.tinv;\n\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  // Reuse results\n  var jyd = jy.redAdd(jy);\n  for (var i = 0; i < pow; i++) {\n    var jx2 = jx.redSqr();\n    var jyd2 = jyd.redSqr();\n    var jyd4 = jyd2.redSqr();\n    var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n    var t1 = jx.redMul(jyd2);\n    var nx = c.redSqr().redISub(t1.redAdd(t1));\n    var t2 = t1.redISub(nx);\n    var dny = c.redMul(t2);\n    dny = dny.redIAdd(dny).redISub(jyd4);\n    var nz = jyd.redMul(jz);\n    if (i + 1 < pow)\n      jz4 = jz4.redMul(jyd4);\n\n    jx = nx;\n    jz = nz;\n    jyd = dny;\n  }\n\n  return this.curve.jpoint(jx, jyd.redMul(tinv), jz);\n};\n\nJPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  if (this.curve.zeroA)\n    return this._zeroDbl();\n  else if (this.curve.threeA)\n    return this._threeDbl();\n  else\n    return this._dbl();\n};\n\nJPoint.prototype._zeroDbl = function _zeroDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 14A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a; a = 0\n    var m = xx.redAdd(xx).redIAdd(xx);\n    // T = M ^ 2 - 2*S\n    var t = m.redSqr().redISub(s).redISub(s);\n\n    // 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2*Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-dbl-2009-l\n    // 2M + 5S + 13A\n\n    // A = X1^2\n    var a = this.x.redSqr();\n    // B = Y1^2\n    var b = this.y.redSqr();\n    // C = B^2\n    var c = b.redSqr();\n    // D = 2 * ((X1 + B)^2 - A - C)\n    var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);\n    d = d.redIAdd(d);\n    // E = 3 * A\n    var e = a.redAdd(a).redIAdd(a);\n    // F = E^2\n    var f = e.redSqr();\n\n    // 8 * C\n    var c8 = c.redIAdd(c);\n    c8 = c8.redIAdd(c8);\n    c8 = c8.redIAdd(c8);\n\n    // X3 = F - 2 * D\n    nx = f.redISub(d).redISub(d);\n    // Y3 = E * (D - X3) - 8 * C\n    ny = e.redMul(d.redISub(nx)).redISub(c8);\n    // Z3 = 2 * Y1 * Z1\n    nz = this.y.redMul(this.z);\n    nz = nz.redIAdd(nz);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._threeDbl = function _threeDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 15A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a\n    var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);\n    // T = M^2 - 2 * S\n    var t = m.redSqr().redISub(s).redISub(s);\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2 * Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html#doubling-dbl-2001-b\n    // 3M + 5S\n\n    // delta = Z1^2\n    var delta = this.z.redSqr();\n    // gamma = Y1^2\n    var gamma = this.y.redSqr();\n    // beta = X1 * gamma\n    var beta = this.x.redMul(gamma);\n    // alpha = 3 * (X1 - delta) * (X1 + delta)\n    var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));\n    alpha = alpha.redAdd(alpha).redIAdd(alpha);\n    // X3 = alpha^2 - 8 * beta\n    var beta4 = beta.redIAdd(beta);\n    beta4 = beta4.redIAdd(beta4);\n    var beta8 = beta4.redAdd(beta4);\n    nx = alpha.redSqr().redISub(beta8);\n    // Z3 = (Y1 + Z1)^2 - gamma - delta\n    nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);\n    // Y3 = alpha * (4 * beta - X3) - 8 * gamma^2\n    var ggamma8 = gamma.redSqr();\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._dbl = function _dbl() {\n  var a = this.curve.a;\n\n  // 4M + 6S + 10A\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  var jx2 = jx.redSqr();\n  var jy2 = jy.redSqr();\n\n  var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n  var jxd4 = jx.redAdd(jx);\n  jxd4 = jxd4.redIAdd(jxd4);\n  var t1 = jxd4.redMul(jy2);\n  var nx = c.redSqr().redISub(t1.redAdd(t1));\n  var t2 = t1.redISub(nx);\n\n  var jyd8 = jy2.redSqr();\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  var ny = c.redMul(t2).redISub(jyd8);\n  var nz = jy.redAdd(jy).redMul(jz);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.trpl = function trpl() {\n  if (!this.curve.zeroA)\n    return this.dbl().add(this);\n\n  // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html#tripling-tpl-2007-bl\n  // 5M + 10S + ...\n\n  // XX = X1^2\n  var xx = this.x.redSqr();\n  // YY = Y1^2\n  var yy = this.y.redSqr();\n  // ZZ = Z1^2\n  var zz = this.z.redSqr();\n  // YYYY = YY^2\n  var yyyy = yy.redSqr();\n  // M = 3 * XX + a * ZZ2; a = 0\n  var m = xx.redAdd(xx).redIAdd(xx);\n  // MM = M^2\n  var mm = m.redSqr();\n  // E = 6 * ((X1 + YY)^2 - XX - YYYY) - MM\n  var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n  e = e.redIAdd(e);\n  e = e.redAdd(e).redIAdd(e);\n  e = e.redISub(mm);\n  // EE = E^2\n  var ee = e.redSqr();\n  // T = 16*YYYY\n  var t = yyyy.redIAdd(yyyy);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  // U = (M + E)^2 - MM - EE - T\n  var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);\n  // X3 = 4 * (X1 * EE - 4 * YY * U)\n  var yyu4 = yy.redMul(u);\n  yyu4 = yyu4.redIAdd(yyu4);\n  yyu4 = yyu4.redIAdd(yyu4);\n  var nx = this.x.redMul(ee).redISub(yyu4);\n  nx = nx.redIAdd(nx);\n  nx = nx.redIAdd(nx);\n  // Y3 = 8 * Y1 * (U * (T - U) - E * EE)\n  var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  // Z3 = (Z1 + E)^2 - ZZ - EE\n  var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mul = function mul(k, kbase) {\n  k = new BN(k, kbase);\n\n  return this.curve._wnafMul(this, k);\n};\n\nJPoint.prototype.eq = function eq(p) {\n  if (p.type === 'affine')\n    return this.eq(p.toJ());\n\n  if (this === p)\n    return true;\n\n  // x1 * z2^2 == x2 * z1^2\n  var z2 = this.z.redSqr();\n  var pz2 = p.z.redSqr();\n  if (this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0) !== 0)\n    return false;\n\n  // y1 * z2^3 == y2 * z1^3\n  var z3 = z2.redMul(this.z);\n  var pz3 = pz2.redMul(p.z);\n  return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0) === 0;\n};\n\nJPoint.prototype.eqXToP = function eqXToP(x) {\n  var zs = this.z.redSqr();\n  var rx = x.toRed(this.curve.red).redMul(zs);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(zs);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\nJPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC JPoint Infinity>';\n  return '<EC JPoint x: ' + this.x.toString(16, 2) +\n      ' y: ' + this.y.toString(16, 2) +\n      ' z: ' + this.z.toString(16, 2) + '>';\n};\n\nJPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar utils = require('../utils');\n\nfunction MontCurve(conf) {\n  Base.call(this, 'mont', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.i4 = new BN(4).toRed(this.red).redInvm();\n  this.two = new BN(2).toRed(this.red);\n  this.a24 = this.i4.redMul(this.a.redAdd(this.two));\n}\ninherits(MontCurve, Base);\nmodule.exports = MontCurve;\n\nMontCurve.prototype.validate = function validate(point) {\n  var x = point.normalize().x;\n  var x2 = x.redSqr();\n  var rhs = x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);\n  var y = rhs.redSqrt();\n\n  return y.redSqr().cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, z) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && z === null) {\n    this.x = this.curve.one;\n    this.z = this.curve.zero;\n  } else {\n    this.x = new BN(x, 16);\n    this.z = new BN(z, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n  }\n}\ninherits(Point, Base.BasePoint);\n\nMontCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  return this.point(utils.toArray(bytes, enc), 1);\n};\n\nMontCurve.prototype.point = function point(x, z) {\n  return new Point(this, x, z);\n};\n\nMontCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nPoint.prototype.precompute = function precompute() {\n  // No-op\n};\n\nPoint.prototype._encode = function _encode() {\n  return this.getX().toArray('be', this.curve.p.byteLength());\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1] || curve.one);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n\nPoint.prototype.dbl = function dbl() {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#doubling-dbl-1987-m-3\n  // 2M + 2S + 4A\n\n  // A = X1 + Z1\n  var a = this.x.redAdd(this.z);\n  // AA = A^2\n  var aa = a.redSqr();\n  // B = X1 - Z1\n  var b = this.x.redSub(this.z);\n  // BB = B^2\n  var bb = b.redSqr();\n  // C = AA - BB\n  var c = aa.redSub(bb);\n  // X3 = AA * BB\n  var nx = aa.redMul(bb);\n  // Z3 = C * (BB + A24 * C)\n  var nz = c.redMul(bb.redAdd(this.curve.a24.redMul(c)));\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.add = function add() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.diffAdd = function diffAdd(p, diff) {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#diffadd-dadd-1987-m-3\n  // 4M + 2S + 6A\n\n  // A = X2 + Z2\n  var a = this.x.redAdd(this.z);\n  // B = X2 - Z2\n  var b = this.x.redSub(this.z);\n  // C = X3 + Z3\n  var c = p.x.redAdd(p.z);\n  // D = X3 - Z3\n  var d = p.x.redSub(p.z);\n  // DA = D * A\n  var da = d.redMul(a);\n  // CB = C * B\n  var cb = c.redMul(b);\n  // X5 = Z1 * (DA + CB)^2\n  var nx = diff.z.redMul(da.redAdd(cb).redSqr());\n  // Z5 = X1 * (DA - CB)^2\n  var nz = diff.x.redMul(da.redISub(cb).redSqr());\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.mul = function mul(k) {\n  var t = k.clone();\n  var a = this; // (N / 2) * Q + Q\n  var b = this.curve.point(null, null); // (N / 2) * Q\n  var c = this; // Q\n\n  for (var bits = []; t.cmpn(0) !== 0; t.iushrn(1))\n    bits.push(t.andln(1));\n\n  for (var i = bits.length - 1; i >= 0; i--) {\n    if (bits[i] === 0) {\n      // N * Q + Q = ((N / 2) * Q + Q)) + (N / 2) * Q\n      a = a.diffAdd(b, c);\n      // N * Q = 2 * ((N / 2) * Q + Q))\n      b = b.dbl();\n    } else {\n      // N * Q = ((N / 2) * Q + Q) + ((N / 2) * Q)\n      b = a.diffAdd(b, c);\n      // N * Q + Q = 2 * ((N / 2) * Q + Q)\n      a = a.dbl();\n    }\n  }\n  return b;\n};\n\nPoint.prototype.mulAdd = function mulAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.jumlAdd = function jumlAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this.getX().cmp(other.getX()) === 0;\n};\n\nPoint.prototype.normalize = function normalize() {\n  this.x = this.x.redMul(this.z.redInvm());\n  this.z = this.curve.one;\n  return this;\n};\n\nPoint.prototype.getX = function getX() {\n  // Normalize coordinates\n  this.normalize();\n\n  return this.x.fromRed();\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction EdwardsCurve(conf) {\n  // NOTE: Important as we are creating point in Base.call()\n  this.twisted = (conf.a | 0) !== 1;\n  this.mOneA = this.twisted && (conf.a | 0) === -1;\n  this.extended = this.mOneA;\n\n  Base.call(this, 'edwards', conf);\n\n  this.a = new BN(conf.a, 16).umod(this.red.m);\n  this.a = this.a.toRed(this.red);\n  this.c = new BN(conf.c, 16).toRed(this.red);\n  this.c2 = this.c.redSqr();\n  this.d = new BN(conf.d, 16).toRed(this.red);\n  this.dd = this.d.redAdd(this.d);\n\n  assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);\n  this.oneC = (conf.c | 0) === 1;\n}\ninherits(EdwardsCurve, Base);\nmodule.exports = EdwardsCurve;\n\nEdwardsCurve.prototype._mulA = function _mulA(num) {\n  if (this.mOneA)\n    return num.redNeg();\n  else\n    return this.a.redMul(num);\n};\n\nEdwardsCurve.prototype._mulC = function _mulC(num) {\n  if (this.oneC)\n    return num;\n  else\n    return this.c.redMul(num);\n};\n\n// Just for compatibility with Short curve\nEdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {\n  return this.point(x, y, z, t);\n};\n\nEdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var x2 = x.redSqr();\n  var rhs = this.c2.redSub(this.a.redMul(x2));\n  var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));\n\n  var y2 = rhs.redMul(lhs.redInvm());\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {\n  y = new BN(y, 16);\n  if (!y.red)\n    y = y.toRed(this.red);\n\n  // x^2 = (y^2 - c^2) / (c^2 d y^2 - a)\n  var y2 = y.redSqr();\n  var lhs = y2.redSub(this.c2);\n  var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);\n  var x2 = lhs.redMul(rhs.redInvm());\n\n  if (x2.cmp(this.zero) === 0) {\n    if (odd)\n      throw new Error('invalid point');\n    else\n      return this.point(this.zero, y);\n  }\n\n  var x = x2.redSqrt();\n  if (x.redSqr().redSub(x2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  if (x.fromRed().isOdd() !== odd)\n    x = x.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.validate = function validate(point) {\n  if (point.isInfinity())\n    return true;\n\n  // Curve: A * X^2 + Y^2 = C^2 * (1 + D * X^2 * Y^2)\n  point.normalize();\n\n  var x2 = point.x.redSqr();\n  var y2 = point.y.redSqr();\n  var lhs = x2.redMul(this.a).redAdd(y2);\n  var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));\n\n  return lhs.cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, y, z, t) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.zero;\n    this.y = this.curve.one;\n    this.z = this.curve.one;\n    this.t = this.curve.zero;\n    this.zOne = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = z ? new BN(z, 16) : this.curve.one;\n    this.t = t && new BN(t, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n    if (this.t && !this.t.red)\n      this.t = this.t.toRed(this.curve.red);\n    this.zOne = this.z === this.curve.one;\n\n    // Use extended coordinates\n    if (this.curve.extended && !this.t) {\n      this.t = this.x.redMul(this.y);\n      if (!this.zOne)\n        this.t = this.t.redMul(this.z.redInvm());\n    }\n  }\n}\ninherits(Point, Base.BasePoint);\n\nEdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nEdwardsCurve.prototype.point = function point(x, y, z, t) {\n  return new Point(this, x, y, z, t);\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1], obj[2]);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.x.cmpn(0) === 0 &&\n    (this.y.cmp(this.z) === 0 ||\n    (this.zOne && this.y.cmp(this.curve.c) === 0));\n};\n\nPoint.prototype._extDbl = function _extDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #doubling-dbl-2008-hwcd\n  // 4M + 4S\n\n  // A = X1^2\n  var a = this.x.redSqr();\n  // B = Y1^2\n  var b = this.y.redSqr();\n  // C = 2 * Z1^2\n  var c = this.z.redSqr();\n  c = c.redIAdd(c);\n  // D = a * A\n  var d = this.curve._mulA(a);\n  // E = (X1 + Y1)^2 - A - B\n  var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);\n  // G = D + B\n  var g = d.redAdd(b);\n  // F = G - C\n  var f = g.redSub(c);\n  // H = D - B\n  var h = d.redSub(b);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projDbl = function _projDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #doubling-dbl-2008-bbjlp\n  //     #doubling-dbl-2007-bl\n  // and others\n  // Generally 3M + 4S or 2M + 4S\n\n  // B = (X1 + Y1)^2\n  var b = this.x.redAdd(this.y).redSqr();\n  // C = X1^2\n  var c = this.x.redSqr();\n  // D = Y1^2\n  var d = this.y.redSqr();\n\n  var nx;\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // E = a * C\n    var e = this.curve._mulA(c);\n    // F = E + D\n    var f = e.redAdd(d);\n    if (this.zOne) {\n      // X3 = (B - C - D) * (F - 2)\n      nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F^2 - 2 * F\n      nz = f.redSqr().redSub(f).redSub(f);\n    } else {\n      // H = Z1^2\n      var h = this.z.redSqr();\n      // J = F - 2 * H\n      var j = f.redSub(h).redISub(h);\n      // X3 = (B-C-D)*J\n      nx = b.redSub(c).redISub(d).redMul(j);\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F * J\n      nz = f.redMul(j);\n    }\n  } else {\n    // E = C + D\n    var e = c.redAdd(d);\n    // H = (c * Z1)^2\n    var h = this.curve._mulC(this.z).redSqr();\n    // J = E - 2 * H\n    var j = e.redSub(h).redSub(h);\n    // X3 = c * (B - E) * J\n    nx = this.curve._mulC(b.redISub(e)).redMul(j);\n    // Y3 = c * E * (C - D)\n    ny = this.curve._mulC(e).redMul(c.redISub(d));\n    // Z3 = E * J\n    nz = e.redMul(j);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  // Double in extended coordinates\n  if (this.curve.extended)\n    return this._extDbl();\n  else\n    return this._projDbl();\n};\n\nPoint.prototype._extAdd = function _extAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #addition-add-2008-hwcd-3\n  // 8M\n\n  // A = (Y1 - X1) * (Y2 - X2)\n  var a = this.y.redSub(this.x).redMul(p.y.redSub(p.x));\n  // B = (Y1 + X1) * (Y2 + X2)\n  var b = this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));\n  // C = T1 * k * T2\n  var c = this.t.redMul(this.curve.dd).redMul(p.t);\n  // D = Z1 * 2 * Z2\n  var d = this.z.redMul(p.z.redAdd(p.z));\n  // E = B - A\n  var e = b.redSub(a);\n  // F = D - C\n  var f = d.redSub(c);\n  // G = D + C\n  var g = d.redAdd(c);\n  // H = B + A\n  var h = b.redAdd(a);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projAdd = function _projAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #addition-add-2008-bbjlp\n  //     #addition-add-2007-bl\n  // 10M + 1S\n\n  // A = Z1 * Z2\n  var a = this.z.redMul(p.z);\n  // B = A^2\n  var b = a.redSqr();\n  // C = X1 * X2\n  var c = this.x.redMul(p.x);\n  // D = Y1 * Y2\n  var d = this.y.redMul(p.y);\n  // E = d * C * D\n  var e = this.curve.d.redMul(c).redMul(d);\n  // F = B - E\n  var f = b.redSub(e);\n  // G = B + E\n  var g = b.redAdd(e);\n  // X3 = A * F * ((X1 + Y1) * (X2 + Y2) - C - D)\n  var tmp = this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);\n  var nx = a.redMul(f).redMul(tmp);\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // Y3 = A * G * (D - a * C)\n    ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));\n    // Z3 = F * G\n    nz = f.redMul(g);\n  } else {\n    // Y3 = A * G * (D - C)\n    ny = a.redMul(g).redMul(d.redSub(c));\n    // Z3 = c * F * G\n    nz = this.curve._mulC(f).redMul(g);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.add = function add(p) {\n  if (this.isInfinity())\n    return p;\n  if (p.isInfinity())\n    return this;\n\n  if (this.curve.extended)\n    return this._extAdd(p);\n  else\n    return this._projAdd(p);\n};\n\nPoint.prototype.mul = function mul(k) {\n  if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, false);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, true);\n};\n\nPoint.prototype.normalize = function normalize() {\n  if (this.zOne)\n    return this;\n\n  // Normalize coordinates\n  var zi = this.z.redInvm();\n  this.x = this.x.redMul(zi);\n  this.y = this.y.redMul(zi);\n  if (this.t)\n    this.t = this.t.redMul(zi);\n  this.z = this.curve.one;\n  this.zOne = true;\n  return this;\n};\n\nPoint.prototype.neg = function neg() {\n  return this.curve.point(this.x.redNeg(),\n                          this.y,\n                          this.z,\n                          this.t && this.t.redNeg());\n};\n\nPoint.prototype.getX = function getX() {\n  this.normalize();\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  this.normalize();\n  return this.y.fromRed();\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this === other ||\n         this.getX().cmp(other.getX()) === 0 &&\n         this.getY().cmp(other.getY()) === 0;\n};\n\nPoint.prototype.eqXToP = function eqXToP(x) {\n  var rx = x.toRed(this.curve.red).redMul(this.z);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(this.z);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\n// Compatibility with BaseCurve\nPoint.prototype.toP = Point.prototype.normalize;\nPoint.prototype.mixedAdd = Point.prototype.add;\n","'use strict';\n\nexports.sha1 = require('./sha/1');\nexports.sha224 = require('./sha/224');\nexports.sha256 = require('./sha/256');\nexports.sha384 = require('./sha/384');\nexports.sha512 = require('./sha/512');\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_5 = utils.sum32_5;\nvar ft_1 = shaCommon.ft_1;\nvar BlockHash = common.BlockHash;\n\nvar sha1_K = [\n  0x5A827999, 0x6ED9EBA1,\n  0x8F1BBCDC, 0xCA62C1D6\n];\n\nfunction SHA1() {\n  if (!(this instanceof SHA1))\n    return new SHA1();\n\n  BlockHash.call(this);\n  this.h = [\n    0x67452301, 0xefcdab89, 0x98badcfe,\n    0x10325476, 0xc3d2e1f0 ];\n  this.W = new Array(80);\n}\n\nutils.inherits(SHA1, BlockHash);\nmodule.exports = SHA1;\n\nSHA1.blockSize = 512;\nSHA1.outSize = 160;\nSHA1.hmacStrength = 80;\nSHA1.padLength = 64;\n\nSHA1.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n\n  for(; i < W.length; i++)\n    W[i] = rotl32(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n\n  for (i = 0; i < W.length; i++) {\n    var s = ~~(i / 20);\n    var t = sum32_5(rotl32(a, 5), ft_1(s, b, c, d), e, W[i], sha1_K[s]);\n    e = d;\n    d = c;\n    c = rotl32(b, 30);\n    b = a;\n    a = t;\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n};\n\nSHA1.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar SHA256 = require('./256');\n\nfunction SHA224() {\n  if (!(this instanceof SHA224))\n    return new SHA224();\n\n  SHA256.call(this);\n  this.h = [\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n    0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4 ];\n}\nutils.inherits(SHA224, SHA256);\nmodule.exports = SHA224;\n\nSHA224.blockSize = 512;\nSHA224.outSize = 224;\nSHA224.hmacStrength = 192;\nSHA224.padLength = 64;\n\nSHA224.prototype._digest = function digest(enc) {\n  // Just truncate output\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 7), 'big');\n  else\n    return utils.split32(this.h.slice(0, 7), 'big');\n};\n\n","'use strict';\n\nvar utils = require('../utils');\n\nvar SHA512 = require('./512');\n\nfunction SHA384() {\n  if (!(this instanceof SHA384))\n    return new SHA384();\n\n  SHA512.call(this);\n  this.h = [\n    0xcbbb9d5d, 0xc1059ed8,\n    0x629a292a, 0x367cd507,\n    0x9159015a, 0x3070dd17,\n    0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31,\n    0x8eb44a87, 0x68581511,\n    0xdb0c2e0d, 0x64f98fa7,\n    0x47b5481d, 0xbefa4fa4 ];\n}\nutils.inherits(SHA384, SHA512);\nmodule.exports = SHA384;\n\nSHA384.blockSize = 1024;\nSHA384.outSize = 384;\nSHA384.hmacStrength = 192;\nSHA384.padLength = 128;\n\nSHA384.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 12), 'big');\n  else\n    return utils.split32(this.h.slice(0, 12), 'big');\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar common = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_3 = utils.sum32_3;\nvar sum32_4 = utils.sum32_4;\nvar BlockHash = common.BlockHash;\n\nfunction RIPEMD160() {\n  if (!(this instanceof RIPEMD160))\n    return new RIPEMD160();\n\n  BlockHash.call(this);\n\n  this.h = [ 0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0 ];\n  this.endian = 'little';\n}\nutils.inherits(RIPEMD160, BlockHash);\nexports.ripemd160 = RIPEMD160;\n\nRIPEMD160.blockSize = 512;\nRIPEMD160.outSize = 160;\nRIPEMD160.hmacStrength = 192;\nRIPEMD160.padLength = 64;\n\nRIPEMD160.prototype._update = function update(msg, start) {\n  var A = this.h[0];\n  var B = this.h[1];\n  var C = this.h[2];\n  var D = this.h[3];\n  var E = this.h[4];\n  var Ah = A;\n  var Bh = B;\n  var Ch = C;\n  var Dh = D;\n  var Eh = E;\n  for (var j = 0; j < 80; j++) {\n    var T = sum32(\n      rotl32(\n        sum32_4(A, f(j, B, C, D), msg[r[j] + start], K(j)),\n        s[j]),\n      E);\n    A = E;\n    E = D;\n    D = rotl32(C, 10);\n    C = B;\n    B = T;\n    T = sum32(\n      rotl32(\n        sum32_4(Ah, f(79 - j, Bh, Ch, Dh), msg[rh[j] + start], Kh(j)),\n        sh[j]),\n      Eh);\n    Ah = Eh;\n    Eh = Dh;\n    Dh = rotl32(Ch, 10);\n    Ch = Bh;\n    Bh = T;\n  }\n  T = sum32_3(this.h[1], C, Dh);\n  this.h[1] = sum32_3(this.h[2], D, Eh);\n  this.h[2] = sum32_3(this.h[3], E, Ah);\n  this.h[3] = sum32_3(this.h[4], A, Bh);\n  this.h[4] = sum32_3(this.h[0], B, Ch);\n  this.h[0] = T;\n};\n\nRIPEMD160.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'little');\n  else\n    return utils.split32(this.h, 'little');\n};\n\nfunction f(j, x, y, z) {\n  if (j <= 15)\n    return x ^ y ^ z;\n  else if (j <= 31)\n    return (x & y) | ((~x) & z);\n  else if (j <= 47)\n    return (x | (~y)) ^ z;\n  else if (j <= 63)\n    return (x & z) | (y & (~z));\n  else\n    return x ^ (y | (~z));\n}\n\nfunction K(j) {\n  if (j <= 15)\n    return 0x00000000;\n  else if (j <= 31)\n    return 0x5a827999;\n  else if (j <= 47)\n    return 0x6ed9eba1;\n  else if (j <= 63)\n    return 0x8f1bbcdc;\n  else\n    return 0xa953fd4e;\n}\n\nfunction Kh(j) {\n  if (j <= 15)\n    return 0x50a28be6;\n  else if (j <= 31)\n    return 0x5c4dd124;\n  else if (j <= 47)\n    return 0x6d703ef3;\n  else if (j <= 63)\n    return 0x7a6d76e9;\n  else\n    return 0x00000000;\n}\n\nvar r = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\n\nvar rh = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\n\nvar s = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\n\nvar sh = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction Hmac(hash, key, enc) {\n  if (!(this instanceof Hmac))\n    return new Hmac(hash, key, enc);\n  this.Hash = hash;\n  this.blockSize = hash.blockSize / 8;\n  this.outSize = hash.outSize / 8;\n  this.inner = null;\n  this.outer = null;\n\n  this._init(utils.toArray(key, enc));\n}\nmodule.exports = Hmac;\n\nHmac.prototype._init = function init(key) {\n  // Shorten key, if needed\n  if (key.length > this.blockSize)\n    key = new this.Hash().update(key).digest();\n  assert(key.length <= this.blockSize);\n\n  // Add padding to key\n  for (var i = key.length; i < this.blockSize; i++)\n    key.push(0);\n\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x36;\n  this.inner = new this.Hash().update(key);\n\n  // 0x36 ^ 0x5c = 0x6a\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x6a;\n  this.outer = new this.Hash().update(key);\n};\n\nHmac.prototype.update = function update(msg, enc) {\n  this.inner.update(msg, enc);\n  return this;\n};\n\nHmac.prototype.digest = function digest(enc) {\n  this.outer.update(this.inner.digest());\n  return this.outer.digest(enc);\n};\n","module.exports = {\n  doubles: {\n    step: 4,\n    points: [\n      [\n        'e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a',\n        'f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'\n      ],\n      [\n        '8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508',\n        '11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'\n      ],\n      [\n        '175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739',\n        'd3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'\n      ],\n      [\n        '363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640',\n        '4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'\n      ],\n      [\n        '8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c',\n        '4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'\n      ],\n      [\n        '723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda',\n        '96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'\n      ],\n      [\n        'eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa',\n        '5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'\n      ],\n      [\n        '100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0',\n        'cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'\n      ],\n      [\n        'e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d',\n        '9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'\n      ],\n      [\n        'feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d',\n        'e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'\n      ],\n      [\n        'da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1',\n        '9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'\n      ],\n      [\n        '53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0',\n        '5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'\n      ],\n      [\n        '8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047',\n        '10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'\n      ],\n      [\n        '385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862',\n        '283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'\n      ],\n      [\n        '6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7',\n        '7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'\n      ],\n      [\n        '3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd',\n        '56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'\n      ],\n      [\n        '85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83',\n        '7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'\n      ],\n      [\n        '948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a',\n        '53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'\n      ],\n      [\n        '6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8',\n        'bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'\n      ],\n      [\n        'e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d',\n        '4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'\n      ],\n      [\n        'e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725',\n        '7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'\n      ],\n      [\n        '213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754',\n        '4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'\n      ],\n      [\n        '4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c',\n        '17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'\n      ],\n      [\n        'fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6',\n        '6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'\n      ],\n      [\n        '76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39',\n        'c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'\n      ],\n      [\n        'c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891',\n        '893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'\n      ],\n      [\n        'd895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b',\n        'febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'\n      ],\n      [\n        'b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03',\n        '2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'\n      ],\n      [\n        'e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d',\n        'eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'\n      ],\n      [\n        'a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070',\n        '7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'\n      ],\n      [\n        '90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4',\n        'e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'\n      ],\n      [\n        '8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da',\n        '662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'\n      ],\n      [\n        'e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11',\n        '1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'\n      ],\n      [\n        '8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e',\n        'efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'\n      ],\n      [\n        'e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41',\n        '2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'\n      ],\n      [\n        'b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef',\n        '67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'\n      ],\n      [\n        'd68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8',\n        'db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'\n      ],\n      [\n        '324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d',\n        '648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'\n      ],\n      [\n        '4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96',\n        '35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'\n      ],\n      [\n        '9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd',\n        'ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'\n      ],\n      [\n        '6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5',\n        '9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'\n      ],\n      [\n        'a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266',\n        '40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'\n      ],\n      [\n        '7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71',\n        '34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'\n      ],\n      [\n        '928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac',\n        'c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'\n      ],\n      [\n        '85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751',\n        '1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'\n      ],\n      [\n        'ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e',\n        '493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'\n      ],\n      [\n        '827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241',\n        'c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'\n      ],\n      [\n        'eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3',\n        'be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'\n      ],\n      [\n        'e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f',\n        '4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'\n      ],\n      [\n        '1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19',\n        'aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'\n      ],\n      [\n        '146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be',\n        'b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'\n      ],\n      [\n        'fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9',\n        '6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'\n      ],\n      [\n        'da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2',\n        '8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'\n      ],\n      [\n        'a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13',\n        '7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'\n      ],\n      [\n        '174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c',\n        'ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'\n      ],\n      [\n        '959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba',\n        '2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'\n      ],\n      [\n        'd2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151',\n        'e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'\n      ],\n      [\n        '64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073',\n        'd99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'\n      ],\n      [\n        '8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458',\n        '38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'\n      ],\n      [\n        '13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b',\n        '69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'\n      ],\n      [\n        'bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366',\n        'd3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'\n      ],\n      [\n        '8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa',\n        '40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'\n      ],\n      [\n        '8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0',\n        '620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'\n      ],\n      [\n        'dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787',\n        '7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'\n      ],\n      [\n        'f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e',\n        'ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82'\n      ]\n    ]\n  },\n  naf: {\n    wnd: 7,\n    points: [\n      [\n        'f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9',\n        '388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'\n      ],\n      [\n        '2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4',\n        'd8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'\n      ],\n      [\n        '5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc',\n        '6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'\n      ],\n      [\n        'acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe',\n        'cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'\n      ],\n      [\n        '774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb',\n        'd984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'\n      ],\n      [\n        'f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8',\n        'ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'\n      ],\n      [\n        'd7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e',\n        '581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'\n      ],\n      [\n        'defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34',\n        '4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'\n      ],\n      [\n        '2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c',\n        '85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'\n      ],\n      [\n        '352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5',\n        '321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'\n      ],\n      [\n        '2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f',\n        '2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'\n      ],\n      [\n        '9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714',\n        '73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'\n      ],\n      [\n        'daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729',\n        'a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'\n      ],\n      [\n        'c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db',\n        '2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'\n      ],\n      [\n        '6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4',\n        'e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'\n      ],\n      [\n        '1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5',\n        'b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'\n      ],\n      [\n        '605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479',\n        '2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'\n      ],\n      [\n        '62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d',\n        '80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'\n      ],\n      [\n        '80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f',\n        '1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'\n      ],\n      [\n        '7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb',\n        'd0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'\n      ],\n      [\n        'd528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9',\n        'eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'\n      ],\n      [\n        '49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963',\n        '758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'\n      ],\n      [\n        '77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74',\n        '958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'\n      ],\n      [\n        'f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530',\n        'e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'\n      ],\n      [\n        '463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b',\n        '5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'\n      ],\n      [\n        'f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247',\n        'cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'\n      ],\n      [\n        'caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1',\n        'cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'\n      ],\n      [\n        '2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120',\n        '4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'\n      ],\n      [\n        '7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435',\n        '91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'\n      ],\n      [\n        '754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18',\n        '673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'\n      ],\n      [\n        'e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8',\n        '59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'\n      ],\n      [\n        '186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb',\n        '3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'\n      ],\n      [\n        'df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f',\n        '55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'\n      ],\n      [\n        '5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143',\n        'efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'\n      ],\n      [\n        '290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba',\n        'e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'\n      ],\n      [\n        'af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45',\n        'f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'\n      ],\n      [\n        '766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a',\n        '744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'\n      ],\n      [\n        '59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e',\n        'c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'\n      ],\n      [\n        'f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8',\n        'e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'\n      ],\n      [\n        '7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c',\n        '30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'\n      ],\n      [\n        '948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519',\n        'e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'\n      ],\n      [\n        '7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab',\n        '100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'\n      ],\n      [\n        '3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca',\n        'ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'\n      ],\n      [\n        'd3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf',\n        '8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'\n      ],\n      [\n        '1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610',\n        '68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'\n      ],\n      [\n        '733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4',\n        'f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'\n      ],\n      [\n        '15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c',\n        'd56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'\n      ],\n      [\n        'a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940',\n        'edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'\n      ],\n      [\n        'e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980',\n        'a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'\n      ],\n      [\n        '311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3',\n        '66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'\n      ],\n      [\n        '34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf',\n        '9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'\n      ],\n      [\n        'f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63',\n        '4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'\n      ],\n      [\n        'd7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448',\n        'fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'\n      ],\n      [\n        '32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf',\n        '5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'\n      ],\n      [\n        '7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5',\n        '8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'\n      ],\n      [\n        'ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6',\n        '8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'\n      ],\n      [\n        '16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5',\n        '5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'\n      ],\n      [\n        'eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99',\n        'f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'\n      ],\n      [\n        '78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51',\n        'f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'\n      ],\n      [\n        '494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5',\n        '42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'\n      ],\n      [\n        'a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5',\n        '204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'\n      ],\n      [\n        'c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997',\n        '4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'\n      ],\n      [\n        '841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881',\n        '73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'\n      ],\n      [\n        '5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5',\n        '39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'\n      ],\n      [\n        '36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66',\n        'd2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'\n      ],\n      [\n        '336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726',\n        'ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'\n      ],\n      [\n        '8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede',\n        '6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'\n      ],\n      [\n        '1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94',\n        '60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'\n      ],\n      [\n        '85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31',\n        '3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'\n      ],\n      [\n        '29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51',\n        'b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'\n      ],\n      [\n        'a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252',\n        'ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'\n      ],\n      [\n        '4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5',\n        'cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'\n      ],\n      [\n        'd24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b',\n        '6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'\n      ],\n      [\n        'ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4',\n        '322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'\n      ],\n      [\n        'af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f',\n        '6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'\n      ],\n      [\n        'e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889',\n        '2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'\n      ],\n      [\n        '591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246',\n        'b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'\n      ],\n      [\n        '11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984',\n        '998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'\n      ],\n      [\n        '3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a',\n        'b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'\n      ],\n      [\n        'cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030',\n        'bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'\n      ],\n      [\n        'c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197',\n        '6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'\n      ],\n      [\n        'c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593',\n        'c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'\n      ],\n      [\n        'a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef',\n        '21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'\n      ],\n      [\n        '347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38',\n        '60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'\n      ],\n      [\n        'da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a',\n        '49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'\n      ],\n      [\n        'c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111',\n        '5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'\n      ],\n      [\n        '4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502',\n        '7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'\n      ],\n      [\n        '3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea',\n        'be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'\n      ],\n      [\n        'cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26',\n        '8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'\n      ],\n      [\n        'b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986',\n        '39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'\n      ],\n      [\n        'd4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e',\n        '62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'\n      ],\n      [\n        '48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4',\n        '25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'\n      ],\n      [\n        'dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda',\n        'ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'\n      ],\n      [\n        '6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859',\n        'cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'\n      ],\n      [\n        'e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f',\n        'f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'\n      ],\n      [\n        'eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c',\n        '6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'\n      ],\n      [\n        '13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942',\n        'fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'\n      ],\n      [\n        'ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a',\n        '1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'\n      ],\n      [\n        'b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80',\n        '5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'\n      ],\n      [\n        'ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d',\n        '438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'\n      ],\n      [\n        '8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1',\n        'cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'\n      ],\n      [\n        '52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63',\n        'c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'\n      ],\n      [\n        'e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352',\n        '6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'\n      ],\n      [\n        '7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193',\n        'ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'\n      ],\n      [\n        '5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00',\n        '9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'\n      ],\n      [\n        '32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58',\n        'ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'\n      ],\n      [\n        'e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7',\n        'd3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'\n      ],\n      [\n        '8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8',\n        'c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'\n      ],\n      [\n        '4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e',\n        '67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'\n      ],\n      [\n        '3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d',\n        'cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'\n      ],\n      [\n        '674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b',\n        '299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'\n      ],\n      [\n        'd32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f',\n        'f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'\n      ],\n      [\n        '30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6',\n        '462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'\n      ],\n      [\n        'be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297',\n        '62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'\n      ],\n      [\n        '93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a',\n        '7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'\n      ],\n      [\n        'b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c',\n        'ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'\n      ],\n      [\n        'd5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52',\n        '4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'\n      ],\n      [\n        'd3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb',\n        'bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'\n      ],\n      [\n        '463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065',\n        'bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'\n      ],\n      [\n        '7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917',\n        '603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'\n      ],\n      [\n        '74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9',\n        'cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'\n      ],\n      [\n        '30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3',\n        '553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'\n      ],\n      [\n        '9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57',\n        '712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'\n      ],\n      [\n        '176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66',\n        'ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'\n      ],\n      [\n        '75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8',\n        '9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'\n      ],\n      [\n        '809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721',\n        '9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'\n      ],\n      [\n        '1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180',\n        '4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9'\n      ]\n    ]\n  }\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar HmacDRBG = require('hmac-drbg');\nvar utils = require('../utils');\nvar curves = require('../curves');\nvar rand = require('brorand');\nvar assert = utils.assert;\n\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert(curves.hasOwnProperty(options), 'Unknown curve ' + options);\n\n    options = curves[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nmodule.exports = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new KeyPair(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return KeyPair.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return KeyPair.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray()\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  do {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  } while (true);\n};\n\nEC.prototype._truncateToN = function truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8'\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; true; iter++) {\n    var k = options.k ?\n        options.k(iter) :\n        new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new Signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature = new Signature(signature, 'hex');\n\n  // Perform primitive values validation\n  var r = signature.r;\n  var s = signature.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n\n  if (!this.curve._maxwellTrick) {\n    var p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  var p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature, j, enc) {\n  assert((3 & j) === j, 'The recovery param is more than two bits');\n  signature = new Signature(signature, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature.r;\n  var s = signature.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {\n  signature = new Signature(signature, enc);\n  if (signature.recoveryParam !== null)\n    return signature.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n","'use strict';\n\nvar hash = require('hash.js');\nvar utils = require('minimalistic-crypto-utils');\nvar assert = require('minimalistic-assert');\n\nfunction HmacDRBG(options) {\n  if (!(this instanceof HmacDRBG))\n    return new HmacDRBG(options);\n  this.hash = options.hash;\n  this.predResist = !!options.predResist;\n\n  this.outLen = this.hash.outSize;\n  this.minEntropy = options.minEntropy || this.hash.hmacStrength;\n\n  this._reseed = null;\n  this.reseedInterval = null;\n  this.K = null;\n  this.V = null;\n\n  var entropy = utils.toArray(options.entropy, options.entropyEnc || 'hex');\n  var nonce = utils.toArray(options.nonce, options.nonceEnc || 'hex');\n  var pers = utils.toArray(options.pers, options.persEnc || 'hex');\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._init(entropy, nonce, pers);\n}\nmodule.exports = HmacDRBG;\n\nHmacDRBG.prototype._init = function init(entropy, nonce, pers) {\n  var seed = entropy.concat(nonce).concat(pers);\n\n  this.K = new Array(this.outLen / 8);\n  this.V = new Array(this.outLen / 8);\n  for (var i = 0; i < this.V.length; i++) {\n    this.K[i] = 0x00;\n    this.V[i] = 0x01;\n  }\n\n  this._update(seed);\n  this._reseed = 1;\n  this.reseedInterval = 0x1000000000000;  // 2^48\n};\n\nHmacDRBG.prototype._hmac = function hmac() {\n  return new hash.hmac(this.hash, this.K);\n};\n\nHmacDRBG.prototype._update = function update(seed) {\n  var kmac = this._hmac()\n                 .update(this.V)\n                 .update([ 0x00 ]);\n  if (seed)\n    kmac = kmac.update(seed);\n  this.K = kmac.digest();\n  this.V = this._hmac().update(this.V).digest();\n  if (!seed)\n    return;\n\n  this.K = this._hmac()\n               .update(this.V)\n               .update([ 0x01 ])\n               .update(seed)\n               .digest();\n  this.V = this._hmac().update(this.V).digest();\n};\n\nHmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {\n  // Optional entropy enc\n  if (typeof entropyEnc !== 'string') {\n    addEnc = add;\n    add = entropyEnc;\n    entropyEnc = null;\n  }\n\n  entropy = utils.toArray(entropy, entropyEnc);\n  add = utils.toArray(add, addEnc);\n\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n\n  this._update(entropy.concat(add || []));\n  this._reseed = 1;\n};\n\nHmacDRBG.prototype.generate = function generate(len, enc, add, addEnc) {\n  if (this._reseed > this.reseedInterval)\n    throw new Error('Reseed is required');\n\n  // Optional encoding\n  if (typeof enc !== 'string') {\n    addEnc = add;\n    add = enc;\n    enc = null;\n  }\n\n  // Optional additional data\n  if (add) {\n    add = utils.toArray(add, addEnc || 'hex');\n    this._update(add);\n  }\n\n  var temp = [];\n  while (temp.length < len) {\n    this.V = this._hmac().update(this.V).digest();\n    temp = temp.concat(this.V);\n  }\n\n  var res = temp.slice(0, len);\n  this._update(add);\n  this._reseed++;\n  return utils.encode(res, enc);\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar assert = utils.assert;\n\nfunction KeyPair(ec, options) {\n  this.ec = ec;\n  this.priv = null;\n  this.pub = null;\n\n  // KeyPair(ec, { priv: ..., pub: ... })\n  if (options.priv)\n    this._importPrivate(options.priv, options.privEnc);\n  if (options.pub)\n    this._importPublic(options.pub, options.pubEnc);\n}\nmodule.exports = KeyPair;\n\nKeyPair.fromPublic = function fromPublic(ec, pub, enc) {\n  if (pub instanceof KeyPair)\n    return pub;\n\n  return new KeyPair(ec, {\n    pub: pub,\n    pubEnc: enc\n  });\n};\n\nKeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {\n  if (priv instanceof KeyPair)\n    return priv;\n\n  return new KeyPair(ec, {\n    priv: priv,\n    privEnc: enc\n  });\n};\n\nKeyPair.prototype.validate = function validate() {\n  var pub = this.getPublic();\n\n  if (pub.isInfinity())\n    return { result: false, reason: 'Invalid public key' };\n  if (!pub.validate())\n    return { result: false, reason: 'Public key is not a point' };\n  if (!pub.mul(this.ec.curve.n).isInfinity())\n    return { result: false, reason: 'Public key * N != O' };\n\n  return { result: true, reason: null };\n};\n\nKeyPair.prototype.getPublic = function getPublic(compact, enc) {\n  // compact is optional argument\n  if (typeof compact === 'string') {\n    enc = compact;\n    compact = null;\n  }\n\n  if (!this.pub)\n    this.pub = this.ec.g.mul(this.priv);\n\n  if (!enc)\n    return this.pub;\n\n  return this.pub.encode(enc, compact);\n};\n\nKeyPair.prototype.getPrivate = function getPrivate(enc) {\n  if (enc === 'hex')\n    return this.priv.toString(16, 2);\n  else\n    return this.priv;\n};\n\nKeyPair.prototype._importPrivate = function _importPrivate(key, enc) {\n  this.priv = new BN(key, enc || 16);\n\n  // Ensure that the priv won't be bigger than n, otherwise we may fail\n  // in fixed multiplication method\n  this.priv = this.priv.umod(this.ec.curve.n);\n};\n\nKeyPair.prototype._importPublic = function _importPublic(key, enc) {\n  if (key.x || key.y) {\n    // Montgomery points only have an `x` coordinate.\n    // Weierstrass/Edwards points on the other hand have both `x` and\n    // `y` coordinates.\n    if (this.ec.curve.type === 'mont') {\n      assert(key.x, 'Need x coordinate');\n    } else if (this.ec.curve.type === 'short' ||\n               this.ec.curve.type === 'edwards') {\n      assert(key.x && key.y, 'Need both x and y coordinate');\n    }\n    this.pub = this.ec.curve.point(key.x, key.y);\n    return;\n  }\n  this.pub = this.ec.curve.decodePoint(key, enc);\n};\n\n// ECDH\nKeyPair.prototype.derive = function derive(pub) {\n  return pub.mul(this.priv).getX();\n};\n\n// ECDSA\nKeyPair.prototype.sign = function sign(msg, enc, options) {\n  return this.ec.sign(msg, this, enc, options);\n};\n\nKeyPair.prototype.verify = function verify(msg, signature) {\n  return this.ec.verify(msg, signature, this);\n};\n\nKeyPair.prototype.inspect = function inspect() {\n  return '<Key priv: ' + (this.priv && this.priv.toString(16, 2)) +\n         ' pub: ' + (this.pub && this.pub.inspect()) + ' >';\n};\n","'use strict';\n\nvar BN = require('bn.js');\n\nvar utils = require('../utils');\nvar assert = utils.assert;\n\nfunction Signature(options, enc) {\n  if (options instanceof Signature)\n    return options;\n\n  if (this._importDER(options, enc))\n    return;\n\n  assert(options.r && options.s, 'Signature without r or s');\n  this.r = new BN(options.r, 16);\n  this.s = new BN(options.s, 16);\n  if (options.recoveryParam === undefined)\n    this.recoveryParam = null;\n  else\n    this.recoveryParam = options.recoveryParam;\n}\nmodule.exports = Signature;\n\nfunction Position() {\n  this.place = 0;\n}\n\nfunction getLength(buf, p) {\n  var initial = buf[p.place++];\n  if (!(initial & 0x80)) {\n    return initial;\n  }\n  var octetLen = initial & 0xf;\n  var val = 0;\n  for (var i = 0, off = p.place; i < octetLen; i++, off++) {\n    val <<= 8;\n    val |= buf[off];\n  }\n  p.place = off;\n  return val;\n}\n\nfunction rmPadding(buf) {\n  var i = 0;\n  var len = buf.length - 1;\n  while (!buf[i] && !(buf[i + 1] & 0x80) && i < len) {\n    i++;\n  }\n  if (i === 0) {\n    return buf;\n  }\n  return buf.slice(i);\n}\n\nSignature.prototype._importDER = function _importDER(data, enc) {\n  data = utils.toArray(data, enc);\n  var p = new Position();\n  if (data[p.place++] !== 0x30) {\n    return false;\n  }\n  var len = getLength(data, p);\n  if ((len + p.place) !== data.length) {\n    return false;\n  }\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var rlen = getLength(data, p);\n  var r = data.slice(p.place, rlen + p.place);\n  p.place += rlen;\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var slen = getLength(data, p);\n  if (data.length !== slen + p.place) {\n    return false;\n  }\n  var s = data.slice(p.place, slen + p.place);\n  if (r[0] === 0 && (r[1] & 0x80)) {\n    r = r.slice(1);\n  }\n  if (s[0] === 0 && (s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n\n  this.r = new BN(r);\n  this.s = new BN(s);\n  this.recoveryParam = null;\n\n  return true;\n};\n\nfunction constructLength(arr, len) {\n  if (len < 0x80) {\n    arr.push(len);\n    return;\n  }\n  var octets = 1 + (Math.log(len) / Math.LN2 >>> 3);\n  arr.push(octets | 0x80);\n  while (--octets) {\n    arr.push((len >>> (octets << 3)) & 0xff);\n  }\n  arr.push(len);\n}\n\nSignature.prototype.toDER = function toDER(enc) {\n  var r = this.r.toArray();\n  var s = this.s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80)\n    r = [ 0 ].concat(r);\n  // Pad values\n  if (s[0] & 0x80)\n    s = [ 0 ].concat(s);\n\n  r = rmPadding(r);\n  s = rmPadding(s);\n\n  while (!s[0] && !(s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n  var arr = [ 0x02 ];\n  constructLength(arr, r.length);\n  arr = arr.concat(r);\n  arr.push(0x02);\n  constructLength(arr, s.length);\n  var backHalf = arr.concat(s);\n  var res = [ 0x30 ];\n  constructLength(res, backHalf.length);\n  res = res.concat(backHalf);\n  return utils.encode(res, enc);\n};\n","'use strict';\n\nvar hash = require('hash.js');\nvar curves = require('../curves');\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EDDSA(curve) {\n  assert(curve === 'ed25519', 'only tested with ed25519 so far');\n\n  if (!(this instanceof EDDSA))\n    return new EDDSA(curve);\n\n  var curve = curves[curve].curve;\n  this.curve = curve;\n  this.g = curve.g;\n  this.g.precompute(curve.n.bitLength() + 1);\n\n  this.pointClass = curve.point().constructor;\n  this.encodingLength = Math.ceil(curve.n.bitLength() / 8);\n  this.hash = hash.sha512;\n}\n\nmodule.exports = EDDSA;\n\n/**\n* @param {Array|String} message - message bytes\n* @param {Array|String|KeyPair} secret - secret bytes or a keypair\n* @returns {Signature} - signature\n*/\nEDDSA.prototype.sign = function sign(message, secret) {\n  message = parseBytes(message);\n  var key = this.keyFromSecret(secret);\n  var r = this.hashInt(key.messagePrefix(), message);\n  var R = this.g.mul(r);\n  var Rencoded = this.encodePoint(R);\n  var s_ = this.hashInt(Rencoded, key.pubBytes(), message)\n               .mul(key.priv());\n  var S = r.add(s_).umod(this.curve.n);\n  return this.makeSignature({ R: R, S: S, Rencoded: Rencoded });\n};\n\n/**\n* @param {Array} message - message bytes\n* @param {Array|String|Signature} sig - sig bytes\n* @param {Array|String|Point|KeyPair} pub - public key\n* @returns {Boolean} - true if public key matches sig of message\n*/\nEDDSA.prototype.verify = function verify(message, sig, pub) {\n  message = parseBytes(message);\n  sig = this.makeSignature(sig);\n  var key = this.keyFromPublic(pub);\n  var h = this.hashInt(sig.Rencoded(), key.pubBytes(), message);\n  var SG = this.g.mul(sig.S());\n  var RplusAh = sig.R().add(key.pub().mul(h));\n  return RplusAh.eq(SG);\n};\n\nEDDSA.prototype.hashInt = function hashInt() {\n  var hash = this.hash();\n  for (var i = 0; i < arguments.length; i++)\n    hash.update(arguments[i]);\n  return utils.intFromLE(hash.digest()).umod(this.curve.n);\n};\n\nEDDSA.prototype.keyFromPublic = function keyFromPublic(pub) {\n  return KeyPair.fromPublic(this, pub);\n};\n\nEDDSA.prototype.keyFromSecret = function keyFromSecret(secret) {\n  return KeyPair.fromSecret(this, secret);\n};\n\nEDDSA.prototype.makeSignature = function makeSignature(sig) {\n  if (sig instanceof Signature)\n    return sig;\n  return new Signature(this, sig);\n};\n\n/**\n* * https://tools.ietf.org/html/draft-josefsson-eddsa-ed25519-03#section-5.2\n*\n* EDDSA defines methods for encoding and decoding points and integers. These are\n* helper convenience methods, that pass along to utility functions implied\n* parameters.\n*\n*/\nEDDSA.prototype.encodePoint = function encodePoint(point) {\n  var enc = point.getY().toArray('le', this.encodingLength);\n  enc[this.encodingLength - 1] |= point.getX().isOdd() ? 0x80 : 0;\n  return enc;\n};\n\nEDDSA.prototype.decodePoint = function decodePoint(bytes) {\n  bytes = utils.parseBytes(bytes);\n\n  var lastIx = bytes.length - 1;\n  var normed = bytes.slice(0, lastIx).concat(bytes[lastIx] & ~0x80);\n  var xIsOdd = (bytes[lastIx] & 0x80) !== 0;\n\n  var y = utils.intFromLE(normed);\n  return this.curve.pointFromY(y, xIsOdd);\n};\n\nEDDSA.prototype.encodeInt = function encodeInt(num) {\n  return num.toArray('le', this.encodingLength);\n};\n\nEDDSA.prototype.decodeInt = function decodeInt(bytes) {\n  return utils.intFromLE(bytes);\n};\n\nEDDSA.prototype.isPoint = function isPoint(val) {\n  return val instanceof this.pointClass;\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar cachedProperty = utils.cachedProperty;\n\n/**\n* @param {EDDSA} eddsa - instance\n* @param {Object} params - public/private key parameters\n*\n* @param {Array<Byte>} [params.secret] - secret seed bytes\n* @param {Point} [params.pub] - public key point (aka `A` in eddsa terms)\n* @param {Array<Byte>} [params.pub] - public key point encoded as bytes\n*\n*/\nfunction KeyPair(eddsa, params) {\n  this.eddsa = eddsa;\n  this._secret = parseBytes(params.secret);\n  if (eddsa.isPoint(params.pub))\n    this._pub = params.pub;\n  else\n    this._pubBytes = parseBytes(params.pub);\n}\n\nKeyPair.fromPublic = function fromPublic(eddsa, pub) {\n  if (pub instanceof KeyPair)\n    return pub;\n  return new KeyPair(eddsa, { pub: pub });\n};\n\nKeyPair.fromSecret = function fromSecret(eddsa, secret) {\n  if (secret instanceof KeyPair)\n    return secret;\n  return new KeyPair(eddsa, { secret: secret });\n};\n\nKeyPair.prototype.secret = function secret() {\n  return this._secret;\n};\n\ncachedProperty(KeyPair, 'pubBytes', function pubBytes() {\n  return this.eddsa.encodePoint(this.pub());\n});\n\ncachedProperty(KeyPair, 'pub', function pub() {\n  if (this._pubBytes)\n    return this.eddsa.decodePoint(this._pubBytes);\n  return this.eddsa.g.mul(this.priv());\n});\n\ncachedProperty(KeyPair, 'privBytes', function privBytes() {\n  var eddsa = this.eddsa;\n  var hash = this.hash();\n  var lastIx = eddsa.encodingLength - 1;\n\n  var a = hash.slice(0, eddsa.encodingLength);\n  a[0] &= 248;\n  a[lastIx] &= 127;\n  a[lastIx] |= 64;\n\n  return a;\n});\n\ncachedProperty(KeyPair, 'priv', function priv() {\n  return this.eddsa.decodeInt(this.privBytes());\n});\n\ncachedProperty(KeyPair, 'hash', function hash() {\n  return this.eddsa.hash().update(this.secret()).digest();\n});\n\ncachedProperty(KeyPair, 'messagePrefix', function messagePrefix() {\n  return this.hash().slice(this.eddsa.encodingLength);\n});\n\nKeyPair.prototype.sign = function sign(message) {\n  assert(this._secret, 'KeyPair can only verify');\n  return this.eddsa.sign(message, this);\n};\n\nKeyPair.prototype.verify = function verify(message, sig) {\n  return this.eddsa.verify(message, sig, this);\n};\n\nKeyPair.prototype.getSecret = function getSecret(enc) {\n  assert(this._secret, 'KeyPair is public only');\n  return utils.encode(this.secret(), enc);\n};\n\nKeyPair.prototype.getPublic = function getPublic(enc) {\n  return utils.encode(this.pubBytes(), enc);\n};\n\nmodule.exports = KeyPair;\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar cachedProperty = utils.cachedProperty;\nvar parseBytes = utils.parseBytes;\n\n/**\n* @param {EDDSA} eddsa - eddsa instance\n* @param {Array<Bytes>|Object} sig -\n* @param {Array<Bytes>|Point} [sig.R] - R point as Point or bytes\n* @param {Array<Bytes>|bn} [sig.S] - S scalar as bn or bytes\n* @param {Array<Bytes>} [sig.Rencoded] - R point encoded\n* @param {Array<Bytes>} [sig.Sencoded] - S scalar encoded\n*/\nfunction Signature(eddsa, sig) {\n  this.eddsa = eddsa;\n\n  if (typeof sig !== 'object')\n    sig = parseBytes(sig);\n\n  if (Array.isArray(sig)) {\n    sig = {\n      R: sig.slice(0, eddsa.encodingLength),\n      S: sig.slice(eddsa.encodingLength)\n    };\n  }\n\n  assert(sig.R && sig.S, 'Signature without R or S');\n\n  if (eddsa.isPoint(sig.R))\n    this._R = sig.R;\n  if (sig.S instanceof BN)\n    this._S = sig.S;\n\n  this._Rencoded = Array.isArray(sig.R) ? sig.R : sig.Rencoded;\n  this._Sencoded = Array.isArray(sig.S) ? sig.S : sig.Sencoded;\n}\n\ncachedProperty(Signature, 'S', function S() {\n  return this.eddsa.decodeInt(this.Sencoded());\n});\n\ncachedProperty(Signature, 'R', function R() {\n  return this.eddsa.decodePoint(this.Rencoded());\n});\n\ncachedProperty(Signature, 'Rencoded', function Rencoded() {\n  return this.eddsa.encodePoint(this.R());\n});\n\ncachedProperty(Signature, 'Sencoded', function Sencoded() {\n  return this.eddsa.encodeInt(this.S());\n});\n\nSignature.prototype.toBytes = function toBytes() {\n  return this.Rencoded().concat(this.Sencoded());\n};\n\nSignature.prototype.toHex = function toHex() {\n  return utils.encode(this.toBytes(), 'hex').toUpperCase();\n};\n\nmodule.exports = Signature;\n","const createHmac = require('create-hmac')\n\nconst ONE1 = Buffer.alloc(1, 1)\nconst ZERO1 = Buffer.alloc(1, 0)\n\n// https://tools.ietf.org/html/rfc6979#section-3.2\nfunction deterministicGenerateK (hash, x, checkSig, isPrivate, extraEntropy) {\n  // Step A, ignored as hash already provided\n  // Step B\n  // Step C\n  let k = Buffer.alloc(32, 0)\n  let v = Buffer.alloc(32, 1)\n\n  // Step D\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ZERO1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step E\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step F\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ONE1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step G\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step H1/H2a, ignored as tlen === qlen (256 bit)\n  // Step H2b\n  v = createHmac('sha256', k).update(v).digest()\n\n  let T = v\n\n  // Step H3, repeat until T is within the interval [1, n - 1] and is suitable for ECDSA\n  while (!isPrivate(T) || !checkSig(T)) {\n    k = createHmac('sha256', k)\n      .update(v)\n      .update(ZERO1)\n      .digest()\n\n    v = createHmac('sha256', k).update(v).digest()\n\n    // Step H1/H2a, again, ignored as tlen === qlen (256 bit)\n    // Step H2b again\n    v = createHmac('sha256', k).update(v).digest()\n    T = v\n  }\n\n  return T\n}\n\nmodule.exports = deterministicGenerateK\n","var NATIVE = require('./native')\nvar ERRORS = require('./errors')\n\nfunction _Buffer (value) {\n  return Buffer.isBuffer(value)\n}\n\nfunction Hex (value) {\n  return typeof value === 'string' && /^([0-9a-f]{2})+$/i.test(value)\n}\n\nfunction _LengthN (type, length) {\n  var name = type.toJSON()\n\n  function Length (value) {\n    if (!type(value)) return false\n    if (value.length === length) return true\n\n    throw ERRORS.tfCustomError(name + '(Length: ' + length + ')', name + '(Length: ' + value.length + ')')\n  }\n  Length.toJSON = function () { return name }\n\n  return Length\n}\n\nvar _ArrayN = _LengthN.bind(null, NATIVE.Array)\nvar _BufferN = _LengthN.bind(null, _Buffer)\nvar _HexN = _LengthN.bind(null, Hex)\nvar _StringN = _LengthN.bind(null, NATIVE.String)\n\nfunction Range (a, b, f) {\n  f = f || NATIVE.Number\n  function _range (value, strict) {\n    return f(value, strict) && (value > a) && (value < b)\n  }\n  _range.toJSON = function () {\n    return `${f.toJSON()} between [${a}, ${b}]`\n  }\n  return _range\n}\n\nvar INT53_MAX = Math.pow(2, 53) - 1\n\nfunction Finite (value) {\n  return typeof value === 'number' && isFinite(value)\n}\nfunction Int8 (value) { return ((value << 24) >> 24) === value }\nfunction Int16 (value) { return ((value << 16) >> 16) === value }\nfunction Int32 (value) { return (value | 0) === value }\nfunction Int53 (value) {\n  return typeof value === 'number' &&\n    value >= -INT53_MAX &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\nfunction UInt8 (value) { return (value & 0xff) === value }\nfunction UInt16 (value) { return (value & 0xffff) === value }\nfunction UInt32 (value) { return (value >>> 0) === value }\nfunction UInt53 (value) {\n  return typeof value === 'number' &&\n    value >= 0 &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\n\nvar types = {\n  ArrayN: _ArrayN,\n  Buffer: _Buffer,\n  BufferN: _BufferN,\n  Finite: Finite,\n  Hex: Hex,\n  HexN: _HexN,\n  Int8: Int8,\n  Int16: Int16,\n  Int32: Int32,\n  Int53: Int53,\n  Range: Range,\n  StringN: _StringN,\n  UInt8: UInt8,\n  UInt16: UInt16,\n  UInt32: UInt32,\n  UInt53: UInt53\n}\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// output: OP_RETURN ...\nfunction p2data(a, opts) {\n  if (!a.data && !a.output) throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      data: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'embed', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.data) return;\n    return bscript.compile([OPS.OP_RETURN].concat(a.data));\n  });\n  lazy.prop(o, 'data', () => {\n    if (!a.output) return;\n    return bscript.decompile(a.output).slice(1);\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      const chunks = bscript.decompile(a.output);\n      if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n      if (!chunks.slice(1).every(typef.Buffer))\n        throw new TypeError('Output is invalid');\n      if (a.data && !stacksEqual(a.data, o.data))\n        throw new TypeError('Data mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2data = p2data;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nexports.decode = decode;\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n    ? 4\n    : i > 0x7fff\n    ? 3\n    : i > 0x7f\n    ? 2\n    : i > 0x00\n    ? 1\n    : 0;\n}\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst typeforce = require('typeforce');\nconst ZERO = Buffer.alloc(1, 0);\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return { signature, hashType };\n}\nexports.decode = decode;\nfunction encode(signature, hashType) {\n  typeforce(\n    {\n      signature: types.BufferN(64),\n      hashType: types.UInt8,\n    },\n    { signature, hashType },\n  );\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;\n","var OPS = require('bitcoin-ops')\n\nfunction encodingLength (i) {\n  return i < OPS.OP_PUSHDATA1 ? 1\n  : i <= 0xff ? 2\n  : i <= 0xffff ? 3\n  : 5\n}\n\nfunction encode (buffer, number, offset) {\n  var size = encodingLength(number)\n\n  // ~6 bit\n  if (size === 1) {\n    buffer.writeUInt8(number, offset)\n\n  // 8 bit\n  } else if (size === 2) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA1, offset)\n    buffer.writeUInt8(number, offset + 1)\n\n  // 16 bit\n  } else if (size === 3) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA2, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n\n  // 32 bit\n  } else {\n    buffer.writeUInt8(OPS.OP_PUSHDATA4, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n  }\n\n  return size\n}\n\nfunction decode (buffer, offset) {\n  var opcode = buffer.readUInt8(offset)\n  var number, size\n\n  // ~6 bit\n  if (opcode < OPS.OP_PUSHDATA1) {\n    number = opcode\n    size = 1\n\n  // 8 bit\n  } else if (opcode === OPS.OP_PUSHDATA1) {\n    if (offset + 2 > buffer.length) return null\n    number = buffer.readUInt8(offset + 1)\n    size = 2\n\n  // 16 bit\n  } else if (opcode === OPS.OP_PUSHDATA2) {\n    if (offset + 3 > buffer.length) return null\n    number = buffer.readUInt16LE(offset + 1)\n    size = 3\n\n  // 32 bit\n  } else {\n    if (offset + 5 > buffer.length) return null\n    if (opcode !== OPS.OP_PUSHDATA4) throw new Error('Unexpected opcode')\n\n    number = buffer.readUInt32LE(offset + 1)\n    size = 5\n  }\n\n  return {\n    opcode: opcode,\n    number: number,\n    size: size\n  }\n}\n\nmodule.exports = {\n  encodingLength: encodingLength,\n  encode: encode,\n  decode: decode\n}\n","var OPS = require('./index.json')\n\nvar map = {}\nfor (var op in OPS) {\n  var code = OPS[op]\n  map[code] = op\n}\n\nmodule.exports = map\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\nconst typef = require('typeforce');\nconst ecc = require('tiny-secp256k1');\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      bscript.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      m: typef.maybe(typef.Number),\n      n: typef.maybe(typef.Number),\n      output: typef.maybe(typef.Buffer),\n      pubkeys: typef.maybe(typef.arrayOf(ecc.isPoint)),\n      signatures: typef.maybe(typef.arrayOf(isAcceptableSignature)),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = bscript.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  lazy.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return bscript.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  lazy.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  lazy.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  lazy.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  lazy.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return bscript.decompile(a.input).slice(1);\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return bscript.compile([OPS.OP_0].concat(a.signatures));\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  lazy.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      if (!typef.Number(chunks[0])) throw new TypeError('Output is invalid');\n      if (!typef.Number(chunks[chunks.length - 2]))\n        throw new TypeError('Output is invalid');\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => ecc.isPoint(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !stacksEqual(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !stacksEqual(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2ms = p2ms;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\n// input: {signature}\n// output: {pubKey} OP_CHECKSIG\nfunction p2pk(a, opts) {\n  if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pk', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.pubkey) return;\n    return bscript.compile([a.pubkey, OPS.OP_CHECKSIG]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.output) return;\n    return a.output.slice(1, -1);\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signature) return;\n    return bscript.compile([a.signature]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)\n        throw new TypeError('Output is invalid');\n      if (!ecc.isPoint(o.pubkey))\n        throw new TypeError('Output pubkey is invalid');\n      if (a.pubkey && !a.pubkey.equals(o.pubkey))\n        throw new TypeError('Pubkey mismatch');\n    }\n    if (a.signature) {\n      if (a.input && !a.input.equals(o.input))\n        throw new TypeError('Signature mismatch');\n    }\n    if (a.input) {\n      if (_chunks().length !== 1) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(o.signature))\n        throw new TypeError('Input has invalid signature');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pk = p2pk;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bs58check = require('bs58check');\n// input: {signature} {pubkey}\n// output: OP_DUP OP_HASH160 {hash160(pubkey)} OP_EQUALVERIFY OP_CHECKSIG\nfunction p2pkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(25)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(network.pubKeyHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(3, 23);\n    if (a.address) return _address().hash;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([\n      OPS.OP_DUP,\n      OPS.OP_HASH160,\n      o.hash,\n      OPS.OP_EQUALVERIFY,\n      OPS.OP_CHECKSIG,\n    ]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.input) return;\n    return _chunks()[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return bscript.compile([a.signature, a.pubkey]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.pubKeyHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 25 ||\n        a.output[0] !== OPS.OP_DUP ||\n        a.output[1] !== OPS.OP_HASH160 ||\n        a.output[2] !== 0x14 ||\n        a.output[23] !== OPS.OP_EQUALVERIFY ||\n        a.output[24] !== OPS.OP_CHECKSIG\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(3, 23);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.input) {\n      const chunks = _chunks();\n      if (chunks.length !== 2) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(chunks[0]))\n        throw new TypeError('Input has invalid signature');\n      if (!ecc.isPoint(chunks[1]))\n        throw new TypeError('Input has invalid pubkey');\n      if (a.signature && !a.signature.equals(chunks[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(chunks[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(chunks[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pkh = p2pkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst bs58check = require('bs58check');\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(23)),\n      redeem: typef.maybe({\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        input: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.Buffer),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const _redeem = lazy.value(() => {\n    const chunks = _chunks();\n    return {\n      network,\n      output: chunks[chunks.length - 1],\n      input: bscript.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(o.network.scriptHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return bcrypto.hash160(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  lazy.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return bscript.compile(\n      [].concat(bscript.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  lazy.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = bscript.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        // match hash against other sources\n        const hash2 = bcrypto.hash160(redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = bscript.decompile(redeem.input);\n          if (!bscript.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!Buffer.isBuffer(_redeem().output))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (a.redeem.output && !a.redeem.output.equals(redeem.output))\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && !a.redeem.input.equals(redeem.input))\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !stacksEqual(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2sh = p2sh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\n// witness: {signature} {pubKey}\n// input: <>\n// output: OP_0 {pubKeyHash}\nfunction p2wpkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      input: typef.maybe(typef.BufferN(0)),\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.BufferN(22)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2wpkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().data;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (!a.witness) return;\n    return a.witness[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.witness) return;\n    return a.witness[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return [a.signature, a.pubkey];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 20)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 22 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x14\n      )\n        throw new TypeError('Output is invalid');\n      if (hash.length > 0 && !hash.equals(a.output.slice(2)))\n        throw new TypeError('Hash mismatch');\n      else hash = a.output.slice(2);\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.witness) {\n      if (a.witness.length !== 2) throw new TypeError('Witness is invalid');\n      if (!bscript.isCanonicalScriptSignature(a.witness[0]))\n        throw new TypeError('Witness has invalid signature');\n      if (!ecc.isPoint(a.witness[1]))\n        throw new TypeError('Witness has invalid pubkey');\n      if (a.signature && !a.signature.equals(a.witness[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(a.witness[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(a.witness[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wpkh = p2wpkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\nfunction p2wsh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(32)),\n      output: typef.maybe(typef.BufferN(34)),\n      redeem: typef.maybe({\n        input: typef.maybe(typef.Buffer),\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.BufferN(0)),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const _rchunks = lazy.value(() => {\n    return bscript.decompile(a.redeem.input);\n  });\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.redeem && o.redeem.output) return bcrypto.sha256(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'redeem', () => {\n    if (!a.witness) return;\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1),\n    };\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = bscript.toStack(_rchunks());\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem);\n      o.redeem.input = EMPTY_BUFFER;\n      return [].concat(stack, a.redeem.output);\n    }\n    if (!a.redeem) return;\n    if (!a.redeem.output) return;\n    if (!a.redeem.witness) return;\n    return [].concat(a.redeem.witness, a.redeem.output);\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2wsh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().prefix !== network.bech32)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      )\n        throw new TypeError('Ambiguous witness source');\n      // is the redeem output non-empty?\n      if (a.redeem.output) {\n        if (bscript.decompile(a.redeem.output).length === 0)\n          throw new TypeError('Redeem.output is invalid');\n        // match hash against other sources\n        const hash2 = bcrypto.sha256(a.redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (a.redeem.input && !bscript.isPushOnly(_rchunks()))\n        throw new TypeError('Non push-only scriptSig');\n      if (\n        a.witness &&\n        a.redeem.witness &&\n        !stacksEqual(a.witness, a.redeem.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.output &&\n        !a.redeem.output.equals(a.witness[a.witness.length - 1])\n      )\n        throw new TypeError('Witness and redeem.output mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wsh = p2wsh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst fastMerkleRoot = require('merkle-lib/fastRoot');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nconst errorMerkleNoTxes = new TypeError(\n  'Cannot compute merkle root for zero transactions',\n);\nconst errorWitnessNotSegwit = new TypeError(\n  'Cannot compute witness commit for non-segwit block',\n);\nclass Block {\n  constructor() {\n    this.version = 1;\n    this.prevHash = undefined;\n    this.merkleRoot = undefined;\n    this.timestamp = 0;\n    this.witnessCommit = undefined;\n    this.bits = 0;\n    this.nonce = 0;\n    this.transactions = undefined;\n  }\n  static fromBuffer(buffer) {\n    if (buffer.length < 80) throw new Error('Buffer too small (< 80 bytes)');\n    let offset = 0;\n    const readSlice = n => {\n      offset += n;\n      return buffer.slice(offset - n, offset);\n    };\n    const readUInt32 = () => {\n      const i = buffer.readUInt32LE(offset);\n      offset += 4;\n      return i;\n    };\n    const readInt32 = () => {\n      const i = buffer.readInt32LE(offset);\n      offset += 4;\n      return i;\n    };\n    const block = new Block();\n    block.version = readInt32();\n    block.prevHash = readSlice(32);\n    block.merkleRoot = readSlice(32);\n    block.timestamp = readUInt32();\n    block.bits = readUInt32();\n    block.nonce = readUInt32();\n    if (buffer.length === 80) return block;\n    const readVarInt = () => {\n      const vi = varuint.decode(buffer, offset);\n      offset += varuint.decode.bytes;\n      return vi;\n    };\n    const readTransaction = () => {\n      const tx = transaction_1.Transaction.fromBuffer(\n        buffer.slice(offset),\n        true,\n      );\n      offset += tx.byteLength();\n      return tx;\n    };\n    const nTransactions = readVarInt();\n    block.transactions = [];\n    for (let i = 0; i < nTransactions; ++i) {\n      const tx = readTransaction();\n      block.transactions.push(tx);\n    }\n    const witnessCommit = block.getWitnessCommit();\n    // This Block contains a witness commit\n    if (witnessCommit) block.witnessCommit = witnessCommit;\n    return block;\n  }\n  static fromHex(hex) {\n    return Block.fromBuffer(Buffer.from(hex, 'hex'));\n  }\n  static calculateTarget(bits) {\n    const exponent = ((bits & 0xff000000) >> 24) - 3;\n    const mantissa = bits & 0x007fffff;\n    const target = Buffer.alloc(32, 0);\n    target.writeUIntBE(mantissa, 29 - exponent, 3);\n    return target;\n  }\n  static calculateMerkleRoot(transactions, forWitness) {\n    typeforce([{ getHash: types.Function }], transactions);\n    if (transactions.length === 0) throw errorMerkleNoTxes;\n    if (forWitness && !txesHaveWitnessCommit(transactions))\n      throw errorWitnessNotSegwit;\n    const hashes = transactions.map(transaction =>\n      transaction.getHash(forWitness),\n    );\n    const rootHash = fastMerkleRoot(hashes, bcrypto.hash256);\n    return forWitness\n      ? bcrypto.hash256(\n          Buffer.concat([rootHash, transactions[0].ins[0].witness[0]]),\n        )\n      : rootHash;\n  }\n  getWitnessCommit() {\n    if (!txesHaveWitnessCommit(this.transactions)) return null;\n    // The merkle root for the witness data is in an OP_RETURN output.\n    // There is no rule for the index of the output, so use filter to find it.\n    // The root is prepended with 0xaa21a9ed so check for 0x6a24aa21a9ed\n    // If multiple commits are found, the output with highest index is assumed.\n    const witnessCommits = this.transactions[0].outs\n      .filter(out =>\n        out.script.slice(0, 6).equals(Buffer.from('6a24aa21a9ed', 'hex')),\n      )\n      .map(out => out.script.slice(6, 38));\n    if (witnessCommits.length === 0) return null;\n    // Use the commit with the highest output (should only be one though)\n    const result = witnessCommits[witnessCommits.length - 1];\n    if (!(result instanceof Buffer && result.length === 32)) return null;\n    return result;\n  }\n  hasWitnessCommit() {\n    if (\n      this.witnessCommit instanceof Buffer &&\n      this.witnessCommit.length === 32\n    )\n      return true;\n    if (this.getWitnessCommit() !== null) return true;\n    return false;\n  }\n  hasWitness() {\n    return anyTxHasWitness(this.transactions);\n  }\n  byteLength(headersOnly) {\n    if (headersOnly || !this.transactions) return 80;\n    return (\n      80 +\n      varuint.encodingLength(this.transactions.length) +\n      this.transactions.reduce((a, x) => a + x.byteLength(), 0)\n    );\n  }\n  getHash() {\n    return bcrypto.hash256(this.toBuffer(true));\n  }\n  getId() {\n    return bufferutils_1.reverseBuffer(this.getHash()).toString('hex');\n  }\n  getUTCDate() {\n    const date = new Date(0); // epoch\n    date.setUTCSeconds(this.timestamp);\n    return date;\n  }\n  // TODO: buffer, offset compatibility\n  toBuffer(headersOnly) {\n    const buffer = Buffer.allocUnsafe(this.byteLength(headersOnly));\n    let offset = 0;\n    const writeSlice = slice => {\n      slice.copy(buffer, offset);\n      offset += slice.length;\n    };\n    const writeInt32 = i => {\n      buffer.writeInt32LE(i, offset);\n      offset += 4;\n    };\n    const writeUInt32 = i => {\n      buffer.writeUInt32LE(i, offset);\n      offset += 4;\n    };\n    writeInt32(this.version);\n    writeSlice(this.prevHash);\n    writeSlice(this.merkleRoot);\n    writeUInt32(this.timestamp);\n    writeUInt32(this.bits);\n    writeUInt32(this.nonce);\n    if (headersOnly || !this.transactions) return buffer;\n    varuint.encode(this.transactions.length, buffer, offset);\n    offset += varuint.encode.bytes;\n    this.transactions.forEach(tx => {\n      const txSize = tx.byteLength(); // TODO: extract from toBuffer?\n      tx.toBuffer(buffer, offset);\n      offset += txSize;\n    });\n    return buffer;\n  }\n  toHex(headersOnly) {\n    return this.toBuffer(headersOnly).toString('hex');\n  }\n  checkTxRoots() {\n    // If the Block has segwit transactions but no witness commit,\n    // there's no way it can be valid, so fail the check.\n    const hasWitnessCommit = this.hasWitnessCommit();\n    if (!hasWitnessCommit && this.hasWitness()) return false;\n    return (\n      this.__checkMerkleRoot() &&\n      (hasWitnessCommit ? this.__checkWitnessCommit() : true)\n    );\n  }\n  checkProofOfWork() {\n    const hash = bufferutils_1.reverseBuffer(this.getHash());\n    const target = Block.calculateTarget(this.bits);\n    return hash.compare(target) <= 0;\n  }\n  __checkMerkleRoot() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);\n    return this.merkleRoot.compare(actualMerkleRoot) === 0;\n  }\n  __checkWitnessCommit() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    if (!this.hasWitnessCommit()) throw errorWitnessNotSegwit;\n    const actualWitnessCommit = Block.calculateMerkleRoot(\n      this.transactions,\n      true,\n    );\n    return this.witnessCommit.compare(actualWitnessCommit) === 0;\n  }\n}\nexports.Block = Block;\nfunction txesHaveWitnessCommit(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions[0] &&\n    transactions[0].ins &&\n    transactions[0].ins instanceof Array &&\n    transactions[0].ins[0] &&\n    transactions[0].ins[0].witness &&\n    transactions[0].ins[0].witness instanceof Array &&\n    transactions[0].ins[0].witness.length > 0\n  );\n}\nfunction anyTxHasWitness(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions.some(\n      tx =>\n        typeof tx === 'object' &&\n        tx.ins instanceof Array &&\n        tx.ins.some(\n          input =>\n            typeof input === 'object' &&\n            input.witness instanceof Array &&\n            input.witness.length > 0,\n        ),\n    )\n  );\n}\n","// constant-space merkle root calculation algorithm\nmodule.exports = function fastRoot (values, digestFn) {\n  if (!Array.isArray(values)) throw TypeError('Expected values Array')\n  if (typeof digestFn !== 'function') throw TypeError('Expected digest Function')\n\n  var length = values.length\n  var results = values.concat()\n\n  while (length > 1) {\n    var j = 0\n\n    for (var i = 0; i < length; i += 2, ++j) {\n      var left = results[i]\n      var right = i + 1 === length ? left : results[i + 1]\n      var data = Buffer.concat([left, right])\n\n      results[j] = digestFn(data)\n    }\n\n    length = j\n  }\n\n  return results[0]\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip174_1 = require('bip174');\nconst varuint = require('bip174/src/lib/converter/varint');\nconst utils_1 = require('bip174/src/lib/utils');\nconst address_1 = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst crypto_1 = require('./crypto');\nconst ecpair_1 = require('./ecpair');\nconst networks_1 = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst transaction_1 = require('./transaction');\n/**\n * These are the default arguments for a Psbt instance.\n */\nconst DEFAULT_OPTS = {\n  /**\n   * A bitcoinjs Network object. This is only used if you pass an `address`\n   * parameter to addOutput. Otherwise it is not needed and can be left default.\n   */\n  network: networks_1.bitcoin,\n  /**\n   * When extractTransaction is called, the fee rate is checked.\n   * THIS IS NOT TO BE RELIED ON.\n   * It is only here as a last ditch effort to prevent sending a 500 BTC fee etc.\n   */\n  maximumFeeRate: 5000,\n};\n/**\n * Psbt class can parse and generate a PSBT binary based off of the BIP174.\n * There are 6 roles that this class fulfills. (Explained in BIP174)\n *\n * Creator: This can be done with `new Psbt()`\n * Updater: This can be done with `psbt.addInput(input)`, `psbt.addInputs(inputs)`,\n *   `psbt.addOutput(output)`, `psbt.addOutputs(outputs)` when you are looking to\n *   add new inputs and outputs to the PSBT, and `psbt.updateGlobal(itemObject)`,\n *   `psbt.updateInput(itemObject)`, `psbt.updateOutput(itemObject)`\n *   addInput requires hash: Buffer | string; and index: number; as attributes\n *   and can also include any attributes that are used in updateInput method.\n *   addOutput requires script: Buffer; and value: number; and likewise can include\n *   data for updateOutput.\n *   For a list of what attributes should be what types. Check the bip174 library.\n *   Also, check the integration tests for some examples of usage.\n * Signer: There are a few methods. signAllInputs and signAllInputsAsync, which will search all input\n *   information for your pubkey or pubkeyhash, and only sign inputs where it finds\n *   your info. Or you can explicitly sign a specific input with signInput and\n *   signInputAsync. For the async methods you can create a SignerAsync object\n *   and use something like a hardware wallet to sign with. (You must implement this)\n * Combiner: psbts can be combined easily with `psbt.combine(psbt2, psbt3, psbt4 ...)`\n *   the psbt calling combine will always have precedence when a conflict occurs.\n *   Combine checks if the internal bitcoin transaction is the same, so be sure that\n *   all sequences, version, locktime, etc. are the same before combining.\n * Input Finalizer: This role is fairly important. Not only does it need to construct\n *   the input scriptSigs and witnesses, but it SHOULD verify the signatures etc.\n *   Before running `psbt.finalizeAllInputs()` please run `psbt.validateSignaturesOfAllInputs()`\n *   Running any finalize method will delete any data in the input(s) that are no longer\n *   needed due to the finalized scripts containing the information.\n * Transaction Extractor: This role will perform some checks before returning a\n *   Transaction object. Such as fee rate not being larger than maximumFeeRate etc.\n */\nclass Psbt {\n  constructor(opts = {}, data = new bip174_1.Psbt(new PsbtTransaction())) {\n    this.data = data;\n    // set defaults\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    this.__CACHE = {\n      __NON_WITNESS_UTXO_TX_CACHE: [],\n      __NON_WITNESS_UTXO_BUF_CACHE: [],\n      __TX_IN_CACHE: {},\n      __TX: this.data.globalMap.unsignedTx.tx,\n    };\n    if (this.data.inputs.length === 0) this.setVersion(2);\n    // Make data hidden when enumerating\n    const dpew = (obj, attr, enumerable, writable) =>\n      Object.defineProperty(obj, attr, {\n        enumerable,\n        writable,\n      });\n    dpew(this, '__CACHE', false, true);\n    dpew(this, 'opts', false, true);\n  }\n  static fromBase64(data, opts = {}) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromHex(data, opts = {}) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromBuffer(buffer, opts = {}) {\n    const psbtBase = bip174_1.Psbt.fromBuffer(buffer, transactionFromBuffer);\n    const psbt = new Psbt(opts, psbtBase);\n    checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);\n    return psbt;\n  }\n  get inputCount() {\n    return this.data.inputs.length;\n  }\n  combine(...those) {\n    this.data.combine(...those.map(o => o.data));\n    return this;\n  }\n  clone() {\n    // TODO: more efficient cloning\n    const res = Psbt.fromBuffer(this.data.toBuffer());\n    res.opts = JSON.parse(JSON.stringify(this.opts));\n    return res;\n  }\n  setMaximumFeeRate(satoshiPerByte) {\n    check32Bit(satoshiPerByte); // 42.9 BTC per byte IS excessive... so throw\n    this.opts.maximumFeeRate = satoshiPerByte;\n  }\n  setVersion(version) {\n    check32Bit(version);\n    checkInputsForPartialSig(this.data.inputs, 'setVersion');\n    const c = this.__CACHE;\n    c.__TX.version = version;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setLocktime(locktime) {\n    check32Bit(locktime);\n    checkInputsForPartialSig(this.data.inputs, 'setLocktime');\n    const c = this.__CACHE;\n    c.__TX.locktime = locktime;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setInputSequence(inputIndex, sequence) {\n    check32Bit(sequence);\n    checkInputsForPartialSig(this.data.inputs, 'setInputSequence');\n    const c = this.__CACHE;\n    if (c.__TX.ins.length <= inputIndex) {\n      throw new Error('Input index too high');\n    }\n    c.__TX.ins[inputIndex].sequence = sequence;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addInputs(inputDatas) {\n    inputDatas.forEach(inputData => this.addInput(inputData));\n    return this;\n  }\n  addInput(inputData) {\n    checkInputsForPartialSig(this.data.inputs, 'addInput');\n    const c = this.__CACHE;\n    this.data.addInput(inputData);\n    const txIn = c.__TX.ins[c.__TX.ins.length - 1];\n    checkTxInputCache(c, txIn);\n    const inputIndex = this.data.inputs.length - 1;\n    const input = this.data.inputs[inputIndex];\n    if (input.nonWitnessUtxo) {\n      addNonWitnessTxCache(this.__CACHE, input, inputIndex);\n    }\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addOutputs(outputDatas) {\n    outputDatas.forEach(outputData => this.addOutput(outputData));\n    return this;\n  }\n  addOutput(outputData) {\n    checkInputsForPartialSig(this.data.inputs, 'addOutput');\n    const { address } = outputData;\n    if (typeof address === 'string') {\n      const { network } = this.opts;\n      const script = address_1.toOutputScript(address, network);\n      outputData = Object.assign(outputData, { script });\n    }\n    const c = this.__CACHE;\n    this.data.addOutput(outputData);\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  extractTransaction(disableFeeCheck) {\n    if (!this.data.inputs.every(isFinalized)) throw new Error('Not finalized');\n    const c = this.__CACHE;\n    if (!disableFeeCheck) {\n      checkFees(this, c, this.opts);\n    }\n    if (c.__EXTRACTED_TX) return c.__EXTRACTED_TX;\n    const tx = c.__TX.clone();\n    inputFinalizeGetAmts(this.data.inputs, tx, c, true);\n    return tx;\n  }\n  getFeeRate() {\n    return getTxCacheValue(\n      '__FEE_RATE',\n      'fee rate',\n      this.data.inputs,\n      this.__CACHE,\n    );\n  }\n  getFee() {\n    return getTxCacheValue('__FEE', 'fee', this.data.inputs, this.__CACHE);\n  }\n  finalizeAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    range(this.data.inputs.length).forEach(idx => this.finalizeInput(idx));\n    return this;\n  }\n  finalizeInput(inputIndex) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(\n      inputIndex,\n      input,\n      this.__CACHE,\n    );\n    if (!script) throw new Error(`No script found for input #${inputIndex}`);\n    const scriptType = classifyScript(script);\n    if (!canFinalize(input, script, scriptType))\n      throw new Error(`Can not finalize input #${inputIndex}`);\n    checkPartialSigSighashes(input);\n    const { finalScriptSig, finalScriptWitness } = getFinalScripts(\n      script,\n      scriptType,\n      input.partialSig,\n      isSegwit,\n      isP2SH,\n      isP2WSH,\n    );\n    if (finalScriptSig) this.data.updateInput(inputIndex, { finalScriptSig });\n    if (finalScriptWitness)\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    if (!finalScriptSig && !finalScriptWitness)\n      throw new Error(`Unknown error finalizing input #${inputIndex}`);\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  validateSignaturesOfAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    const results = range(this.data.inputs.length).map(idx =>\n      this.validateSignaturesOfInput(idx),\n    );\n    return results.reduce((final, res) => res === true && final, true);\n  }\n  validateSignaturesOfInput(inputIndex, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const partialSig = (input || {}).partialSig;\n    if (!input || !partialSig || partialSig.length < 1)\n      throw new Error('No signatures to validate');\n    const mySigs = pubkey\n      ? partialSig.filter(sig => sig.pubkey.equals(pubkey))\n      : partialSig;\n    if (mySigs.length < 1) throw new Error('No signatures for this pubkey');\n    const results = [];\n    let hashCache;\n    let scriptCache;\n    let sighashCache;\n    for (const pSig of mySigs) {\n      const sig = bscript.signature.decode(pSig.signature);\n      const { hash, script } =\n        sighashCache !== sig.hashType\n          ? getHashForSig(\n              inputIndex,\n              Object.assign({}, input, { sighashType: sig.hashType }),\n              this.__CACHE,\n            )\n          : { hash: hashCache, script: scriptCache };\n      sighashCache = sig.hashType;\n      hashCache = hash;\n      scriptCache = script;\n      checkScriptForPubkey(pSig.pubkey, script, 'verify');\n      const keypair = ecpair_1.fromPublicKey(pSig.pubkey);\n      results.push(keypair.verify(hash, sig.signature));\n    }\n    return results.every(res => res === true);\n  }\n  signAllInputsHD(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInputHD(i, hdKeyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsHDAsync(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const results = [];\n      const promises = [];\n      for (const i of range(this.data.inputs.length)) {\n        promises.push(\n          this.signInputHDAsync(i, hdKeyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInputHD(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n    signers.forEach(signer => this.signInput(inputIndex, signer, sighashTypes));\n    return this;\n  }\n  signInputHDAsync(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n      const promises = signers.map(signer =>\n        this.signInputAsync(inputIndex, signer, sighashTypes),\n      );\n      return Promise.all(promises)\n        .then(() => {\n          resolve();\n        })\n        .catch(reject);\n    });\n  }\n  signAllInputs(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    // TODO: Add a pubkey/pubkeyhash cache to each input\n    // as input information is added, then eventually\n    // optimize this method.\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInput(i, keyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsAsync(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      // TODO: Add a pubkey/pubkeyhash cache to each input\n      // as input information is added, then eventually\n      // optimize this method.\n      const results = [];\n      const promises = [];\n      for (const [i] of this.data.inputs.entries()) {\n        promises.push(\n          this.signInputAsync(i, keyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInput(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    const partialSig = [\n      {\n        pubkey: keyPair.publicKey,\n        signature: bscript.signature.encode(keyPair.sign(hash), sighashType),\n      },\n    ];\n    this.data.updateInput(inputIndex, { partialSig });\n    return this;\n  }\n  signInputAsync(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      const { hash, sighashType } = getHashAndSighashType(\n        this.data.inputs,\n        inputIndex,\n        keyPair.publicKey,\n        this.__CACHE,\n        sighashTypes,\n      );\n      Promise.resolve(keyPair.sign(hash)).then(signature => {\n        const partialSig = [\n          {\n            pubkey: keyPair.publicKey,\n            signature: bscript.signature.encode(signature, sighashType),\n          },\n        ];\n        this.data.updateInput(inputIndex, { partialSig });\n        resolve();\n      });\n    });\n  }\n  toBuffer() {\n    return this.data.toBuffer();\n  }\n  toHex() {\n    return this.data.toHex();\n  }\n  toBase64() {\n    return this.data.toBase64();\n  }\n  updateGlobal(updateData) {\n    this.data.updateGlobal(updateData);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    this.data.updateInput(inputIndex, updateData);\n    if (updateData.nonWitnessUtxo) {\n      addNonWitnessTxCache(\n        this.__CACHE,\n        this.data.inputs[inputIndex],\n        inputIndex,\n      );\n    }\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    this.data.updateOutput(outputIndex, updateData);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    this.data.addUnknownKeyValToGlobal(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    this.data.addUnknownKeyValToInput(inputIndex, keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    this.data.addUnknownKeyValToOutput(outputIndex, keyVal);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n}\nexports.Psbt = Psbt;\n/**\n * This function is needed to pass to the bip174 base class's fromBuffer.\n * It takes the \"transaction buffer\" portion of the psbt buffer and returns a\n * Transaction (From the bip174 library) interface.\n */\nconst transactionFromBuffer = buffer => new PsbtTransaction(buffer);\n/**\n * This class implements the Transaction interface from bip174 library.\n * It contains a bitcoinjs-lib Transaction object.\n */\nclass PsbtTransaction {\n  constructor(buffer = Buffer.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {\n    this.tx = transaction_1.Transaction.fromBuffer(buffer);\n    checkTxEmpty(this.tx);\n    Object.defineProperty(this, 'tx', {\n      enumerable: false,\n      writable: true,\n    });\n  }\n  getInputOutputCounts() {\n    return {\n      inputCount: this.tx.ins.length,\n      outputCount: this.tx.outs.length,\n    };\n  }\n  addInput(input) {\n    if (\n      input.hash === undefined ||\n      input.index === undefined ||\n      (!Buffer.isBuffer(input.hash) && typeof input.hash !== 'string') ||\n      typeof input.index !== 'number'\n    ) {\n      throw new Error('Error adding input.');\n    }\n    const hash =\n      typeof input.hash === 'string'\n        ? bufferutils_1.reverseBuffer(Buffer.from(input.hash, 'hex'))\n        : input.hash;\n    this.tx.addInput(hash, input.index, input.sequence);\n  }\n  addOutput(output) {\n    if (\n      output.script === undefined ||\n      output.value === undefined ||\n      !Buffer.isBuffer(output.script) ||\n      typeof output.value !== 'number'\n    ) {\n      throw new Error('Error adding output.');\n    }\n    this.tx.addOutput(output.script, output.value);\n  }\n  toBuffer() {\n    return this.tx.toBuffer();\n  }\n}\nfunction canFinalize(input, script, scriptType) {\n  switch (scriptType) {\n    case 'pubkey':\n    case 'pubkeyhash':\n    case 'witnesspubkeyhash':\n      return hasSigs(1, input.partialSig);\n    case 'multisig':\n      const p2ms = payments.p2ms({ output: script });\n      return hasSigs(p2ms.m, input.partialSig);\n    default:\n      return false;\n  }\n}\nfunction hasSigs(neededSigs, partialSig) {\n  if (!partialSig) return false;\n  if (partialSig.length > neededSigs) throw new Error('Too many signatures');\n  return partialSig.length === neededSigs;\n}\nfunction isFinalized(input) {\n  return !!input.finalScriptSig || !!input.finalScriptWitness;\n}\nfunction isPaymentFactory(payment) {\n  return script => {\n    try {\n      payment({ output: script });\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n}\nconst isP2MS = isPaymentFactory(payments.p2ms);\nconst isP2PK = isPaymentFactory(payments.p2pk);\nconst isP2PKH = isPaymentFactory(payments.p2pkh);\nconst isP2WPKH = isPaymentFactory(payments.p2wpkh);\nconst isP2WSHScript = isPaymentFactory(payments.p2wsh);\nfunction check32Bit(num) {\n  if (\n    typeof num !== 'number' ||\n    num !== Math.floor(num) ||\n    num > 0xffffffff ||\n    num < 0\n  ) {\n    throw new Error('Invalid 32 bit integer');\n  }\n}\nfunction checkFees(psbt, cache, opts) {\n  const feeRate = cache.__FEE_RATE || psbt.getFeeRate();\n  const vsize = cache.__EXTRACTED_TX.virtualSize();\n  const satoshis = feeRate * vsize;\n  if (feeRate >= opts.maximumFeeRate) {\n    throw new Error(\n      `Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in ` +\n        `fees, which is ${feeRate} satoshi per byte for a transaction ` +\n        `with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per ` +\n        `byte). Use setMaximumFeeRate method to raise your threshold, or ` +\n        `pass true to the first arg of extractTransaction.`,\n    );\n  }\n}\nfunction checkInputsForPartialSig(inputs, action) {\n  inputs.forEach(input => {\n    let throws = false;\n    let pSigs = [];\n    if ((input.partialSig || []).length === 0) {\n      if (!input.finalScriptSig && !input.finalScriptWitness) return;\n      pSigs = getPsigsFromInputFinalScripts(input);\n    } else {\n      pSigs = input.partialSig;\n    }\n    pSigs.forEach(pSig => {\n      const { hashType } = bscript.signature.decode(pSig.signature);\n      const whitelist = [];\n      const isAnyoneCanPay =\n        hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY;\n      if (isAnyoneCanPay) whitelist.push('addInput');\n      const hashMod = hashType & 0x1f;\n      switch (hashMod) {\n        case transaction_1.Transaction.SIGHASH_ALL:\n          break;\n        case transaction_1.Transaction.SIGHASH_SINGLE:\n        case transaction_1.Transaction.SIGHASH_NONE:\n          whitelist.push('addOutput');\n          whitelist.push('setInputSequence');\n          break;\n      }\n      if (whitelist.indexOf(action) === -1) {\n        throws = true;\n      }\n    });\n    if (throws) {\n      throw new Error('Can not modify transaction, signatures exist.');\n    }\n  });\n}\nfunction checkPartialSigSighashes(input) {\n  if (!input.sighashType || !input.partialSig) return;\n  const { partialSig, sighashType } = input;\n  partialSig.forEach(pSig => {\n    const { hashType } = bscript.signature.decode(pSig.signature);\n    if (sighashType !== hashType) {\n      throw new Error('Signature sighash does not match input sighash type');\n    }\n  });\n}\nfunction checkScriptForPubkey(pubkey, script, action) {\n  const pubkeyHash = crypto_1.hash160(pubkey);\n  const decompiled = bscript.decompile(script);\n  if (decompiled === null) throw new Error('Unknown script error');\n  const hasKey = decompiled.some(element => {\n    if (typeof element === 'number') return false;\n    return element.equals(pubkey) || element.equals(pubkeyHash);\n  });\n  if (!hasKey) {\n    throw new Error(\n      `Can not ${action} for this input with the key ${pubkey.toString('hex')}`,\n    );\n  }\n}\nfunction checkTxEmpty(tx) {\n  const isEmpty = tx.ins.every(\n    input =>\n      input.script &&\n      input.script.length === 0 &&\n      input.witness &&\n      input.witness.length === 0,\n  );\n  if (!isEmpty) {\n    throw new Error('Format Error: Transaction ScriptSigs are not empty');\n  }\n}\nfunction checkTxForDupeIns(tx, cache) {\n  tx.ins.forEach(input => {\n    checkTxInputCache(cache, input);\n  });\n}\nfunction checkTxInputCache(cache, input) {\n  const key =\n    bufferutils_1.reverseBuffer(Buffer.from(input.hash)).toString('hex') +\n    ':' +\n    input.index;\n  if (cache.__TX_IN_CACHE[key]) throw new Error('Duplicate input detected.');\n  cache.__TX_IN_CACHE[key] = 1;\n}\nfunction scriptCheckerFactory(payment, paymentScriptName) {\n  return (inputIndex, scriptPubKey, redeemScript) => {\n    const redeemScriptOutput = payment({\n      redeem: { output: redeemScript },\n    }).output;\n    if (!scriptPubKey.equals(redeemScriptOutput)) {\n      throw new Error(\n        `${paymentScriptName} for input #${inputIndex} doesn't match the scriptPubKey in the prevout`,\n      );\n    }\n  };\n}\nconst checkRedeemScript = scriptCheckerFactory(payments.p2sh, 'Redeem script');\nconst checkWitnessScript = scriptCheckerFactory(\n  payments.p2wsh,\n  'Witness script',\n);\nfunction getTxCacheValue(key, name, inputs, c) {\n  if (!inputs.every(isFinalized))\n    throw new Error(`PSBT must be finalized to calculate ${name}`);\n  if (key === '__FEE_RATE' && c.__FEE_RATE) return c.__FEE_RATE;\n  if (key === '__FEE' && c.__FEE) return c.__FEE;\n  let tx;\n  let mustFinalize = true;\n  if (c.__EXTRACTED_TX) {\n    tx = c.__EXTRACTED_TX;\n    mustFinalize = false;\n  } else {\n    tx = c.__TX.clone();\n  }\n  inputFinalizeGetAmts(inputs, tx, c, mustFinalize);\n  if (key === '__FEE_RATE') return c.__FEE_RATE;\n  else if (key === '__FEE') return c.__FEE;\n}\nfunction getFinalScripts(\n  script,\n  scriptType,\n  partialSig,\n  isSegwit,\n  isP2SH,\n  isP2WSH,\n) {\n  let finalScriptSig;\n  let finalScriptWitness;\n  // Wow, the payments API is very handy\n  const payment = getPayment(script, scriptType, partialSig);\n  const p2wsh = !isP2WSH ? null : payments.p2wsh({ redeem: payment });\n  const p2sh = !isP2SH ? null : payments.p2sh({ redeem: p2wsh || payment });\n  if (isSegwit) {\n    if (p2wsh) {\n      finalScriptWitness = witnessStackToScriptWitness(p2wsh.witness);\n    } else {\n      finalScriptWitness = witnessStackToScriptWitness(payment.witness);\n    }\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    }\n  } else {\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    } else {\n      finalScriptSig = payment.input;\n    }\n  }\n  return {\n    finalScriptSig,\n    finalScriptWitness,\n  };\n}\nfunction getHashAndSighashType(\n  inputs,\n  inputIndex,\n  pubkey,\n  cache,\n  sighashTypes,\n) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  const { hash, sighashType, script } = getHashForSig(\n    inputIndex,\n    input,\n    cache,\n    sighashTypes,\n  );\n  checkScriptForPubkey(pubkey, script, 'sign');\n  return {\n    hash,\n    sighashType,\n  };\n}\nfunction getHashForSig(inputIndex, input, cache, sighashTypes) {\n  const unsignedTx = cache.__TX;\n  const sighashType =\n    input.sighashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {\n    const str = sighashTypeToString(sighashType);\n    throw new Error(\n      `Sighash type is not allowed. Retry the sign method passing the ` +\n        `sighashTypes array of whitelisted types. Sighash type: ${str}`,\n    );\n  }\n  let hash;\n  let script;\n  if (input.nonWitnessUtxo) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const prevoutHash = unsignedTx.ins[inputIndex].hash;\n    const utxoHash = nonWitnessUtxoTx.getHash();\n    // If a non-witness UTXO is provided, its hash must match the hash specified in the prevout\n    if (!prevoutHash.equals(utxoHash)) {\n      throw new Error(\n        `Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`,\n      );\n    }\n    const prevoutIndex = unsignedTx.ins[inputIndex].index;\n    const prevout = nonWitnessUtxoTx.outs[prevoutIndex];\n    if (input.redeemScript) {\n      // If a redeemScript is provided, the scriptPubKey must be for that redeemScript\n      checkRedeemScript(inputIndex, prevout.script, input.redeemScript);\n      script = input.redeemScript;\n    } else {\n      script = prevout.script;\n    }\n    if (isP2WSHScript(script)) {\n      if (!input.witnessScript)\n        throw new Error('Segwit input needs witnessScript if not P2WPKH');\n      checkWitnessScript(inputIndex, script, input.witnessScript);\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        input.witnessScript,\n        prevout.value,\n        sighashType,\n      );\n      script = input.witnessScript;\n    } else if (isP2WPKH(script)) {\n      // P2WPKH uses the P2PKH template for prevoutScript when signing\n      const signingScript = payments.p2pkh({ hash: script.slice(2) }).output;\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        signingScript,\n        prevout.value,\n        sighashType,\n      );\n    } else {\n      hash = unsignedTx.hashForSignature(inputIndex, script, sighashType);\n    }\n  } else if (input.witnessUtxo) {\n    let _script; // so we don't shadow the `let script` above\n    if (input.redeemScript) {\n      // If a redeemScript is provided, the scriptPubKey must be for that redeemScript\n      checkRedeemScript(\n        inputIndex,\n        input.witnessUtxo.script,\n        input.redeemScript,\n      );\n      _script = input.redeemScript;\n    } else {\n      _script = input.witnessUtxo.script;\n    }\n    if (isP2WPKH(_script)) {\n      // P2WPKH uses the P2PKH template for prevoutScript when signing\n      const signingScript = payments.p2pkh({ hash: _script.slice(2) }).output;\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        signingScript,\n        input.witnessUtxo.value,\n        sighashType,\n      );\n      script = _script;\n    } else if (isP2WSHScript(_script)) {\n      if (!input.witnessScript)\n        throw new Error('Segwit input needs witnessScript if not P2WPKH');\n      checkWitnessScript(inputIndex, _script, input.witnessScript);\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        input.witnessScript,\n        input.witnessUtxo.value,\n        sighashType,\n      );\n      // want to make sure the script we return is the actual meaningful script\n      script = input.witnessScript;\n    } else {\n      throw new Error(\n        `Input #${inputIndex} has witnessUtxo but non-segwit script: ` +\n          `${_script.toString('hex')}`,\n      );\n    }\n  } else {\n    throw new Error('Need a Utxo input item for signing');\n  }\n  return {\n    script,\n    sighashType,\n    hash,\n  };\n}\nfunction getPayment(script, scriptType, partialSig) {\n  let payment;\n  switch (scriptType) {\n    case 'multisig':\n      const sigs = getSortedSigs(script, partialSig);\n      payment = payments.p2ms({\n        output: script,\n        signatures: sigs,\n      });\n      break;\n    case 'pubkey':\n      payment = payments.p2pk({\n        output: script,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'pubkeyhash':\n      payment = payments.p2pkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'witnesspubkeyhash':\n      payment = payments.p2wpkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n  }\n  return payment;\n}\nfunction getPsigsFromInputFinalScripts(input) {\n  const scriptItems = !input.finalScriptSig\n    ? []\n    : bscript.decompile(input.finalScriptSig) || [];\n  const witnessItems = !input.finalScriptWitness\n    ? []\n    : bscript.decompile(input.finalScriptWitness) || [];\n  return scriptItems\n    .concat(witnessItems)\n    .filter(item => {\n      return Buffer.isBuffer(item) && bscript.isCanonicalScriptSignature(item);\n    })\n    .map(sig => ({ signature: sig }));\n}\nfunction getScriptFromInput(inputIndex, input, cache) {\n  const unsignedTx = cache.__TX;\n  const res = {\n    script: null,\n    isSegwit: false,\n    isP2SH: false,\n    isP2WSH: false,\n  };\n  res.isP2SH = !!input.redeemScript;\n  res.isP2WSH = !!input.witnessScript;\n  if (input.witnessScript) {\n    res.script = input.witnessScript;\n  } else if (input.redeemScript) {\n    res.script = input.redeemScript;\n  } else {\n    if (input.nonWitnessUtxo) {\n      const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n        cache,\n        input,\n        inputIndex,\n      );\n      const prevoutIndex = unsignedTx.ins[inputIndex].index;\n      res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;\n    } else if (input.witnessUtxo) {\n      res.script = input.witnessUtxo.script;\n    }\n  }\n  if (input.witnessScript || isP2WPKH(res.script)) {\n    res.isSegwit = true;\n  }\n  return res;\n}\nfunction getSignersFromHD(inputIndex, inputs, hdKeyPair) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  if (!input.bip32Derivation || input.bip32Derivation.length === 0) {\n    throw new Error('Need bip32Derivation to sign with HD');\n  }\n  const myDerivations = input.bip32Derivation\n    .map(bipDv => {\n      if (bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)) {\n        return bipDv;\n      } else {\n        return;\n      }\n    })\n    .filter(v => !!v);\n  if (myDerivations.length === 0) {\n    throw new Error(\n      'Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint',\n    );\n  }\n  const signers = myDerivations.map(bipDv => {\n    const node = hdKeyPair.derivePath(bipDv.path);\n    if (!bipDv.pubkey.equals(node.publicKey)) {\n      throw new Error('pubkey did not match bip32Derivation');\n    }\n    return node;\n  });\n  return signers;\n}\nfunction getSortedSigs(script, partialSig) {\n  const p2ms = payments.p2ms({ output: script });\n  // for each pubkey in order of p2ms script\n  return p2ms.pubkeys\n    .map(pk => {\n      // filter partialSig array by pubkey being equal\n      return (\n        partialSig.filter(ps => {\n          return ps.pubkey.equals(pk);\n        })[0] || {}\n      ).signature;\n      // Any pubkey without a match will return undefined\n      // this last filter removes all the undefined items in the array.\n    })\n    .filter(v => !!v);\n}\nfunction scriptWitnessToWitnessStack(buffer) {\n  let offset = 0;\n  function readSlice(n) {\n    offset += n;\n    return buffer.slice(offset - n, offset);\n  }\n  function readVarInt() {\n    const vi = varuint.decode(buffer, offset);\n    offset += varuint.decode.bytes;\n    return vi;\n  }\n  function readVarSlice() {\n    return readSlice(readVarInt());\n  }\n  function readVector() {\n    const count = readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(readVarSlice());\n    return vector;\n  }\n  return readVector();\n}\nfunction sighashTypeToString(sighashType) {\n  let text =\n    sighashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY\n      ? 'SIGHASH_ANYONECANPAY | '\n      : '';\n  const sigMod = sighashType & 0x1f;\n  switch (sigMod) {\n    case transaction_1.Transaction.SIGHASH_ALL:\n      text += 'SIGHASH_ALL';\n      break;\n    case transaction_1.Transaction.SIGHASH_SINGLE:\n      text += 'SIGHASH_SINGLE';\n      break;\n    case transaction_1.Transaction.SIGHASH_NONE:\n      text += 'SIGHASH_NONE';\n      break;\n  }\n  return text;\n}\nfunction witnessStackToScriptWitness(witness) {\n  let buffer = Buffer.allocUnsafe(0);\n  function writeSlice(slice) {\n    buffer = Buffer.concat([buffer, Buffer.from(slice)]);\n  }\n  function writeVarInt(i) {\n    const currentLen = buffer.length;\n    const varintLen = varuint.encodingLength(i);\n    buffer = Buffer.concat([buffer, Buffer.allocUnsafe(varintLen)]);\n    varuint.encode(i, buffer, currentLen);\n  }\n  function writeVarSlice(slice) {\n    writeVarInt(slice.length);\n    writeSlice(slice);\n  }\n  function writeVector(vector) {\n    writeVarInt(vector.length);\n    vector.forEach(writeVarSlice);\n  }\n  writeVector(witness);\n  return buffer;\n}\nfunction addNonWitnessTxCache(cache, input, inputIndex) {\n  cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;\n  const tx = transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);\n  cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;\n  const self = cache;\n  const selfIndex = inputIndex;\n  delete input.nonWitnessUtxo;\n  Object.defineProperty(input, 'nonWitnessUtxo', {\n    enumerable: true,\n    get() {\n      const buf = self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];\n      const txCache = self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];\n      if (buf !== undefined) {\n        return buf;\n      } else {\n        const newBuf = txCache.toBuffer();\n        self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;\n        return newBuf;\n      }\n    },\n    set(data) {\n      self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;\n    },\n  });\n}\nfunction inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {\n  let inputAmount = 0;\n  inputs.forEach((input, idx) => {\n    if (mustFinalize && input.finalScriptSig)\n      tx.ins[idx].script = input.finalScriptSig;\n    if (mustFinalize && input.finalScriptWitness) {\n      tx.ins[idx].witness = scriptWitnessToWitnessStack(\n        input.finalScriptWitness,\n      );\n    }\n    if (input.witnessUtxo) {\n      inputAmount += input.witnessUtxo.value;\n    } else if (input.nonWitnessUtxo) {\n      const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);\n      const vout = tx.ins[idx].index;\n      const out = nwTx.outs[vout];\n      inputAmount += out.value;\n    }\n  });\n  const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0);\n  const fee = inputAmount - outputAmount;\n  if (fee < 0) {\n    throw new Error('Outputs are spending more than Inputs');\n  }\n  const bytes = tx.virtualSize();\n  cache.__FEE = fee;\n  cache.__EXTRACTED_TX = tx;\n  cache.__FEE_RATE = Math.floor(fee / bytes);\n}\nfunction nonWitnessUtxoTxFromCache(cache, input, inputIndex) {\n  const c = cache.__NON_WITNESS_UTXO_TX_CACHE;\n  if (!c[inputIndex]) {\n    addNonWitnessTxCache(cache, input, inputIndex);\n  }\n  return c[inputIndex];\n}\nfunction classifyScript(script) {\n  if (isP2WPKH(script)) return 'witnesspubkeyhash';\n  if (isP2PKH(script)) return 'pubkeyhash';\n  if (isP2MS(script)) return 'multisig';\n  if (isP2PK(script)) return 'pubkey';\n  return 'nonstandard';\n}\nfunction range(n) {\n  return [...Array(n).keys()];\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst combiner_1 = require('./combiner');\nconst parser_1 = require('./parser');\nconst typeFields_1 = require('./typeFields');\nconst utils_1 = require('./utils');\nclass Psbt {\n  constructor(tx) {\n    this.inputs = [];\n    this.outputs = [];\n    this.globalMap = {\n      unsignedTx: tx,\n    };\n  }\n  static fromBase64(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromHex(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromBuffer(buffer, txFromBuffer) {\n    const results = parser_1.psbtFromBuffer(buffer, txFromBuffer);\n    const psbt = new this(results.globalMap.unsignedTx);\n    Object.assign(psbt, results);\n    return psbt;\n  }\n  toBase64() {\n    const buffer = this.toBuffer();\n    return buffer.toString('base64');\n  }\n  toHex() {\n    const buffer = this.toBuffer();\n    return buffer.toString('hex');\n  }\n  toBuffer() {\n    return parser_1.psbtToBuffer(this);\n  }\n  updateGlobal(updateData) {\n    utils_1.updateGlobal(updateData, this.globalMap);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.updateInput(updateData, input);\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.updateOutput(updateData, output);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    utils_1.checkHasKey(\n      keyVal,\n      this.globalMap.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.GlobalTypes),\n    );\n    if (!this.globalMap.unknownKeyVals) this.globalMap.unknownKeyVals = [];\n    this.globalMap.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      input.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.InputTypes),\n    );\n    if (!input.unknownKeyVals) input.unknownKeyVals = [];\n    input.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      output.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.OutputTypes),\n    );\n    if (!output.unknownKeyVals) output.unknownKeyVals = [];\n    output.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addInput(inputData) {\n    this.globalMap.unsignedTx.addInput(inputData);\n    this.inputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = inputData.unknownKeyVals || [];\n    const inputIndex = this.inputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(inputIndex, keyVal),\n    );\n    utils_1.addInputAttributes(this.inputs, inputData);\n    return this;\n  }\n  addOutput(outputData) {\n    this.globalMap.unsignedTx.addOutput(outputData);\n    this.outputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = outputData.unknownKeyVals || [];\n    const outputIndex = this.outputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(outputIndex, keyVal),\n    );\n    utils_1.addOutputAttributes(this.outputs, outputData);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.inputCheckUncleanFinalized(inputIndex, input);\n    for (const key of Object.keys(input)) {\n      if (\n        ![\n          'witnessUtxo',\n          'nonWitnessUtxo',\n          'finalScriptSig',\n          'finalScriptWitness',\n          'unknownKeyVals',\n        ].includes(key)\n      ) {\n        // @ts-ignore\n        delete input[key];\n      }\n    }\n    return this;\n  }\n  combine(...those) {\n    // Combine this with those.\n    // Return self for chaining.\n    const result = combiner_1.combine([this].concat(those));\n    Object.assign(this, result);\n    return this;\n  }\n  getTransaction() {\n    return this.globalMap.unsignedTx.toBuffer();\n  }\n}\nexports.Psbt = Psbt;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst parser_1 = require('../parser');\nfunction combine(psbts) {\n  const self = psbts[0];\n  const selfKeyVals = parser_1.psbtToKeyVals(self);\n  const others = psbts.slice(1);\n  if (others.length === 0) throw new Error('Combine: Nothing to combine');\n  const selfTx = getTx(self);\n  if (selfTx === undefined) {\n    throw new Error('Combine: Self missing transaction');\n  }\n  const selfGlobalSet = getKeySet(selfKeyVals.globalKeyVals);\n  const selfInputSets = selfKeyVals.inputKeyVals.map(getKeySet);\n  const selfOutputSets = selfKeyVals.outputKeyVals.map(getKeySet);\n  for (const other of others) {\n    const otherTx = getTx(other);\n    if (\n      otherTx === undefined ||\n      !otherTx.toBuffer().equals(selfTx.toBuffer())\n    ) {\n      throw new Error(\n        'Combine: One of the Psbts does not have the same transaction.',\n      );\n    }\n    const otherKeyVals = parser_1.psbtToKeyVals(other);\n    const otherGlobalSet = getKeySet(otherKeyVals.globalKeyVals);\n    otherGlobalSet.forEach(\n      keyPusher(\n        selfGlobalSet,\n        selfKeyVals.globalKeyVals,\n        otherKeyVals.globalKeyVals,\n      ),\n    );\n    const otherInputSets = otherKeyVals.inputKeyVals.map(getKeySet);\n    otherInputSets.forEach((inputSet, idx) =>\n      inputSet.forEach(\n        keyPusher(\n          selfInputSets[idx],\n          selfKeyVals.inputKeyVals[idx],\n          otherKeyVals.inputKeyVals[idx],\n        ),\n      ),\n    );\n    const otherOutputSets = otherKeyVals.outputKeyVals.map(getKeySet);\n    otherOutputSets.forEach((outputSet, idx) =>\n      outputSet.forEach(\n        keyPusher(\n          selfOutputSets[idx],\n          selfKeyVals.outputKeyVals[idx],\n          otherKeyVals.outputKeyVals[idx],\n        ),\n      ),\n    );\n  }\n  return parser_1.psbtFromKeyVals(selfTx, {\n    globalMapKeyVals: selfKeyVals.globalKeyVals,\n    inputKeyVals: selfKeyVals.inputKeyVals,\n    outputKeyVals: selfKeyVals.outputKeyVals,\n  });\n}\nexports.combine = combine;\nfunction keyPusher(selfSet, selfKeyVals, otherKeyVals) {\n  return key => {\n    if (selfSet.has(key)) return;\n    const newKv = otherKeyVals.filter(kv => kv.key.toString('hex') === key)[0];\n    selfKeyVals.push(newKv);\n    selfSet.add(key);\n  };\n}\nfunction getTx(psbt) {\n  return psbt.globalMap.unsignedTx;\n}\nfunction getKeySet(keyVals) {\n  const set = new Set();\n  keyVals.forEach(keyVal => {\n    const hex = keyVal.key.toString('hex');\n    if (set.has(hex))\n      throw new Error('Combine: KeyValue Map keys should be unique');\n    set.add(hex);\n  });\n  return set;\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nconst varuint = require('../converter/varint');\nconst typeFields_1 = require('../typeFields');\nfunction psbtFromBuffer(buffer, txGetter) {\n  let offset = 0;\n  function varSlice() {\n    const keyLen = varuint.decode(buffer, offset);\n    offset += varuint.encodingLength(keyLen);\n    const key = buffer.slice(offset, offset + keyLen);\n    offset += keyLen;\n    return key;\n  }\n  function readUInt32BE() {\n    const num = buffer.readUInt32BE(offset);\n    offset += 4;\n    return num;\n  }\n  function readUInt8() {\n    const num = buffer.readUInt8(offset);\n    offset += 1;\n    return num;\n  }\n  function getKeyValue() {\n    const key = varSlice();\n    const value = varSlice();\n    return {\n      key,\n      value,\n    };\n  }\n  function checkEndOfKeyValPairs() {\n    if (offset >= buffer.length) {\n      throw new Error('Format Error: Unexpected End of PSBT');\n    }\n    const isEnd = buffer.readUInt8(offset) === 0;\n    if (isEnd) {\n      offset++;\n    }\n    return isEnd;\n  }\n  if (readUInt32BE() !== 0x70736274) {\n    throw new Error('Format Error: Invalid Magic Number');\n  }\n  if (readUInt8() !== 0xff) {\n    throw new Error(\n      'Format Error: Magic Number must be followed by 0xff separator',\n    );\n  }\n  const globalMapKeyVals = [];\n  const globalKeyIndex = {};\n  while (!checkEndOfKeyValPairs()) {\n    const keyVal = getKeyValue();\n    const hexKey = keyVal.key.toString('hex');\n    if (globalKeyIndex[hexKey]) {\n      throw new Error(\n        'Format Error: Keys must be unique for global keymap: key ' + hexKey,\n      );\n    }\n    globalKeyIndex[hexKey] = 1;\n    globalMapKeyVals.push(keyVal);\n  }\n  const unsignedTxMaps = globalMapKeyVals.filter(\n    keyVal => keyVal.key[0] === typeFields_1.GlobalTypes.UNSIGNED_TX,\n  );\n  if (unsignedTxMaps.length !== 1) {\n    throw new Error('Format Error: Only one UNSIGNED_TX allowed');\n  }\n  const unsignedTx = txGetter(unsignedTxMaps[0].value);\n  // Get input and output counts to loop the respective fields\n  const { inputCount, outputCount } = unsignedTx.getInputOutputCounts();\n  const inputKeyVals = [];\n  const outputKeyVals = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const inputKeyIndex = {};\n    const input = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (inputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each input: ' +\n            'input index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      inputKeyIndex[hexKey] = 1;\n      input.push(keyVal);\n    }\n    inputKeyVals.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const outputKeyIndex = {};\n    const output = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (outputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each output: ' +\n            'output index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      outputKeyIndex[hexKey] = 1;\n      output.push(keyVal);\n    }\n    outputKeyVals.push(output);\n  }\n  return psbtFromKeyVals(unsignedTx, {\n    globalMapKeyVals,\n    inputKeyVals,\n    outputKeyVals,\n  });\n}\nexports.psbtFromBuffer = psbtFromBuffer;\nfunction checkKeyBuffer(type, keyBuf, keyNum) {\n  if (!keyBuf.equals(Buffer.from([keyNum]))) {\n    throw new Error(\n      `Format Error: Invalid ${type} key: ${keyBuf.toString('hex')}`,\n    );\n  }\n}\nexports.checkKeyBuffer = checkKeyBuffer;\nfunction psbtFromKeyVals(\n  unsignedTx,\n  { globalMapKeyVals, inputKeyVals, outputKeyVals },\n) {\n  // That was easy :-)\n  const globalMap = {\n    unsignedTx,\n  };\n  let txCount = 0;\n  for (const keyVal of globalMapKeyVals) {\n    // If a globalMap item needs pubkey, uncomment\n    // const pubkey = convert.globals.checkPubkey(keyVal);\n    switch (keyVal.key[0]) {\n      case typeFields_1.GlobalTypes.UNSIGNED_TX:\n        checkKeyBuffer(\n          'global',\n          keyVal.key,\n          typeFields_1.GlobalTypes.UNSIGNED_TX,\n        );\n        if (txCount > 0) {\n          throw new Error('Format Error: GlobalMap has multiple UNSIGNED_TX');\n        }\n        txCount++;\n        break;\n      case typeFields_1.GlobalTypes.GLOBAL_XPUB:\n        if (globalMap.globalXpub === undefined) {\n          globalMap.globalXpub = [];\n        }\n        globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));\n        break;\n      default:\n        // This will allow inclusion during serialization.\n        if (!globalMap.unknownKeyVals) globalMap.unknownKeyVals = [];\n        globalMap.unknownKeyVals.push(keyVal);\n    }\n  }\n  // Get input and output counts to loop the respective fields\n  const inputCount = inputKeyVals.length;\n  const outputCount = outputKeyVals.length;\n  const inputs = [];\n  const outputs = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const input = {};\n    for (const keyVal of inputKeyVals[index]) {\n      convert.inputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.InputTypes.NON_WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.NON_WITNESS_UTXO,\n          );\n          if (\n            input.nonWitnessUtxo !== undefined ||\n            input.witnessUtxo !== undefined\n          ) {\n            throw new Error(\n              'Format Error: Input has multiple [NON_]WITNESS_UTXO',\n            );\n          }\n          input.nonWitnessUtxo = convert.inputs.nonWitnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_UTXO,\n          );\n          if (\n            input.nonWitnessUtxo !== undefined ||\n            input.witnessUtxo !== undefined\n          ) {\n            throw new Error(\n              'Format Error: Input has multiple [NON_]WITNESS_UTXO',\n            );\n          }\n          input.witnessUtxo = convert.inputs.witnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.PARTIAL_SIG:\n          if (input.partialSig === undefined) {\n            input.partialSig = [];\n          }\n          input.partialSig.push(convert.inputs.partialSig.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.SIGHASH_TYPE:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.SIGHASH_TYPE,\n          );\n          if (input.sighashType !== undefined) {\n            throw new Error('Format Error: Input has multiple SIGHASH_TYPE');\n          }\n          input.sighashType = convert.inputs.sighashType.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.REDEEM_SCRIPT,\n          );\n          if (input.redeemScript !== undefined) {\n            throw new Error('Format Error: Input has multiple REDEEM_SCRIPT');\n          }\n          input.redeemScript = convert.inputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_SCRIPT,\n          );\n          if (input.witnessScript !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_SCRIPT');\n          }\n          input.witnessScript = convert.inputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.BIP32_DERIVATION:\n          if (input.bip32Derivation === undefined) {\n            input.bip32Derivation = [];\n          }\n          input.bip32Derivation.push(\n            convert.inputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTSIG:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTSIG,\n          );\n          input.finalScriptSig = convert.inputs.finalScriptSig.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTWITNESS,\n          );\n          input.finalScriptWitness = convert.inputs.finalScriptWitness.decode(\n            keyVal,\n          );\n          break;\n        case typeFields_1.InputTypes.POR_COMMITMENT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.POR_COMMITMENT,\n          );\n          input.porCommitment = convert.inputs.porCommitment.decode(keyVal);\n          break;\n        default:\n          // This will allow inclusion during serialization.\n          if (!input.unknownKeyVals) input.unknownKeyVals = [];\n          input.unknownKeyVals.push(keyVal);\n      }\n    }\n    inputs.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const output = {};\n    for (const keyVal of outputKeyVals[index]) {\n      convert.outputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.OutputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.REDEEM_SCRIPT,\n          );\n          if (output.redeemScript !== undefined) {\n            throw new Error('Format Error: Output has multiple REDEEM_SCRIPT');\n          }\n          output.redeemScript = convert.outputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.WITNESS_SCRIPT,\n          );\n          if (output.witnessScript !== undefined) {\n            throw new Error('Format Error: Output has multiple WITNESS_SCRIPT');\n          }\n          output.witnessScript = convert.outputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.BIP32_DERIVATION:\n          if (output.bip32Derivation === undefined) {\n            output.bip32Derivation = [];\n          }\n          output.bip32Derivation.push(\n            convert.outputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        default:\n          if (!output.unknownKeyVals) output.unknownKeyVals = [];\n          output.unknownKeyVals.push(keyVal);\n      }\n    }\n    outputs.push(output);\n  }\n  return { globalMap, inputs, outputs };\n}\nexports.psbtFromKeyVals = psbtFromKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst range = n => [...Array(n).keys()];\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.GlobalTypes.GLOBAL_XPUB) {\n    throw new Error(\n      'Decode Error: could not decode globalXpub with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.key.length !== 79 || ![2, 3].includes(keyVal.key[46])) {\n    throw new Error(\n      'Decode Error: globalXpub has invalid extended pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if ((keyVal.value.length / 4) % 1 !== 0) {\n    throw new Error(\n      'Decode Error: Global GLOBAL_XPUB value length should be multiple of 4',\n    );\n  }\n  const extendedPubkey = keyVal.key.slice(1);\n  const data = {\n    masterFingerprint: keyVal.value.slice(0, 4),\n    extendedPubkey,\n    path: 'm',\n  };\n  for (const i of range(keyVal.value.length / 4 - 1)) {\n    const val = keyVal.value.readUInt32LE(i * 4 + 4);\n    const isHard = !!(val & 0x80000000);\n    const idx = val & 0x7fffffff;\n    data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n  }\n  return data;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const head = Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);\n  const key = Buffer.concat([head, data.extendedPubkey]);\n  const splitPath = data.path.split('/');\n  const value = Buffer.allocUnsafe(splitPath.length * 4);\n  data.masterFingerprint.copy(value, 0);\n  let offset = 4;\n  splitPath.slice(1).forEach(level => {\n    const isHard = level.slice(-1) === \"'\";\n    let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n    if (isHard) num += 0x80000000;\n    value.writeUInt32LE(num, offset);\n    offset += 4;\n  });\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }';\nfunction check(data) {\n  const epk = data.extendedPubkey;\n  const mfp = data.masterFingerprint;\n  const p = data.path;\n  return (\n    Buffer.isBuffer(epk) &&\n    epk.length === 78 &&\n    [2, 3].indexOf(epk[45]) > -1 &&\n    Buffer.isBuffer(mfp) &&\n    mfp.length === 4 &&\n    typeof p === 'string' &&\n    !!p.match(/^m(\\/\\d+'?)+$/)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.extendedPubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(v => v.extendedPubkey.equals(item.extendedPubkey)).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),\n    value: data.toBuffer(),\n  };\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTSIG) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.finalScriptSig === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTWITNESS) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptWitness with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData && !!newData && currentData.finalScriptWitness === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.NON_WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode nonWitnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData &&\n    !!newData &&\n    currentData.witnessUtxo === undefined &&\n    currentData.nonWitnessUtxo === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {\n    throw new Error(\n      'Decode Error: could not decode partialSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (\n    !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n    ![2, 3, 4].includes(keyVal.key[1])\n  ) {\n    throw new Error(\n      'Decode Error: partialSig has invalid pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1);\n  return {\n    pubkey,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(pSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);\n  return {\n    key: Buffer.concat([head, pSig.pubkey]),\n    value: pSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.signature) &&\n    [33, 65].includes(data.pubkey.length) &&\n    [2, 3, 4].includes(data.pubkey[0]) &&\n    isDerSigWithSighash(data.signature)\n  );\n}\nexports.check = check;\nfunction isDerSigWithSighash(buf) {\n  if (!Buffer.isBuffer(buf) || buf.length < 9) return false;\n  if (buf[0] !== 0x30) return false;\n  if (buf.length !== buf[1] + 3) return false;\n  if (buf[2] !== 0x02) return false;\n  const rLen = buf[3];\n  if (rLen > 33 || rLen < 1) return false;\n  if (buf[3 + rLen + 1] !== 0x02) return false;\n  const sLen = buf[3 + rLen + 2];\n  if (sLen > 33 || sLen < 1) return false;\n  if (buf.length !== 3 + rLen + 2 + sLen + 2) return false;\n  return true;\n}\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.pubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.POR_COMMITMENT) {\n    throw new Error(\n      'Decode Error: could not decode porCommitment with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.toString('utf8');\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.POR_COMMITMENT]);\n  return {\n    key,\n    value: Buffer.from(data, 'utf8'),\n  };\n}\nexports.encode = encode;\nexports.expected = 'string';\nfunction check(data) {\n  return typeof data === 'string';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.porCommitment === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.SIGHASH_TYPE) {\n    throw new Error(\n      'Decode Error: could not decode sighashType with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.readUInt32LE(0);\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.SIGHASH_TYPE]);\n  const value = Buffer.allocUnsafe(4);\n  value.writeUInt32LE(data, 0);\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected = 'number';\nfunction check(data) {\n  return typeof data === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.sighashType === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode witnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value,\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const { script, value } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData &&\n    !!newData &&\n    currentData.witnessUtxo === undefined &&\n    currentData.nonWitnessUtxo === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst range = n => [...Array(n).keys()];\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode bip32Derivation with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if (\n      !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n      ![2, 3, 4].includes(keyVal.key[1])\n    ) {\n      throw new Error(\n        'Decode Error: bip32Derivation has invalid pubkey in key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if ((keyVal.value.length / 4) % 1 !== 0) {\n      throw new Error(\n        'Decode Error: Input BIP32_DERIVATION value length should be multiple of 4',\n      );\n    }\n    const pubkey = keyVal.key.slice(1);\n    const data = {\n      masterFingerprint: keyVal.value.slice(0, 4),\n      pubkey,\n      path: 'm',\n    };\n    for (const i of range(keyVal.value.length / 4 - 1)) {\n      const val = keyVal.value.readUInt32LE(i * 4 + 4);\n      const isHard = !!(val & 0x80000000);\n      const idx = val & 0x7fffffff;\n      data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n    }\n    return data;\n  }\n  function encode(data) {\n    const head = Buffer.from([TYPE_BYTE]);\n    const key = Buffer.concat([head, data.pubkey]);\n    const splitPath = data.path.split('/');\n    const value = Buffer.allocUnsafe(splitPath.length * 4);\n    data.masterFingerprint.copy(value, 0);\n    let offset = 4;\n    splitPath.slice(1).forEach(level => {\n      const isHard = level.slice(-1) === \"'\";\n      let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n      if (isHard) num += 0x80000000;\n      value.writeUInt32LE(num, offset);\n      offset += 4;\n    });\n    return {\n      key,\n      value,\n    };\n  }\n  const expected =\n    '{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }';\n  function check(data) {\n    return (\n      Buffer.isBuffer(data.pubkey) &&\n      Buffer.isBuffer(data.masterFingerprint) &&\n      typeof data.path === 'string' &&\n      [33, 65].includes(data.pubkey.length) &&\n      [2, 3, 4].includes(data.pubkey[0]) &&\n      data.masterFingerprint.length === 4\n    );\n  }\n  function canAddToArray(array, item, dupeSet) {\n    const dupeString = item.pubkey.toString('hex');\n    if (dupeSet.has(dupeString)) return false;\n    dupeSet.add(dupeString);\n    return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAddToArray,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeChecker(pubkeyTypes) {\n  return checkPubkey;\n  function checkPubkey(keyVal) {\n    let pubkey;\n    if (pubkeyTypes.includes(keyVal.key[0])) {\n      pubkey = keyVal.key.slice(1);\n      if (\n        !(pubkey.length === 33 || pubkey.length === 65) ||\n        ![2, 3, 4].includes(pubkey[0])\n      ) {\n        throw new Error(\n          'Format Error: invalid pubkey in key 0x' + keyVal.key.toString('hex'),\n        );\n      }\n    }\n    return pubkey;\n  }\n}\nexports.makeChecker = makeChecker;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode redeemScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return !!currentData && !!newData && currentData.redeemScript === undefined;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode witnessScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return (\n      !!currentData && !!newData && currentData.witnessScript === undefined\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nfunction psbtToBuffer({ globalMap, inputs, outputs }) {\n  const { globalKeyVals, inputKeyVals, outputKeyVals } = psbtToKeyVals({\n    globalMap,\n    inputs,\n    outputs,\n  });\n  const globalBuffer = tools_1.keyValsToBuffer(globalKeyVals);\n  const keyValsOrEmptyToBuffer = keyVals =>\n    keyVals.length === 0\n      ? [Buffer.from([0])]\n      : keyVals.map(tools_1.keyValsToBuffer);\n  const inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);\n  const outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);\n  const header = Buffer.allocUnsafe(5);\n  header.writeUIntBE(0x70736274ff, 0, 5);\n  return Buffer.concat(\n    [header, globalBuffer].concat(inputBuffers, outputBuffers),\n  );\n}\nexports.psbtToBuffer = psbtToBuffer;\nconst sortKeyVals = (a, b) => {\n  return a.key.compare(b.key);\n};\nfunction keyValsFromMap(keyValMap, converterFactory) {\n  const keyHexSet = new Set();\n  const keyVals = Object.entries(keyValMap).reduce((result, [key, value]) => {\n    if (key === 'unknownKeyVals') return result;\n    // We are checking for undefined anyways. So ignore TS error\n    // @ts-ignore\n    const converter = converterFactory[key];\n    if (converter === undefined) return result;\n    const encodedKeyVals = (Array.isArray(value) ? value : [value]).map(\n      converter.encode,\n    );\n    const keyHexes = encodedKeyVals.map(kv => kv.key.toString('hex'));\n    keyHexes.forEach(hex => {\n      if (keyHexSet.has(hex))\n        throw new Error('Serialize Error: Duplicate key: ' + hex);\n      keyHexSet.add(hex);\n    });\n    return result.concat(encodedKeyVals);\n  }, []);\n  // Get other keyVals that have not yet been gotten\n  const otherKeyVals = keyValMap.unknownKeyVals\n    ? keyValMap.unknownKeyVals.filter(keyVal => {\n        return !keyHexSet.has(keyVal.key.toString('hex'));\n      })\n    : [];\n  return keyVals.concat(otherKeyVals).sort(sortKeyVals);\n}\nfunction psbtToKeyVals({ globalMap, inputs, outputs }) {\n  // First parse the global keyVals\n  // Get any extra keyvals to pass along\n  return {\n    globalKeyVals: keyValsFromMap(globalMap, convert.globals),\n    inputKeyVals: inputs.map(i => keyValsFromMap(i, convert.inputs)),\n    outputKeyVals: outputs.map(o => keyValsFromMap(o, convert.outputs)),\n  };\n}\nexports.psbtToKeyVals = psbtToKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst baddress = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst classify = require('./classify');\nconst bcrypto = require('./crypto');\nconst ECPair = require('./ecpair');\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst SCRIPT_TYPES = classify.types;\nconst PREVOUT_TYPES = new Set([\n  // Raw\n  'p2pkh',\n  'p2pk',\n  'p2wpkh',\n  'p2ms',\n  // P2SH wrapped\n  'p2sh-p2pkh',\n  'p2sh-p2pk',\n  'p2sh-p2wpkh',\n  'p2sh-p2ms',\n  // P2WSH wrapped\n  'p2wsh-p2pkh',\n  'p2wsh-p2pk',\n  'p2wsh-p2ms',\n  // P2SH-P2WSH wrapper\n  'p2sh-p2wsh-p2pkh',\n  'p2sh-p2wsh-p2pk',\n  'p2sh-p2wsh-p2ms',\n]);\nfunction tfMessage(type, value, message) {\n  try {\n    typeforce(type, value);\n  } catch (err) {\n    throw new Error(message);\n  }\n}\nfunction txIsString(tx) {\n  return typeof tx === 'string' || tx instanceof String;\n}\nfunction txIsTransaction(tx) {\n  return tx instanceof transaction_1.Transaction;\n}\nclass TransactionBuilder {\n  // WARNING: maximumFeeRate is __NOT__ to be relied on,\n  //          it's just another potential safety mechanism (safety in-depth)\n  constructor(network = networks.bitcoin, maximumFeeRate = 2500) {\n    this.network = network;\n    this.maximumFeeRate = maximumFeeRate;\n    this.__PREV_TX_SET = {};\n    this.__INPUTS = [];\n    this.__TX = new transaction_1.Transaction();\n    this.__TX.version = 2;\n    this.__USE_LOW_R = false;\n    console.warn(\n      'Deprecation Warning: TransactionBuilder will be removed in the future. ' +\n        '(v6.x.x or later) Please use the Psbt class instead. Examples of usage ' +\n        'are available in the transactions-psbt.js integration test file on our ' +\n        'Github. A high level explanation is available in the psbt.ts and psbt.js ' +\n        'files as well.',\n    );\n  }\n  static fromTransaction(transaction, network) {\n    const txb = new TransactionBuilder(network);\n    // Copy transaction fields\n    txb.setVersion(transaction.version);\n    txb.setLockTime(transaction.locktime);\n    // Copy outputs (done first to avoid signature invalidation)\n    transaction.outs.forEach(txOut => {\n      txb.addOutput(txOut.script, txOut.value);\n    });\n    // Copy inputs\n    transaction.ins.forEach(txIn => {\n      txb.__addInputUnsafe(txIn.hash, txIn.index, {\n        sequence: txIn.sequence,\n        script: txIn.script,\n        witness: txIn.witness,\n      });\n    });\n    // fix some things not possible through the public API\n    txb.__INPUTS.forEach((input, i) => {\n      fixMultisigOrder(input, transaction, i);\n    });\n    return txb;\n  }\n  setLowR(setting) {\n    typeforce(typeforce.maybe(typeforce.Boolean), setting);\n    if (setting === undefined) {\n      setting = true;\n    }\n    this.__USE_LOW_R = setting;\n    return setting;\n  }\n  setLockTime(locktime) {\n    typeforce(types.UInt32, locktime);\n    // if any signatures exist, throw\n    if (\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(s => s !== undefined);\n      })\n    ) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    this.__TX.locktime = locktime;\n  }\n  setVersion(version) {\n    typeforce(types.UInt32, version);\n    // XXX: this might eventually become more complex depending on what the versions represent\n    this.__TX.version = version;\n  }\n  addInput(txHash, vout, sequence, prevOutScript) {\n    if (!this.__canModifyInputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    let value;\n    // is it a hex string?\n    if (txIsString(txHash)) {\n      // transaction hashs's are displayed in reverse order, un-reverse it\n      txHash = bufferutils_1.reverseBuffer(Buffer.from(txHash, 'hex'));\n      // is it a Transaction object?\n    } else if (txIsTransaction(txHash)) {\n      const txOut = txHash.outs[vout];\n      prevOutScript = txOut.script;\n      value = txOut.value;\n      txHash = txHash.getHash(false);\n    }\n    return this.__addInputUnsafe(txHash, vout, {\n      sequence,\n      prevOutScript,\n      value,\n    });\n  }\n  addOutput(scriptPubKey, value) {\n    if (!this.__canModifyOutputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    // Attempt to get a script if it's a base58 or bech32 address string\n    if (typeof scriptPubKey === 'string') {\n      scriptPubKey = baddress.toOutputScript(scriptPubKey, this.network);\n    }\n    return this.__TX.addOutput(scriptPubKey, value);\n  }\n  build() {\n    return this.__build(false);\n  }\n  buildIncomplete() {\n    return this.__build(true);\n  }\n  sign(\n    signParams,\n    keyPair,\n    redeemScript,\n    hashType,\n    witnessValue,\n    witnessScript,\n  ) {\n    trySign(\n      getSigningData(\n        this.network,\n        this.__INPUTS,\n        this.__needsOutputs.bind(this),\n        this.__TX,\n        signParams,\n        keyPair,\n        redeemScript,\n        hashType,\n        witnessValue,\n        witnessScript,\n        this.__USE_LOW_R,\n      ),\n    );\n  }\n  __addInputUnsafe(txHash, vout, options) {\n    if (transaction_1.Transaction.isCoinbaseHash(txHash)) {\n      throw new Error('coinbase inputs not supported');\n    }\n    const prevTxOut = txHash.toString('hex') + ':' + vout;\n    if (this.__PREV_TX_SET[prevTxOut] !== undefined)\n      throw new Error('Duplicate TxOut: ' + prevTxOut);\n    let input = {};\n    // derive what we can from the scriptSig\n    if (options.script !== undefined) {\n      input = expandInput(options.script, options.witness || []);\n    }\n    // if an input value was given, retain it\n    if (options.value !== undefined) {\n      input.value = options.value;\n    }\n    // derive what we can from the previous transactions output script\n    if (!input.prevOutScript && options.prevOutScript) {\n      let prevOutType;\n      if (!input.pubkeys && !input.signatures) {\n        const expanded = expandOutput(options.prevOutScript);\n        if (expanded.pubkeys) {\n          input.pubkeys = expanded.pubkeys;\n          input.signatures = expanded.signatures;\n        }\n        prevOutType = expanded.type;\n      }\n      input.prevOutScript = options.prevOutScript;\n      input.prevOutType = prevOutType || classify.output(options.prevOutScript);\n    }\n    const vin = this.__TX.addInput(\n      txHash,\n      vout,\n      options.sequence,\n      options.scriptSig,\n    );\n    this.__INPUTS[vin] = input;\n    this.__PREV_TX_SET[prevTxOut] = true;\n    return vin;\n  }\n  __build(allowIncomplete) {\n    if (!allowIncomplete) {\n      if (!this.__TX.ins.length) throw new Error('Transaction has no inputs');\n      if (!this.__TX.outs.length) throw new Error('Transaction has no outputs');\n    }\n    const tx = this.__TX.clone();\n    // create script signatures from inputs\n    this.__INPUTS.forEach((input, i) => {\n      if (!input.prevOutType && !allowIncomplete)\n        throw new Error('Transaction is not complete');\n      const result = build(input.prevOutType, input, allowIncomplete);\n      if (!result) {\n        if (!allowIncomplete && input.prevOutType === SCRIPT_TYPES.NONSTANDARD)\n          throw new Error('Unknown input type');\n        if (!allowIncomplete) throw new Error('Not enough information');\n        return;\n      }\n      tx.setInputScript(i, result.input);\n      tx.setWitness(i, result.witness);\n    });\n    if (!allowIncomplete) {\n      // do not rely on this, its merely a last resort\n      if (this.__overMaximumFees(tx.virtualSize())) {\n        throw new Error('Transaction has absurd fees');\n      }\n    }\n    return tx;\n  }\n  __canModifyInputs() {\n    return this.__INPUTS.every(input => {\n      if (!input.signatures) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        // if SIGHASH_ANYONECANPAY is set, signatures would not\n        // be invalidated by more inputs\n        return (\n          (hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY) !== 0\n        );\n      });\n    });\n  }\n  __needsOutputs(signingHashType) {\n    if (signingHashType === transaction_1.Transaction.SIGHASH_ALL) {\n      return this.__TX.outs.length === 0;\n    }\n    // if inputs are being signed with SIGHASH_NONE, we don't strictly need outputs\n    // .build() will fail, but .buildIncomplete() is OK\n    return (\n      this.__TX.outs.length === 0 &&\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(signature => {\n          if (!signature) return false; // no signature, no issue\n          const hashType = signatureHashType(signature);\n          if (hashType & transaction_1.Transaction.SIGHASH_NONE) return false; // SIGHASH_NONE doesn't care about outputs\n          return true; // SIGHASH_* does care\n        });\n      })\n    );\n  }\n  __canModifyOutputs() {\n    const nInputs = this.__TX.ins.length;\n    const nOutputs = this.__TX.outs.length;\n    return this.__INPUTS.every(input => {\n      if (input.signatures === undefined) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        const hashTypeMod = hashType & 0x1f;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_NONE) return true;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_SINGLE) {\n          // if SIGHASH_SINGLE is set, and nInputs > nOutputs\n          // some signatures would be invalidated by the addition\n          // of more outputs\n          return nInputs <= nOutputs;\n        }\n        return false;\n      });\n    });\n  }\n  __overMaximumFees(bytes) {\n    // not all inputs will have .value defined\n    const incoming = this.__INPUTS.reduce((a, x) => a + (x.value >>> 0), 0);\n    // but all outputs do, and if we have any input value\n    // we can immediately determine if the outputs are too small\n    const outgoing = this.__TX.outs.reduce((a, x) => a + x.value, 0);\n    const fee = incoming - outgoing;\n    const feeRate = fee / bytes;\n    return feeRate > this.maximumFeeRate;\n  }\n}\nexports.TransactionBuilder = TransactionBuilder;\nfunction expandInput(scriptSig, witnessStack, type, scriptPubKey) {\n  if (scriptSig.length === 0 && witnessStack.length === 0) return {};\n  if (!type) {\n    let ssType = classify.input(scriptSig, true);\n    let wsType = classify.witness(witnessStack, true);\n    if (ssType === SCRIPT_TYPES.NONSTANDARD) ssType = undefined;\n    if (wsType === SCRIPT_TYPES.NONSTANDARD) wsType = undefined;\n    type = ssType || wsType;\n  }\n  switch (type) {\n    case SCRIPT_TYPES.P2WPKH: {\n      const { output, pubkey, signature } = payments.p2wpkh({\n        witness: witnessStack,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2WPKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PKH: {\n      const { output, pubkey, signature } = payments.p2pkh({\n        input: scriptSig,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2PKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const { signature } = payments.p2pk({ input: scriptSig });\n      return {\n        prevOutType: SCRIPT_TYPES.P2PK,\n        pubkeys: [undefined],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const { m, pubkeys, signatures } = payments.p2ms(\n        {\n          input: scriptSig,\n          output: scriptPubKey,\n        },\n        { allowIncomplete: true },\n      );\n      return {\n        prevOutType: SCRIPT_TYPES.P2MS,\n        pubkeys,\n        signatures,\n        maxSignatures: m,\n      };\n    }\n  }\n  if (type === SCRIPT_TYPES.P2SH) {\n    const { output, redeem } = payments.p2sh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    const expanded = expandInput(\n      redeem.input,\n      redeem.witness,\n      outputType,\n      redeem.output,\n    );\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      redeemScript: redeem.output,\n      redeemScriptType: expanded.prevOutType,\n      witnessScript: expanded.witnessScript,\n      witnessScriptType: expanded.witnessScriptType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  if (type === SCRIPT_TYPES.P2WSH) {\n    const { output, redeem } = payments.p2wsh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    let expanded;\n    if (outputType === SCRIPT_TYPES.P2WPKH) {\n      expanded = expandInput(redeem.input, redeem.witness, outputType);\n    } else {\n      expanded = expandInput(\n        bscript.compile(redeem.witness),\n        [],\n        outputType,\n        redeem.output,\n      );\n    }\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      witnessScript: redeem.output,\n      witnessScriptType: expanded.prevOutType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  return {\n    prevOutType: SCRIPT_TYPES.NONSTANDARD,\n    prevOutScript: scriptSig,\n  };\n}\n// could be done in expandInput, but requires the original Transaction for hashForSignature\nfunction fixMultisigOrder(input, transaction, vin) {\n  if (input.redeemScriptType !== SCRIPT_TYPES.P2MS || !input.redeemScript)\n    return;\n  if (input.pubkeys.length === input.signatures.length) return;\n  const unmatched = input.signatures.concat();\n  input.signatures = input.pubkeys.map(pubKey => {\n    const keyPair = ECPair.fromPublicKey(pubKey);\n    let match;\n    // check for a signature\n    unmatched.some((signature, i) => {\n      // skip if undefined || OP_0\n      if (!signature) return false;\n      // TODO: avoid O(n) hashForSignature\n      const parsed = bscript.signature.decode(signature);\n      const hash = transaction.hashForSignature(\n        vin,\n        input.redeemScript,\n        parsed.hashType,\n      );\n      // skip if signature does not match pubKey\n      if (!keyPair.verify(hash, parsed.signature)) return false;\n      // remove matched signature from unmatched\n      unmatched[i] = undefined;\n      match = signature;\n      return true;\n    });\n    return match;\n  });\n}\nfunction expandOutput(script, ourPubKey) {\n  typeforce(types.Buffer, script);\n  const type = classify.output(script);\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const pkh1 = payments.p2pkh({ output: script }).hash;\n      const pkh2 = bcrypto.hash160(ourPubKey);\n      if (!pkh1.equals(pkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const wpkh1 = payments.p2wpkh({ output: script }).hash;\n      const wpkh2 = bcrypto.hash160(ourPubKey);\n      if (!wpkh1.equals(wpkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const p2pk = payments.p2pk({ output: script });\n      return {\n        type,\n        pubkeys: [p2pk.pubkey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const p2ms = payments.p2ms({ output: script });\n      return {\n        type,\n        pubkeys: p2ms.pubkeys,\n        signatures: p2ms.pubkeys.map(() => undefined),\n        maxSignatures: p2ms.m,\n      };\n    }\n  }\n  return { type };\n}\nfunction prepareInput(input, ourPubKey, redeemScript, witnessScript) {\n  if (redeemScript && witnessScript) {\n    const p2wsh = payments.p2wsh({\n      redeem: { output: witnessScript },\n    });\n    const p2wshAlt = payments.p2wsh({ output: redeemScript });\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    const p2shAlt = payments.p2sh({ redeem: p2wsh });\n    // enforces P2SH(P2WSH(...))\n    if (!p2wsh.hash.equals(p2wshAlt.hash))\n      throw new Error('Witness script inconsistent with prevOutScript');\n    if (!p2sh.hash.equals(p2shAlt.hash))\n      throw new Error('Redeem script inconsistent with prevOutScript');\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2SH(P2WSH(P2WPKH)) is a consensus failure');\n    return {\n      redeemScript,\n      redeemScriptType: SCRIPT_TYPES.P2WSH,\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (redeemScript) {\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    if (input.prevOutScript) {\n      let p2shAlt;\n      try {\n        p2shAlt = payments.p2sh({ output: input.prevOutScript });\n      } catch (e) {\n        throw new Error('PrevOutScript must be P2SH');\n      }\n      if (!p2sh.hash.equals(p2shAlt.hash))\n        throw new Error('Redeem script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2sh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as redeemScript (' +\n          bscript.toASM(redeemScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = redeemScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      redeemScript,\n      redeemScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (witnessScript) {\n    const p2wsh = payments.p2wsh({ redeem: { output: witnessScript } });\n    if (input.prevOutScript) {\n      const p2wshAlt = payments.p2wsh({ output: input.prevOutScript });\n      if (!p2wsh.hash.equals(p2wshAlt.hash))\n        throw new Error('Witness script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2WSH(P2WPKH) is a consensus failure');\n    return {\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      prevOutScript: p2wsh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (input.prevOutType && input.prevOutScript) {\n    // embedded scripts are not possible without extra information\n    if (input.prevOutType === SCRIPT_TYPES.P2SH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires redeemScript',\n      );\n    if (input.prevOutType === SCRIPT_TYPES.P2WSH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires witnessScript',\n      );\n    if (!input.prevOutScript) throw new Error('PrevOutScript is missing');\n    const expanded = expandOutput(input.prevOutScript, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported (' +\n          bscript.toASM(input.prevOutScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = input.prevOutScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      prevOutType: expanded.type,\n      prevOutScript: input.prevOutScript,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  const prevOutScript = payments.p2pkh({ pubkey: ourPubKey }).output;\n  return {\n    prevOutType: SCRIPT_TYPES.P2PKH,\n    prevOutScript,\n    hasWitness: false,\n    signScript: prevOutScript,\n    signType: SCRIPT_TYPES.P2PKH,\n    pubkeys: [ourPubKey],\n    signatures: [undefined],\n  };\n}\nfunction build(type, input, allowIncomplete) {\n  const pubkeys = input.pubkeys || [];\n  let signatures = input.signatures || [];\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2wpkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2PK: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pk({ signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const m = input.maxSignatures;\n      if (allowIncomplete) {\n        signatures = signatures.map(x => x || script_1.OPS.OP_0);\n      } else {\n        signatures = signatures.filter(x => x);\n      }\n      // if the transaction is not not complete (complete), or if signatures.length === m, validate\n      // otherwise, the number of OP_0's may be >= m, so don't validate (boo)\n      const validate = !allowIncomplete || m === signatures.length;\n      return payments.p2ms(\n        { m, pubkeys, signatures },\n        { allowIncomplete, validate },\n      );\n    }\n    case SCRIPT_TYPES.P2SH: {\n      const redeem = build(input.redeemScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2sh({\n        redeem: {\n          output: redeem.output || input.redeemScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n    case SCRIPT_TYPES.P2WSH: {\n      const redeem = build(input.witnessScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2wsh({\n        redeem: {\n          output: input.witnessScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n  }\n}\nfunction canSign(input) {\n  return (\n    input.signScript !== undefined &&\n    input.signType !== undefined &&\n    input.pubkeys !== undefined &&\n    input.signatures !== undefined &&\n    input.signatures.length === input.pubkeys.length &&\n    input.pubkeys.length > 0 &&\n    (input.hasWitness === false || input.value !== undefined)\n  );\n}\nfunction signatureHashType(buffer) {\n  return buffer.readUInt8(buffer.length - 1);\n}\nfunction checkSignArgs(inputs, signParams) {\n  if (!PREVOUT_TYPES.has(signParams.prevOutScriptType)) {\n    throw new TypeError(\n      `Unknown prevOutScriptType \"${signParams.prevOutScriptType}\"`,\n    );\n  }\n  tfMessage(\n    typeforce.Number,\n    signParams.vin,\n    `sign must include vin parameter as Number (input index)`,\n  );\n  tfMessage(\n    types.Signer,\n    signParams.keyPair,\n    `sign must include keyPair parameter as Signer interface`,\n  );\n  tfMessage(\n    typeforce.maybe(typeforce.Number),\n    signParams.hashType,\n    `sign hashType parameter must be a number`,\n  );\n  const prevOutType = (inputs[signParams.vin] || []).prevOutType;\n  const posType = signParams.prevOutScriptType;\n  switch (posType) {\n    case 'p2pkh':\n      if (prevOutType && prevOutType !== 'pubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2pk':\n      if (prevOutType && prevOutType !== 'pubkey') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pk: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wpkh':\n      if (prevOutType && prevOutType !== 'witnesspubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2ms':\n      if (prevOutType && prevOutType !== 'multisig') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2ms: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wpkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2sh-p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2ms':\n    case 'p2sh-p2pk':\n    case 'p2sh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wsh-p2ms':\n    case 'p2wsh-p2pk':\n    case 'p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'witnessscripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wsh-p2ms':\n    case 'p2sh-p2wsh-p2pk':\n    case 'p2sh-p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessScript`,\n      );\n      break;\n  }\n}\nfunction trySign({\n  input,\n  ourPubKey,\n  keyPair,\n  signatureHash,\n  hashType,\n  useLowR,\n}) {\n  // enforce in order signing of public keys\n  let signed = false;\n  for (const [i, pubKey] of input.pubkeys.entries()) {\n    if (!ourPubKey.equals(pubKey)) continue;\n    if (input.signatures[i]) throw new Error('Signature already exists');\n    // TODO: add tests\n    if (ourPubKey.length !== 33 && input.hasWitness) {\n      throw new Error(\n        'BIP143 rejects uncompressed public keys in P2WPKH or P2WSH',\n      );\n    }\n    const signature = keyPair.sign(signatureHash, useLowR);\n    input.signatures[i] = bscript.signature.encode(signature, hashType);\n    signed = true;\n  }\n  if (!signed) throw new Error('Key pair cannot sign for this input');\n}\nfunction getSigningData(\n  network,\n  inputs,\n  needsOutputs,\n  tx,\n  signParams,\n  keyPair,\n  redeemScript,\n  hashType,\n  witnessValue,\n  witnessScript,\n  useLowR,\n) {\n  let vin;\n  if (typeof signParams === 'number') {\n    console.warn(\n      'DEPRECATED: TransactionBuilder sign method arguments ' +\n        'will change in v6, please use the TxbSignArg interface',\n    );\n    vin = signParams;\n  } else if (typeof signParams === 'object') {\n    checkSignArgs(inputs, signParams);\n    ({\n      vin,\n      keyPair,\n      redeemScript,\n      hashType,\n      witnessValue,\n      witnessScript,\n    } = signParams);\n  } else {\n    throw new TypeError(\n      'TransactionBuilder sign first arg must be TxbSignArg or number',\n    );\n  }\n  if (keyPair === undefined) {\n    throw new Error('sign requires keypair');\n  }\n  // TODO: remove keyPair.network matching in 4.0.0\n  if (keyPair.network && keyPair.network !== network)\n    throw new TypeError('Inconsistent network');\n  if (!inputs[vin]) throw new Error('No input at index: ' + vin);\n  hashType = hashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (needsOutputs(hashType)) throw new Error('Transaction needs outputs');\n  const input = inputs[vin];\n  // if redeemScript was previously provided, enforce consistency\n  if (\n    input.redeemScript !== undefined &&\n    redeemScript &&\n    !input.redeemScript.equals(redeemScript)\n  ) {\n    throw new Error('Inconsistent redeemScript');\n  }\n  const ourPubKey =\n    keyPair.publicKey || (keyPair.getPublicKey && keyPair.getPublicKey());\n  if (!canSign(input)) {\n    if (witnessValue !== undefined) {\n      if (input.value !== undefined && input.value !== witnessValue)\n        throw new Error('Input did not match witnessValue');\n      typeforce(types.Satoshi, witnessValue);\n      input.value = witnessValue;\n    }\n    if (!canSign(input)) {\n      const prepared = prepareInput(\n        input,\n        ourPubKey,\n        redeemScript,\n        witnessScript,\n      );\n      // updates inline\n      Object.assign(input, prepared);\n    }\n    if (!canSign(input)) throw Error(input.prevOutType + ' not supported');\n  }\n  // ready to sign\n  let signatureHash;\n  if (input.hasWitness) {\n    signatureHash = tx.hashForWitnessV0(\n      vin,\n      input.signScript,\n      input.value,\n      hashType,\n    );\n  } else {\n    signatureHash = tx.hashForSignature(vin, input.signScript, hashType);\n  }\n  return {\n    input,\n    ourPubKey,\n    keyPair,\n    signatureHash,\n    hashType,\n    useLowR: !!useLowR,\n  };\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst script_1 = require('./script');\nconst multisig = require('./templates/multisig');\nconst nullData = require('./templates/nulldata');\nconst pubKey = require('./templates/pubkey');\nconst pubKeyHash = require('./templates/pubkeyhash');\nconst scriptHash = require('./templates/scripthash');\nconst witnessCommitment = require('./templates/witnesscommitment');\nconst witnessPubKeyHash = require('./templates/witnesspubkeyhash');\nconst witnessScriptHash = require('./templates/witnessscripthash');\nconst types = {\n  P2MS: 'multisig',\n  NONSTANDARD: 'nonstandard',\n  NULLDATA: 'nulldata',\n  P2PK: 'pubkey',\n  P2PKH: 'pubkeyhash',\n  P2SH: 'scripthash',\n  P2WPKH: 'witnesspubkeyhash',\n  P2WSH: 'witnessscripthash',\n  WITNESS_COMMITMENT: 'witnesscommitment',\n};\nexports.types = types;\nfunction classifyOutput(script) {\n  if (witnessPubKeyHash.output.check(script)) return types.P2WPKH;\n  if (witnessScriptHash.output.check(script)) return types.P2WSH;\n  if (pubKeyHash.output.check(script)) return types.P2PKH;\n  if (scriptHash.output.check(script)) return types.P2SH;\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (multisig.output.check(chunks)) return types.P2MS;\n  if (pubKey.output.check(chunks)) return types.P2PK;\n  if (witnessCommitment.output.check(chunks)) return types.WITNESS_COMMITMENT;\n  if (nullData.output.check(chunks)) return types.NULLDATA;\n  return types.NONSTANDARD;\n}\nexports.output = classifyOutput;\nfunction classifyInput(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (pubKeyHash.input.check(chunks)) return types.P2PKH;\n  if (scriptHash.input.check(chunks, allowIncomplete)) return types.P2SH;\n  if (multisig.input.check(chunks, allowIncomplete)) return types.P2MS;\n  if (pubKey.input.check(chunks)) return types.P2PK;\n  return types.NONSTANDARD;\n}\nexports.input = classifyInput;\nfunction classifyWitness(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (witnessPubKeyHash.input.check(chunks)) return types.P2WPKH;\n  if (witnessScriptHash.input.check(chunks, allowIncomplete))\n    return types.P2WSH;\n  return types.NONSTANDARD;\n}\nexports.witness = classifyWitness;\n","'use strict';\n// OP_0 [signatures ...]\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction partialSignature(value) {\n  return (\n    value === script_1.OPS.OP_0 || bscript.isCanonicalScriptSignature(value)\n  );\n}\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 2) return false;\n  if (chunks[0] !== script_1.OPS.OP_0) return false;\n  if (allowIncomplete) {\n    return chunks.slice(1).every(partialSignature);\n  }\n  return chunks.slice(1).every(bscript.isCanonicalScriptSignature);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multisig input';\n};\n","'use strict';\n// m [pubKeys ...] n OP_CHECKMULTISIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst OP_INT_BASE = script_1.OPS.OP_RESERVED; // OP_1 - 1\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 4) return false;\n  if (chunks[chunks.length - 1] !== script_1.OPS.OP_CHECKMULTISIG) return false;\n  if (!types.Number(chunks[0])) return false;\n  if (!types.Number(chunks[chunks.length - 2])) return false;\n  const m = chunks[0] - OP_INT_BASE;\n  const n = chunks[chunks.length - 2] - OP_INT_BASE;\n  if (m <= 0) return false;\n  if (n > 16) return false;\n  if (m > n) return false;\n  if (n !== chunks.length - 3) return false;\n  if (allowIncomplete) return true;\n  const keys = chunks.slice(1, -2);\n  return keys.every(bscript.isCanonicalPubKey);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multi-sig output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// OP_RETURN {data}\nconst bscript = require('../script');\nconst OPS = bscript.OPS;\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return buffer.length > 1 && buffer[0] === OPS.OP_RETURN;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'null data output';\n};\nconst output = { check };\nexports.output = output;\n","'use strict';\n// {signature}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return chunks.length === 1 && bscript.isCanonicalScriptSignature(chunks[0]);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey input';\n};\n","'use strict';\n// {pubKey} OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalPubKey(chunks[0]) &&\n    chunks[1] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey output';\n};\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    bscript.isCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash input';\n};\n","'use strict';\n// OP_DUP OP_HASH160 {pubKeyHash} OP_EQUALVERIFY OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 25 &&\n    buffer[0] === script_1.OPS.OP_DUP &&\n    buffer[1] === script_1.OPS.OP_HASH160 &&\n    buffer[2] === 0x14 &&\n    buffer[23] === script_1.OPS.OP_EQUALVERIFY &&\n    buffer[24] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nconst p2wpkho = require('../witnesspubkeyhash/output');\nconst p2wsho = require('../witnessscripthash/output');\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 1) return false;\n  const lastChunk = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(lastChunk)) return false;\n  const scriptSigChunks = bscript.decompile(\n    bscript.compile(chunks.slice(0, -1)),\n  );\n  const redeemScriptChunks = bscript.decompile(lastChunk);\n  // is redeemScript a valid script?\n  if (!redeemScriptChunks) return false;\n  // is redeemScriptSig push only?\n  if (!bscript.isPushOnly(scriptSigChunks)) return false;\n  // is witness?\n  if (chunks.length === 1) {\n    return (\n      p2wsho.check(redeemScriptChunks) || p2wpkho.check(redeemScriptChunks)\n    );\n  }\n  // match types\n  if (\n    p2pkh.input.check(scriptSigChunks) &&\n    p2pkh.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(scriptSigChunks, allowIncomplete) &&\n    p2ms.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(scriptSigChunks) &&\n    p2pk.output.check(redeemScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash input';\n};\n","'use strict';\n// OP_HASH160 {scriptHash} OP_EQUAL\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 23 &&\n    buffer[0] === script_1.OPS.OP_HASH160 &&\n    buffer[1] === 0x14 &&\n    buffer[22] === script_1.OPS.OP_EQUAL\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// OP_RETURN {aa21a9ed} {commitment}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst typeforce = require('typeforce');\nconst HEADER = Buffer.from('aa21a9ed', 'hex');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length > 37 &&\n    buffer[0] === script_1.OPS.OP_RETURN &&\n    buffer[1] === 0x24 &&\n    buffer.slice(2, 6).equals(HEADER)\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness commitment output';\n};\nfunction encode(commitment) {\n  typeforce(types.Hash256bit, commitment);\n  const buffer = Buffer.allocUnsafe(36);\n  HEADER.copy(buffer, 0);\n  commitment.copy(buffer, 4);\n  return bscript.compile([script_1.OPS.OP_RETURN, buffer]);\n}\nexports.encode = encode;\nfunction decode(buffer) {\n  typeforce(check, buffer);\n  return bscript.decompile(buffer)[1].slice(4, 36);\n}\nexports.decode = decode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction isCompressedCanonicalPubKey(pubKey) {\n  return bscript.isCanonicalPubKey(pubKey) && pubKey.length === 33;\n}\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    isCompressedCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessPubKeyHash input';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst typeforce = require('typeforce');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nfunction check(chunks, allowIncomplete) {\n  typeforce(typeforce.Array, chunks);\n  if (chunks.length < 1) return false;\n  const witnessScript = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(witnessScript)) return false;\n  const witnessScriptChunks = bscript.decompile(witnessScript);\n  // is witnessScript a valid script?\n  if (!witnessScriptChunks || witnessScriptChunks.length === 0) return false;\n  const witnessRawScriptSig = bscript.compile(chunks.slice(0, -1));\n  // match types\n  if (\n    p2pkh.input.check(witnessRawScriptSig) &&\n    p2pkh.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(witnessRawScriptSig, allowIncomplete) &&\n    p2ms.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(witnessRawScriptSig) &&\n    p2pk.output.check(witnessScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessScriptHash input';\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base64url_1 = require(\"base64url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nfunction createSigningInput(payload, header) {\n    const tokenParts = [];\n    // add in the header\n    const encodedHeader = base64url_1.default.encode(JSON.stringify(header));\n    tokenParts.push(encodedHeader);\n    // add in the payload\n    const encodedPayload = base64url_1.default.encode(JSON.stringify(payload));\n    tokenParts.push(encodedPayload);\n    // prepare the message\n    const signingInput = tokenParts.join('.');\n    // return the signing input\n    return signingInput;\n}\nfunction createUnsecuredToken(payload) {\n    const header = { typ: 'JWT', alg: 'none' };\n    return createSigningInput(payload, header) + '.';\n}\nexports.createUnsecuredToken = createUnsecuredToken;\nclass TokenSigner {\n    constructor(signingAlgorithm, rawPrivateKey) {\n        if (!(signingAlgorithm && rawPrivateKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and private key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw new Error('signing algorithm parameter must be a string');\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw new Error('invalid signing algorithm');\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPrivateKey = rawPrivateKey;\n    }\n    header(header = {}) {\n        const defaultHeader = { typ: this.tokenType,\n            alg: this.cryptoClient.algorithmName };\n        return Object.assign({}, defaultHeader, header);\n    }\n    sign(payload, expanded = false, customHeader = {}) {\n        // generate the token header\n        const header = this.header(customHeader);\n        // prepare the message to be signed\n        const signingInput = createSigningInput(payload, header);\n        const signingInputHash = sha256_1.hashSha256(signingInput);\n        return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n    }\n    signAsync(payload, expanded = false, customHeader = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // generate the token header\n            const header = this.header(customHeader);\n            // prepare the message to be signed\n            const signingInput = createSigningInput(payload, header);\n            const signingInputHash = yield sha256_1.hashSha256Async(signingInput);\n            return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n        });\n    }\n    createWithSignedHash(payload, expanded, header, signingInput, signingInputHash) {\n        // sign the message and add in the signature\n        const signature = this.cryptoClient.signHash(signingInputHash, this.rawPrivateKey);\n        if (expanded) {\n            const signedToken = {\n                'header': [\n                    base64url_1.default.encode(JSON.stringify(header))\n                ],\n                'payload': JSON.stringify(payload),\n                'signature': [\n                    signature\n                ]\n            };\n            return signedToken;\n        }\n        else {\n            return [signingInput, signature].join('.');\n        }\n    }\n}\nexports.TokenSigner = TokenSigner;\n//# sourceMappingURL=signer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pad_string_1 = require(\"./pad-string\");\nfunction encode(input, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    if (Buffer.isBuffer(input)) {\n        return fromBase64(input.toString(\"base64\"));\n    }\n    return fromBase64(Buffer.from(input, encoding).toString(\"base64\"));\n}\n;\nfunction decode(base64url, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    return Buffer.from(toBase64(base64url), \"base64\").toString(encoding);\n}\nfunction toBase64(base64url) {\n    base64url = base64url.toString();\n    return pad_string_1.default(base64url)\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\");\n}\nfunction fromBase64(base64) {\n    return base64\n        .replace(/=/g, \"\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\");\n}\nfunction toBuffer(base64url) {\n    return Buffer.from(toBase64(base64url), \"base64\");\n}\nvar base64url = encode;\nbase64url.encode = encode;\nbase64url.decode = decode;\nbase64url.toBase64 = toBase64;\nbase64url.fromBase64 = fromBase64;\nbase64url.toBuffer = toBuffer;\nexports.default = base64url;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction padString(input) {\n    var segmentLength = 4;\n    var stringLength = input.length;\n    var diff = stringLength % segmentLength;\n    if (!diff) {\n        return input;\n    }\n    var position = stringLength;\n    var padLength = segmentLength - diff;\n    var paddedStringLength = stringLength + padLength;\n    var buffer = Buffer.alloc(paddedStringLength);\n    buffer.write(input);\n    while (padLength--) {\n        buffer.write(\"=\", position++);\n    }\n    return buffer.toString();\n}\nexports.default = padString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst elliptic_1 = require(\"elliptic\");\nconst ecdsa_sig_formatter_1 = require(\"ecdsa-sig-formatter\");\nconst errors_1 = require(\"../errors\");\nclass SECP256K1Client {\n    constructor() {\n    }\n    static loadPrivateKey(rawPrivateKey) {\n        if (rawPrivateKey.length === 66) {\n            rawPrivateKey = rawPrivateKey.slice(0, 64);\n        }\n        return SECP256K1Client.ec.keyFromPrivate(rawPrivateKey);\n    }\n    static loadPublicKey(rawPublicKey) {\n        return SECP256K1Client.ec.keyFromPublic(rawPublicKey, 'hex');\n    }\n    static derivePublicKey(privateKey, compressed = true) {\n        if (typeof privateKey !== 'string') {\n            throw Error('private key must be a string');\n        }\n        if (!(/^[0-9A-F]+$/i.test(privateKey))) {\n            throw Error('private key must be a hex string');\n        }\n        if (privateKey.length == 66) {\n            privateKey = privateKey.slice(0, 64);\n        }\n        else if (privateKey.length <= 64) {\n            // do nothing\n        }\n        else {\n            throw Error('private key must be 66 characters or less');\n        }\n        const keypair = SECP256K1Client.ec.keyFromPrivate(privateKey);\n        return keypair.getPublic(compressed, 'hex');\n    }\n    static signHash(signingInputHash, rawPrivateKey, format = 'jose') {\n        // make sure the required parameters are provided\n        if (!(signingInputHash && rawPrivateKey)) {\n            throw new errors_1.MissingParametersError('a signing input hash and private key are all required');\n        }\n        // prepare the private key\n        const privateKeyObject = SECP256K1Client.loadPrivateKey(rawPrivateKey);\n        // calculate the signature\n        const signatureObject = privateKeyObject.sign(signingInputHash);\n        const derSignature = Buffer.from(signatureObject.toDER());\n        if (format === 'der') {\n            return derSignature.toString('hex');\n        }\n        else if (format === 'jose') {\n            // return the JOSE-formatted signature\n            return ecdsa_sig_formatter_1.derToJose(derSignature, 'ES256');\n        }\n        else {\n            throw Error('Invalid signature format');\n        }\n    }\n    static loadSignature(joseSignature) {\n        // create and return the DER-formatted signature buffer\n        return ecdsa_sig_formatter_1.joseToDer(joseSignature, 'ES256');\n    }\n    static verifyHash(signingInputHash, derSignatureBuffer, rawPublicKey) {\n        // make sure the required parameters are provided\n        if (!(signingInputHash && derSignatureBuffer && rawPublicKey)) {\n            throw new errors_1.MissingParametersError('a signing input hash, der signature, and public key are all required');\n        }\n        // prepare the public key\n        const publicKeyObject = SECP256K1Client.loadPublicKey(rawPublicKey);\n        // verify the token\n        return publicKeyObject.verify(signingInputHash, derSignatureBuffer);\n    }\n}\nexports.SECP256K1Client = SECP256K1Client;\nSECP256K1Client.ec = new elliptic_1.ec('secp256k1');\nSECP256K1Client.algorithmName = 'ES256K';\n//# sourceMappingURL=secp256k1.js.map","'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n\nvar getParamBytesForAlg = require('./param-bytes-for-alg');\n\nvar MAX_OCTET = 0x80,\n\tCLASS_UNIVERSAL = 0,\n\tPRIMITIVE_BIT = 0x20,\n\tTAG_SEQ = 0x10,\n\tTAG_INT = 0x02,\n\tENCODED_TAG_SEQ = (TAG_SEQ | PRIMITIVE_BIT) | (CLASS_UNIVERSAL << 6),\n\tENCODED_TAG_INT = TAG_INT | (CLASS_UNIVERSAL << 6);\n\nfunction base64Url(base64) {\n\treturn base64\n\t\t.replace(/=/g, '')\n\t\t.replace(/\\+/g, '-')\n\t\t.replace(/\\//g, '_');\n}\n\nfunction signatureAsBuffer(signature) {\n\tif (Buffer.isBuffer(signature)) {\n\t\treturn signature;\n\t} else if ('string' === typeof signature) {\n\t\treturn Buffer.from(signature, 'base64');\n\t}\n\n\tthrow new TypeError('ECDSA signature must be a Base64 string or a Buffer');\n}\n\nfunction derToJose(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\t// the DER encoded param should at most be the param size, plus a padding\n\t// zero, since due to being a signed integer\n\tvar maxEncodedParamLength = paramBytes + 1;\n\n\tvar inputLength = signature.length;\n\n\tvar offset = 0;\n\tif (signature[offset++] !== ENCODED_TAG_SEQ) {\n\t\tthrow new Error('Could not find expected \"seq\"');\n\t}\n\n\tvar seqLength = signature[offset++];\n\tif (seqLength === (MAX_OCTET | 1)) {\n\t\tseqLength = signature[offset++];\n\t}\n\n\tif (inputLength - offset < seqLength) {\n\t\tthrow new Error('\"seq\" specified length of \"' + seqLength + '\", only \"' + (inputLength - offset) + '\" remaining');\n\t}\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"r\"');\n\t}\n\n\tvar rLength = signature[offset++];\n\n\tif (inputLength - offset - 2 < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", only \"' + (inputLength - offset - 2) + '\" available');\n\t}\n\n\tif (maxEncodedParamLength < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar rOffset = offset;\n\toffset += rLength;\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"s\"');\n\t}\n\n\tvar sLength = signature[offset++];\n\n\tif (inputLength - offset !== sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", expected \"' + (inputLength - offset) + '\"');\n\t}\n\n\tif (maxEncodedParamLength < sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar sOffset = offset;\n\toffset += sLength;\n\n\tif (offset !== inputLength) {\n\t\tthrow new Error('Expected to consume entire buffer, but \"' + (inputLength - offset) + '\" bytes remain');\n\t}\n\n\tvar rPadding = paramBytes - rLength,\n\t\tsPadding = paramBytes - sLength;\n\n\tvar dst = Buffer.allocUnsafe(rPadding + rLength + sPadding + sLength);\n\n\tfor (offset = 0; offset < rPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, rOffset + Math.max(-rPadding, 0), rOffset + rLength);\n\n\toffset = paramBytes;\n\n\tfor (var o = offset; offset < o + sPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, sOffset + Math.max(-sPadding, 0), sOffset + sLength);\n\n\tdst = dst.toString('base64');\n\tdst = base64Url(dst);\n\n\treturn dst;\n}\n\nfunction countPadding(buf, start, stop) {\n\tvar padding = 0;\n\twhile (start + padding < stop && buf[start + padding] === 0) {\n\t\t++padding;\n\t}\n\n\tvar needsSign = buf[start + padding] >= MAX_OCTET;\n\tif (needsSign) {\n\t\t--padding;\n\t}\n\n\treturn padding;\n}\n\nfunction joseToDer(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\tvar signatureBytes = signature.length;\n\tif (signatureBytes !== paramBytes * 2) {\n\t\tthrow new TypeError('\"' + alg + '\" signatures must be \"' + paramBytes * 2 + '\" bytes, saw \"' + signatureBytes + '\"');\n\t}\n\n\tvar rPadding = countPadding(signature, 0, paramBytes);\n\tvar sPadding = countPadding(signature, paramBytes, signature.length);\n\tvar rLength = paramBytes - rPadding;\n\tvar sLength = paramBytes - sPadding;\n\n\tvar rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;\n\n\tvar shortLength = rsBytes < MAX_OCTET;\n\n\tvar dst = Buffer.allocUnsafe((shortLength ? 2 : 3) + rsBytes);\n\n\tvar offset = 0;\n\tdst[offset++] = ENCODED_TAG_SEQ;\n\tif (shortLength) {\n\t\t// Bit 8 has value \"0\"\n\t\t// bits 7-1 give the length.\n\t\tdst[offset++] = rsBytes;\n\t} else {\n\t\t// Bit 8 of first octet has value \"1\"\n\t\t// bits 7-1 give the number of additional length octets.\n\t\tdst[offset++] = MAX_OCTET\t| 1;\n\t\t// length, base 256\n\t\tdst[offset++] = rsBytes & 0xff;\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = rLength;\n\tif (rPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\toffset += signature.copy(dst, offset, 0, paramBytes);\n\t} else {\n\t\toffset += signature.copy(dst, offset, rPadding, paramBytes);\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = sLength;\n\tif (sPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\tsignature.copy(dst, offset, paramBytes);\n\t} else {\n\t\tsignature.copy(dst, offset, paramBytes + sPadding);\n\t}\n\n\treturn dst;\n}\n\nmodule.exports = {\n\tderToJose: derToJose,\n\tjoseToDer: joseToDer\n};\n","'use strict';\n\nfunction getParamSize(keySize) {\n\tvar result = ((keySize / 8) | 0) + (keySize % 8 === 0 ? 0 : 1);\n\treturn result;\n}\n\nvar paramBytesForAlg = {\n\tES256: getParamSize(256),\n\tES384: getParamSize(384),\n\tES512: getParamSize(521)\n};\n\nfunction getParamBytesForAlg(alg) {\n\tvar paramBytes = paramBytesForAlg[alg];\n\tif (paramBytes) {\n\t\treturn paramBytes;\n\t}\n\n\tthrow new Error('Unknown algorithm \"' + alg + '\"');\n}\n\nmodule.exports = getParamBytesForAlg;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base64url_1 = require(\"base64url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nclass TokenVerifier {\n    constructor(signingAlgorithm, rawPublicKey) {\n        if (!(signingAlgorithm && rawPublicKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and public key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw 'signing algorithm parameter must be a string';\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw 'invalid signing algorithm';\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPublicKey = rawPublicKey;\n    }\n    verify(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, false);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, false);\n        }\n        else {\n            false;\n        }\n    }\n    verifyAsync(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, true);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, true);\n        }\n        else {\n            return Promise.resolve(false);\n        }\n    }\n    verifyCompact(token, async) {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        // calculate the signing input hash\n        const signingInput = tokenParts[0] + '.' + tokenParts[1];\n        const performVerify = (signingInputHash) => {\n            // extract the signature as a DER array\n            const derSignatureBuffer = this.cryptoClient.loadSignature(tokenParts[2]);\n            // verify the signed hash\n            return this.cryptoClient.verifyHash(signingInputHash, derSignatureBuffer, this.rawPublicKey);\n        };\n        if (async) {\n            return sha256_1.hashSha256Async(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = sha256_1.hashSha256(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n    verifyExpanded(token, async) {\n        const signingInput = [\n            token['header'].join('.'),\n            base64url_1.default.encode(token['payload'])\n        ].join('.');\n        let verified = true;\n        const performVerify = (signingInputHash) => {\n            token['signature'].map((signature) => {\n                const derSignatureBuffer = this.cryptoClient.loadSignature(signature);\n                const signatureVerified = this.cryptoClient.verifyHash(signingInputHash, derSignatureBuffer, this.rawPublicKey);\n                if (!signatureVerified) {\n                    verified = false;\n                }\n            });\n            return verified;\n        };\n        if (async) {\n            return sha256_1.hashSha256Async(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = sha256_1.hashSha256(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n}\nexports.TokenVerifier = TokenVerifier;\n//# sourceMappingURL=verifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base64url_1 = require(\"base64url\");\nfunction decodeToken(token) {\n    if (typeof token === 'string') {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        const header = JSON.parse(base64url_1.default.decode(tokenParts[0]));\n        const payload = JSON.parse(base64url_1.default.decode(tokenParts[1]));\n        const signature = tokenParts[2];\n        // return the token object\n        return {\n            header: header,\n            payload: payload,\n            signature: signature\n        };\n    }\n    else if (typeof token === 'object') {\n        if (typeof token.payload !== 'string') {\n            throw new Error('Expected token payload to be a base64 or json string');\n        }\n        let payload = token.payload;\n        if (token.payload[0] !== '{') {\n            payload = base64url_1.default.decode(payload);\n        }\n        const allHeaders = [];\n        token.header.map((headerValue) => {\n            const header = JSON.parse(base64url_1.default.decode(headerValue));\n            allHeaders.push(header);\n        });\n        return {\n            header: allHeaders,\n            payload: JSON.parse(payload),\n            signature: token.signature\n        };\n    }\n}\nexports.decodeToken = decodeToken;\n//# sourceMappingURL=decode.js.map","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getZoneFileTemplate = getZoneFileTemplate;\n\nfunction getZoneFileTemplate() {\n  return '{$origin}\\n\\\n{$ttl}\\n\\\n\\n\\\n; SOA Record\\n\\\n{name} {ttl}    IN  SOA {mname}{rname}(\\n\\\n{serial} ;serial\\n\\\n{refresh} ;refresh\\n\\\n{retry} ;retry\\n\\\n{expire} ;expire\\n\\\n{minimum} ;minimum ttl\\n\\\n)\\n\\\n\\n\\\n; NS Records\\n\\\n{ns}\\n\\\n\\n\\\n; MX Records\\n\\\n{mx}\\n\\\n\\n\\\n; A Records\\n\\\n{a}\\n\\\n\\n\\\n; AAAA Records\\n\\\n{aaaa}\\n\\\n\\n\\\n; CNAME Records\\n\\\n{cname}\\n\\\n\\n\\\n; PTR Records\\n\\\n{ptr}\\n\\\n\\n\\\n; TXT Records\\n\\\n{txt}\\n\\\n\\n\\\n; SRV Records\\n\\\n{srv}\\n\\\n\\n\\\n; SPF Records\\n\\\n{spf}\\n\\\n\\n\\\n; URI Records\\n\\\n{uri}\\n\\\n';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ZoneFile = void 0;\n\nvar _makeZoneFile = require(\"./makeZoneFile\");\n\nvar _parseZoneFile = require(\"./parseZoneFile\");\n\nclass ZoneFile {\n  constructor(zoneFile) {\n    if (typeof zoneFile === 'object') {\n      this.jsonZoneFile = JSON.parse(JSON.stringify(zoneFile));\n    } else if (typeof zoneFile === 'string') {\n      this.jsonZoneFile = (0, _parseZoneFile.parseZoneFile)(zoneFile);\n    }\n  }\n\n  toJSON() {\n    return this.jsonZoneFile;\n  }\n\n  toString() {\n    return (0, _makeZoneFile.makeZoneFile)(this.toJSON());\n  }\n\n}\n\nexports.ZoneFile = ZoneFile;","/*\n * This module is intended to be executed both on client side and server side.\n * No error should be thrown. (soft error handling)\n */\n\n(function () {\n\tvar root = {};\n\t// Dependencies --------------------------------------------------------------\n\troot.async = (typeof require === 'function') ? require('async') : window.async;\n\tif (typeof root.async !== 'object') {\n\t\tthrow new Error('Module async is required (https://github.com/caolan/async)');\n\t}\n\tvar async = root.async;\n\n\tfunction _extend(origin, add) {\n\t\tif (!add || typeof add !== 'object') {\n\t\t\treturn origin;\n\t\t}\n\t\tvar keys = Object.keys(add);\n\t\tvar i = keys.length;\n\t\twhile (i--) {\n\t\t\torigin[keys[i]] = add[keys[i]];\n\t\t}\n\t\treturn origin;\n\t}\n\n\tfunction _merge() {\n\t\tvar ret = {};\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\tvar keys = null;\n\t\tvar i = null;\n\n\t\targs.forEach(function (arg) {\n\t\t\tif (arg && arg.constructor === Object) {\n\t\t\t\tkeys = Object.keys(arg);\n\t\t\t\ti = keys.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tret[keys[i]] = arg[keys[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn ret;\n\t}\n\n\t// Customisable class (Base class) -------------------------------------------\n\t// Use with operation \"new\" to extend Validation and Sanitization themselves,\n\t// not their prototype. In other words, constructor shall be call to extend\n\t// those functions, instead of being in their constructor, like this:\n\t//\t\t_extend(Validation, new Customisable);\n\n\tfunction Customisable() {\n\t\tthis.custom = {};\n\n\t\tthis.extend = function (custom) {\n\t\t\treturn _extend(this.custom, custom);\n\t\t};\n\n\t\tthis.reset = function () {\n\t\t\tthis.custom = {};\n\t\t};\n\n\t\tthis.remove = function (fields) {\n\t\t\tif (!_typeIs.array(fields)) {\n\t\t\t\tfields = [fields];\n\t\t\t}\n\t\t\tfields.forEach(function (field) {\n\t\t\t\tdelete this.custom[field];\n\t\t\t}, this);\n\t\t};\n\t}\n\n\t// Inspection class (Base class) ---------------------------------------------\n\t// Use to extend Validation and Sanitization prototypes. Inspection\n\t// constructor shall be called in derived class constructor.\n\n\tfunction Inspection(schema, custom) {\n\t\tvar _stack = ['@'];\n\n\t\tthis._schema = schema;\n\t\tthis._custom = {};\n\t\tif (custom != null) {\n\t\t\tfor (var key in custom) {\n\t\t\t\tif (custom.hasOwnProperty(key)){\n\t\t\t\t\tthis._custom['$' + key] = custom[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._getDepth = function () {\n\t\t\treturn _stack.length;\n\t\t};\n\n\t\tthis._dumpStack = function () {\n\t\t\treturn _stack.map(function (i) {return i.replace(/^\\[/g, '\\u001b\\u001c\\u001d\\u001e');})\n\t\t\t.join('.').replace(/\\.\\u001b\\u001c\\u001d\\u001e/g, '[');\n\t\t};\n\n\t\tthis._deeperObject = function (name) {\n\t\t\t_stack.push((/^[a-z$_][a-z0-9$_]*$/i).test(name) ? name : '[\"' + name + '\"]');\n\t\t\treturn this;\n\t\t};\n\n\t\tthis._deeperArray = function (i) {\n\t\t\t_stack.push('[' + i + ']');\n\t\t\treturn this;\n\t\t};\n\n\t\tthis._back = function () {\n\t\t\t_stack.pop();\n\t\t\treturn this;\n\t\t};\n\t}\n\t// Simple types --------------------------------------------------------------\n\t// If the property is not defined or is not in this list:\n\tvar _typeIs = {\n\t\t\"function\": function (element) {\n\t\t\treturn typeof element === 'function';\n\t\t},\n\t\t\"string\": function (element) {\n\t\t\treturn typeof element === 'string';\n\t\t},\n\t\t\"number\": function (element) {\n\t\t\treturn typeof element === 'number' && !isNaN(element);\n\t\t},\n\t\t\"integer\": function (element) {\n\t\t\treturn typeof element === 'number' && element % 1 === 0;\n\t\t},\n\t\t\"NaN\": function (element) {\n\t\t\treturn typeof element === 'number' && isNaN(element);\n\t\t},\n\t\t\"boolean\": function (element) {\n\t\t\treturn typeof element === 'boolean';\n\t\t},\n\t\t\"null\": function (element) {\n\t\t\treturn element === null;\n\t\t},\n\t\t\"date\": function (element) {\n\t\t\treturn element != null && element instanceof Date;\n\t\t},\n\t\t\"object\": function (element) {\n\t\t\treturn element != null && element.constructor === Object;\n\t\t},\n\t\t\"array\": function (element) {\n\t\t\treturn element != null && element.constructor === Array;\n\t\t},\n\t\t\"any\": function (element) {\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tfunction _simpleType(type, candidate) {\n\t\tif (typeof type == 'function') {\n\t\t\treturn candidate instanceof type;\n\t\t}\n\t\ttype = type in _typeIs ? type : 'any';\n\t\treturn _typeIs[type](candidate);\n\t}\n\n\tfunction _realType(candidate) {\n\t\tfor (var i in _typeIs) {\n\t\t\tif (_simpleType(i, candidate)) {\n\t\t\t\tif (i !== 'any') { return i; }\n\t\t\t\treturn 'an instance of ' + candidate.constructor.name;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getIndexes(a, value) {\n\t\tvar indexes = [];\n\t\tvar i = a.indexOf(value);\n\n\t\twhile (i !== -1) {\n\t\t\tindexes.push(i);\n\t\t\ti = a.indexOf(value, i + 1);\n\t\t}\n\t\treturn indexes;\n\t}\n\n\t// Available formats ---------------------------------------------------------\n\tvar _formats = {\n\t\t'void': /^$/,\n\t\t'url': /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)?(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i,\n\t\t'date-time': /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?(Z?|(-|\\+)\\d{2}:\\d{2})$/,\n\t\t'date': /^\\d{4}-\\d{2}-\\d{2}$/,\n\t\t'coolDateTime': /^\\d{4}(-|\\/)\\d{2}(-|\\/)\\d{2}(T| )\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z?$/,\n\t\t'time': /^\\d{2}\\:\\d{2}\\:\\d{2}$/,\n\t\t'color': /^#([0-9a-f])+$/i,\n\t\t'email': /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i,\n\t\t'numeric': /^[0-9]+$/,\n\t\t'integer': /^\\-?[0-9]+$/,\n\t\t'decimal': /^\\-?[0-9]*\\.?[0-9]+$/,\n\t\t'alpha': /^[a-z]+$/i,\n\t\t'alphaNumeric': /^[a-z0-9]+$/i,\n\t\t'alphaDash': /^[a-z0-9_-]+$/i,\n\t\t'javascript': /^[a-z_\\$][a-z0-9_\\$]*$/i,\n\t\t'upperString': /^[A-Z ]*$/,\n\t\t'lowerString': /^[a-z ]*$/\n\t};\n\n// Validation ------------------------------------------------------------------\n\tvar _validationAttribut = {\n\t\toptional: function (schema, candidate) {\n\t\t\tvar opt = typeof schema.optional === 'boolean' ? schema.optional : (schema.optional === 'true'); // Default is false\n\n\t\t\tif (opt === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof candidate === 'undefined') {\n\t\t\t\tthis.report('is missing and not optional', null, 'optional');\n\t\t\t}\n\t\t},\n\t\ttype: function (schema, candidate) {\n\t\t\t// return because optional function already handle this case\n\t\t\tif (typeof candidate === 'undefined' || (typeof schema.type !== 'string' && !(schema.type instanceof Array) && typeof schema.type !== 'function')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar types = _typeIs.array(schema.type) ? schema.type : [schema.type];\n\t\t\tvar typeIsValid = types.some(function (type) {\n\t\t\t\treturn _simpleType(type, candidate);\n\t\t\t});\n\t\t\tif (!typeIsValid) {\n\t\t\t\ttypes = types.map(function (t) {return typeof t === 'function' ? 'and instance of ' + t.name : t; });\n\t\t\t\tthis.report('must be ' + types.join(' or ') + ', but is ' + _realType(candidate), null, 'type');\n\t\t\t}\n\t\t},\n\t\tuniqueness: function (schema, candidate) {\n\t\t\tif (typeof schema.uniqueness === 'string') { schema.uniqueness = (schema.uniqueness === 'true'); }\n\t\t\tif (typeof schema.uniqueness !== 'boolean' || schema.uniqueness === false || (!_typeIs.array(candidate) && typeof candidate !== 'string')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar reported = [];\n\t\t\tfor (var i = 0; i < candidate.length; i++) {\n\t\t\t\tif (reported.indexOf(candidate[i]) >= 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar indexes = getIndexes(candidate, candidate[i]);\n\t\t\t\tif (indexes.length > 1) {\n\t\t\t\t\treported.push(candidate[i]);\n\t\t\t\t\tthis.report('has value [' + candidate[i] + '] more than once at indexes [' + indexes.join(', ') + ']', null, 'uniqueness');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tpattern: function (schema, candidate) {\n\t\t\tvar self = this;\n\t\t\tvar regexs = schema.pattern;\n\t\t\tif (typeof candidate !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar matches = false;\n\t\t\tif (!_typeIs.array(regexs)) {\n\t\t\t\tregexs = [regexs];\n\t\t\t}\n\t\t\tregexs.forEach(function (regex) {\n\t\t\t\tif (typeof regex === 'string' && regex in _formats) {\n\t\t\t\t\tregex = _formats[regex];\n\t\t\t\t}\n\t\t\t\tif (regex instanceof RegExp) {\n\t\t\t\t\tif (regex.test(candidate)) {\n\t\t\t\t\t\tmatches = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!matches) {\n\t\t\t\tself.report('must match [' + regexs.join(' or ') + '], but is equal to \"' + candidate + '\"', null, 'pattern');\n\t\t\t}\n\t\t},\n\t\tvalidDate: function (schema, candidate) {\n\t\t\tif (String(schema.validDate) === 'true' && candidate instanceof Date && isNaN(candidate.getTime())) {\n\t\t\t\tthis.report('must be a valid date', null, 'validDate');\n\t\t\t}\n\t\t},\n\t\tminLength: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar minLength = Number(schema.minLength);\n\t\t\tif (isNaN(minLength)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate.length < minLength) {\n\t\t\t\tthis.report('must be longer than ' + minLength + ' elements, but it has ' + candidate.length, null, 'minLength');\n\t\t\t}\n\t\t},\n\t\tmaxLength: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar maxLength = Number(schema.maxLength);\n\t\t\tif (isNaN(maxLength)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate.length > maxLength) {\n\t\t\t\tthis.report('must be shorter than ' + maxLength + ' elements, but it has ' + candidate.length, null, 'maxLength');\n\t\t\t}\n\t\t},\n\t\texactLength: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar exactLength = Number(schema.exactLength);\n\t\t\tif (isNaN(exactLength)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate.length !== exactLength) {\n\t\t\t\tthis.report('must have exactly ' + exactLength + ' elements, but it have ' + candidate.length, null, 'exactLength');\n\t\t\t}\n\t\t},\n\t\tlt: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.lt);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate >= limit) {\n\t\t\t\tthis.report('must be less than ' + limit + ', but is equal to \"' + candidate + '\"', null, 'lt');\n\t\t\t}\n\t\t},\n\t\tlte: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.lte);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate > limit) {\n\t\t\t\tthis.report('must be less than or equal to ' + limit + ', but is equal to \"' + candidate + '\"', null, 'lte');\n\t\t\t}\n\t\t},\n\t\tgt: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.gt);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate <= limit) {\n\t\t\t\tthis.report('must be greater than ' + limit + ', but is equal to \"' + candidate + '\"', null, 'gt');\n\t\t\t}\n\t\t},\n\t\tgte: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.gte);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate < limit) {\n\t\t\t\tthis.report('must be greater than or equal to ' + limit + ', but is equal to \"' + candidate + '\"', null, 'gte');\n\t\t\t}\n\t\t},\n\t\teq: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'number' && typeof candidate !== 'string' && typeof candidate !== 'boolean') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar limit = schema.eq;\n\t\t\tif (typeof limit !== 'number' && typeof limit !== 'string' && typeof limit !== 'boolean' && !_typeIs.array(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_typeIs.array(limit)) {\n\t\t\t\tfor (var i = 0; i < limit.length; i++) {\n\t\t\t\t\tif (candidate === limit[i]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.report('must be equal to [' + limit.map(function (l) {\n\t\t\t\t\treturn '\"' + l + '\"';\n\t\t\t\t}).join(' or ') + '], but is equal to \"' + candidate + '\"', null, 'eq');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (candidate !== limit) {\n\t\t\t\t\tthis.report('must be equal to \"' + limit + '\", but is equal to \"' + candidate + '\"', null, 'eq');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tne: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'number' && typeof candidate !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar limit = schema.ne;\n\t\t\tif (typeof limit !== 'number' && typeof limit !== 'string' && !_typeIs.array(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_typeIs.array(limit)) {\n\t\t\t\tfor (var i = 0; i < limit.length; i++) {\n\t\t\t\t\tif (candidate === limit[i]) {\n\t\t\t\t\t\tthis.report('must not be equal to \"' + limit[i] + '\"', null, 'ne');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (candidate === limit) {\n\t\t\t\t\tthis.report('must not be equal to \"' + limit + '\"', null, 'ne');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsomeKeys: function (schema, candidat) {\n\t\t\tvar _keys = schema.someKeys;\n\t\t\tif (!_typeIs.object(candidat)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valid = _keys.some(function (action) {\n\t\t\t\treturn (action in candidat);\n\t\t\t});\n\t\t\tif (!valid) {\n\t\t\t\tthis.report('must have at least key ' + _keys.map(function (i) {\n\t\t\t\t\treturn '\"' + i + '\"';\n\t\t\t\t}).join(' or '), null, 'someKeys');\n\t\t\t}\n\t\t},\n\t\tstrict: function (schema, candidate) {\n\t\t\tif (typeof schema.strict === 'string') { schema.strict = (schema.strict === 'true'); }\n\t\t\tif (schema.strict !== true || !_typeIs.object(candidate) || !_typeIs.object(schema.properties)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tif (typeof schema.properties['*'] === 'undefined') {\n\t\t\t\tvar intruder = Object.keys(candidate).filter(function (key) {\n\t\t\t\t\treturn (typeof schema.properties[key] === 'undefined');\n\t\t\t\t});\n\t\t\t\tif (intruder.length > 0) {\n\t\t\t\t\tvar msg = 'should not contains ' + (intruder.length > 1 ? 'properties' : 'property') +\n\t\t\t\t\t\t' [' + intruder.map(function (i) { return '\"' + i + '\"'; }).join(', ') + ']';\n\t\t\t\t\tself.report(msg, null, 'strict');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\texec: function (schema, candidate, callback) {\n\t\t\tvar self = this;\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncExec(schema, candidate, callback);\n\t\t\t}\n\t\t\t(_typeIs.array(schema.exec) ? schema.exec : [schema.exec]).forEach(function (exec) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\texec.call(self, schema, candidate);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tproperties: function (schema, candidate, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncProperties(schema, candidate, callback);\n\t\t\t}\n\t\t\tif (!(schema.properties instanceof Object) || !(candidate instanceof Object)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar properties = schema.properties,\n\t\t\t\t\ti;\n\t\t\tif (properties['*'] != null) {\n\t\t\t\tfor (i in candidate) {\n\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis._deeperObject(i);\n\t\t\t\t\tthis._validate(properties['*'], candidate[i]);\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i in properties) {\n\t\t\t\tif (i === '*') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis._deeperObject(i);\n\t\t\t\tthis._validate(properties[i], candidate[i]);\n\t\t\t\tthis._back();\n\t\t\t}\n\t\t},\n\t\titems: function (schema, candidate, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncItems(schema, candidate, callback);\n\t\t\t}\n\t\t\tif (!(schema.items instanceof Object) || !(candidate instanceof Object)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar items = schema.items;\n\t\t\tvar i, l;\n\t\t\t// If provided schema is an array\n\t\t\t// then call validate for each case\n\t\t\t// else it is an Object\n\t\t\t// then call validate for each key\n\t\t\tif (_typeIs.array(items) && _typeIs.array(candidate)) {\n\t\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\tthis._deeperArray(i);\n\t\t\t\t\tthis._validate(items[i], candidate[i]);\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var key in candidate) {\n\t\t\t\t\tif (candidate.hasOwnProperty(key)){\n\t\t\t\t\t\tthis._deeperArray(key);\n\t\t\t\t\t\tthis._validate(items, candidate[key]);\n\t\t\t\t\t\tthis._back();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _asyncValidationAttribut = {\n\t\tasyncExec: function (schema, candidate, callback) {\n\t\t\tvar self = this;\n\t\t\tasync.eachSeries(_typeIs.array(schema.exec) ? schema.exec : [schema.exec], function (exec, done) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\tif (exec.length > 2) {\n\t\t\t\t\t\treturn exec.call(self, schema, candidate, done);\n\t\t\t\t\t}\n\t\t\t\t\texec.call(self, schema, candidate);\n\t\t\t\t}\n\t\t\t\tasync.nextTick(done);\n\t\t\t}, callback);\n\t\t},\n\t\tasyncProperties: function (schema, candidate, callback) {\n\t\t\tif (!(schema.properties instanceof Object) || !_typeIs.object(candidate)) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar properties = schema.properties;\n\t\t\tasync.series([\n\t\t\t\tfunction (next) {\n\t\t\t\t\tif (properties['*'] == null) {\n\t\t\t\t\t\treturn next();\n\t\t\t\t\t}\n\t\t\t\t\tasync.eachSeries(Object.keys(candidate), function (i, done) {\n\t\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\t\treturn async.nextTick(done);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncValidate(properties['*'], candidate[i], function (err) {\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tdone(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t},\n\t\t\t\tfunction (next) {\n\t\t\t\t\tasync.eachSeries(Object.keys(properties), function (i, done) {\n\t\t\t\t\t\tif (i === '*') {\n\t\t\t\t\t\t\treturn async.nextTick(done);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncValidate(properties[i], candidate[i], function (err) {\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tdone(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t}\n\t\t\t], callback);\n\t\t},\n\t\tasyncItems: function (schema, candidate, callback) {\n\t\t\tif (!(schema.items instanceof Object) || !(candidate instanceof Object)) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar items = schema.items;\n\t\t\tvar i, l;\n\n\t\t\tif (_typeIs.array(items) && _typeIs.array(candidate)) {\n\t\t\t\tasync.timesSeries(items.length, function (i, done) {\n\t\t\t\t\tself._deeperArray(i);\n\t\t\t\t\tself._asyncValidate(items[i], candidate[i], function (err, res) {\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tdone(err, res);\n\t\t\t\t\t});\n\t\t\t\t\tself._back();\n\t\t\t\t}, callback);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tasync.eachSeries(Object.keys(candidate), function (key, done) {\n\t\t\t\t\tself._deeperArray(key);\n\t\t\t\t\tself._asyncValidate(items, candidate[key], function (err, res) {\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tdone(err, res);\n\t\t\t\t\t});\n\t\t\t\t}, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Validation Class ----------------------------------------------------------\n\t// inherits from Inspection class (actually we just call Inspection\n\t// constructor with the new context, because its prototype is empty\n\tfunction Validation(schema, custom) {\n\t\tInspection.prototype.constructor.call(this, schema, _merge(Validation.custom, custom));\n\t\tvar _error = [];\n\n\t\tthis._basicFields = Object.keys(_validationAttribut);\n\t\tthis._customFields = Object.keys(this._custom);\n\t\tthis.origin = null;\n\n\t\tthis.report = function (message, code, reason) {\n\t\t\tvar newErr = {\n\t\t\t\tcode: code || this.userCode || null,\n\t\t\t\treason: reason || 'unknown',\n\t\t\t\tmessage: this.userError || message || 'is invalid',\n\t\t\t\tproperty: this.userAlias ? (this.userAlias + ' (' + this._dumpStack() + ')') : this._dumpStack()\n\t\t\t};\n\t\t\t_error.push(newErr);\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.result = function () {\n\t\t\treturn {\n\t\t\t\terror: _error,\n\t\t\t\tvalid: _error.length === 0,\n\t\t\t\tformat: function () {\n\t\t\t\t\tif (this.valid === true) {\n\t\t\t\t\t\treturn 'Candidate is valid';\n\t\t\t\t\t}\n\t\t\t\t\treturn this.error.map(function (i) {\n\t\t\t\t\t\treturn 'Property ' + i.property + ': ' + i.message;\n\t\t\t\t\t}).join('\\n');\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\t_extend(Validation.prototype, _validationAttribut);\n\t_extend(Validation.prototype, _asyncValidationAttribut);\n\t_extend(Validation, new Customisable());\n\n\tValidation.prototype.validate = function (candidate, callback) {\n\t\tthis.origin = candidate;\n\t\tif (typeof callback === 'function') {\n\t\t\tvar self = this;\n\t\t\treturn async.nextTick(function () {\n\t\t\t\tself._asyncValidate(self._schema, candidate, function (err) {\n\t\t\t\t\tself.origin = null;\n\t\t\t\t\tcallback(err, self.result());\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this._validate(this._schema, candidate).result();\n\t};\n\n\tValidation.prototype._validate = function (schema, candidate, callback) {\n\t\tthis.userCode = schema.code || null;\n\t\tthis.userError = schema.error || null;\n\t\tthis.userAlias = schema.alias || null;\n\t\tthis._basicFields.forEach(function (i) {\n\t\t\tif ((i in schema || i === 'optional') && typeof this[i] === 'function') {\n\t\t\t\tthis[i](schema, candidate);\n\t\t\t}\n\t\t}, this);\n\t\tthis._customFields.forEach(function (i) {\n\t\t\tif (i in schema && typeof this._custom[i] === 'function') {\n\t\t\t\tthis._custom[i].call(this, schema, candidate);\n\t\t\t}\n\t\t}, this);\n\t\treturn this;\n\t};\n\n\tValidation.prototype._asyncValidate = function (schema, candidate, callback) {\n\t\tvar self = this;\n\t\tthis.userCode = schema.code || null;\n\t\tthis.userError = schema.error || null;\n\t\tthis.userAlias = schema.alias || null;\n\n\t\tasync.series([\n\t\t\tfunction (next) {\n\t\t\t\tasync.eachSeries(Object.keys(_validationAttribut), function (i, done) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif ((i in schema || i === 'optional') && typeof self[i] === 'function') {\n\t\t\t\t\t\t\tif (self[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self[i](schema, candidate, done);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself[i](schema, candidate);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t},\n\t\t\tfunction (next) {\n\t\t\t\tasync.eachSeries(Object.keys(self._custom), function (i, done) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif (i in schema && typeof self._custom[i] === 'function') {\n\t\t\t\t\t\t\tif (self._custom[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self._custom[i].call(self, schema, candidate, done);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._custom[i].call(self, schema, candidate);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t}\n\t\t], callback);\n\t};\n\n// Sanitization ----------------------------------------------------------------\n\t// functions called by _sanitization.type method.\n\tvar _forceType = {\n\t\tnumber: function (post, schema) {\n\t\t\tvar n;\n\t\t\tif (typeof post === 'number') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\telse if (post === '') {\n\t\t\t\tif (typeof schema.def !== 'undefined')\n\t\t\t\t\treturn schema.def;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (typeof post === 'string') {\n\t\t\t\tn = parseFloat(post.replace(/,/g, '.').replace(/ /g, ''));\n\t\t\t\tif (typeof n === 'number') {\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (post instanceof Date) {\n\t\t\t\treturn +post;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tinteger: function (post, schema) {\n\t\t\tvar n;\n\t\t\tif (typeof post === 'number' && post % 1 === 0) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\telse if (post === '') {\n\t\t\t\tif (typeof schema.def !== 'undefined')\n\t\t\t\t\treturn schema.def;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (typeof post === 'string') {\n\t\t\t\tn = parseInt(post.replace(/ /g, ''), 10);\n\t\t\t\tif (typeof n === 'number') {\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof post === 'number') {\n\t\t\t\treturn parseInt(post, 10);\n\t\t\t}\n\t\t\telse if (typeof post === 'boolean') {\n\t\t\t\tif (post) { return 1; }\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if (post instanceof Date) {\n\t\t\t\treturn +post;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tstring: function (post, schema) {\n\t\t\tif (typeof post === 'boolean' || typeof post === 'number' || post instanceof Date) {\n\t\t\t\treturn post.toString();\n\t\t\t}\n\t\t\telse if (_typeIs.array(post)) {\n\t\t\t\t// If user authorize array and strings...\n\t\t\t\tif (schema.items || schema.properties)\n\t\t\t\t\treturn post;\n\t\t\t\treturn post.join(String(schema.joinWith || ','));\n\t\t\t}\n\t\t\telse if (post instanceof Object) {\n\t\t\t\t// If user authorize objects ans strings...\n\t\t\t\tif (schema.items || schema.properties)\n\t\t\t\t\treturn post;\n\t\t\t\treturn JSON.stringify(post);\n\t\t\t}\n\t\t\telse if (typeof post === 'string' && post.length) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tdate: function (post, schema) {\n\t\t\tif (post instanceof Date) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar d = new Date(post);\n\t\t\t\tif (!isNaN(d.getTime())) { // if valid date\n\t\t\t\t\treturn d;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tboolean: function (post, schema) {\n\t\t\tif (typeof post === 'undefined') return null;\n\t\t\tif (typeof post === 'string' && post.toLowerCase() === 'false') return false;\n\t\t\treturn !!post;\n\t\t},\n\t\tobject: function (post, schema) {\n\t\t\tif (typeof post !== 'string' || _typeIs.object(post)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(post);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tarray: function (post, schema) {\n\t\t\tif (_typeIs.array(post))\n\t\t\t\treturn post;\n\t\t\tif (typeof post === 'undefined')\n\t\t\t\treturn null;\n\t\t\tif (typeof post === 'string') {\n\t\t\t\tif (post.substring(0,1) === '[' && post.slice(-1) === ']') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn JSON.parse(post);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn post.split(String(schema.splitWith || ','));\n\n\t\t\t}\n\t\t\tif (!_typeIs.array(post))\n\t\t\t\treturn [ post ];\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tvar _applyRules = {\n\t\tupper: function (post) {\n\t\t\treturn post.toUpperCase();\n\t\t},\n\t\tlower: function (post) {\n\t\t\treturn post.toLowerCase();\n\t\t},\n\t\ttitle: function (post) {\n\t\t\t// Fix by seb (replace \\w\\S* by \\S* => exemple : coucou a va)\n\t\t\treturn post.replace(/\\S*/g, function (txt) {\n\t\t\t\treturn txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n\t\t\t});\n\t\t},\n\t\tcapitalize: function (post) {\n\t\t\treturn post.charAt(0).toUpperCase() + post.substr(1).toLowerCase();\n\t\t},\n\t\tucfirst: function (post) {\n\t\t\treturn post.charAt(0).toUpperCase() + post.substr(1);\n\t\t},\n\t\ttrim: function (post) {\n\t\t\treturn post.trim();\n\t\t}\n\t};\n\n\t// Every function return the future value of each property. Therefore you\n\t// have to return post even if you do not change its value\n\tvar _sanitizationAttribut = {\n\t\tstrict: function (schema, post) {\n\t\t\tif (typeof schema.strict === 'string') { schema.strict = (schema.strict === 'true'); }\n\t\t\tif (schema.strict !== true)\n\t\t\t\treturn post;\n\t\t\tif (!_typeIs.object(schema.properties))\n\t\t\t\treturn post;\n\t\t\tif (!_typeIs.object(post))\n\t\t\t\treturn post;\n\t\t\tvar that = this;\n\t\t\tObject.keys(post).forEach(function (key) {\n\t\t\t\tif (!(key in schema.properties)) {\n\t\t\t\t\tdelete post[key];\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn post;\n\t\t},\n\t\toptional: function (schema, post) {\n\t\t\tvar opt = typeof schema.optional === 'boolean' ? schema.optional : (schema.optional !== 'false'); // Default: true\n\t\t\tif (opt === true) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (typeof post !== 'undefined') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tthis.report();\n\t\t\tif (schema.def === Date) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t\treturn schema.def;\n\t\t},\n\t\ttype: function (schema, post) {\n\t\t\t// if (_typeIs['object'](post) || _typeIs.array(post)) {\n\t\t\t// \treturn post;\n\t\t\t// }\n\t\t\tif (typeof schema.type !== 'string' || typeof _forceType[schema.type] !== 'function') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar n;\n\t\t\tvar opt = typeof schema.optional === 'boolean' ? schema.optional : true;\n\t\t\tif (typeof _forceType[schema.type] === 'function') {\n\t\t\t\tn = _forceType[schema.type](post, schema);\n\t\t\t\tif ((n === null && !opt) || (!n && isNaN(n)) || (n === null && schema.type === 'string')) {\n\t\t\t\t\tn = schema.def;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!opt) {\n\t\t\t\tn = schema.def;\n\t\t\t}\n\t\t\tif ((n != null || (typeof schema.def !== 'undefined' && schema.def === n)) && n !== post) {\n\t\t\t\tthis.report();\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\trules: function (schema, post) {\n\t\t\tvar rules = schema.rules;\n\t\t\tif (typeof post !== 'string' || (typeof rules !== 'string' && !_typeIs.array(rules))) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar modified = false;\n\t\t\t(_typeIs.array(rules) ? rules : [rules]).forEach(function (rule) {\n\t\t\t\tif (typeof _applyRules[rule] === 'function') {\n\t\t\t\t\tpost = _applyRules[rule](post);\n\t\t\t\t\tmodified = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (modified) {\n\t\t\t\tthis.report();\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tmin: function (schema, post) {\n\t\t\tvar postTest = Number(post);\n\t\t\tif (isNaN(postTest)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar min = Number(schema.min);\n\t\t\tif (isNaN(min)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (postTest < min) {\n\t\t\t\tthis.report();\n\t\t\t\treturn min;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tmax: function (schema, post) {\n\t\t\tvar postTest = Number(post);\n\t\t\tif (isNaN(postTest)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar max = Number(schema.max);\n\t\t\tif (isNaN(max)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (postTest > max) {\n\t\t\t\tthis.report();\n\t\t\t\treturn max;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tminLength: function (schema, post) {\n\t\t\tvar limit = Number(schema.minLength);\n\t\t\tif (typeof post !== 'string' || isNaN(limit) || limit < 0) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar str = '';\n\t\t\tvar gap = limit - post.length;\n\t\t\tif (gap > 0) {\n\t\t\t\tfor (var i = 0; i < gap; i++) {\n\t\t\t\t\tstr += '-';\n\t\t\t\t}\n\t\t\t\tthis.report();\n\t\t\t\treturn post + str;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tmaxLength: function (schema, post) {\n\t\t\tvar limit = Number(schema.maxLength);\n\t\t\tif (typeof post !== 'string' || isNaN(limit) || limit < 0) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (post.length > limit) {\n\t\t\t\tthis.report();\n\t\t\t\treturn post.slice(0, limit);\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tproperties: function (schema, post, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncProperties(schema, post, callback);\n\t\t\t}\n\t\t\tif (!post || typeof post !== 'object') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar properties = schema.properties;\n\t\t\tvar tmp;\n\t\t\tvar i;\n\t\t\tif (typeof properties['*'] !== 'undefined') {\n\t\t\t\tfor (i in post) {\n\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis._deeperObject(i);\n\t\t\t\t\ttmp = this._sanitize(schema.properties['*'], post[i]);\n\t\t\t\t\tif (typeof tmp !== 'undefined') {\n\t\t\t\t\t\tpost[i]= tmp;\n\t\t\t\t\t}\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i in schema.properties) {\n\t\t\t\tif (i !== '*') {\n\t\t\t\t\tthis._deeperObject(i);\n\t\t\t\t\ttmp = this._sanitize(schema.properties[i], post[i]);\n\t\t\t\t\tif (typeof tmp !== 'undefined') {\n\t\t\t\t\t\tpost[i]= tmp;\n\t\t\t\t\t}\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\titems: function (schema, post, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncItems(schema, post, callback);\n\t\t\t}\n\t\t\tif (!(schema.items instanceof Object) || !(post instanceof Object)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar i;\n\t\t\tif (_typeIs.array(schema.items) && _typeIs.array(post)) {\n\t\t\t\tvar minLength = schema.items.length < post.length ? schema.items.length : post.length;\n\t\t\t\tfor (i = 0; i < minLength; i++) {\n\t\t\t\t\tthis._deeperArray(i);\n\t\t\t\t\tpost[i] = this._sanitize(schema.items[i], post[i]);\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (i in post) {\n\t\t\t\t\tif(post.hasOwnProperty(i)){\n\t\t\t\t\t\tthis._deeperArray(i);\n\t\t\t\t\t\tpost[i] = this._sanitize(schema.items, post[i]);\n\t\t\t\t\t\tthis._back();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\texec: function (schema, post, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncExec(schema, post, callback);\n\t\t\t}\n\t\t\tvar execs = _typeIs.array(schema.exec) ? schema.exec : [schema.exec];\n\n\t\t\texecs.forEach(function (exec) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\tpost = exec.call(this, schema, post);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\treturn post;\n\t\t}\n\t};\n\n\tvar _asyncSanitizationAttribut = {\n\t\tasyncExec: function (schema, post, callback) {\n\t\t\tvar self = this;\n\t\t\tvar execs = _typeIs.array(schema.exec) ? schema.exec : [schema.exec];\n\n\t\t\tasync.eachSeries(execs, function (exec, done) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\tif (exec.length > 2) {\n\t\t\t\t\t\treturn exec.call(self, schema, post, function (err, res) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treturn done(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpost = res;\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tpost = exec.call(self, schema, post);\n\t\t\t\t}\n\t\t\t\tdone();\n\t\t\t}, function (err) {\n\t\t\t\tcallback(err, post);\n\t\t\t});\n\t\t},\n\t\tasyncProperties: function (schema, post, callback) {\n\t\t\tif (!post || typeof post !== 'object') {\n\t\t\t\treturn callback(null, post);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar properties = schema.properties;\n\n\t\t\tasync.series([\n\t\t\t\tfunction (next) {\n\t\t\t\t\tif (properties['*'] == null) {\n\t\t\t\t\t\treturn next();\n\t\t\t\t\t}\n\t\t\t\t\tvar globing = properties['*'];\n\t\t\t\t\tasync.eachSeries(Object.keys(post), function (i, next) {\n\t\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\t\treturn next();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncSanitize(globing, post[i], function (err, res) {\n\t\t\t\t\t\t\tif (err) { /* Error can safely be ignored here */ }\n\t\t\t\t\t\t\tif (typeof res !== 'undefined') {\n\t\t\t\t\t\t\t\tpost[i] = res;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t},\n\t\t\t\tfunction (next) {\n\t\t\t\t\tasync.eachSeries(Object.keys(properties), function (i, next) {\n\t\t\t\t\t\tif (i === '*') {\n\t\t\t\t\t\t\treturn next();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncSanitize(properties[i], post[i], function (err, res) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treturn next(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof res !== 'undefined') {\n\t\t\t\t\t\t\t\tpost[i] = res;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t}\n\t\t\t], function (err) {\n\t\t\t\treturn callback(err, post);\n\t\t\t});\n\t\t},\n\t\tasyncItems: function (schema, post, callback) {\n\t\t\tif (!(schema.items instanceof Object) || !(post instanceof Object)) {\n\t\t\t\treturn callback(null, post);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar items = schema.items;\n\t\t\tif (_typeIs.array(items) && _typeIs.array(post)) {\n\t\t\t\tvar minLength = items.length < post.length ? items.length : post.length;\n\t\t\t\tasync.timesSeries(minLength, function (i, next) {\n\t\t\t\t\tself._deeperArray(i);\n\t\t\t\t\tself._asyncSanitize(items[i], post[i], function (err, res) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treturn next(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpost[i] = res;\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tnext();\n\t\t\t\t\t});\n\t\t\t\t}, function (err) {\n\t\t\t\t\tcallback(err, post);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tasync.eachSeries(Object.keys(post), function (key, next) {\n\t\t\t\t\tself._deeperArray(key);\n\t\t\t\t\tself._asyncSanitize(items, post[key], function (err, res) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treturn next();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpost[key] = res;\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tnext();\n\t\t\t\t\t});\n\t\t\t\t}, function (err) {\n\t\t\t\t\tcallback(err, post);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn post;\n\t\t}\n\t};\n\n\t// Sanitization Class --------------------------------------------------------\n\t// inherits from Inspection class (actually we just call Inspection\n\t// constructor with the new context, because its prototype is empty\n\tfunction Sanitization(schema, custom) {\n\t\tInspection.prototype.constructor.call(this, schema, _merge(Sanitization.custom, custom));\n\t\tvar _reporting = [];\n\n\t\tthis._basicFields = Object.keys(_sanitizationAttribut);\n\t\tthis._customFields = Object.keys(this._custom);\n\t\tthis.origin = null;\n\n\t\tthis.report = function (message) {\n\t\t\tvar newNot = {\n\t\t\t\t\tmessage: message || 'was sanitized',\n\t\t\t\t\tproperty: this.userAlias ? (this.userAlias + ' (' + this._dumpStack() + ')') : this._dumpStack()\n\t\t\t};\n\t\t\tif (!_reporting.some(function (e) { return e.property === newNot.property; })) {\n\t\t\t\t_reporting.push(newNot);\n\t\t\t}\n\t\t};\n\n\t\tthis.result = function (data) {\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\treporting: _reporting,\n\t\t\t\tformat: function () {\n\t\t\t\t\treturn this.reporting.map(function (i) {\n\t\t\t\t\t\treturn 'Property ' + i.property + ' ' + i.message;\n\t\t\t\t\t}).join('\\n');\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\t_extend(Sanitization.prototype, _sanitizationAttribut);\n\t_extend(Sanitization.prototype, _asyncSanitizationAttribut);\n\t_extend(Sanitization, new Customisable());\n\n\n\tSanitization.prototype.sanitize = function (post, callback) {\n\t\tthis.origin = post;\n\t\tif (typeof callback === 'function') {\n\t\t\tvar self = this;\n\t\t\treturn this._asyncSanitize(this._schema, post, function (err, data) {\n\t\t\t\tself.origin = null;\n\t\t\t\tcallback(err, self.result(data));\n\t\t\t});\n\t\t}\n\t\tvar data = this._sanitize(this._schema, post);\n\t\tthis.origin = null;\n\t\treturn this.result(data);\n\t};\n\n\tSanitization.prototype._sanitize = function (schema, post) {\n\t\tthis.userAlias = schema.alias || null;\n\t\tthis._basicFields.forEach(function (i) {\n\t\t\tif ((i in schema || i === 'optional') && typeof this[i] === 'function') {\n\t\t\t\tpost = this[i](schema, post);\n\t\t\t}\n\t\t}, this);\n\t\tthis._customFields.forEach(function (i) {\n\t\t\tif (i in schema && typeof this._custom[i] === 'function') {\n\t\t\t\tpost = this._custom[i].call(this, schema, post);\n\t\t\t}\n\t\t}, this);\n\t\treturn post;\n\t};\n\n\tSanitization.prototype._asyncSanitize = function (schema, post, callback) {\n\t\tvar self = this;\n\t\tthis.userAlias = schema.alias || null;\n\n\t\tasync.waterfall([\n\t\t\tfunction (next) {\n\t\t\t\tasync.reduce(self._basicFields, post, function (value, i, next) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif ((i in schema || i === 'optional') && typeof self[i] === 'function') {\n\t\t\t\t\t\t\tif (self[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self[i](schema, value, next);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = self[i](schema, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnext(null, value);\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t},\n\t\t\tfunction (inter, next) {\n\t\t\t\tasync.reduce(self._customFields, inter, function (value, i, next) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif (i in schema && typeof self._custom[i] === 'function') {\n\t\t\t\t\t\t\tif (self._custom[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self._custom[i].call(self, schema, value, next);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = self._custom[i].call(self, schema, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnext(null, value);\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t}\n\t\t], callback);\n\t};\n\n\t// ---------------------------------------------------------------------------\n\n\tvar INT_MIN = -2147483648;\n\tvar INT_MAX = 2147483647;\n\n\tvar _rand = {\n\t\tint: function (min, max) {\n\t\t\treturn min + (0 | Math.random() * (max - min + 1));\n\t\t},\n\t\tfloat: function (min, max) {\n\t\t\treturn (Math.random() * (max - min) + min);\n\t\t},\n\t\tbool: function () {\n\t\t\treturn (Math.random() > 0.5);\n\t\t},\n\t\tchar: function (min, max) {\n\t\t\treturn String.fromCharCode(this.int(min, max));\n\t\t},\n\t\tfromList: function (list) {\n\t\t\treturn list[this.int(0, list.length - 1)];\n\t\t}\n\t};\n\n\tvar _formatSample = {\n\t\t'date-time': function () {\n\t\t\treturn new Date().toISOString();\n\t\t},\n\t\t'date': function () {\n\t\t\treturn new Date().toISOString().replace(/T.*$/, '');\n\t\t},\n\t\t'time': function () {\n\t\t\treturn new Date().toLocaleTimeString({}, { hour12: false });\n\t\t},\n\t\t'color': function (min, max) {\n\t\t\tvar s = '#';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('0123456789abcdefABCDEF');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'numeric': function () {\n\t\t\treturn '' + _rand.int(0, INT_MAX);\n\t\t},\n\t\t'integer': function () {\n\t\t\tif (_rand.bool() === true) {\n\t\t\t\treturn '-' + this.numeric();\n\t\t\t}\n\t\t\treturn this.numeric();\n\t\t},\n\t\t'decimal': function () {\n\t\t\treturn this.integer() + '.' + this.numeric();\n\t\t},\n\t\t'alpha': function (min, max) {\n\t\t\tvar s = '';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'alphaNumeric': function (min, max) {\n\t\t\tvar s = '';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'alphaDash': function (min, max) {\n\t\t\tvar s = '';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('_-abcdefghijklmnopqrstuvwxyz_-ABCDEFGHIJKLMNOPQRSTUVWXYZ_-0123456789_-');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'javascript': function (min, max) {\n\t\t\tvar s = _rand.fromList('_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$');\n\t\t\tfor (var i = 0, l = _rand.int(min, max - 1); i < l; i++) {\n\t\t\t\ts += _rand.fromList('_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$0123456789_$');\n\t\t\t}\n\t\t\treturn s;\n\t\t}\n\t};\n\n\tfunction _getLimits(schema) {\n\t\tvar min = INT_MIN;\n\t\tvar max = INT_MAX;\n\n\t\tif (schema.gte != null) {\n\t\t\tmin = schema.gte;\n\t\t}\n\t\telse if (schema.gt != null) {\n\t\t\tmin = schema.gt + 1;\n\t\t}\n\t\tif (schema.lte != null) {\n\t\t\tmax = schema.lte;\n\t\t}\n\t\telse if (schema.lt != null) {\n\t\t\tmax = schema.lt - 1;\n\t\t}\n\t\treturn { min: min, max: max };\n\t}\n\n\tvar _typeGenerator = {\n\t\tstring: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\tvar s = '';\n\t\t\tvar minLength = schema.minLength != null ? schema.minLength : 0;\n\t\t\tvar maxLength = schema.maxLength != null ? schema.maxLength : 32;\n\t\t\tif (typeof schema.pattern === 'string' && typeof _formatSample[schema.pattern] === 'function') {\n\t\t\t\treturn _formatSample[schema.pattern](minLength, maxLength);\n\t\t\t}\n\n\t\t\tvar l = schema.exactLength != null ? schema.exactLength : _rand.int(minLength, maxLength);\n\t\t\tfor (var i = 0; i < l; i++) {\n\t\t\t\ts += _rand.char(32, 126);\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\tnumber: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\tvar limit = _getLimits(schema);\n\t\t\tvar n = _rand.float(limit.min, limit.max);\n\t\t\tif (schema.ne != null) {\n\t\t\t\tvar ne = _typeIs.array(schema.ne) ? schema.ne : [schema.ne];\n\t\t\t\twhile (ne.indexOf(n) !== -1) {\n\t\t\t\t\tn = _rand.float(limit.min, limit.max);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn n;\n\t\t},\n\t\tinteger: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\tvar limit = _getLimits(schema);\n\t\t\tvar n = _rand.int(limit.min, limit.max);\n\t\t\tif (schema.ne != null) {\n\t\t\t\tvar ne = _typeIs.array(schema.ne) ? schema.ne : [schema.ne];\n\t\t\t\twhile (ne.indexOf(n) !== -1) {\n\t\t\t\t\tn = _rand.int(limit.min, limit.max);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn n;\n\t\t},\n\t\tboolean: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\treturn _rand.bool();\n\t\t},\n\t\t\"null\": function (schema) {\n\t\t\treturn null;\n\t\t},\n\t\tdate: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\treturn new Date();\n\t\t},\n\t\tobject: function (schema) {\n\t\t\tvar o = {};\n\t\t\tvar prop = schema.properties || {};\n\n\t\t\tfor (var key in prop) {\n\t\t\t\tif (prop.hasOwnProperty(key)){\n\t\t\t\t\tif (prop[key].optional === true && _rand.bool() === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (key !== '*') {\n\t\t\t\t\t\to[key] = this.generate(prop[key]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar rk = '__random_key_';\n\t\t\t\t\t\tvar randomKey = rk + 0;\n\t\t\t\t\t\tvar n = _rand.int(1, 9);\n\t\t\t\t\t\tfor (var i = 1; i <= n; i++) {\n\t\t\t\t\t\t\tif (!(randomKey in prop)) {\n\t\t\t\t\t\t\t\to[randomKey] = this.generate(prop[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trandomKey = rk + i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn o;\n\t\t},\n\t\tarray: function (schema) {\n\t\t\tvar self = this;\n\t\t\tvar items = schema.items || {};\n\t\t\tvar minLength = schema.minLength != null ? schema.minLength : 0;\n\t\t\tvar maxLength = schema.maxLength != null ? schema.maxLength : 16;\n\t\t\tvar type;\n\t\t\tvar candidate;\n\t\t\tvar size;\n\t\t\tvar i;\n\n\t\t\tif (_typeIs.array(items)) {\n\t\t\t\tsize = items.length;\n\t\t\t\tif (schema.exactLength != null) {\n\t\t\t\t\tsize = schema.exactLength;\n\t\t\t\t}\n\t\t\t\telse if (size < minLength) {\n\t\t\t\t\tsize = minLength;\n\t\t\t\t}\n\t\t\t\telse if (size > maxLength) {\n\t\t\t\t\tsize = maxLength;\n\t\t\t\t}\n\t\t\t\tcandidate = new Array(size);\n\t\t\t\ttype = null;\n\t\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\t\ttype = items[i].type || 'any';\n\t\t\t\t\tif (_typeIs.array(type)) {\n\t\t\t\t\t\ttype = type[_rand.int(0, type.length - 1)];\n\t\t\t\t\t}\n\t\t\t\t\tcandidate[i] = self[type](items[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsize = schema.exactLength != null ? schema.exactLength : _rand.int(minLength, maxLength);\n\t\t\t\tcandidate = new Array(size);\n\t\t\t\ttype = items.type || 'any';\n\t\t\t\tif (_typeIs.array(type)) {\n\t\t\t\t\ttype = type[_rand.int(0, type.length - 1)];\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\t\tcandidate[i] = self[type](items);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn candidate;\n\t\t},\n\t\tany: function (schema) {\n\t\t\tvar fields = Object.keys(_typeGenerator);\n\t\t\tvar i = fields[_rand.int(0, fields.length - 2)];\n\t\t\treturn this[i](schema);\n\t\t}\n\t};\n\n\t// CandidateGenerator Class (Singleton) --------------------------------------\n\tfunction CandidateGenerator() {\n\t\t// Maybe extends Inspection class too ?\n\t}\n\n\t_extend(CandidateGenerator.prototype, _typeGenerator);\n\n\tvar _instance = null;\n\tCandidateGenerator.instance = function () {\n\t\tif (!(_instance instanceof CandidateGenerator)) {\n\t\t\t_instance = new CandidateGenerator();\n\t\t}\n\t\treturn _instance;\n\t};\n\n\tCandidateGenerator.prototype.generate = function (schema) {\n\t\tvar type = schema.type || 'any';\n\t\tif (_typeIs.array(type)) {\n\t\t\ttype = type[_rand.int(0, type.length - 1)];\n\t\t}\n\t\treturn this[type](schema);\n\t};\n\n// Exports ---------------------------------------------------------------------\n\tvar SchemaInspector = {};\n\n\t// if server-side (node.js) else client-side\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = SchemaInspector;\n\t}\n\telse {\n\t\twindow.SchemaInspector = SchemaInspector;\n\t}\n\n\tSchemaInspector.newSanitization = function (schema, custom) {\n\t\treturn new Sanitization(schema, custom);\n\t};\n\n\tSchemaInspector.newValidation = function (schema, custom) {\n\t\treturn new Validation(schema, custom);\n\t};\n\n\tSchemaInspector.Validation = Validation;\n\tSchemaInspector.Sanitization = Sanitization;\n\n\tSchemaInspector.sanitize = function (schema, post, custom, callback) {\n\t\tif (arguments.length === 3 && typeof custom === 'function') {\n\t\t\tcallback = custom;\n\t\t\tcustom = null;\n\t\t}\n\t\treturn new Sanitization(schema, custom).sanitize(post, callback);\n\t};\n\n\tSchemaInspector.validate = function (schema, candidate, custom, callback) {\n\t\tif (arguments.length === 3 && typeof custom === 'function') {\n\t\t\tcallback = custom;\n\t\t\tcustom = null;\n\t\t}\n\t\treturn new Validation(schema, custom).validate(candidate, callback);\n\t};\n\n\tSchemaInspector.generate = function (schema, n) {\n\t\tif (typeof n === 'number') {\n\t\t\tvar r = new Array(n);\n\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\tr[i] = CandidateGenerator.instance().generate(schema);\n\t\t\t}\n\t\t\treturn r;\n\t\t}\n\t\treturn CandidateGenerator.instance().generate(schema);\n\t};\n})();\n","/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n(function () {\n\n    var async = {};\n    function noop() {}\n    function identity(v) {\n        return v;\n    }\n    function toBool(v) {\n        return !!v;\n    }\n    function notId(v) {\n        return !v;\n    }\n\n    // global on the server, window in the browser\n    var previous_async;\n\n    // Establish the root object, `window` (`self`) in the browser, `global`\n    // on the server, or `this` in some virtual machines. We use `self`\n    // instead of `window` for `WebWorker` support.\n    var root = typeof self === 'object' && self.self === self && self ||\n            typeof global === 'object' && global.global === global && global ||\n            this;\n\n    if (root != null) {\n        previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        return function() {\n            if (fn === null) throw new Error(\"Callback was already called.\");\n            fn.apply(this, arguments);\n            fn = null;\n        };\n    }\n\n    function _once(fn) {\n        return function() {\n            if (fn === null) return;\n            fn.apply(this, arguments);\n            fn = null;\n        };\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    // Ported from underscore.js isObject\n    var _isObject = function(obj) {\n        var type = typeof obj;\n        return type === 'function' || type === 'object' && !!obj;\n    };\n\n    function _isArrayLike(arr) {\n        return _isArray(arr) || (\n            // has a positive integer length property\n            typeof arr.length === \"number\" &&\n            arr.length >= 0 &&\n            arr.length % 1 === 0\n        );\n    }\n\n    function _arrayEach(arr, iterator) {\n        var index = -1,\n            length = arr.length;\n\n        while (++index < length) {\n            iterator(arr[index], index, arr);\n        }\n    }\n\n    function _map(arr, iterator) {\n        var index = -1,\n            length = arr.length,\n            result = Array(length);\n\n        while (++index < length) {\n            result[index] = iterator(arr[index], index, arr);\n        }\n        return result;\n    }\n\n    function _range(count) {\n        return _map(Array(count), function (v, i) { return i; });\n    }\n\n    function _reduce(arr, iterator, memo) {\n        _arrayEach(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    }\n\n    function _forEachOf(object, iterator) {\n        _arrayEach(_keys(object), function (key) {\n            iterator(object[key], key);\n        });\n    }\n\n    function _indexOf(arr, item) {\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === item) return i;\n        }\n        return -1;\n    }\n\n    var _keys = Object.keys || function (obj) {\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    function _keyIterator(coll) {\n        var i = -1;\n        var len;\n        var keys;\n        if (_isArrayLike(coll)) {\n            len = coll.length;\n            return function next() {\n                i++;\n                return i < len ? i : null;\n            };\n        } else {\n            keys = _keys(coll);\n            len = keys.length;\n            return function next() {\n                i++;\n                return i < len ? keys[i] : null;\n            };\n        }\n    }\n\n    // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)\n    // This accumulates the arguments passed into an array, after a given index.\n    // From underscore.js (https://github.com/jashkenas/underscore/pull/2140).\n    function _restParam(func, startIndex) {\n        startIndex = startIndex == null ? func.length - 1 : +startIndex;\n        return function() {\n            var length = Math.max(arguments.length - startIndex, 0);\n            var rest = Array(length);\n            for (var index = 0; index < length; index++) {\n                rest[index] = arguments[index + startIndex];\n            }\n            switch (startIndex) {\n                case 0: return func.call(this, rest);\n                case 1: return func.call(this, arguments[0], rest);\n            }\n            // Currently unused but handle cases outside of the switch statement:\n            // var args = Array(startIndex + 1);\n            // for (index = 0; index < startIndex; index++) {\n            //     args[index] = arguments[index];\n            // }\n            // args[startIndex] = rest;\n            // return func.apply(this, args);\n        };\n    }\n\n    function _withoutIndex(iterator) {\n        return function (value, index, callback) {\n            return iterator(value, callback);\n        };\n    }\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n\n    // capture the global reference to guard against fakeTimer mocks\n    var _setImmediate = typeof setImmediate === 'function' && setImmediate;\n\n    var _delay = _setImmediate ? function(fn) {\n        // not a direct alias for IE10 compatibility\n        _setImmediate(fn);\n    } : function(fn) {\n        setTimeout(fn, 0);\n    };\n\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\n        async.nextTick = process.nextTick;\n    } else {\n        async.nextTick = _delay;\n    }\n    async.setImmediate = _setImmediate ? _delay : async.nextTick;\n\n\n    async.forEach =\n    async.each = function (arr, iterator, callback) {\n        return async.eachOf(arr, _withoutIndex(iterator), callback);\n    };\n\n    async.forEachSeries =\n    async.eachSeries = function (arr, iterator, callback) {\n        return async.eachOfSeries(arr, _withoutIndex(iterator), callback);\n    };\n\n\n    async.forEachLimit =\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        return _eachOfLimit(limit)(arr, _withoutIndex(iterator), callback);\n    };\n\n    async.forEachOf =\n    async.eachOf = function (object, iterator, callback) {\n        callback = _once(callback || noop);\n        object = object || [];\n\n        var iter = _keyIterator(object);\n        var key, completed = 0;\n\n        while ((key = iter()) != null) {\n            completed += 1;\n            iterator(object[key], key, only_once(done));\n        }\n\n        if (completed === 0) callback(null);\n\n        function done(err) {\n            completed--;\n            if (err) {\n                callback(err);\n            }\n            // Check key is null in case iterator isn't exhausted\n            // and done resolved synchronously.\n            else if (key === null && completed <= 0) {\n                callback(null);\n            }\n        }\n    };\n\n    async.forEachOfSeries =\n    async.eachOfSeries = function (obj, iterator, callback) {\n        callback = _once(callback || noop);\n        obj = obj || [];\n        var nextKey = _keyIterator(obj);\n        var key = nextKey();\n        function iterate() {\n            var sync = true;\n            if (key === null) {\n                return callback(null);\n            }\n            iterator(obj[key], key, only_once(function (err) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    key = nextKey();\n                    if (key === null) {\n                        return callback(null);\n                    } else {\n                        if (sync) {\n                            async.setImmediate(iterate);\n                        } else {\n                            iterate();\n                        }\n                    }\n                }\n            }));\n            sync = false;\n        }\n        iterate();\n    };\n\n\n\n    async.forEachOfLimit =\n    async.eachOfLimit = function (obj, limit, iterator, callback) {\n        _eachOfLimit(limit)(obj, iterator, callback);\n    };\n\n    function _eachOfLimit(limit) {\n\n        return function (obj, iterator, callback) {\n            callback = _once(callback || noop);\n            obj = obj || [];\n            var nextKey = _keyIterator(obj);\n            if (limit <= 0) {\n                return callback(null);\n            }\n            var done = false;\n            var running = 0;\n            var errored = false;\n\n            (function replenish () {\n                if (done && running <= 0) {\n                    return callback(null);\n                }\n\n                while (running < limit && !errored) {\n                    var key = nextKey();\n                    if (key === null) {\n                        done = true;\n                        if (running <= 0) {\n                            callback(null);\n                        }\n                        return;\n                    }\n                    running += 1;\n                    iterator(obj[key], key, only_once(function (err) {\n                        running -= 1;\n                        if (err) {\n                            callback(err);\n                            errored = true;\n                        }\n                        else {\n                            replenish();\n                        }\n                    }));\n                }\n            })();\n        };\n    }\n\n\n    function doParallel(fn) {\n        return function (obj, iterator, callback) {\n            return fn(async.eachOf, obj, iterator, callback);\n        };\n    }\n    function doParallelLimit(fn) {\n        return function (obj, limit, iterator, callback) {\n            return fn(_eachOfLimit(limit), obj, iterator, callback);\n        };\n    }\n    function doSeries(fn) {\n        return function (obj, iterator, callback) {\n            return fn(async.eachOfSeries, obj, iterator, callback);\n        };\n    }\n\n    function _asyncMap(eachfn, arr, iterator, callback) {\n        callback = _once(callback || noop);\n        arr = arr || [];\n        var results = _isArrayLike(arr) ? [] : {};\n        eachfn(arr, function (value, index, callback) {\n            iterator(value, function (err, v) {\n                results[index] = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, results);\n        });\n    }\n\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = doParallelLimit(_asyncMap);\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.inject =\n    async.foldl =\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachOfSeries(arr, function (x, i, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n\n    async.foldr =\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, identity).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n\n    async.transform = function (arr, memo, iterator, callback) {\n        if (arguments.length === 3) {\n            callback = iterator;\n            iterator = memo;\n            memo = _isArray(arr) ? [] : {};\n        }\n\n        async.eachOf(arr, function(v, k, cb) {\n            iterator(memo, v, k, cb);\n        }, function(err) {\n            callback(err, memo);\n        });\n    };\n\n    function _filter(eachfn, arr, iterator, callback) {\n        var results = [];\n        eachfn(arr, function (x, index, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    results.push({index: index, value: x});\n                }\n                callback();\n            });\n        }, function () {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    }\n\n    async.select =\n    async.filter = doParallel(_filter);\n\n    async.selectLimit =\n    async.filterLimit = doParallelLimit(_filter);\n\n    async.selectSeries =\n    async.filterSeries = doSeries(_filter);\n\n    function _reject(eachfn, arr, iterator, callback) {\n        _filter(eachfn, arr, function(value, cb) {\n            iterator(value, function(v) {\n                cb(!v);\n            });\n        }, callback);\n    }\n    async.reject = doParallel(_reject);\n    async.rejectLimit = doParallelLimit(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    function _createTester(eachfn, check, getResult) {\n        return function(arr, limit, iterator, cb) {\n            function done() {\n                if (cb) cb(getResult(false, void 0));\n            }\n            function iteratee(x, _, callback) {\n                if (!cb) return callback();\n                iterator(x, function (v) {\n                    if (cb && check(v)) {\n                        cb(getResult(true, x));\n                        cb = iterator = false;\n                    }\n                    callback();\n                });\n            }\n            if (arguments.length > 3) {\n                eachfn(arr, limit, iteratee, done);\n            } else {\n                cb = iterator;\n                iterator = limit;\n                eachfn(arr, iteratee, done);\n            }\n        };\n    }\n\n    async.any =\n    async.some = _createTester(async.eachOf, toBool, identity);\n\n    async.someLimit = _createTester(async.eachOfLimit, toBool, identity);\n\n    async.all =\n    async.every = _createTester(async.eachOf, notId, notId);\n\n    async.everyLimit = _createTester(async.eachOfLimit, notId, notId);\n\n    function _findGetResult(v, x) {\n        return x;\n    }\n    async.detect = _createTester(async.eachOf, identity, _findGetResult);\n    async.detectSeries = _createTester(async.eachOfSeries, identity, _findGetResult);\n    async.detectLimit = _createTester(async.eachOfLimit, identity, _findGetResult);\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                callback(null, _map(results.sort(comparator), function (x) {\n                    return x.value;\n                }));\n            }\n\n        });\n\n        function comparator(left, right) {\n            var a = left.criteria, b = right.criteria;\n            return a < b ? -1 : a > b ? 1 : 0;\n        }\n    };\n\n    async.auto = function (tasks, concurrency, callback) {\n        if (typeof arguments[1] === 'function') {\n            // concurrency is optional, shift the args.\n            callback = concurrency;\n            concurrency = null;\n        }\n        callback = _once(callback || noop);\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length;\n        if (!remainingTasks) {\n            return callback(null);\n        }\n        if (!concurrency) {\n            concurrency = remainingTasks;\n        }\n\n        var results = {};\n        var runningTasks = 0;\n\n        var hasError = false;\n\n        var listeners = [];\n        function addListener(fn) {\n            listeners.unshift(fn);\n        }\n        function removeListener(fn) {\n            var idx = _indexOf(listeners, fn);\n            if (idx >= 0) listeners.splice(idx, 1);\n        }\n        function taskComplete() {\n            remainingTasks--;\n            _arrayEach(listeners.slice(0), function (fn) {\n                fn();\n            });\n        }\n\n        addListener(function () {\n            if (!remainingTasks) {\n                callback(null, results);\n            }\n        });\n\n        _arrayEach(keys, function (k) {\n            if (hasError) return;\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = _restParam(function(err, args) {\n                runningTasks--;\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _forEachOf(results, function(val, rkey) {\n                        safeResults[rkey] = val;\n                    });\n                    safeResults[k] = args;\n                    hasError = true;\n\n                    callback(err, safeResults);\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            });\n            var requires = task.slice(0, task.length - 1);\n            // prevent dead-locks\n            var len = requires.length;\n            var dep;\n            while (len--) {\n                if (!(dep = tasks[requires[len]])) {\n                    throw new Error('Has nonexistent dependency in ' + requires.join(', '));\n                }\n                if (_isArray(dep) && _indexOf(dep, k) >= 0) {\n                    throw new Error('Has cyclic dependencies');\n                }\n            }\n            function ready() {\n                return runningTasks < concurrency && _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            }\n            if (ready()) {\n                runningTasks++;\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                addListener(listener);\n            }\n            function listener() {\n                if (ready()) {\n                    runningTasks++;\n                    removeListener(listener);\n                    task[task.length - 1](taskCallback, results);\n                }\n            }\n        });\n    };\n\n\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var DEFAULT_INTERVAL = 0;\n\n        var attempts = [];\n\n        var opts = {\n            times: DEFAULT_TIMES,\n            interval: DEFAULT_INTERVAL\n        };\n\n        function parseTimes(acc, t){\n            if(typeof t === 'number'){\n                acc.times = parseInt(t, 10) || DEFAULT_TIMES;\n            } else if(typeof t === 'object'){\n                acc.times = parseInt(t.times, 10) || DEFAULT_TIMES;\n                acc.interval = parseInt(t.interval, 10) || DEFAULT_INTERVAL;\n            } else {\n                throw new Error('Unsupported argument type for \\'times\\': ' + typeof t);\n            }\n        }\n\n        var length = arguments.length;\n        if (length < 1 || length > 3) {\n            throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');\n        } else if (length <= 2 && typeof times === 'function') {\n            callback = task;\n            task = times;\n        }\n        if (typeof times !== 'function') {\n            parseTimes(opts, times);\n        }\n        opts.callback = callback;\n        opts.task = task;\n\n        function wrappedTask(wrappedCallback, wrappedResults) {\n            function retryAttempt(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            }\n\n            function retryInterval(interval){\n                return function(seriesCallback){\n                    setTimeout(function(){\n                        seriesCallback(null);\n                    }, interval);\n                };\n            }\n\n            while (opts.times) {\n\n                var finalAttempt = !(opts.times-=1);\n                attempts.push(retryAttempt(opts.task, finalAttempt));\n                if(!finalAttempt && opts.interval > 0){\n                    attempts.push(retryInterval(opts.interval));\n                }\n            }\n\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || opts.callback)(data.err, data.result);\n            });\n        }\n\n        // If a callback is passed, run this as a controll flow\n        return opts.callback ? wrappedTask() : wrappedTask;\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = _once(callback || noop);\n        if (!_isArray(tasks)) {\n            var err = new Error('First argument to waterfall must be an array of functions');\n            return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        function wrapIterator(iterator) {\n            return _restParam(function (err, args) {\n                if (err) {\n                    callback.apply(null, [err].concat(args));\n                }\n                else {\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    ensureAsync(iterator).apply(null, args);\n                }\n            });\n        }\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    function _parallel(eachfn, tasks, callback) {\n        callback = callback || noop;\n        var results = _isArrayLike(tasks) ? [] : {};\n\n        eachfn(tasks, function (task, key, callback) {\n            task(_restParam(function (err, args) {\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                results[key] = args;\n                callback(err);\n            }));\n        }, function (err) {\n            callback(err, results);\n        });\n    }\n\n    async.parallel = function (tasks, callback) {\n        _parallel(async.eachOf, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel(_eachOfLimit(limit), tasks, callback);\n    };\n\n    async.series = function(tasks, callback) {\n        _parallel(async.eachOfSeries, tasks, callback);\n    };\n\n    async.iterator = function (tasks) {\n        function makeCallback(index) {\n            function fn() {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            }\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        }\n        return makeCallback(0);\n    };\n\n    async.apply = _restParam(function (fn, args) {\n        return _restParam(function (callArgs) {\n            return fn.apply(\n                null, args.concat(callArgs)\n            );\n        });\n    });\n\n    function _concat(eachfn, arr, fn, callback) {\n        var result = [];\n        eachfn(arr, function (x, index, cb) {\n            fn(x, function (err, y) {\n                result = result.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, result);\n        });\n    }\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        callback = callback || noop;\n        if (test()) {\n            var next = _restParam(function(err, args) {\n                if (err) {\n                    callback(err);\n                } else if (test.apply(this, args)) {\n                    iterator(next);\n                } else {\n                    callback.apply(null, [null].concat(args));\n                }\n            });\n            iterator(next);\n        } else {\n            callback(null);\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        var calls = 0;\n        return async.whilst(function() {\n            return ++calls <= 1 || test.apply(this, arguments);\n        }, iterator, callback);\n    };\n\n    async.until = function (test, iterator, callback) {\n        return async.whilst(function() {\n            return !test.apply(this, arguments);\n        }, iterator, callback);\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        return async.doWhilst(iterator, function() {\n            return !test.apply(this, arguments);\n        }, callback);\n    };\n\n    async.during = function (test, iterator, callback) {\n        callback = callback || noop;\n\n        var next = _restParam(function(err, args) {\n            if (err) {\n                callback(err);\n            } else {\n                args.push(check);\n                test.apply(this, args);\n            }\n        });\n\n        var check = function(err, truth) {\n            if (err) {\n                callback(err);\n            } else if (truth) {\n                iterator(next);\n            } else {\n                callback(null);\n            }\n        };\n\n        test(check);\n    };\n\n    async.doDuring = function (iterator, test, callback) {\n        var calls = 0;\n        async.during(function(next) {\n            if (calls++ < 1) {\n                next(null, true);\n            } else {\n                test.apply(this, arguments);\n            }\n        }, iterator, callback);\n    };\n\n    function _queue(worker, concurrency, payload) {\n        if (concurrency == null) {\n            concurrency = 1;\n        }\n        else if(concurrency === 0) {\n            throw new Error('Concurrency must not be zero');\n        }\n        function _insert(q, data, pos, callback) {\n            if (callback != null && typeof callback !== \"function\") {\n                throw new Error(\"task callback must be a function\");\n            }\n            q.started = true;\n            if (!_isArray(data)) {\n                data = [data];\n            }\n            if(data.length === 0 && q.idle()) {\n                // call drain immediately if there are no tasks\n                return async.setImmediate(function() {\n                    q.drain();\n                });\n            }\n            _arrayEach(data, function(task) {\n                var item = {\n                    data: task,\n                    callback: callback || noop\n                };\n\n                if (pos) {\n                    q.tasks.unshift(item);\n                } else {\n                    q.tasks.push(item);\n                }\n\n                if (q.tasks.length === q.concurrency) {\n                    q.saturated();\n                }\n            });\n            async.setImmediate(q.process);\n        }\n        function _next(q, tasks) {\n            return function(){\n                workers -= 1;\n\n                var removed = false;\n                var args = arguments;\n                _arrayEach(tasks, function (task) {\n                    _arrayEach(workersList, function (worker, index) {\n                        if (worker === task && !removed) {\n                            workersList.splice(index, 1);\n                            removed = true;\n                        }\n                    });\n\n                    task.callback.apply(task, args);\n                });\n                if (q.tasks.length + workers === 0) {\n                    q.drain();\n                }\n                q.process();\n            };\n        }\n\n        var workers = 0;\n        var workersList = [];\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            payload: payload,\n            saturated: noop,\n            empty: noop,\n            drain: noop,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n                _insert(q, data, false, callback);\n            },\n            kill: function () {\n                q.drain = noop;\n                q.tasks = [];\n            },\n            unshift: function (data, callback) {\n                _insert(q, data, true, callback);\n            },\n            process: function () {\n                while(!q.paused && workers < q.concurrency && q.tasks.length){\n\n                    var tasks = q.payload ?\n                        q.tasks.splice(0, q.payload) :\n                        q.tasks.splice(0, q.tasks.length);\n\n                    var data = _map(tasks, function (task) {\n                        return task.data;\n                    });\n\n                    if (q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    workersList.push(tasks[0]);\n                    var cb = only_once(_next(q, tasks));\n                    worker(data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            workersList: function () {\n                return workersList;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                q.paused = true;\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                var resumeCount = Math.min(q.concurrency, q.tasks.length);\n                // Need to call q.process once per concurrent\n                // worker to preserve full concurrency after pause\n                for (var w = 1; w <= resumeCount; w++) {\n                    async.setImmediate(q.process);\n                }\n            }\n        };\n        return q;\n    }\n\n    async.queue = function (worker, concurrency) {\n        var q = _queue(function (items, cb) {\n            worker(items[0], cb);\n        }, concurrency, 1);\n\n        return q;\n    };\n\n    async.priorityQueue = function (worker, concurrency) {\n\n        function _compareTasks(a, b){\n            return a.priority - b.priority;\n        }\n\n        function _binarySearch(sequence, item, compare) {\n            var beg = -1,\n                end = sequence.length - 1;\n            while (beg < end) {\n                var mid = beg + ((end - beg + 1) >>> 1);\n                if (compare(item, sequence[mid]) >= 0) {\n                    beg = mid;\n                } else {\n                    end = mid - 1;\n                }\n            }\n            return beg;\n        }\n\n        function _insert(q, data, priority, callback) {\n            if (callback != null && typeof callback !== \"function\") {\n                throw new Error(\"task callback must be a function\");\n            }\n            q.started = true;\n            if (!_isArray(data)) {\n                data = [data];\n            }\n            if(data.length === 0) {\n                // call drain immediately if there are no tasks\n                return async.setImmediate(function() {\n                    q.drain();\n                });\n            }\n            _arrayEach(data, function(task) {\n                var item = {\n                    data: task,\n                    priority: priority,\n                    callback: typeof callback === 'function' ? callback : noop\n                };\n\n                q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n                if (q.tasks.length === q.concurrency) {\n                    q.saturated();\n                }\n                async.setImmediate(q.process);\n            });\n        }\n\n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n\n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n            _insert(q, data, priority, callback);\n        };\n\n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        return _queue(worker, 1, payload);\n    };\n\n    function _console_fn(name) {\n        return _restParam(function (fn, args) {\n            fn.apply(null, args.concat([_restParam(function (err, args) {\n                if (typeof console === 'object') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _arrayEach(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            })]));\n        });\n    }\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        var has = Object.prototype.hasOwnProperty;\n        hasher = hasher || identity;\n        var memoized = _restParam(function memoized(args) {\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (has.call(memo, key)) {   \n                async.setImmediate(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (has.call(queues, key)) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([_restParam(function (args) {\n                    memo[key] = args;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                        q[i].apply(null, args);\n                    }\n                })]));\n            }\n        });\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n        return function () {\n            return (fn.unmemoized || fn).apply(null, arguments);\n        };\n    };\n\n    function _times(mapper) {\n        return function (count, iterator, callback) {\n            mapper(_range(count), iterator, callback);\n        };\n    }\n\n    async.times = _times(async.map);\n    async.timesSeries = _times(async.mapSeries);\n    async.timesLimit = function (count, limit, iterator, callback) {\n        return async.mapLimit(_range(count), limit, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return _restParam(function (args) {\n            var that = this;\n\n            var callback = args[args.length - 1];\n            if (typeof callback == 'function') {\n                args.pop();\n            } else {\n                callback = noop;\n            }\n\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([_restParam(function (err, nextargs) {\n                    cb(err, nextargs);\n                })]));\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        });\n    };\n\n    async.compose = function (/* functions... */) {\n        return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n\n    function _applyEach(eachfn) {\n        return _restParam(function(fns, args) {\n            var go = _restParam(function(args) {\n                var that = this;\n                var callback = args.pop();\n                return eachfn(fns, function (fn, _, cb) {\n                    fn.apply(that, args.concat([cb]));\n                },\n                callback);\n            });\n            if (args.length) {\n                return go.apply(this, args);\n            }\n            else {\n                return go;\n            }\n        });\n    }\n\n    async.applyEach = _applyEach(async.eachOf);\n    async.applyEachSeries = _applyEach(async.eachOfSeries);\n\n\n    async.forever = function (fn, callback) {\n        var done = only_once(callback || noop);\n        var task = ensureAsync(fn);\n        function next(err) {\n            if (err) {\n                return done(err);\n            }\n            task(next);\n        }\n        next();\n    };\n\n    function ensureAsync(fn) {\n        return _restParam(function (args) {\n            var callback = args.pop();\n            args.push(function () {\n                var innerArgs = arguments;\n                if (sync) {\n                    async.setImmediate(function () {\n                        callback.apply(null, innerArgs);\n                    });\n                } else {\n                    callback.apply(null, innerArgs);\n                }\n            });\n            var sync = true;\n            fn.apply(this, args);\n            sync = false;\n        });\n    }\n\n    async.ensureAsync = ensureAsync;\n\n    async.constant = _restParam(function(values) {\n        var args = [null].concat(values);\n        return function (callback) {\n            return callback.apply(this, args);\n        };\n    });\n\n    async.wrapSync =\n    async.asyncify = function asyncify(func) {\n        return _restParam(function (args) {\n            var callback = args.pop();\n            var result;\n            try {\n                result = func.apply(this, args);\n            } catch (e) {\n                return callback(e);\n            }\n            // if result is Promise object\n            if (_isObject(result) && typeof result.then === \"function\") {\n                result.then(function(value) {\n                    callback(null, value);\n                })[\"catch\"](function(err) {\n                    callback(err.message ? err : new Error(err));\n                });\n            } else {\n                callback(null, result);\n            }\n        });\n    };\n\n    // Node.js\n    if (typeof module === 'object' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define === 'function' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n","exports.pbkdf2 = require('./lib/async')\nexports.pbkdf2Sync = require('./lib/sync')\n","var checkParameters = require('./precondition')\nvar defaultEncoding = require('./default-encoding')\nvar sync = require('./sync')\nvar Buffer = require('safe-buffer').Buffer\n\nvar ZERO_BUF\nvar subtle = global.crypto && global.crypto.subtle\nvar toBrowser = {\n  'sha': 'SHA-1',\n  'sha-1': 'SHA-1',\n  'sha1': 'SHA-1',\n  'sha256': 'SHA-256',\n  'sha-256': 'SHA-256',\n  'sha384': 'SHA-384',\n  'sha-384': 'SHA-384',\n  'sha-512': 'SHA-512',\n  'sha512': 'SHA-512'\n}\nvar checks = []\nfunction checkNative (algo) {\n  if (global.process && !global.process.browser) {\n    return Promise.resolve(false)\n  }\n  if (!subtle || !subtle.importKey || !subtle.deriveBits) {\n    return Promise.resolve(false)\n  }\n  if (checks[algo] !== undefined) {\n    return checks[algo]\n  }\n  ZERO_BUF = ZERO_BUF || Buffer.alloc(8)\n  var prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo)\n    .then(function () {\n      return true\n    }).catch(function () {\n      return false\n    })\n  checks[algo] = prom\n  return prom\n}\n\nfunction browserPbkdf2 (password, salt, iterations, length, algo) {\n  return subtle.importKey(\n    'raw', password, {name: 'PBKDF2'}, false, ['deriveBits']\n  ).then(function (key) {\n    return subtle.deriveBits({\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: iterations,\n      hash: {\n        name: algo\n      }\n    }, key, length << 3)\n  }).then(function (res) {\n    return Buffer.from(res)\n  })\n}\n\nfunction resolvePromise (promise, callback) {\n  promise.then(function (out) {\n    process.nextTick(function () {\n      callback(null, out)\n    })\n  }, function (e) {\n    process.nextTick(function () {\n      callback(e)\n    })\n  })\n}\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\n  if (typeof digest === 'function') {\n    callback = digest\n    digest = undefined\n  }\n\n  digest = digest || 'sha1'\n  var algo = toBrowser[digest.toLowerCase()]\n\n  if (!algo || typeof global.Promise !== 'function') {\n    return process.nextTick(function () {\n      var out\n      try {\n        out = sync(password, salt, iterations, keylen, digest)\n      } catch (e) {\n        return callback(e)\n      }\n      callback(null, out)\n    })\n  }\n\n  checkParameters(password, salt, iterations, keylen)\n  if (typeof callback !== 'function') throw new Error('No callback provided to pbkdf2')\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, defaultEncoding)\n  if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, defaultEncoding)\n\n  resolvePromise(checkNative(algo).then(function (resp) {\n    if (resp) return browserPbkdf2(password, salt, iterations, keylen, algo)\n\n    return sync(password, salt, iterations, keylen, digest)\n  }), callback)\n}\n","import { TokenSigner, decodeToken, SECP256K1Client } from 'jsontokens'\nimport { fetchPrivate } from '../fetchUtil'\n\n/**\n * Create an authentication token to be sent to the Core API server\n * in order to generate a Core session JWT.\n *\n * @param {String} appDomain  The unique application identifier (e.g. foo.app, www.foo.com, etc).\n * @param {Array} appMethods  The list of API methods this application will need.\n * @param {String} appPrivateKey  The application-specific private key\n * @param {String|null} blockchainID  This is the blockchain ID of the requester\n * @param {String} thisDevice Identifier of the current device\n *\n * @return {String} a JWT signed by the app's private key\n * @deprecated\n * @private\n * @ignore \n */\nexport function makeCoreSessionRequest(appDomain: string,\n                                       appMethods: Array<string>,\n                                       appPrivateKey: string,\n                                       blockchainID: string = null,\n                                       thisDevice: string = null): string {\n  if (thisDevice === null) {\n    thisDevice = '.default'\n  }\n\n  const appPublicKey = SECP256K1Client.derivePublicKey(appPrivateKey)\n  const appPublicKeys = [{\n    public_key: appPublicKey,\n    device_id: thisDevice\n  }]\n\n  const authBody = {\n    version: 1,\n    blockchain_id: blockchainID,\n    app_private_key: appPrivateKey,\n    app_domain: appDomain,\n    methods: appMethods,\n    app_public_keys: appPublicKeys,\n    device_id: thisDevice\n  }\n\n  // make token\n  const tokenSigner = new TokenSigner('ES256k', appPrivateKey)\n  const token = tokenSigner.sign(authBody)\n\n  return token\n}\n\n\n/**\n * Send Core a request for a session token.\n *\n * @param {String} coreHost host name of the core node\n * @param {Number} corePort port number of the core node\n * @param {String} coreAuthRequest  a signed JWT encoding the authentication request\n * @param {String} apiPassword the API password for Core\n *\n * @return {Promise} the resolves to a JWT signed with the Core API server's private key\n * that authorizes the bearer to carry out the requested operations and rejects\n * with an error message otherwise\n * @deprecated\n * @private\n * @ignore \n */\nexport function sendCoreSessionRequest(coreHost: string,\n                                       corePort: number,\n                                       coreAuthRequest: string,\n                                       apiPassword: string\n): Promise<any> {\n  return Promise.resolve().then(() => {\n    if (!apiPassword) {\n      throw new Error('Missing API password')\n    }\n  })\n    .then(() => {\n      const options = {\n        headers: {\n          Authorization: `bearer ${apiPassword}`\n        }\n      }\n      const url = `http://${coreHost}:${corePort}/v1/auth?authRequest=${coreAuthRequest}`\n      return fetchPrivate(url, options)\n    })\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error('HTTP status not OK')\n      }\n      return response.text()\n    })\n    .then((responseText) => {\n      const responseJson = JSON.parse(responseText)\n      const token = responseJson.token\n      if (!token) {\n        throw new Error('Failed to get Core session token')\n      }\n      return token\n    })\n    .catch((error) => {\n      console.error(error)\n      throw new Error('Invalid Core response: not JSON')\n    })\n}\n\n\n/**\n * Get a core session token.  Generate an auth request, sign it, send it to Core,\n * and get back a session token.\n *\n * @param {String} coreHost Core API server's hostname\n * @param {Number} corePort Core API server's port number\n * @param {String} apiPassword core api password\n * @param  {String} appPrivateKey Application's private key\n * @param  {String} blockchainId blockchain ID of the user signing in.\n * `null` if user has no blockchain ID\n * @param {String} authRequest authentication request token\n * @param {String} deviceId identifier for the current device\n *\n * @return {Promise} a Promise that resolves to a Core session token or rejects\n * with an error message.\n * @deprecated\n * @private\n * @ignore \n */\nexport function getCoreSession(coreHost: string,\n                               corePort: number,\n                               apiPassword: string,\n                               appPrivateKey: string,\n                               blockchainId: string = null,\n                               authRequest: string = null,\n                               deviceId: string = '0'\n): Promise<any> {\n  if (!authRequest) {\n    return Promise.reject('No authRequest provided')\n  }\n\n  try {\n    const authRequestObject = decodeToken(authRequest)\n    if (!authRequestObject) {\n      return Promise.reject('Invalid authRequest in URL query string')\n    }\n    if (!authRequestObject.payload) {\n      return Promise.reject('Invalid authRequest in URL query string')\n    }\n    const payload = authRequestObject.payload\n    if (typeof payload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n\n    const appDomain = payload.domain_name as string\n    if (!appDomain) {\n      return Promise.reject('No domain_name in authRequest')\n    }\n    const appMethods = payload.scopes as string[]\n\n    const coreAuthRequest = makeCoreSessionRequest(\n      appDomain, appMethods, appPrivateKey, blockchainId, deviceId\n    )\n\n    return sendCoreSessionRequest(\n      coreHost, corePort, coreAuthRequest, apiPassword\n    )\n  } catch (e) {\n    console.error(e.stack)\n    return Promise.reject('Failed to parse authRequest in URL')\n  }\n}\n","// TODO: replace with 'ajv' - its already a dependency and it is maintained\n// @ts-ignore: Could not find a declaration file for module\nimport inspector from 'schema-inspector'\n\nimport { extractProfile } from '../profileTokens'\nimport { Profile } from '../profile'\n\nconst schemaDefinition: {[key: string]: any} = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true }\n  }\n}\n\n/**\n * @ignore\n */\nexport class Organization extends Profile {\n  constructor(profile = {}) {\n    super(profile)\n    this._profile = Object.assign({}, {\n      '@type': 'Organization'\n    }, this._profile)\n  }\n\n  static validateSchema(profile: any, strict = false) {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): \n    Organization {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new Organization(profile)\n  }\n}\n","// @ts-ignore: Could not find a declaration file for module\nimport inspector from 'schema-inspector'\nimport { extractProfile } from '../profileTokens'\nimport { Profile } from '../profile'\n\nconst schemaDefinition: {[key: string]: any} = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true }\n  }\n}\n\n/**\n * @ignore\n */\nexport class CreativeWork extends Profile {\n  constructor(profile = {}) {\n    super(profile)\n    this._profile = Object.assign({}, {\n      '@type': 'CreativeWork'\n    }, this._profile)\n  }\n\n  /**\n   * \n   * @ignore\n   */\n  static validateSchema(profile: any, strict = false) {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  /**\n   * @ignore\n   */\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): \n    CreativeWork {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new CreativeWork(profile)\n  }\n}\n","// @ts-ignore: Could not find a declaration file for module\nimport { parseZoneFile } from 'zone-file'\n\nimport { Person } from './person'\nimport { getTokenFileUrl } from '../profileZoneFiles'\nimport { extractProfile } from '../profileTokens'\nimport { fetchPrivate } from '../../fetchUtil'\n\n/**\n * \n * @param zoneFile \n * @param publicKeyOrAddress \n * @param callback \n * \n * @ignore\n */\nexport function resolveZoneFileToPerson(\n  zoneFile: any, \n  publicKeyOrAddress: string, \n  callback: (profile: any) => void) {\n  let zoneFileJson = null\n  try {\n    zoneFileJson = parseZoneFile(zoneFile)\n    if (!zoneFileJson.hasOwnProperty('$origin')) {\n      zoneFileJson = null\n      throw new Error('zone file is missing an origin')\n    }\n  } catch (e) {\n    console.error(e)\n  }\n\n  let tokenFileUrl = null\n  if (zoneFileJson && Object.keys(zoneFileJson).length > 0) {\n    tokenFileUrl = getTokenFileUrl(zoneFileJson)\n  } else {\n    let profile = null\n    try {\n      profile = JSON.parse(zoneFile)\n      const person = Person.fromLegacyFormat(profile)\n      profile = person.profile()\n    } catch (error) {\n      console.warn(error)\n    }\n    callback(profile)\n    return\n  }\n\n  if (tokenFileUrl) {\n    fetchPrivate(tokenFileUrl)\n      .then(response => response.text())\n      .then(responseText => JSON.parse(responseText))\n      .then((responseJson) => {\n        const tokenRecords = responseJson\n        const token = tokenRecords[0].token\n        const profile = extractProfile(token, publicKeyOrAddress)\n\n        callback(profile)\n      })\n      .catch((error) => {\n        console.warn(error)\n      })\n  } else {\n    console.warn('Token file url not found')\n    callback({})\n  }\n}\n","\n\nimport { config } from '../config'\n\n/**\n* @ignore\n*/\nfunction isNameValid(fullyQualifiedName: string = '') {\n  const NAME_PART_RULE = /^[a-z0-9\\-_+]+$/\n  const LENGTH_MAX_NAME = 37\n\n  if (!fullyQualifiedName\n      || fullyQualifiedName.length > LENGTH_MAX_NAME) {\n    return Promise.resolve(false)\n  }\n  const nameParts = fullyQualifiedName.split('.')\n  if (nameParts.length !== 2) {\n    return Promise.resolve(false)\n  }\n  return Promise.resolve(\n    nameParts.reduce(\n      (agg, namePart) => {\n        if (!agg) {\n          return false\n        } else {\n          return NAME_PART_RULE.test(namePart)\n        }\n      }, true\n    )\n  )\n}\n\n/**\n* @ignore\n*/\nfunction isNamespaceValid(namespaceID: string) {\n  const NAMESPACE_RULE = /^[a-z0-9\\-_]{1,19}$/\n  return Promise.resolve(\n    namespaceID.match(NAMESPACE_RULE) !== null\n  )\n}\n\n/**\n* @ignore\n*/\nfunction isNameAvailable(fullyQualifiedName: string) {\n  return config.network.getNameInfo(fullyQualifiedName)\n    .then(() => false)\n    .catch((e) => {\n      if (e.message === 'Name not found') {\n        return true\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction isNamespaceAvailable(namespaceID: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(() => false)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return true\n      } else {\n        throw e\n      }\n    })\n}       \n\n/**\n* @ignore\n*/\nfunction ownsName(fullyQualifiedName: string, ownerAddress: string) {\n  return config.network.getNameInfo(fullyQualifiedName)\n    .then(nameInfo => nameInfo.address === ownerAddress)\n    .catch((e) => {\n      if (e.message === 'Name not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction revealedNamespace(namespaceID: string, revealAddress: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(namespaceInfo => namespaceInfo.recipient_address === revealAddress)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction namespaceIsReady(namespaceID: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(namespaceInfo => namespaceInfo.ready)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction namespaceIsRevealed(namespaceID: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(namespaceInfo => !namespaceInfo.ready)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction isInGracePeriod(fullyQualifiedName: string) {\n  const network = config.network\n  return Promise.all([network.getNameInfo(fullyQualifiedName),\n                      network.getBlockHeight(),\n                      network.getGracePeriod(fullyQualifiedName)])\n    .then(([nameInfo, blockHeight, gracePeriod]) => {\n      const expiresAt = nameInfo.expire_block\n      return (blockHeight >= expiresAt) && (blockHeight < (gracePeriod + expiresAt))\n    })\n    .catch((e) => {\n      if (e.message === 'Name not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction addressCanReceiveName(address: string) {\n  return config.network.getNamesOwned(address)\n    .then(names => (Promise.all(names.map(name => isNameValid(name)))\n      .then(validNames => validNames.filter(nameValid => nameValid).length < 25)))\n}\n\n/**\n* @ignore\n*/\nfunction isAccountSpendable(address: string, tokenType: string, blockHeight: number) {\n  return config.network.getAccountStatus(address, tokenType)\n    .then(accountStatus => accountStatus.transfer_send_block_id >= blockHeight)\n}\n\n/**\n* @ignore\n*/\nexport const safety = {\n  addressCanReceiveName,\n  isInGracePeriod,\n  ownsName,\n  isNameAvailable,\n  isNameValid,\n  isNamespaceValid,\n  isNamespaceAvailable,\n  revealedNamespace,\n  namespaceIsReady,\n  namespaceIsRevealed,\n  isAccountSpendable\n}\n","\nimport { protocolEchoReplyDetection } from './auth/protocolEchoDetection'\n\ntry {\n  /**\n   * Located here so it executes ASAP. The protocol handler detection is designed to work \n   * as a drop-in-replacement (non-breaking upgrade) for apps using blockstack.js. That \n   * requires doing this global and immediate detection. \n   * This function is also called in `isSignInPending` so that web app bundling the \n   * blockstack.js lib in a more modular way will still perform the protocol detection \n   * handling without any changes if this index file is not bundled in. \n   */\n  protocolEchoReplyDetection()\n} catch (error) {\n  console.error(`Error performing global protocol echo reply detection: ${error}`)\n}\n\nexport * from './auth'\nexport * from './profiles'\nexport * from './storage'\n\nexport {\n  makeDIDFromAddress, makeDIDFromPublicKey, getDIDType, getAddressFromDID\n} from './dids'\n\nexport {\n  getEntropy, makeECPrivateKey, publicKeyToAddress, getPublicKeyFromPrivate,\n  hexStringToECPair, ecPairToHexString, ecPairToAddress\n} from './keys'\n\nexport {\n  nextYear, nextMonth, nextHour, makeUUID4, updateQueryStringParameter,\n  isLaterVersion, isSameOriginAbsoluteUrl\n} from './utils'\n\nexport {\n  transactions, safety, TransactionSigner,\n  PubkeyHashSigner, addUTXOsToFund, estimateTXBytes\n} from './operations'\n\nexport { BlockstackWallet, IdentityKeyPair } from './wallet'\n\nexport { network } from './network'\n\nexport { decodeToken } from 'jsontokens'\n\nexport { config } from './config'\n\nexport { encryptMnemonic, decryptMnemonic } from './encryption'\n\nexport { UserSession } from './auth/userSession'\n","import * as publicExports from './public'\n\nexport default publicExports\nexport * from './public'\n"],"sourceRoot":""}